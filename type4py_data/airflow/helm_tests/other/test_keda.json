{"error": null, "response": {"classes": [{"cls_lc": [[25, 0], [164, 75]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "Disabled by default.", "long_descr": null, "ret": null}, "fn_lc": [[28, 4], [34, 25]], "fn_var_ln": {"docs": [[30, 8], [30, 12]]}, "fn_var_occur": {"docs": [["docs", "render_chart", "values", "show_only"]]}, "name": "test_keda_disabled_by_default", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestKeda.test_keda_disabled_by_default", "ret_exprs": [], "ret_type": "", "variables": {"docs": ""}, "variables_p": {"docs": [["Pattern[str]", 0.8999999999999999], ["Counter[str]", 0.09999999999999999]]}}, {"docstring": {"func": "ScaledObject should only be created when set to enabled and", "long_descr": "executor is Celery or CeleryKubernetes.", "ret": null}, "fn_lc": [[43, 4], [57, 29]], "fn_var_ln": {"docs": [[47, 8], [47, 12]]}, "fn_var_occur": {"docs": [["docs", "render_chart", "values", "True", "False", "executor", "show_only"], ["jmespath", "search", "docs"]]}, "name": "test_keda_enabled", "params": {"executor": "", "is_created": "", "self": ""}, "params_descr": {"executor": "", "is_created": "", "self": ""}, "params_occur": {"executor": [["docs", "render_chart", "values", "True", "False", "executor", "show_only"]], "is_created": [], "self": []}, "params_p": {"args": [], "executor": [["bool", 0.31574482358369277], ["List[str]", 0.18900620761768844]], "is_created": [["str", 0.18610341901732472], ["bool", 0.18139446930966138], ["Literal", 0.14118624213877362], ["int", 0.10814406301415778], ["Sequence[str]", 0.09955131719994914], ["Callable", 0.09022320531848099]], "kwargs": [], "self": []}, "q_name": "TestKeda.test_keda_enabled", "ret_exprs": [], "ret_type": "", "variables": {"docs": ""}, "variables_p": {"docs": [["str", 0.24881149467716013], ["Pattern[str]", 0.1722191275332624], ["Dict[int, str]", 0.126251792513817], ["list", 0.11133880683714671], ["List[str]", 0.0957598794643131], ["Tuple[Literal, Literal, Literal, Literal]", 0.08008214506786064]]}}, {"docstring": {"func": "Verify keda advanced config.", "long_descr": null, "ret": null}, "fn_lc": [[60, 4], [84, 77]], "fn_var_ln": {"docs": [[72, 8], [72, 12]], "expected_advanced": [[62, 8], [62, 25]]}, "fn_var_occur": {"docs": [["docs", "render_chart", "values", "True", "expected_advanced", "executor", "show_only"], ["jmespath", "search", "docs", "expected_advanced"]], "expected_advanced": [["docs", "render_chart", "values", "True", "expected_advanced", "executor", "show_only"], ["jmespath", "search", "docs", "expected_advanced"]]}, "name": "test_keda_advanced", "params": {"executor": "", "self": ""}, "params_descr": {"executor": "", "self": ""}, "params_occur": {"executor": [["docs", "render_chart", "values", "True", "expected_advanced", "executor", "show_only"]], "self": []}, "params_p": {"args": [], "executor": [["tests.basilisp.helpers.CompileFn", 0.30790920111851533], ["str", 0.09529978635795858]], "kwargs": [], "self": []}, "q_name": "TestKeda.test_keda_advanced", "ret_exprs": [], "ret_type": "", "variables": {"docs": "", "expected_advanced": ""}, "variables_p": {"docs": [["Dict[int, int]", 0.3647318904035722], ["Set[str]", 0.130231790374507], ["Dict[str, str]", 0.10398786585254255]], "expected_advanced": [["Dict[int, List[str]]", 0.2190325973600256], ["Dict[str, Tuple[Any, Any]]", 0.11186454838101062], ["Dict[str, List[int]]", 0.10373778363841865], ["List[str]", 0.09843179276692082], ["Type[Optional[str]]", 0.09818588209337396], ["Dict[str, List[Any]]", 0.0930195911217698], ["list", 0.08928316743146647], ["str", 0.08928316743146647]]}}, {"docstring": {"func": "Builds the query used by KEDA autoscaler to determine how many workers there should be.", "long_descr": null, "ret": null}, "fn_lc": [[87, 4], [95, 20]], "fn_var_ln": {"query": [[89, 8], [89, 13]]}, "fn_var_occur": {"query": [["query", "concurrency"], ["query", "queue"]]}, "name": "build_query", "params": {"concurrency": "", "executor": "", "queue": ""}, "params_descr": {"concurrency": "", "executor": "", "queue": ""}, "params_occur": {"concurrency": [["query", "concurrency"]], "executor": [], "queue": [["query", "queue"]]}, "params_p": {"args": [], "concurrency": [["str", 0.40141240837525993], ["bool", 0.3194165871723294]], "executor": [["bool", 0.43333720157529765], ["List[List[str]]", 0.22444076542964927], ["List[dict]", 0.08906560188670724], ["Iterable[str]", 0.08816280996531878], ["Iterable[Tuple[str, str]]", 0.08320262570332718], ["str", 0.08179099543969996]], "kwargs": [], "queue": [["str", 0.40141240837525993], ["bool", 0.3194165871723294]], "self": []}, "q_name": "TestKeda.build_query", "ret_exprs": ["return query"], "ret_type": "", "ret_type_p": [["Dict[str, Any]", 0.10645972857273478], ["Dict[str, Set[str]]", 0.09281384405480365]], "variables": {"query": ""}, "variables_p": {"query": [["str", 1.0]]}}, {"docstring": {"func": "Verify keda sql query uses configured concurrency.", "long_descr": null, "ret": null}, "fn_lc": [[106, 4], [117, 92]], "fn_var_ln": {"docs": [[108, 8], [108, 12]], "expected_query": [[116, 8], [116, 22]]}, "fn_var_occur": {"docs": [["docs", "render_chart", "values", "True", "False", "executor", "concurrency", "show_only"], ["jmespath", "search", "docs", "expected_query"]], "expected_query": [["expected_query", "self", "build_query", "executor", "executor", "concurrency", "concurrency"], ["jmespath", "search", "docs", "expected_query"]]}, "name": "test_keda_concurrency", "params": {"concurrency": "", "executor": "", "self": ""}, "params_descr": {"concurrency": "", "executor": "", "self": ""}, "params_occur": {"concurrency": [["docs", "render_chart", "values", "True", "False", "executor", "concurrency", "show_only"], ["expected_query", "self", "build_query", "executor", "executor", "concurrency", "concurrency"]], "executor": [["docs", "render_chart", "values", "True", "False", "executor", "concurrency", "show_only"], ["expected_query", "self", "build_query", "executor", "executor", "concurrency", "concurrency"]], "self": [["expected_query", "self", "build_query", "executor", "executor", "concurrency", "concurrency"]]}, "params_p": {"args": [], "concurrency": [["int", 0.24904884210453737], ["tests.basilisp.helpers.CompileFn", 0.19041101110537692]], "executor": [["int", 0.24904884210453737], ["tests.basilisp.helpers.CompileFn", 0.19041101110537692]], "kwargs": [], "self": []}, "q_name": "TestKeda.test_keda_concurrency", "ret_exprs": [], "ret_type": "", "variables": {"docs": "", "expected_query": ""}, "variables_p": {"docs": [["Tuple[Literal, Literal]", 0.09448403105423835], ["int", 0.0922232527938772], ["dict", 0.08135416189483524], ["Dict[int, int]", 0.08062231079257322]], "expected_query": [["Dict[str, bool]", 0.2320182620354882], ["Dict[str, Any]", 0.19240965099337945], ["Dict[str, Union[Any, str]]", 0.0991862646412444], ["Dict[str, Union[int, str]]", 0.09860804759999613], ["Dict[str, Union[Any, Any, Any, Any, Any]]", 0.09661764020615689], ["Dict[str, str]", 0.0894981320846064], ["Set[str]", 0.08940346022527923]]}}, {"docstring": {"func": "Verify keda sql query ignores kubernetes queue when CKE is used.", "long_descr": "Sometimes a user might want to use a different queue name for k8s executor tasks,\nand we also verify here that we use the configured queue name in that case.", "ret": null}, "fn_lc": [[128, 4], [145, 92]], "fn_var_ln": {"docs": [[140, 8], [140, 12]], "expected_query": [[144, 8], [144, 22]], "values": [[134, 8], [134, 14]]}, "fn_var_occur": {"docs": [["docs", "render_chart", "values", "values", "show_only"], ["jmespath", "search", "docs", "expected_query"]], "expected_query": [["expected_query", "self", "build_query", "executor", "executor", "queue", "queue"], ["jmespath", "search", "docs", "expected_query"]], "values": [["values", "True", "False", "executor"], ["values", "update", "queue"], ["docs", "render_chart", "values", "values", "show_only"]]}, "name": "test_keda_query_kubernetes_queue", "params": {"executor": "", "queue": "", "self": "", "should_filter": ""}, "params_descr": {"executor": "", "queue": "", "self": "", "should_filter": ""}, "params_occur": {"executor": [["values", "True", "False", "executor"], ["expected_query", "self", "build_query", "executor", "executor", "queue", "queue"]], "queue": [["values", "update", "queue"], ["expected_query", "self", "build_query", "executor", "executor", "queue", "queue"]], "self": [["expected_query", "self", "build_query", "executor", "executor", "queue", "queue"]], "should_filter": []}, "params_p": {"args": [], "executor": [["int", 0.20852114194434576], ["str", 0.20420884567428138], ["Tuple[int, int]", 0.08725907930925285], ["Optional[\"Game\"]", 0.08296864918342861]], "kwargs": [], "queue": [["Callable", 0.37989904177784195], ["bool", 0.1059779242539771], ["Optional[Dict[str, Any]]", 0.1059779242539771]], "self": [], "should_filter": [["tests.basilisp.helpers.CompileFn", 0.6539327771921076], ["bool", 0.08488022660980026]]}, "q_name": "TestKeda.test_keda_query_kubernetes_queue", "ret_exprs": [], "ret_type": "", "variables": {"docs": "", "expected_query": "", "values": ""}, "variables_p": {"docs": [["str", 0.5147924737186982], ["list", 0.2927703154438788], ["List[str]", 0.0979171047641044], ["Pattern[str]", 0.09452010607331858]], "expected_query": [["Dict[str, bool]", 0.2320182620354882], ["Dict[str, Any]", 0.19240965099337945], ["Dict[str, Union[Any, str]]", 0.0991862646412444], ["Dict[str, Union[int, str]]", 0.09860804759999613], ["Dict[str, Union[Any, Any, Any, Any, Any]]", 0.09661764020615689], ["Dict[str, str]", 0.0894981320846064], ["Set[str]", 0.08940346022527923]], "values": [["str", 0.11605795837929801], ["Dict[str, Any]", 0.10605311315496968], ["Dict[str, str]", 0.09654684081340481], ["Union[dict, List[Any]]", 0.09081399041822405]]}}, {"docstring": {"func": "If worker persistence is enabled, scaleTargetRef should be StatefulSet else Deployment.", "long_descr": null, "ret": null}, "fn_lc": [[154, 4], [164, 75]], "fn_var_ln": {"docs": [[157, 8], [157, 12]], "is_enabled": [[156, 8], [156, 18]]}, "fn_var_occur": {"docs": [["docs", "render_chart", "values", "True", "is_enabled", "show_only"], ["jmespath", "search", "docs", "kind"]], "is_enabled": [["is_enabled", "enabled"], ["docs", "render_chart", "values", "True", "is_enabled", "show_only"]]}, "name": "test_persistence", "params": {"enabled": "", "kind": "", "self": ""}, "params_descr": {"enabled": "", "kind": "", "self": ""}, "params_occur": {"enabled": [["is_enabled", "enabled"]], "kind": [["jmespath", "search", "docs", "kind"]], "self": []}, "params_p": {"args": [], "enabled": [["tests.basilisp.helpers.CompileFn", 0.3], ["str", 0.09999999999999999], ["tests.async_mock.Mock", 0.09999999999999999], ["float", 0.09999999999999999]], "kind": [["str", 0.07169567764514735], ["List[Dict[str, Any]]", 0.06752003472051542]], "kwargs": [], "self": []}, "q_name": "TestKeda.test_persistence", "ret_exprs": [], "ret_type": "", "variables": {"docs": "", "is_enabled": ""}, "variables_p": {"docs": [["Pattern[str]", 0.17892641268621892], ["DefaultDict[Any, int]", 0.11329093060745289], ["List[Union[int, Any, Any]]", 0.11180063981745517], ["List[str]", 0.09713125766287659], ["list", 0.09585035269703042], ["dict", 0.09130900703362642]], "is_enabled": [["bool", 0.3125591641033847], ["Tuple[str, str]", 0.22500594215032477], ["str", 0.10234197213847658]]}}], "name": "TestKeda", "q_name": "TestKeda", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "jmespath", "pytest", "tests", "charts", "helm_template_generator", "render_chart"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 32}, "session_id": "ni4dpdPx0QJONujaiWBfGCt5KrenDEgKfUQskRYZF60", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}