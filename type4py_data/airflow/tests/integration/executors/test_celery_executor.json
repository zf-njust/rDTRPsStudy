{"error": null, "response": {"classes": [{"cls_lc": [[53, 0], [59, 24]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[55, 4], [56, 25]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "state", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeCeleryResult.state", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[58, 4], [59, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "task_id", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeCeleryResult.task_id", "ret_exprs": ["return \"task_id\""], "ret_type": "", "ret_type_p": [["str", 0.9020167704355708], ["transfer.models.TopicID", 0.09798322956442923]], "variables": {}, "variables_p": {}}], "name": "FakeCeleryResult", "q_name": "FakeCeleryResult", "variables": {}, "variables_p": {}}, {"cls_lc": [[95, 0], [236, 96]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[96, 4], [98, 26]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.setup_method", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[100, 4], [102, 26]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.teardown_method", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[110, 8], [112, 46]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fake_execute_command", "params": {"command": ""}, "params_descr": {"command": ""}, "params_occur": {"command": [["command", "success_command"]]}, "params_p": {"args": [], "command": [["str", 0.2912809117123737]], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.test_celery_integration.<locals>.fake_execute_command", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[106, 4], [161, 42]], "fn_var_ln": {"execute_date": [[120, 16], [120, 28]], "executor": [[115, 12], [115, 20]], "fail_command": [[108, 8], [108, 20]], "success_command": [[107, 8], [107, 23]], "task_tuples_to_send": [[122, 16], [122, 35]]}, "fn_var_occur": {"execute_date": [["execute_date", "datetime", "now"], ["task_tuples_to_send", "execute_date", "success_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command", "execute_date", "fail_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command"], ["list", "executor", "tasks", "keys", "execute_date", "execute_date"], ["executor", "event_buffer", "execute_date", "State", "QUEUED"], ["executor", "event_buffer", "execute_date", "State", "QUEUED"], ["executor", "event_buffer", "execute_date", "State", "SUCCESS"], ["executor", "event_buffer", "execute_date", "State", "FAILED"]], "executor": [["executor", "celery_executor", "CeleryExecutor"], ["executor", "tasks"], ["executor", "start"], ["executor", "queued_tasks", "key", "command", "queue", "None"], ["executor", "task_publish_retries", "key"], ["executor", "_process_tasks", "task_tuples_to_send"], ["list", "executor", "tasks", "keys", "execute_date", "execute_date"], ["executor", "event_buffer", "execute_date", "State", "QUEUED"], ["executor", "event_buffer", "execute_date", "State", "QUEUED"], ["executor", "end", "synchronous", "True"], ["executor", "event_buffer", "execute_date", "State", "SUCCESS"], ["executor", "event_buffer", "execute_date", "State", "FAILED"], ["executor", "tasks"], ["executor", "tasks"], ["executor", "queued_tasks"]], "fail_command": [["task_tuples_to_send", "execute_date", "success_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command", "execute_date", "fail_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command"]], "success_command": [["task_tuples_to_send", "execute_date", "success_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command", "execute_date", "fail_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command"]], "task_tuples_to_send": [["task_tuples_to_send", "execute_date", "success_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command", "execute_date", "fail_command", "celery_executor_utils", "celery_configuration", "celery_executor_utils", "execute_command"], ["executor", "_process_tasks", "task_tuples_to_send"]]}, "name": "test_celery_integration", "params": {"broker_url": "", "self": ""}, "params_descr": {"broker_url": "", "self": ""}, "params_occur": {"broker_url": [["_prepare_app", "broker_url", "execute", "fake_execute_command", "app"]], "self": []}, "params_p": {"args": [], "broker_url": [["str", 0.8080970894514551]], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.test_celery_integration", "ret_exprs": [], "ret_type": "", "variables": {"execute_date": "", "executor": "", "fail_command": "", "success_command": "", "task_tuples_to_send": ""}, "variables_p": {"execute_date": [["datetime.date", 0.2927749611664209], ["datetime.datetime", 0.22476911563220464], ["datetime.datetime.date", 0.10104332995987593], ["Pattern[str]", 0.09648002545945615], ["datetime.datetime.datetime", 0.09409947565399546], ["str", 0.09159201150137213]], "executor": [["list", 0.10542459354547136], ["str", 0.08874567280301845]], "fail_command": [["datetime.datetime.datetime", 0.1137164335633286], ["raiden.utils.SecretHash", 0.09983086176066444], ["Optional[decksite.data.models.person.Person]", 0.09367893710755835], ["beagle.backends.networkx.NetworkX", 0.08752741939971724], ["raiden.utils.PaymentAmount", 0.0868549355741908]], "success_command": [["datetime.datetime.datetime", 0.1137164335633286], ["raiden.utils.SecretHash", 0.09983086176066444], ["Optional[decksite.data.models.person.Person]", 0.09367893710755835], ["beagle.backends.networkx.NetworkX", 0.08752741939971724], ["raiden.utils.PaymentAmount", 0.0868549355741908]], "task_tuples_to_send": [["Tuple[Literal, Literal]", 0.3968327251081524], ["alerta.models.token.Jwt", 0.1990658343563466], ["Set[int]", 0.10506866559112198], ["Optional[raiden.transfer.state.NettingChannelState]", 0.10460826063486721], ["List[Tuple[str, str]]", 0.09469409380976765]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[164, 8], [165, 16]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fake_execute_command", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.test_error_sending_task.<locals>.fake_execute_command", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[163, 4], [186, 92]], "fn_var_ln": {"executor": [[170, 12], [170, 20]], "key": [[181, 12], [181, 15]], "task": [[171, 12], [171, 16]], "value_tuple": [[175, 12], [175, 23]], "when": [[174, 12], [174, 16]]}, "fn_var_occur": {"executor": [["executor", "celery_executor", "CeleryExecutor"], ["executor", "queued_tasks", "key", "value_tuple"], ["executor", "task_publish_retries", "key"], ["executor", "heartbeat"], ["len", "executor", "queued_tasks"], ["executor", "event_buffer", "when", "State", "FAILED"]], "key": [["key", "when"], ["executor", "queued_tasks", "key", "value_tuple"], ["executor", "task_publish_retries", "key"]], "task": [["task", "BashOperator", "task_id", "bash_command", "dag", "DAG", "dag_id", "start_date", "datetime", "now"], ["value_tuple", "None", "SimpleTaskInstance", "from_ti", "ti", "TaskInstance", "task", "task", "run_id", "None"]], "value_tuple": [["value_tuple", "None", "SimpleTaskInstance", "from_ti", "ti", "TaskInstance", "task", "task", "run_id", "None"], ["executor", "queued_tasks", "key", "value_tuple"]], "when": [["when", "datetime", "now"], ["key", "when"], ["executor", "event_buffer", "when", "State", "FAILED"]]}, "name": "test_error_sending_task", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.test_error_sending_task", "ret_exprs": [], "ret_type": "", "variables": {"executor": "", "key": "", "task": "", "value_tuple": "", "when": ""}, "variables_p": {"executor": [], "key": [["str", 0.8079621980603522], ["Set[str]", 0.09778538134187738], ["Tuple[str, str, str, str, str, str, str, str, str, str, str, str, str, str]", 0.09425242059777049]], "task": [["List[Dict]", 0.08954454196773974]], "value_tuple": [["dict", 0.1728076697201629], ["OrderedDict[str, Any]", 0.11868883654301887]], "when": [["float", 0.4005306692821396], ["str", 0.3003980019616047], ["int", 0.1001326673205349], ["List[str]", 0.09848434589179937]]}}, {"docstring": {"func": "Test that Airflow retries publishing tasks to Celery Broker at least 3 times", "long_descr": null, "ret": null}, "fn_lc": [[188, 4], [236, 96]], "fn_var_ln": {"executor": [[197, 12], [197, 20]], "key": [[211, 12], [211, 15]], "task": [[201, 12], [201, 16]], "value_tuple": [[205, 12], [205, 23]], "when": [[204, 12], [204, 16]]}, "fn_var_occur": {"executor": [["executor", "celery_executor", "CeleryExecutor"], ["executor", "task_publish_retries"], ["executor", "task_publish_max_retries"], ["executor", "queued_tasks", "key", "value_tuple"], ["executor", "heartbeat"], ["dict", "executor", "task_publish_retries", "key"], ["len", "executor", "queued_tasks"], ["executor", "event_buffer"], ["executor", "heartbeat"], ["dict", "executor", "task_publish_retries", "key"], ["len", "executor", "queued_tasks"], ["executor", "event_buffer"], ["executor", "heartbeat"], ["dict", "executor", "task_publish_retries", "key"], ["len", "executor", "queued_tasks"], ["executor", "event_buffer"], ["executor", "heartbeat"], ["dict", "executor", "task_publish_retries"], ["len", "executor", "queued_tasks"], ["executor", "event_buffer", "when", "State", "FAILED"]], "key": [["key", "when"], ["executor", "queued_tasks", "key", "value_tuple"], ["dict", "executor", "task_publish_retries", "key"], ["key", "caplog", "text"], ["dict", "executor", "task_publish_retries", "key"], ["key", "caplog", "text"], ["dict", "executor", "task_publish_retries", "key"], ["key", "caplog", "text"]], "task": [["task", "BashOperator", "task_id", "bash_command", "dag", "DAG", "dag_id", "start_date", "datetime", "now"], ["value_tuple", "None", "SimpleTaskInstance", "from_ti", "ti", "TaskInstance", "task", "task", "run_id", "None"]], "value_tuple": [["value_tuple", "None", "SimpleTaskInstance", "from_ti", "ti", "TaskInstance", "task", "task", "run_id", "None"], ["executor", "queued_tasks", "key", "value_tuple"]], "when": [["when", "datetime", "now"], ["key", "when"], ["executor", "event_buffer", "when", "State", "FAILED"]]}, "name": "test_retry_on_error_sending_task", "params": {"caplog": "", "self": ""}, "params_descr": {"caplog": "", "self": ""}, "params_occur": {"caplog": [["key", "caplog", "text"], ["key", "caplog", "text"], ["key", "caplog", "text"]], "self": []}, "params_p": {"args": [], "caplog": [], "kwargs": [], "self": []}, "q_name": "TestCeleryExecutor.test_retry_on_error_sending_task", "ret_exprs": [], "ret_type": "", "variables": {"executor": "", "key": "", "task": "", "value_tuple": "", "when": ""}, "variables_p": {"executor": [["tikki.db.tables.Base", 0.09926324692287994], ["decksite.data.models.person.Person", 0.08930400804493399]], "key": [["str", 0.8024707353764338], ["int", 0.11162915057048152]], "task": [["List[Dict]", 0.08954454196773974]], "value_tuple": [["dict", 0.1728076697201629], ["OrderedDict[str, Any]", 0.11868883654301887]], "when": [["float", 0.4005306692821396], ["str", 0.3003980019616047], ["int", 0.1001326673205349], ["List[str]", 0.09848434589179937]]}}], "name": "TestCeleryExecutor", "q_name": "TestCeleryExecutor", "variables": {}, "variables_p": {}}, {"cls_lc": [[239, 0], [256, 37]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[242, 4], [244, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__init__", "params": {"kwargs": "", "self": ""}, "params_descr": {"kwargs": "", "self": ""}, "params_occur": {"kwargs": [["kwargs", "items"]], "self": [["setattr", "self", "key", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "ClassWithCustomAttributes.__init__", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[246, 4], [247, 76]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__str__", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["ClassWithCustomAttributes", "__name__", "str", "self", "__dict__"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "ClassWithCustomAttributes.__str__", "ret_exprs": ["return f\"{ClassWithCustomAttributes.__name__}({str(self.__dict__)})\""], "ret_type": "", "ret_type_p": [["Dict[str, Any]", 0.1078499489911576], ["dict", 0.10668201027310432], ["str", 0.10604251157887606], ["Dict[str, int]", 0.09447192178947593], ["Mapping[str, Any]", 0.09438303244278855], ["sqlalchemy.engine.Engine", 0.0887514261592041]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[249, 4], [250, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__repr__", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "__str__"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "ClassWithCustomAttributes.__repr__", "ret_exprs": ["return self.__str__()"], "ret_type": "", "ret_type_p": [["str", 0.8458824507089776]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[252, 4], [253, 46]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__eq__", "params": {"other": "", "self": ""}, "params_descr": {"other": "", "self": ""}, "params_occur": {"other": [["self", "__dict__", "other", "__dict__"]], "self": [["self", "__dict__", "other", "__dict__"]]}, "params_p": {"args": [], "kwargs": [], "other": [["Union[str, \"Date\"]", 8.558199866586338e-11], ["Tuple[float, float]", 2.2038073904544742e-11], ["Type", 2.0881611798473296e-11]], "self": []}, "q_name": "ClassWithCustomAttributes.__eq__", "ret_exprs": ["return self.__dict__ == other.__dict__"], "ret_type": "", "ret_type_p": [["Dict[str, Any]", 0.4104400768074746], ["str", 0.10379057280959801], ["Dict[str, Dict[str, Any]]", 0.10261001920186864], ["dict", 0.09532005172718877], ["Dict[str, float]", 0.09394818650670235], ["Dict[str, models.DeviceRow]", 0.09128107374529894]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[255, 4], [256, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__ne__", "params": {"other": "", "self": ""}, "params_descr": {"other": "", "self": ""}, "params_occur": {"other": [["self", "__eq__", "other"]], "self": [["self", "__eq__", "other"]]}, "params_p": {"args": [], "kwargs": [], "other": [["dict", 0.24999999998650746], ["AbstractSet[T]", 9.152138678985443e-12], ["AbstractSet[T_co]", 9.152138678985443e-12], ["raiden.utils.Any", 6.887222363228575e-12]], "self": []}, "q_name": "ClassWithCustomAttributes.__ne__", "ret_exprs": ["return not self.__eq__(other)"], "ret_type": "", "ret_type_p": [["str", 0.13968937068109144], ["cmk.utils.type_defs.ServiceName", 0.10951851018970368], ["cmk.utils.type_defs.HostName", 0.10951851018970368], ["django.db.models.QuerySet", 0.06471841105226568]], "variables": {}, "variables_p": {}}], "name": "ClassWithCustomAttributes", "q_name": "ClassWithCustomAttributes", "variables": {}, "variables_p": {}}, {"cls_lc": [[261, 0], [362, 70]], "cls_var_ln": {"bulk_state_fetcher_logger": [[262, 4], [262, 29]]}, "cls_var_occur": {"bulk_state_fetcher_logger": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[268, 4], [288, 70]], "fn_var_ln": {"_": [[283, 19], [283, 20]], "fetcher": [[274, 16], [274, 23]], "mget_args": [[283, 8], [283, 17]], "mock_backend": [[271, 12], [271, 24]], "result": [[275, 16], [275, 22]]}, "fn_var_occur": {"_": [["mget_args", "_", "mock_mget", "call_args"]], "fetcher": [["fetcher", "celery_executor_utils", "BulkStateFetcher"], ["result", "fetcher", "get_many", "mock", "MagicMock", "task_id", "mock", "MagicMock", "task_id"]], "mget_args": [["mget_args", "_", "mock_mget", "call_args"], ["set", "mget_args"]], "mock_backend": [["mock_backend", "BaseKeyValueStoreBackend", "app", "celery_executor", "app"], ["mock", "patch", "mock_backend"]], "result": [["result", "fetcher", "get_many", "mock", "MagicMock", "task_id", "mock", "MagicMock", "task_id"], ["result", "None", "None"]]}, "name": "test_should_support_kv_backend", "params": {"caplog": "", "mock_mget": "", "self": ""}, "params_descr": {"caplog": "", "mock_mget": "", "self": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"], ["caplog", "clear"], ["caplog", "messages"]], "mock_mget": [["mget_args", "_", "mock_mget", "call_args"], ["mock_mget", "assert_called_once_with", "mock", "ANY"]], "self": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.2712652637114832]], "kwargs": [], "mock_mget": [], "self": []}, "q_name": "TestBulkStateFetcher.test_should_support_kv_backend", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "fetcher": "", "mget_args": "", "mock_backend": "", "result": ""}, "variables_p": {"_": [["str", 0.2091997466122164], ["int", 0.17098258095158586], ["List[str]", 0.13480561304737684], ["Dict[str, str]", 0.09914348435719694], ["viewer.models.Gallery", 0.08178980624589466]], "fetcher": [["app.models.dto.NewUserRequest", 0.11250993222205259], ["List[str]", 0.09535869236692661], ["mock.MagicMock", 0.0944905048969366]], "mget_args": [["List[str]", 0.27141234193351377], ["Set[str]", 0.2019064290046462], ["dict", 0.19824651432223508], ["Dict[str, Union[int, str]]", 0.10942129381474633]], "mock_backend": [["Dict[str, Tuple[str, Any]]", 0.21009242985949494], ["mock._Call", 0.18479030728341095], ["Dict[str, Any]", 0.11548243056141574], ["List[int]", 0.08515658622238545]], "result": [["mock.Mock", 0.09610102617052534]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[291, 4], [311, 70]], "fn_var_ln": {"fetcher": [[302, 16], [302, 23]], "mock_backend": [[294, 12], [294, 24]], "mock_session": [[297, 16], [297, 28]], "result": [[303, 16], [303, 22]]}, "fn_var_occur": {"fetcher": [["fetcher", "celery_executor_utils", "BulkStateFetcher"], ["result", "fetcher", "get_many", "mock", "MagicMock", "task_id", "mock", "MagicMock", "task_id"]], "mock_backend": [["mock_backend", "DatabaseBackend", "app", "celery_executor", "app", "url"], ["mock", "patch", "mock_backend"], ["mock_session", "mock_backend", "ResultSession", "return_value"]], "mock_session": [["mock_session", "mock_backend", "ResultSession", "return_value"], ["mock_session", "query", "return_value", "filter", "return_value", "all", "return_value", "mock", "MagicMock"]], "result": [["result", "fetcher", "get_many", "mock", "MagicMock", "task_id", "mock", "MagicMock", "task_id"], ["result", "None", "None"]]}, "name": "test_should_support_db_backend", "params": {"caplog": "", "mock_session": "", "self": ""}, "params_descr": {"caplog": "", "mock_session": "", "self": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"], ["caplog", "clear"], ["caplog", "messages"]], "mock_session": [["mock_session", "mock_backend", "ResultSession", "return_value"], ["mock_session", "query", "return_value", "filter", "return_value", "all", "return_value", "mock", "MagicMock"]], "self": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.3462588095500373], ["logging.Formatter", 0.08927723573180583]], "kwargs": [], "mock_session": [], "self": []}, "q_name": "TestBulkStateFetcher.test_should_support_db_backend", "ret_exprs": [], "ret_type": "", "variables": {"fetcher": "", "mock_backend": "", "mock_session": "", "result": ""}, "variables_p": {"fetcher": [["app.models.dto.NewUserRequest", 0.11250993222205259], ["List[str]", 0.09535869236692661], ["mock.MagicMock", 0.0944905048969366]], "mock_backend": [["Union[mock.AsyncMock, mock.MagicMock]", 0.6064727710004469], ["Dict[str, Tuple[str, Any]]", 0.19439651373455888], ["Dict[str, Dict[str, str]]", 0.1018409348203923]], "mock_session": [["Dict[str, str]", 0.4949041473830222], ["str", 0.27109145603056434], ["Dict[str, List[str]]", 0.1137078511552586]], "result": [["mock.Mock", 0.09610102617052534]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[314, 4], [344, 9]], "fn_var_ln": {"fetcher": [[332, 16], [332, 23]], "mock_backend": [[319, 12], [319, 24]], "mock_retry_db_result": [[323, 16], [323, 36]], "mock_session": [[322, 16], [322, 28]], "result": [[333, 16], [333, 22]], "return_value": [[324, 16], [324, 49]], "side_effect": [[327, 16], [327, 48]]}, "fn_var_occur": {"fetcher": [["fetcher", "celery_executor_utils", "BulkStateFetcher"], ["result", "fetcher", "get_many", "mock", "MagicMock", "task_id", "mock", "MagicMock", "task_id"]], "mock_backend": [["mock_backend", "DatabaseBackend", "app", "celery_executor", "app", "url"], ["mock", "patch", "mock_backend"], ["mock_session", "mock_backend", "ResultSession", "return_value"]], "mock_retry_db_result": [["mock_retry_db_result", "mock_session", "query", "return_value", "filter", "return_value", "all"], ["mock_retry_db_result", "return_value", "mock", "MagicMock"], ["mock_retry_db_result", "side_effect", "DatabaseError", "mock_retry_db_result", "return_value"], ["mock_retry_db_result", "call_count"]], "mock_session": [["mock_session", "mock_backend", "ResultSession", "return_value"], ["mock_retry_db_result", "mock_session", "query", "return_value", "filter", "return_value", "all"]], "result": [["result", "fetcher", "get_many", "mock", "MagicMock", "task_id", "mock", "MagicMock", "task_id"], ["result", "None", "None"]], "return_value": [["mock_session", "mock_backend", "ResultSession", "return_value"], ["mock_retry_db_result", "mock_session", "query", "return_value", "filter", "return_value", "all"], ["mock_retry_db_result", "return_value", "mock", "MagicMock"], ["mock_retry_db_result", "side_effect", "DatabaseError", "mock_retry_db_result", "return_value"]], "side_effect": [["mock_retry_db_result", "side_effect", "DatabaseError", "mock_retry_db_result", "return_value"]]}, "name": "test_should_retry_db_backend", "params": {"caplog": "", "mock_session": "", "self": ""}, "params_descr": {"caplog": "", "mock_session": "", "self": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"], ["caplog", "clear"], ["caplog", "messages"]], "mock_session": [["mock_session", "mock_backend", "ResultSession", "return_value"], ["mock_retry_db_result", "mock_session", "query", "return_value", "filter", "return_value", "all"]], "self": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.3462588095500373], ["logging.Formatter", 0.08927723573180583]], "kwargs": [], "mock_session": [], "self": []}, "q_name": "TestBulkStateFetcher.test_should_retry_db_backend", "ret_exprs": [], "ret_type": "", "variables": {"fetcher": "", "mock_backend": "", "mock_retry_db_result": "", "mock_session": "", "result": "", "return_value": "", "side_effect": ""}, "variables_p": {"fetcher": [["app.models.dto.NewUserRequest", 0.11250993222205259], ["List[str]", 0.09535869236692661], ["mock.MagicMock", 0.0944905048969366]], "mock_backend": [["Union[mock.AsyncMock, mock.MagicMock]", 0.6064727710004469], ["Dict[str, Tuple[str, Any]]", 0.19439651373455888], ["Dict[str, Dict[str, str]]", 0.1018409348203923]], "mock_retry_db_result": [["str", 0.20219221395535977], ["rotkehlchen.tests.utils.mock.MockResponse", 0.1184012353522245], ["List[int]", 0.09458809299436546]], "mock_session": [["Dict[str, str]", 0.5824282316888144], ["Dict[str, Union[Any, Any]]", 0.1624740551891462], ["Dict[Any, Union[Any, Any]]", 0.09124806645848552], ["Dict[str, Any]", 0.08388304571441937], ["Dict[str, Union[Any, str]]", 0.07996660094913455]], "result": [["mock.Mock", 0.09610102617052534]], "return_value": [["str", 0.341874996773229], ["Dict[str, List[Any]]", 0.09657410129125667], ["Dict[str, str]", 0.08757540335514971]], "side_effect": [["str", 0.2016824710526044], ["mock._patch[Literal]", 0.10180235985339267], ["Dict[str, Union[Any, Any]]", 0.09354989907458644], ["Dict[str, Dict[str, str]]", 0.0897509134935114]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[346, 4], [362, 70]], "fn_var_ln": {"fetcher": [[353, 16], [353, 23]], "mock_backend": [[349, 12], [349, 24]], "result": [[354, 16], [354, 22]]}, "fn_var_occur": {"fetcher": [["fetcher", "celery_executor_utils", "BulkStateFetcher"], ["result", "fetcher", "get_many", "ClassWithCustomAttributes", "task_id", "state", "ClassWithCustomAttributes", "task_id", "state"]], "mock_backend": [["mock_backend", "mock", "MagicMock", "autospec", "BaseBackend"], ["mock", "patch", "mock_backend"]], "result": [["result", "fetcher", "get_many", "ClassWithCustomAttributes", "task_id", "state", "ClassWithCustomAttributes", "task_id", "state"], ["result", "None", "None"]]}, "name": "test_should_support_base_backend", "params": {"caplog": "", "self": ""}, "params_descr": {"caplog": "", "self": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"], ["caplog", "clear"], ["caplog", "messages"]], "self": [["caplog", "set_level", "logging", "DEBUG", "logger", "self", "bulk_state_fetcher_logger"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.3275218944517082], ["logging.LogRecord", 0.07386336796009278]], "kwargs": [], "self": []}, "q_name": "TestBulkStateFetcher.test_should_support_base_backend", "ret_exprs": [], "ret_type": "", "variables": {"fetcher": "", "mock_backend": "", "result": ""}, "variables_p": {"fetcher": [["edp.contrib.gamestate.GameStateData", 0.27913129500084705], ["list", 0.1394472892023266], ["db.facade.DBFacade", 0.08789752324456804]], "mock_backend": [["mock.Mock", 0.25510981887031337]], "result": [["tuple", 0.15143957151086127], ["List[aw_core.models.Event]", 0.09614516336774649], ["raiden.utils.Any", 0.0859379220310856]]}}], "name": "TestBulkStateFetcher", "q_name": "TestBulkStateFetcher", "variables": {"bulk_state_fetcher_logger": ""}, "variables_p": {"bulk_state_fetcher_logger": [["str", 0.4], ["int", 0.2], ["raiden.transfer.mediated_transfer.state.InitiatorPaymentState", 0.1], ["list", 0.1]]}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[47, 0], [50, 45]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_prepare_test_bodies", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "_prepare_test_bodies", "ret_exprs": ["return os.environ[\"CELERY_BROKER_URLS\"].split(\",\")", "return [conf.get(\"celery\", \"BROKER_URL\")]"], "ret_type": "", "ret_type_p": [["dict", 0.21558820657421335], ["Union[utils.CWLObjectType, MutableSequence[utils.CWLObjectType], None]", 0.10342642526749109], ["bytes", 0.09754974465622746], ["sqlalchemy.engine.Engine", 0.08777842482247551]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[63, 0], [90, 32]], "fn_var_ln": {"backend": [[74, 4], [74, 11]], "broker_url": [[64, 4], [64, 14]], "execute": [[65, 4], [65, 11]], "patch_app": [[71, 4], [71, 13]], "patch_execute": [[72, 4], [72, 17]], "session": [[82, 8], [82, 15]], "test_app": [[69, 4], [69, 12]], "test_config": [[67, 4], [67, 15]], "test_execute": [[70, 4], [70, 16]]}, "fn_var_occur": {"backend": [["backend", "test_app", "backend"], ["hasattr", "backend"], ["session", "backend", "ResultSession"]], "broker_url": [["broker_url", "broker_url", "conf", "get"], ["test_config", "update", "broker_url"], ["test_app", "Celery", "broker_url", "config_source", "test_config"]], "execute": [["execute", "execute", "celery_executor_utils", "execute_command", "__wrapped__"], ["test_execute", "test_app", "task", "execute"]], "patch_app": [["patch_app", "mock", "patch", "test_app"]], "patch_execute": [["patch_execute", "mock", "patch", "test_execute"]], "session": [["session", "backend", "ResultSession"], ["session", "close"]], "test_app": [["test_app", "Celery", "broker_url", "config_source", "test_config"], ["test_execute", "test_app", "task", "execute"], ["patch_app", "mock", "patch", "test_app"], ["backend", "test_app", "backend"]], "test_config": [["test_config", "dict", "celery_executor_utils", "celery_configuration"], ["test_config", "update", "broker_url"], ["test_app", "Celery", "broker_url", "config_source", "test_config"]], "test_execute": [["test_execute", "test_app", "task", "execute"], ["patch_execute", "mock", "patch", "test_execute"]]}, "name": "_prepare_app", "params": {"broker_url": "", "execute": ""}, "params_descr": {"broker_url": "", "execute": ""}, "params_occur": {"broker_url": [["broker_url", "broker_url", "conf", "get"], ["test_config", "update", "broker_url"], ["test_app", "Celery", "broker_url", "config_source", "test_config"]], "execute": [["execute", "execute", "celery_executor_utils", "execute_command", "__wrapped__"], ["test_execute", "test_app", "task", "execute"]]}, "params_p": {"args": [], "broker_url": [["str", 0.6046937203292672], ["dict", 0.08522906001587793]], "execute": [["str", 0.35374029002971674], ["IO[bytes]", 0.08646583321601997]], "kwargs": []}, "q_name": "_prepare_app", "ret_exprs": [], "ret_type": "", "variables": {"backend": "", "broker_url": "", "execute": "", "patch_app": "", "patch_execute": "", "session": "", "test_app": "", "test_config": "", "test_execute": ""}, "variables_p": {"backend": [["dict", 0.16883275582647453], ["str", 0.16883275582647453], ["List[str]", 0.119162814082692], ["tests.entities.DataClassWithDataClass", 0.11067044107055472]], "broker_url": [["str", 0.8179185761980696], ["Dict[str, Any]", 0.09426928373916507], ["Dict[str, str]", 0.0878121400627653]], "execute": [["str", 0.19855136210860672]], "patch_app": [["tests.usecases.list_permissions_tesMockUI", 0.3056111412865302], ["tests.utils.PicklableMock", 0.09732745842174809], ["Dict[str, str]", 0.09595549218821253]], "patch_execute": [["Tuple[Literal, Literal, Literal]", 0.20889039902571432], ["Dict[int, Dict[str, Any]]", 0.19544849707409406], ["List[str]", 0.09977959029914367], ["str", 0.09772424853704703], ["list", 0.09113148443111899]], "session": [["dict", 0.12389221894336329], ["str", 0.10523718658520963], ["Dict[str, Dict[str, Any]]", 0.09328647362037198], ["Dict[str, None]", 0.08750013067248975]], "test_app": [["Dict[str, Union[Any, Any]]", 0.5771629836745855], ["str", 0.21905078093232228], ["Dict[str, Any]", 0.10394385200607983]], "test_config": [["dict", 0.4329988027599085], ["Dict[Any, dict]", 0.17812369719700932], ["Dict[str, Any]", 0.1074585736517338], ["str", 0.09497567995003003], ["Dict[Any, Dict[Any, Any]]", 0.09448475283167493], ["List[Dict[str, str]]", 0.09195849360964353]], "test_execute": [["tests.core.data.json.test_json_repository.DummyEntity", 0.10523929964062924], ["float", 0.10207046804468706]]}}], "imports": ["__future__", "annotations", "contextlib", "json", "logging", "os", "sys", "datetime", "datetime", "unittest", "mock", "celery.contrib.testing.tasks", "pytest", "celery", "Celery", "celery", "backends", "base", "BaseBackend", "BaseKeyValueStoreBackend", "celery", "backends", "database", "DatabaseBackend", "celery", "contrib", "testing", "worker", "start_worker", "kombu", "asynchronous", "set_event_loop", "airflow", "configuration", "conf", "airflow", "exceptions", "AirflowException", "AirflowTaskTimeout", "airflow", "executors", "celery_executor", "celery_executor_utils", "airflow", "models", "dag", "DAG", "airflow", "models", "taskinstance", "SimpleTaskInstance", "TaskInstance", "airflow", "operators", "bash", "BashOperator", "airflow", "utils", "state", "State", "tests", "test_utils", "db", "sqlalchemy", "exc", "DatabaseError"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 2, "I": 0, "U": 72}, "session_id": "BZTjn9RAvykTNTLV3egpeX0iYBeJe5ANxvm04dbiSLU", "set": null, "tc": [false, null], "type_annot_cove": 0.03, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}