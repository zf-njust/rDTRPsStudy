{"error": null, "response": {"classes": [{"cls_lc": [[54, 0], [253, 104]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[55, 4], [98, 93]], "fn_var_ln": {"all_meta_data": [[59, 8], [59, 21]], "diff": [[96, 12], [96, 16]], "ignores": [[70, 8], [70, 15]], "mctx": [[64, 8], [64, 12]]}, "fn_var_occur": {"all_meta_data": [["all_meta_data", "MetaData"], ["all_meta_data", "_add_table", "table_name", "table", "schema", "table"], ["diff", "compare_metadata", "mctx", "all_meta_data"]], "diff": [["diff", "compare_metadata", "mctx", "all_meta_data"], ["diff", "d", "d", "diff", "ignore", "d"], ["diff", "str", "diff"]], "ignores": [["ignores", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name", "t", "t", "t", "name"]], "mctx": [["mctx", "MigrationContext", "configure", "engine", "connect", "opts", "compare_type", "compare_server_default"], ["diff", "compare_metadata", "mctx", "all_meta_data"]]}, "name": "test_database_schema_and_sqlalchemy_model_are_in_sync", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_database_schema_and_sqlalchemy_model_are_in_sync", "ret_exprs": [], "ret_type": "", "variables": {"all_meta_data": "", "diff": "", "ignores": "", "mctx": ""}, "variables_p": {"all_meta_data": [["Dict[str, Dict[str, Any]]", 0.10669169763657974], ["Dict[str, List[Any]]", 0.09419371413200145], ["str", 0.09316585790799957]], "diff": [["List[int]", 0.10801544656218391], ["bytes", 0.0915603472925994], ["str", 0.08603553181900468]], "ignores": [["List[int]", 0.10721626158148737], ["Dict[str, Any]", 0.1035739984180545], ["list", 0.0987012814379349], ["Dict[str, Tuple[int, ...]]", 0.09803639236737437], ["int", 0.09604349815321071], ["Tuple[Tuple[Literal, Literal], Tuple[Literal, Literal]]", 0.09154429736954653]], "mctx": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[100, 4], [115, 37]], "fn_var_ln": {"config": [[101, 8], [101, 14]], "script": [[103, 8], [103, 14]]}, "fn_var_occur": {"config": [["config", "Config"], ["config", "set_main_option"], ["script", "ScriptDirectory", "from_config", "config"], ["EnvironmentContext", "config", "script", "as_sql", "True", "env"]], "script": [["script", "ScriptDirectory", "from_config", "config"], ["EnvironmentContext", "config", "script", "as_sql", "True", "env"], ["script", "get_current_head"]]}, "name": "test_only_single_head_revision_in_migrations", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_only_single_head_revision_in_migrations", "ret_exprs": [], "ret_type": "", "variables": {"config": "", "script": ""}, "variables_p": {"config": [["cincoconfig.config.Config", 0.6146220611727677], ["sphinx.exnapoleon.Config", 0.10428688808238752], ["dict", 0.10007266910272622], ["starfish.core.config.StarfishConfig", 0.09126912928785856], ["chalice.config.Config", 0.08974925235425998]], "script": [["pxl.config.Config", 0.303836562230067], ["qcodes.configuration.config.Config", 0.2946805676990698], ["snapcrafconfig.Config", 0.09141923711317958]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[117, 4], [121, 33]], "fn_var_ln": {"pattern": [[118, 8], [118, 15]], "source": [[119, 8], [119, 14]], "src": [[120, 8], [120, 11]]}, "fn_var_occur": {"pattern": [["pattern", "re", "compile", "re", "DOTALL"], ["src", "pattern", "findall", "source"]], "source": [["source", "inspect", "getsource", "create_default_connections"], ["src", "pattern", "findall", "source"]], "src": [["src", "pattern", "findall", "source"], ["sorted", "src", "src"]]}, "name": "test_default_connections_sort", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_default_connections_sort", "ret_exprs": [], "ret_type": "", "variables": {"pattern": "", "source": "", "src": ""}, "variables_p": {"pattern": [["List[str]", 0.2844263566693862], ["str", 0.22050892341103606], ["Optional[float]", 0.11985952739748186], ["Dict[str, Dict[str, Any]]", 0.10499336381939334], ["List[List[int]]", 0.09146809430868943], ["list", 0.08896368451382143]], "source": [["str", 0.5809380124051134], ["Tuple[Literal]", 0.1427753919793045], ["tuple", 0.08924815234787117], ["List[str]", 0.0891282096075818]], "src": [["str", 0.18936427955216506], ["dict", 0.17625919226157588], ["vimiv.api.settings.Setting", 0.09362187848957158]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[123, 4], [126, 27]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_check_migrations", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_check_migrations", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[129, 4], [131, 88]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_upgradedb", "params": {"mock_alembic_command": "", "self": ""}, "params_descr": {"mock_alembic_command": "", "self": ""}, "params_occur": {"mock_alembic_command": [["mock_alembic_command", "upgrade", "assert_called_once_with", "mock", "ANY", "revision"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_alembic_command": [["unittesmock.MagicMock", 0.4545255221496897], ["mock.MagicMock", 0.11179734886212828]], "self": []}, "q_name": "TestDb.test_upgradedb", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[137, 4], [141, 103]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_offline_upgrade_wrong_order", "params": {"from_revision": "", "self": "", "to_revision": ""}, "params_descr": {"from_revision": "", "self": "", "to_revision": ""}, "params_occur": {"from_revision": [["upgradedb", "from_revision", "from_revision", "to_revision", "to_revision", "show_sql_only", "True"]], "self": [], "to_revision": [["upgradedb", "from_revision", "from_revision", "to_revision", "to_revision", "show_sql_only", "True"]]}, "params_p": {"args": [], "from_revision": [["str", 0.2832359144390107], ["Callable", 0.1146580340706704], ["int", 0.09389912506837257]], "kwargs": [], "self": [], "to_revision": [["str", 0.2832359144390107], ["Callable", 0.1146580340706704], ["int", 0.09389912506837257]]}, "q_name": "TestDb.test_offline_upgrade_wrong_order", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[149, 4], [155, 48]], "fn_var_ln": {"stdout": [[154, 16], [154, 22]]}, "fn_var_occur": {"stdout": [["stdout", "temp_stdout", "getvalue"]]}, "name": "test_offline_upgrade_revision_nothing", "params": {"from_revision": "", "self": "", "to_revision": ""}, "params_descr": {"from_revision": "", "self": "", "to_revision": ""}, "params_occur": {"from_revision": [["upgradedb", "to_revision", "to_revision", "from_revision", "from_revision", "show_sql_only", "True"]], "self": [], "to_revision": [["upgradedb", "to_revision", "to_revision", "from_revision", "from_revision", "show_sql_only", "True"]]}, "params_p": {"args": [], "from_revision": [["str", 0.28365743557894824], ["Callable", 0.11432838849885602], ["int", 0.0941313695749416]], "kwargs": [], "self": [], "to_revision": [["str", 0.28365743557894824], ["Callable", 0.11432838849885602], ["int", 0.0941313695749416]]}, "q_name": "TestDb.test_offline_upgrade_revision_nothing", "ret_exprs": [], "ret_type": "", "variables": {"stdout": ""}, "variables_p": {"stdout": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[161, 4], [165, 106]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_offline_upgrade_revision", "params": {"from_revision": "", "self": "", "to_revision": ""}, "params_descr": {"from_revision": "", "self": "", "to_revision": ""}, "params_occur": {"from_revision": [["upgradedb", "from_revision", "from_revision", "to_revision", "to_revision", "show_sql_only", "True"], ["mock_alembic_upgrade", "assert_called_once_with", "mock", "ANY", "from_revision", "to_revision", "sql", "True"]], "self": [], "to_revision": [["upgradedb", "from_revision", "from_revision", "to_revision", "to_revision", "show_sql_only", "True"], ["mock_alembic_upgrade", "assert_called_once_with", "mock", "ANY", "from_revision", "to_revision", "sql", "True"]]}, "params_p": {"args": [], "from_revision": [["raiden.utils.TokenNetworkRegistryAddress", 0.10461855526792523]], "kwargs": [], "self": [], "to_revision": [["raiden.utils.TokenNetworkRegistryAddress", 0.10461855526792523]]}, "q_name": "TestDb.test_offline_upgrade_revision", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Offline upgrade should work with no version / revision options.", "long_descr": null, "ret": null}, "fn_lc": [[169, 4], [176, 74]], "fn_var_ln": {"actual": [[175, 12], [175, 18]], "name": [[172, 12], [172, 24]], "return_value": [[173, 12], [173, 33]]}, "fn_var_occur": {"actual": [["actual", "mock_om", "call_args", "args"], ["re", "match", "actual", "None"]], "name": [["dialect", "name"]], "return_value": [["mock_gcr", "return_value"]]}, "name": "test_offline_upgrade_no_versions", "params": {"mock_gcr": "", "mock_om": "", "self": ""}, "params_descr": {"mock_gcr": "", "mock_om": "", "self": ""}, "params_occur": {"mock_gcr": [["mock_gcr", "return_value"]], "mock_om": [["actual", "mock_om", "call_args", "args"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_gcr": [["unittesmock.MagicMock", 0.19697675052720276]], "mock_om": [["mock.MagicMock", 0.12471998154407109]], "self": []}, "q_name": "TestDb.test_offline_upgrade_no_versions", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "name": "", "return_value": ""}, "variables_p": {"actual": [["Dict[str, Union[int, str]]", 0.12262613061678417], ["str", 0.08332226689637318]], "name": [["str", 0.3333333334297114], ["Dict[str, str]", 0.33333333328984005], ["Tuple[str, str, str]", 0.3333333332804486]], "return_value": [["Set[str]", 0.31968019372842504], ["str", 0.28974495331495453], ["list", 0.1978080233656786], ["int", 0.09819123429613609], ["List[str]", 0.09457559529480569]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[178, 4], [181, 103]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_offline_upgrade_fails_for_migration_less_than_2_0_0_head", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_offline_upgrade_fails_for_migration_less_than_2_0_0_head", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[183, 4], [187, 103]], "fn_var_ln": {"name": [[185, 12], [185, 24]]}, "fn_var_occur": {"name": [["dialect", "name"]]}, "name": "test_sqlite_offline_upgrade_raises_with_revision", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_sqlite_offline_upgrade_raises_with_revision", "ret_exprs": [], "ret_type": "", "variables": {"name": ""}, "variables_p": {"name": [["str", 0.3333333334297114], ["Dict[str, str]", 0.33333333328984005], ["Tuple[str, str, str]", 0.3333333332804486]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[189, 4], [193, 103]], "fn_var_ln": {"name": [[191, 12], [191, 24]]}, "fn_var_occur": {"name": [["dialect", "name"]]}, "name": "test_offline_upgrade_fails_for_migration_less_than_2_2_0_head_for_mssql", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_offline_upgrade_fails_for_migration_less_than_2_2_0_head_for_mssql", "ret_exprs": [], "ret_type": "", "variables": {"name": ""}, "variables_p": {"name": [["str", 0.3333333334297114], ["Dict[str, str]", 0.33333333328984005], ["Tuple[str, str, str]", 0.3333333332804486]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[196, 4], [199, 61]], "fn_var_ln": {"actual": [[198, 8], [198, 14]]}, "fn_var_occur": {"actual": [["actual", "mock_om", "call_args", "kwargs"], ["re", "match", "actual", "None"]]}, "name": "test_downgrade_sql_no_from", "params": {"mock_om": "", "self": ""}, "params_descr": {"mock_om": "", "self": ""}, "params_occur": {"mock_om": [["actual", "mock_om", "call_args", "kwargs"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_om": [["unittesmock.MagicMock", 0.35268651777741294]], "self": []}, "q_name": "TestDb.test_downgrade_sql_no_from", "ret_exprs": [], "ret_type": "", "variables": {"actual": ""}, "variables_p": {"actual": [["str", 0.2079529899390308], ["Union[Literal, str]", 0.12919223661958776]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[202, 4], [205, 34]], "fn_var_ln": {"actual": [[204, 8], [204, 14]]}, "fn_var_occur": {"actual": [["actual", "mock_om", "call_args", "kwargs"]]}, "name": "test_downgrade_sql_with_from", "params": {"mock_om": "", "self": ""}, "params_descr": {"mock_om": "", "self": ""}, "params_occur": {"mock_om": [["actual", "mock_om", "call_args", "kwargs"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_om": [["unittesmock.MagicMock", 0.2583737033568662]], "self": []}, "q_name": "TestDb.test_downgrade_sql_with_from", "ret_exprs": [], "ret_type": "", "variables": {"actual": ""}, "variables_p": {"actual": [["list", 0.10138914215669277]]}}, {"docstring": {"func": "can't combine `sql=False` and `from_revision`", "long_descr": null, "ret": null}, "fn_lc": [[208, 4], [211, 61]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_downgrade_invalid_combo", "params": {"mock_om": "", "self": ""}, "params_descr": {"mock_om": "", "self": ""}, "params_occur": {"mock_om": [], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_om": [["mock.Mock", 0.7777777782457801]], "self": []}, "q_name": "TestDb.test_downgrade_invalid_combo", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[214, 4], [217, 30]], "fn_var_ln": {"actual": [[216, 8], [216, 14]]}, "fn_var_occur": {"actual": [["actual", "mock_om", "call_args", "kwargs"]]}, "name": "test_downgrade_with_from", "params": {"mock_om": "", "self": ""}, "params_descr": {"mock_om": "", "self": ""}, "params_occur": {"mock_om": [["actual", "mock_om", "call_args", "kwargs"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_om": [["unittesmock.MagicMock", 0.25715737823136925]], "self": []}, "q_name": "TestDb.test_downgrade_with_from", "ret_exprs": [], "ret_type": "", "variables": {"actual": ""}, "variables_p": {"actual": [["list", 0.10138914215669277]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[225, 4], [240, 67]], "fn_var_ln": {"session_mock": [[233, 8], [233, 20]]}, "fn_var_occur": {"session_mock": [["session_mock", "MagicMock"], ["resetdb", "session_mock", "skip_init", "skip_init"], ["mock_init", "assert_called_once_with", "session", "session_mock"]]}, "name": "test_resetdb", "params": {"mock_connect": "", "mock_drop_airflow": "", "mock_drop_moved": "", "mock_init": "", "self": "", "skip_init": ""}, "params_descr": {"mock_connect": "", "mock_drop_airflow": "", "mock_drop_moved": "", "mock_init": "", "self": "", "skip_init": ""}, "params_occur": {"mock_connect": [["mock_drop_airflow", "assert_called_once_with", "mock_connect", "return_value"], ["mock_drop_moved", "assert_called_once_with", "mock_connect", "return_value"]], "mock_drop_airflow": [["mock_drop_airflow", "assert_called_once_with", "mock_connect", "return_value"]], "mock_drop_moved": [["mock_drop_moved", "assert_called_once_with", "mock_connect", "return_value"]], "mock_init": [["mock_init", "assert_not_called"], ["mock_init", "assert_called_once_with", "session", "session_mock"]], "self": [], "skip_init": [["resetdb", "session_mock", "skip_init", "skip_init"]]}, "params_p": {"args": [], "kwargs": [], "mock_connect": [["unittesmock.MagicMock", 0.12982363836935973], ["mock.MagicMock", 0.0821182880915782]], "mock_drop_airflow": [["unittesmock.MagicMock", 0.08486769100023689], ["mock.Mock", 0.08356857569598555]], "mock_drop_moved": [["unittesmock.MagicMock", 0.08486769100023689], ["mock.Mock", 0.08356857569598555]], "mock_init": [["unittesmock.MagicMock", 0.4100363461461628], ["mock.Mock", 0.09119575361393466]], "self": [], "skip_init": [["unittesmock.MagicMock", 0.09837457572014967]]}, "q_name": "TestDb.test_resetdb", "ret_exprs": [], "ret_type": "", "variables": {"session_mock": ""}, "variables_p": {"session_mock": [["mock.Mock", 0.09069578918367989], ["unittesmock.MagicMock", 0.08717289424142936], ["mock.MagicMock", 0.08003052048458334]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[242, 4], [253, 104]], "fn_var_ln": {"config": [[250, 8], [250, 14]]}, "fn_var_occur": {"config": [["config", "_get_alembic_config"], ["config", "config_file_name"], ["config", "_get_alembic_config"], ["config", "config_file_name", "os", "path", "join", "os", "path", "dirname", "airflow", "__file__"]]}, "name": "test_alembic_configuration", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDb.test_alembic_configuration", "ret_exprs": [], "ret_type": "", "variables": {"config": ""}, "variables_p": {"config": [["Dict[str, Any]", 0.8070121764767361], ["Dict[str, Union[int, str]]", 0.10691176500363565], ["Dict[str, str]", 0.08607605851962834]]}}], "name": "TestDb", "q_name": "TestDb", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "inspect", "io", "os", "re", "contextlib", "redirect_stdout", "unittest", "mock", "unittest", "mock", "MagicMock", "pytest", "alembic", "autogenerate", "compare_metadata", "alembic", "config", "Config", "alembic", "migration", "MigrationContext", "alembic", "runtime", "environment", "EnvironmentContext", "alembic", "script", "ScriptDirectory", "sqlalchemy", "MetaData", "airflow", "exceptions", "AirflowException", "airflow", "models", "Base", "airflow_base", "airflow", "settings", "engine", "airflow", "utils", "db", "_get_alembic_config", "check_migrations", "compare_server_default", "compare_type", "create_default_connections", "create_session", "downgrade", "resetdb", "upgradedb", "airflow.models", "airflow", "settings", "engine", "airflow"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 56}, "session_id": "_AGOq4nEdUwdMGPlV4JqeJnIHe4NzOnFzEFo6x3PPy0", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}