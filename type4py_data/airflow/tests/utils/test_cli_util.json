{"error": null, "response": {"classes": [{"cls_lc": [[42, 0], [170, 38]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[43, 4], [60, 42]], "fn_var_ln": {"exec_date": [[45, 8], [45, 17]], "expected": [[49, 8], [49, 16]], "func_name": [[44, 8], [44, 17]], "metrics": [[47, 8], [47, 15]], "namespace": [[46, 8], [46, 17]]}, "fn_var_occur": {"exec_date": [["exec_date", "timezone", "utcnow"], ["namespace", "Namespace", "dag_id", "task_id", "subcommand", "execution_date", "exec_date"], ["expected", "os", "environ", "get", "exec_date"]], "expected": [["expected", "os", "environ", "get", "exec_date"], ["expected", "items"]], "func_name": [["metrics", "cli", "_build_metrics", "func_name", "namespace"]], "metrics": [["metrics", "cli", "_build_metrics", "func_name", "namespace"], ["v", "metrics", "get", "k"], ["metrics", "get", "datetime", "utcnow"], ["metrics", "get"]], "namespace": [["namespace", "Namespace", "dag_id", "task_id", "subcommand", "execution_date", "exec_date"], ["metrics", "cli", "_build_metrics", "func_name", "namespace"]]}, "name": "test_metrics_build", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_metrics_build", "ret_exprs": [], "ret_type": "", "variables": {"exec_date": "", "expected": "", "func_name": "", "metrics": "", "namespace": ""}, "variables_p": {"exec_date": [["datetime.datetime", 0.17968593973855002], ["str", 0.13390705840665187], ["datetime.datetime.date", 0.11201818608291714], ["list", 0.10772692815554129], ["Pattern[str]", 0.10448435313935675], ["datetime.datetime.datetime", 0.09580187112525998]], "expected": [["str", 0.4641039873407829], ["Dict[str, str]", 0.35769196804267656], ["datetime.timedelta", 0.09036963212567224], ["pathlib.Path", 0.08783441249086843]], "func_name": [["str", 1.0]], "metrics": [["dict", 0.14456279170735634], ["list", 0.11905520297766864], ["Tuple[Any, Any, Any]", 0.10185910698658644], ["str", 0.09704466998343253], ["bool", 0.09597089189358513], ["Dict[str, str]", 0.0924061713527884], ["Optional[str]", 0.08015276759743309], ["List[str]", 0.08015276759743309]], "namespace": [["byceps.services.party.transfer.models.Party", 0.11560816202332146], ["ofxtools.models.signon.SONRS", 0.09835254649791811], ["cg_broker.models.Runner", 0.09796774320145697], ["Tuple[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]", 0.09767626463187384], ["buza.models.Subject", 0.08948778577406821], ["Dict[str, Callable]", 0.08796432138284407]]}}, {"docstring": {"func": "Actual function is failing and fail needs to be propagated.", "long_descr": null, "ret": ""}, "fn_lc": [[62, 4], [68, 34]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_fail_function", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_fail_function", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test success function but with failing callback.", "long_descr": "In this case, failure should not propagate.", "ret": ""}, "fn_lc": [[70, 4], [77, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_success_function", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_success_function", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[79, 4], [80, 97]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_process_subdir_path_with_placeholder", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_process_subdir_path_with_placeholder", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[82, 4], [90, 46]], "fn_var_ln": {"dags": [[86, 8], [86, 12]]}, "fn_var_occur": {"dags": [["dags", "cli", "get_dags", "None"], ["len", "dags"], ["dags", "cli", "get_dags", "None", "True"], ["len", "dags"]]}, "name": "test_get_dags", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_get_dags", "ret_exprs": [], "ret_type": "", "variables": {"dags": ""}, "variables_p": {"dags": [["Dict[int, Tuple[int, int]]", 0.41703643904659726], ["List[str]", 0.09753344214339425], ["int", 0.08277594301261004], ["dict", 0.08198325221163291], ["set", 0.07951164810515202]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[125, 4], [153, 42]], "fn_var_ln": {"args": [[130, 8], [130, 12]], "command": [[152, 8], [152, 15]], "exec_date": [[134, 8], [134, 17]], "expected_command": [[132, 8], [132, 24]], "log": [[146, 12], [146, 15]], "metrics": [[139, 12], [139, 19]], "namespace": [[135, 8], [135, 17]], "return_value": [[142, 12], [142, 44]]}, "fn_var_occur": {"args": [["args", "given_command", "split"], ["mock", "patch", "object", "sys", "args"], ["metrics", "cli", "_build_metrics", "args", "namespace"]], "command": [["command", "builtins", "str", "json", "loads", "log", "extra", "get"], ["command", "ast", "literal_eval", "command"], ["command", "expected_command"]], "exec_date": [["exec_date", "timezone", "utcnow"], ["namespace", "Namespace", "dag_id", "task_id", "subcommand", "execution_date", "exec_date"]], "expected_command": [["expected_command", "expected_masked_command", "split"], ["command", "expected_command"]], "log": [["log", "session", "query", "Log", "order_by", "Log", "dttm", "desc", "first"], ["command", "builtins", "str", "json", "loads", "log", "extra", "get"]], "metrics": [["metrics", "cli", "_build_metrics", "args", "namespace"], ["cli_action_loggers", "default_action_log", "metrics"], ["metrics", "get", "datetime", "utcnow"]], "namespace": [["namespace", "Namespace", "dag_id", "task_id", "subcommand", "execution_date", "exec_date"], ["metrics", "cli", "_build_metrics", "args", "namespace"]], "return_value": [["mock_create_session", "return_value", "session", "begin_nested"], ["mock_create_session", "return_value", "bulk_insert_mappings", "session", "bulk_insert_mappings"]]}, "name": "test_cli_create_user_supplied_password_is_masked", "params": {"expected_masked_command": "", "given_command": "", "self": "", "session": ""}, "params_descr": {"expected_masked_command": "", "given_command": "", "self": "", "session": ""}, "params_occur": {"expected_masked_command": [["expected_command", "expected_masked_command", "split"]], "given_command": [["args", "given_command", "split"]], "self": [], "session": [["mock_create_session", "return_value", "session", "begin_nested"], ["mock_create_session", "return_value", "bulk_insert_mappings", "session", "bulk_insert_mappings"], ["log", "session", "query", "Log", "order_by", "Log", "dttm", "desc", "first"]]}, "params_p": {"args": [], "expected_masked_command": [["bool", 0.3799578327298303], ["str", 0.20457540953976716], ["Optional[str]", 0.18022939911662594]], "given_command": [["Callable", 0.09787358788043378], ["Sequence[str]", 0.09325077981751734], ["argparse.Namespace", 0.08585574474946002]], "kwargs": [], "self": [], "session": [["str", 0.1867571664528645]]}, "q_name": "TestCliUtil.test_cli_create_user_supplied_password_is_masked", "ret_exprs": [], "ret_type": "", "variables": {"args": "", "command": "", "exec_date": "", "expected_command": "", "log": "", "metrics": "", "namespace": "", "return_value": ""}, "variables_p": {"args": [["argparse.Namespace", 0.7863313309268999], ["List[str]", 0.21366866907310028]], "command": [["str", 1.0]], "exec_date": [["datetime.datetime", 0.3892364046261816], ["datetime.datetime.timezone", 0.1882825949755242], ["Type[prm.journals.models.moods.Mood]", 0.12902747945545243], ["str", 0.09189864204997458], ["datetime.timedelta", 0.09023373025028612]], "expected_command": [["dict", 0.17986571137215512], ["Dict[str, Union[Any, Any, Any]]", 0.12664364732835548], ["list", 0.11777137521130981], ["Set[str]", 0.11709299240486312], ["str", 0.09177862390755773], ["requests.models.Response", 0.09117224465878143], ["List[dict]", 0.08009952799904027]], "log": [["str", 0.8358186855714994], ["deque", 0.08788139255163187], ["bool", 0.07629992187686874]], "metrics": [["str", 0.1212930640002305], ["Dict[str, Any]", 0.09844352775206361], ["int", 0.09183336987267854]], "namespace": [["Optional[Dict[str, Any]]", 0.13126005261432813], ["float", 0.09832988046216248], ["tuple", 0.09810054440701171], ["buza.models.Subject", 0.09356825701663699]], "return_value": [["str", 0.54171686010665], ["int", 0.22594605141178614]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[155, 4], [159, 35]], "fn_var_ln": {"_": [[158, 19], [158, 20]], "pid": [[158, 8], [158, 11]], "pid_full_path": [[157, 8], [157, 21]], "relative_pid_path": [[156, 8], [156, 25]]}, "fn_var_occur": {"_": [["pid", "_", "_", "_", "cli", "setup_locations", "process", "pid", "relative_pid_path"]], "pid": [["pid", "_", "_", "_", "cli", "setup_locations", "process", "pid", "relative_pid_path"], ["pid", "pid_full_path"]], "pid_full_path": [["pid_full_path", "os", "path", "join", "os", "getcwd", "relative_pid_path"], ["pid", "pid_full_path"]], "relative_pid_path": [["pid_full_path", "os", "path", "join", "os", "getcwd", "relative_pid_path"], ["pid", "_", "_", "_", "cli", "setup_locations", "process", "pid", "relative_pid_path"]]}, "name": "test_setup_locations_relative_pid_path", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_setup_locations_relative_pid_path", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "pid": "", "pid_full_path": "", "relative_pid_path": ""}, "variables_p": {"_": [["str", 0.3623099876719346], ["list", 0.19855038403762126], ["List[None]", 0.13067141793274065], ["dict", 0.11771412090518157], ["List[float]", 0.10384322628250021], ["Set[str]", 0.08691086317002174]], "pid": [["int", 0.25003017736725924], ["list", 0.1964182430508601], ["List[None]", 0.14484225148406862], ["Set[str]", 0.1127668769087741], ["List[float]", 0.10391451747075922], ["dict", 0.10355426970178067], ["Dict[str, str]", 0.08847366401649806]], "pid_full_path": [["str", 0.6245502356961314], ["List[str]", 0.2252468877771555], ["pathlib.Path", 0.15020287652671319]], "relative_pid_path": [["str", 0.6923803774398826], ["List[str]", 0.1828493464903902], ["Tuple[str, str, str]", 0.12477027606972725]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[161, 4], [164, 34]], "fn_var_ln": {"_": [[163, 19], [163, 20]], "abs_pid_path": [[162, 8], [162, 20]], "pid": [[163, 8], [163, 11]]}, "fn_var_occur": {"_": [["pid", "_", "_", "_", "cli", "setup_locations", "process", "pid", "abs_pid_path"]], "abs_pid_path": [["abs_pid_path", "os", "path", "join", "os", "getcwd"], ["pid", "_", "_", "_", "cli", "setup_locations", "process", "pid", "abs_pid_path"], ["pid", "abs_pid_path"]], "pid": [["pid", "_", "_", "_", "cli", "setup_locations", "process", "pid", "abs_pid_path"], ["pid", "abs_pid_path"]]}, "name": "test_setup_locations_absolute_pid_path", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_setup_locations_absolute_pid_path", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "abs_pid_path": "", "pid": ""}, "variables_p": {"_": [["str", 0.3623099876719346], ["list", 0.19855038403762126], ["List[None]", 0.13067141793274065], ["dict", 0.11771412090518157], ["List[float]", 0.10384322628250021], ["Set[str]", 0.08691086317002174]], "abs_pid_path": [["str", 0.8631042227038671], ["Tuple[str, str, str]", 0.13689577729613298]], "pid": [["int", 0.25003017736725924], ["list", 0.1964182430508601], ["List[None]", 0.14484225148406862], ["Set[str]", 0.1127668769087741], ["List[float]", 0.10391451747075922], ["dict", 0.10355426970178067], ["Dict[str, str]", 0.08847366401649806]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[166, 4], [170, 38]], "fn_var_ln": {"_": [[169, 19], [169, 20]], "default_pid_path": [[168, 8], [168, 24]], "pid": [[169, 8], [169, 11]], "process_name": [[167, 8], [167, 20]]}, "fn_var_occur": {"_": [["pid", "_", "_", "_", "cli", "setup_locations", "process", "process_name"]], "default_pid_path": [["default_pid_path", "os", "path", "join", "settings", "AIRFLOW_HOME", "process_name"], ["pid", "default_pid_path"]], "pid": [["pid", "_", "_", "_", "cli", "setup_locations", "process", "process_name"], ["pid", "default_pid_path"]], "process_name": [["default_pid_path", "os", "path", "join", "settings", "AIRFLOW_HOME", "process_name"], ["pid", "_", "_", "_", "cli", "setup_locations", "process", "process_name"]]}, "name": "test_setup_locations_none_pid_path", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCliUtil.test_setup_locations_none_pid_path", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "default_pid_path": "", "pid": "", "process_name": ""}, "variables_p": {"_": [["list", 0.30158392617113694], ["Dict[str, str]", 0.2787113446901893], ["Callable(chr)[[int], str]", 0.18580756312679286], ["List[None]", 0.14099338444848453], ["str", 0.09290378156339643]], "default_pid_path": [["str", 0.9999999999999997]], "pid": [["Dict[str, str]", 0.26784502846998914], ["str", 0.18921447243826597], ["Callable(chr)[[int], str]", 0.1785633523133261], ["tuple", 0.1416654685901588], ["List[None]", 0.126078718515534], ["bool", 0.09663295967272605]], "process_name": [["str", 1.0000000000000002]]}}], "name": "TestCliUtil", "q_name": "TestCliUtil", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[178, 4], [179, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fail_callback", "params": {"_": ""}, "params_descr": {"_": ""}, "params_occur": {"_": []}, "params_p": {"_": [["int", 0.19999999999999998], ["str", 0.19999999999999998], ["Iterable['Context']", 0.09999999999999999], ["dict", 0.09999999999999999], ["bool", 0.09999999999999999]], "args": [], "kwargs": []}, "q_name": "fail_action_logger_callback.<locals>.fail_callback", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Adding failing callback and revert it back when closed.", "long_descr": null, "ret": null}, "fn_lc": [[174, 0], [183, 49]], "fn_var_ln": {"__pre_exec_callbacks": [[183, 4], [183, 43]], "tmp": [[176, 4], [176, 7]]}, "fn_var_occur": {"__pre_exec_callbacks": [["cli_action_loggers", "__pre_exec_callbacks", "tmp"]], "tmp": [["cli_action_loggers", "__pre_exec_callbacks", "tmp"]]}, "name": "fail_action_logger_callback", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "fail_action_logger_callback", "ret_exprs": [], "ret_type": "", "variables": {"__pre_exec_callbacks": "", "tmp": ""}, "variables_p": {"__pre_exec_callbacks": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "tmp": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[187, 0], [188, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fail_func", "params": {"_": ""}, "params_descr": {"_": ""}, "params_occur": {"_": []}, "params_p": {"_": [["List[Dict[str, Any]]", 0.4285714281879751], ["str", 0.2857142854586501], ["int", 0.14285714272932504]], "args": [], "kwargs": []}, "q_name": "fail_func", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[192, 0], [193, 8]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "success_func", "params": {"_": ""}, "params_descr": {"_": ""}, "params_occur": {"_": []}, "params_p": {"_": [["List[Dict[str, Any]]", 0.4285714281879751], ["str", 0.2857142854586501], ["int", 0.14285714272932504]], "args": [], "kwargs": []}, "q_name": "success_func", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[196, 0], [209, 61]], "fn_var_ln": {"dags_folder": [[197, 4], [197, 15]], "existing_folder": [[205, 4], [205, 19]]}, "fn_var_occur": {"dags_folder": [["dags_folder", "settings", "DAGS_FOLDER"], ["_search_for_dag_file", "str", "Path", "dags_folder"]], "existing_folder": [["existing_folder", "Path", "settings", "DAGS_FOLDER"], ["existing_folder", "exists"], ["_search_for_dag_file", "existing_folder", "as_posix", "None"]]}, "name": "test__search_for_dags_file", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test__search_for_dags_file", "ret_exprs": [], "ret_type": "", "variables": {"dags_folder": "", "existing_folder": ""}, "variables_p": {"dags_folder": [["pathlib.Path", 0.46813130610727394], ["str", 0.4395187443241633], ["argparse.Namespace", 0.09234994956856288]], "existing_folder": [["str", 0.3221759963487738], ["argparse.Namespace", 0.10954103347676074], ["pathlib.Path", 0.1022730794976284]]}}], "imports": ["__future__", "annotations", "ast", "json", "os", "sys", "argparse", "Namespace", "contextlib", "contextmanager", "datetime", "datetime", "pathlib", "Path", "unittest", "mock", "pytest", "airflow", "airflow", "settings", "airflow", "exceptions", "AirflowException", "airflow", "models", "log", "Log", "airflow", "utils", "cli", "cli_action_loggers", "timezone", "airflow", "utils", "cli", "_search_for_dag_file"], "mod_var_ln": {"repo_root": [[39, 0], [39, 9]]}, "mod_var_occur": {"repo_root": []}, "no_types_annot": {"D": 0, "I": 0, "U": 50}, "session_id": "NGuw579bbQS_NYnM0ndZTppgXt0NBY2LByoKPsVY4P0", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"repo_root": ""}, "variables_p": {"repo_root": [["str", 0.9999999989102197], ["pathlib.Path", 2.9588555511373894e-10], ["Optional[pathlib.Path]", 2.9588555511373894e-10]]}}}