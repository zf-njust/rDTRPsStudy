{"error": null, "response": {"classes": [{"cls_lc": [[71, 0], [206, 9]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[72, 4], [73, 63]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_forbidden_no_auth", "params": {"client": "flask.testing.FlaskClient", "self": ""}, "params_descr": {"client": "", "self": ""}, "params_occur": {"client": [["client", "get", "status_code"]], "self": []}, "params_p": {"args": [], "client": [["aiohttp.test_utils.TestClient", 0.5034371771228272], ["flask.testing.FlaskClient", 0.08718292008405155]], "kwargs": [], "self": []}, "q_name": "TestServeLogs.test_forbidden_no_auth", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[75, 4], [83, 42]], "fn_var_ln": {"response": [[76, 8], [76, 16]]}, "fn_var_occur": {"response": [["response", "client", "get", "headers", "signer", "generate_signed_token"], ["response", "data", "decode", "LOG_DATA"], ["response", "status_code"]]}, "name": "test_should_serve_file", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["response", "client", "get", "headers", "signer", "generate_signed_token"]], "self": [], "signer": [["response", "client", "get", "headers", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["aiohttp.test_utils.TestClient", 0.221412310467927]], "kwargs": [], "self": [], "signer": [["aiohttp.test_utils.TestClient", 0.221412310467927]]}, "q_name": "TestServeLogs.test_should_serve_file", "ret_exprs": [], "ret_type": "", "variables": {"response": ""}, "variables_p": {"response": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[85, 4], [92, 42]], "fn_var_ln": {"response": [[86, 8], [86, 16]]}, "fn_var_occur": {"response": [["response", "client", "get", "headers", "signer", "generate_signed_token"], ["response", "status_code"]]}, "name": "test_forbidden_different_logname", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["response", "client", "get", "headers", "signer", "generate_signed_token"]], "self": [], "signer": [["response", "client", "get", "headers", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["aiohttp.test_utils.TestClient", 0.10460052556662393]], "kwargs": [], "self": [], "signer": [["aiohttp.test_utils.TestClient", 0.10460052556662393]]}, "q_name": "TestServeLogs.test_forbidden_different_logname", "ret_exprs": [], "ret_type": "", "variables": {"response": ""}, "variables_p": {"response": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[94, 4], [105, 9]], "fn_var_ln": {"token": [[96, 12], [96, 17]]}, "fn_var_occur": {"token": [["token", "signer", "generate_signed_token"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_forbidden_expired", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["client", "get", "headers", "token", "status_code"]], "self": [], "signer": [["token", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["int", 0.10798291901152136]], "kwargs": [], "self": [], "signer": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.2526751278065283], ["Dict[str, Sequence[Any]]", 0.08522457807802852]]}, "q_name": "TestServeLogs.test_forbidden_expired", "ret_exprs": [], "ret_type": "", "variables": {"token": ""}, "variables_p": {"token": [["str", 0.344150607616497], ["Dict[str, str]", 0.1034728500071259], ["bytes", 0.08254467173376673]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[107, 4], [118, 9]], "fn_var_ln": {"token": [[109, 12], [109, 17]]}, "fn_var_occur": {"token": [["token", "signer", "generate_signed_token"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_forbidden_future", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["client", "get", "headers", "token", "status_code"]], "self": [], "signer": [["token", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["int", 0.10798291901152136]], "kwargs": [], "self": [], "signer": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.2526751278065283], ["Dict[str, Sequence[Any]]", 0.08522457807802852]]}, "q_name": "TestServeLogs.test_forbidden_future", "ret_exprs": [], "ret_type": "", "variables": {"token": ""}, "variables_p": {"token": [["str", 0.344150607616497], ["Dict[str, str]", 0.1034728500071259], ["bytes", 0.08254467173376673]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[120, 4], [131, 9]], "fn_var_ln": {"token": [[122, 12], [122, 17]]}, "fn_var_occur": {"token": [["token", "signer", "generate_signed_token"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_ok_with_short_future_skew", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["client", "get", "headers", "token", "status_code"]], "self": [], "signer": [["token", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["int", 0.10798291901152136]], "kwargs": [], "self": [], "signer": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.2526751278065283], ["Dict[str, Sequence[Any]]", 0.08522457807802852]]}, "q_name": "TestServeLogs.test_ok_with_short_future_skew", "ret_exprs": [], "ret_type": "", "variables": {"token": ""}, "variables_p": {"token": [["str", 0.344150607616497], ["Dict[str, str]", 0.1034728500071259], ["bytes", 0.08254467173376673]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[133, 4], [144, 9]], "fn_var_ln": {"token": [[135, 12], [135, 17]]}, "fn_var_occur": {"token": [["token", "signer", "generate_signed_token"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_ok_with_short_past_skew", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["client", "get", "headers", "token", "status_code"]], "self": [], "signer": [["token", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["int", 0.10798291901152136]], "kwargs": [], "self": [], "signer": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.2526751278065283], ["Dict[str, Sequence[Any]]", 0.08522457807802852]]}, "q_name": "TestServeLogs.test_ok_with_short_past_skew", "ret_exprs": [], "ret_type": "", "variables": {"token": ""}, "variables_p": {"token": [["str", 0.344150607616497], ["Dict[str, str]", 0.1034728500071259], ["bytes", 0.08254467173376673]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[146, 4], [157, 9]], "fn_var_ln": {"token": [[148, 12], [148, 17]]}, "fn_var_occur": {"token": [["token", "signer", "generate_signed_token"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_forbidden_with_long_future_skew", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["client", "get", "headers", "token", "status_code"]], "self": [], "signer": [["token", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["int", 0.10798291901152136]], "kwargs": [], "self": [], "signer": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.2526751278065283], ["Dict[str, Sequence[Any]]", 0.08522457807802852]]}, "q_name": "TestServeLogs.test_forbidden_with_long_future_skew", "ret_exprs": [], "ret_type": "", "variables": {"token": ""}, "variables_p": {"token": [["str", 0.344150607616497], ["Dict[str, str]", 0.1034728500071259], ["bytes", 0.08254467173376673]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[159, 4], [170, 9]], "fn_var_ln": {"token": [[161, 12], [161, 17]]}, "fn_var_occur": {"token": [["token", "signer", "generate_signed_token"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_forbidden_with_long_past_skew", "params": {"client": "flask.testing.FlaskClient", "self": "", "signer": ""}, "params_descr": {"client": "", "self": "", "signer": ""}, "params_occur": {"client": [["client", "get", "headers", "token", "status_code"]], "self": [], "signer": [["token", "signer", "generate_signed_token"]]}, "params_p": {"args": [], "client": [["int", 0.10798291901152136]], "kwargs": [], "self": [], "signer": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.2526751278065283], ["Dict[str, Sequence[Any]]", 0.08522457807802852]]}, "q_name": "TestServeLogs.test_forbidden_with_long_past_skew", "ret_exprs": [], "ret_type": "", "variables": {"token": ""}, "variables_p": {"token": [["str", 0.344150607616497], ["Dict[str, str]", 0.1034728500071259], ["bytes", 0.08254467173376673]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[172, 4], [181, 9]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_wrong_audience", "params": {"client": "flask.testing.FlaskClient", "different_audience": "", "self": ""}, "params_descr": {"client": "", "different_audience": "", "self": ""}, "params_occur": {"client": [["client", "get", "headers", "different_audience", "generate_signed_token", "status_code"]], "different_audience": [["client", "get", "headers", "different_audience", "generate_signed_token", "status_code"]], "self": []}, "params_p": {"args": [], "client": [["aiohttp.test_utils.TestClient", 0.6033666791775353], ["flask.testing.FlaskClient", 0.13876617081040796]], "different_audience": [["aiohttp.test_utils.TestClient", 0.6033666791775353], ["flask.testing.FlaskClient", 0.13876617081040796]], "kwargs": [], "self": []}, "q_name": "TestServeLogs.test_wrong_audience", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[184, 4], [206, 9]], "fn_var_ln": {"jwt_dict": [[185, 8], [185, 16]], "token": [[193, 8], [193, 13]]}, "fn_var_occur": {"jwt_dict": [["jwt_dict", "datetime", "datetime", "utcnow", "datetime", "datetime", "utcnow", "datetime", "datetime", "utcnow", "datetime", "timedelta", "seconds"], ["jwt_dict", "claim_to_remove"], ["jwt_dict", "update"], ["token", "jwt", "encode", "jwt_dict", "secret_key", "algorithm"]], "token": [["token", "jwt", "encode", "jwt_dict", "secret_key", "algorithm"], ["client", "get", "headers", "token", "status_code"]]}, "name": "test_missing_claims", "params": {"claim_to_remove": "builtins.str", "client": "flask.testing.FlaskClient", "secret_key": "", "self": ""}, "params_descr": {"claim_to_remove": "", "client": "", "secret_key": "", "self": ""}, "params_occur": {"claim_to_remove": [["jwt_dict", "claim_to_remove"]], "client": [["client", "get", "headers", "token", "status_code"]], "secret_key": [["token", "jwt", "encode", "jwt_dict", "secret_key", "algorithm"]], "self": []}, "params_p": {"args": [], "claim_to_remove": [["str", 0.07198832308180715], ["dict", 0.07038694432812825]], "client": [["str", 0.1177854030007272], ["Type[Any]", 0.09443704119817176], ["int", 0.09443704119817176], ["bytes", 0.08875458877217277]], "kwargs": [], "secret_key": [["str", 0.4219231231920444], ["Set[str]", 0.1920492306499661], ["List[str]", 0.09602461532498305], ["bytes", 0.0904643828450738]], "self": []}, "q_name": "TestServeLogs.test_missing_claims", "ret_exprs": [], "ret_type": "", "variables": {"jwt_dict": "", "token": ""}, "variables_p": {"jwt_dict": [["Dict[str, datetime.datetime]", 0.6050030188420277], ["Dict[str, datetime.date]", 0.17559737171024697], ["datetime.datetime", 0.11557959928780544]], "token": [["Dict[Any, str]", 0.4561321827984572], ["Dict[str, Tuple[str]]", 0.1530233428057216], ["Dict[str, List[str]]", 0.10484946689921025], ["str", 0.10366126609964488]]}}], "name": "TestServeLogs", "q_name": "TestServeLogs", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[37, 0], [41, 31]], "fn_var_ln": {"app": [[39, 8], [39, 11]]}, "fn_var_occur": {"app": [["app", "create_app"], ["app", "test_client"]]}, "name": "client", "params": {"tmpdir": ""}, "params_descr": {"tmpdir": ""}, "params_occur": {"tmpdir": [["conf_vars", "str", "tmpdir"]]}, "params_p": {"args": [], "kwargs": [], "tmpdir": [["int", 0.3271624099810446], ["Dict[str, Any]", 0.08904638612312694]]}, "q_name": "client", "ret_exprs": [], "ret_type": "", "variables": {"app": ""}, "variables_p": {"app": [["flask.app.Flask", 0.8957448363992473]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[45, 0], [49, 12]], "fn_var_ln": {"f": [[46, 4], [46, 5]]}, "fn_var_occur": {"f": [["f", "tmpdir"], ["f", "write", "LOG_DATA", "encode"]]}, "name": "sample_log", "params": {"tmpdir": ""}, "params_descr": {"tmpdir": ""}, "params_occur": {"tmpdir": [["f", "tmpdir"]]}, "params_p": {"args": [], "kwargs": [], "tmpdir": [["str", 0.4060788987493304], ["List[bytes]", 0.12947826412442728], ["Iterable[float]", 0.12947826412442728], ["type", 0.0995246069777454], ["int", 0.07847998867468987]]}, "q_name": "sample_log", "ret_exprs": ["return f"], "ret_type": "", "ret_type_p": [["str", 0.7772115905168224], ["float", 0.11139420474158872]], "variables": {"f": ""}, "variables_p": {"f": [["str", 0.3190340301585344], ["TextIO", 0.23506294740453376], ["Dict[str, str]", 0.10302070751862293]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[53, 0], [58, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "signer", "params": {"secret_key": ""}, "params_descr": {"secret_key": ""}, "params_occur": {"secret_key": [["JWTSigner", "secret_key", "secret_key", "expiration_time_in_seconds", "audience"]]}, "params_p": {"args": [], "kwargs": [], "secret_key": [["int", 0.5396290634934016], ["bytes", 0.18487774903870322], ["float", 0.0927669111304766], ["Optional[bool]", 0.09191287963057651]]}, "q_name": "signer", "ret_exprs": ["return JWTSigner( secret_key=secret_key, expiration_time_in_seconds=30, audience=\"task-instance-logs\",)"], "ret_type": "", "ret_type_p": [["str", 0.30426106920669055], ["bool", 0.19614940937984066]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[62, 0], [67, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "different_audience", "params": {"secret_key": ""}, "params_descr": {"secret_key": ""}, "params_occur": {"secret_key": [["JWTSigner", "secret_key", "secret_key", "expiration_time_in_seconds", "audience"]]}, "params_p": {"args": [], "kwargs": [], "secret_key": [["int", 0.5396290634934016], ["bytes", 0.18487774903870322], ["float", 0.0927669111304766], ["Optional[bool]", 0.09191287963057651]]}, "q_name": "different_audience", "ret_exprs": ["return JWTSigner( secret_key=secret_key, expiration_time_in_seconds=30, audience=\"different-audience\",)"], "ret_type": "", "ret_type_p": [["str", 0.30426106920669055], ["bool", 0.19614940937984066]], "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "datetime", "typing", "TYPE_CHECKING", "jwt", "pytest", "time_machine", "airflow", "utils", "jwt_signer", "JWTSigner", "airflow", "utils", "serve_logs", "create_app", "tests", "test_utils", "config", "conf_vars", "flask", "testing", "FlaskClient"], "mod_var_ln": {"LOG_DATA": [[33, 0], [33, 8]]}, "mod_var_occur": {"LOG_DATA": [["f", "write", "LOG_DATA", "encode"], ["response", "data", "decode", "LOG_DATA"]]}, "no_types_annot": {"D": 12, "I": 0, "U": 42}, "session_id": "cEMYzBLDjneP0nB3fX1s_VFXSYUVAjtWeRqPB5FH-nU", "set": null, "tc": [false, null], "type_annot_cove": 0.22, "typed_seq": "", "untyped_seq": "", "variables": {"LOG_DATA": ""}, "variables_p": {"LOG_DATA": [["bytes", 0.32111923752681876], ["str", 0.18352956035375156], ["Optional[bytes]", 0.09649591467210189], ["Dict[str, Union[str, Any]]", 0.09479344878655799]]}}}