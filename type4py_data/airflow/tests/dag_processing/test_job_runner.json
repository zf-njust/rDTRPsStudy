{"error": null, "response": {"classes": [{"cls_lc": [[70, 0], [113, 36]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[73, 4], [80, 27]], "fn_var_ln": {"_result": [[80, 8], [80, 20]], "_waitable_handle": [[79, 8], [79, 29]], "readable": [[76, 8], [76, 16]], "writable": [[76, 18], [76, 26]]}, "fn_var_occur": {"_result": [["self", "_result"]], "_waitable_handle": [["self", "_waitable_handle", "readable"]], "readable": [["readable", "writable", "multiprocessing", "Pipe", "duplex", "False"], ["self", "_waitable_handle", "readable"]], "writable": [["readable", "writable", "multiprocessing", "Pipe", "duplex", "False"], ["writable", "send"], ["writable", "close"]]}, "name": "__init__", "params": {"callbacks": "", "dag_directory": "", "dag_ids": "", "file_path": "", "pickle_dags": "", "self": ""}, "params_descr": {"callbacks": "", "dag_directory": "", "dag_ids": "", "file_path": "", "pickle_dags": "", "self": ""}, "params_occur": {"callbacks": [["super", "__init__", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callbacks"]], "dag_directory": [["super", "__init__", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callbacks"]], "dag_ids": [["super", "__init__", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callbacks"]], "file_path": [["super", "__init__", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callbacks"]], "pickle_dags": [["super", "__init__", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callbacks"]], "self": [["self", "_waitable_handle", "readable"], ["self", "_result"]]}, "params_p": {"args": [], "callbacks": [["str", 0.5396359624424448], ["Optional[str]", 0.29532559425421406], ["bool", 0.08845989716803428]], "dag_directory": [["str", 0.5396359624424448], ["Optional[str]", 0.29532559425421406], ["bool", 0.08845989716803428]], "dag_ids": [["str", 0.5396359624424448], ["Optional[str]", 0.29532559425421406], ["bool", 0.08845989716803428]], "file_path": [["str", 0.5396359624424448], ["Optional[str]", 0.29532559425421406], ["bool", 0.08845989716803428]], "kwargs": [], "pickle_dags": [["str", 0.5396359624424448], ["Optional[str]", 0.29532559425421406], ["bool", 0.08845989716803428]], "self": []}, "q_name": "FakeDagFileProcessorRunner.__init__", "ret_exprs": [], "ret_type": "", "variables": {"_result": "", "_waitable_handle": "", "readable": "", "writable": ""}, "variables_p": {"_result": [["str", 0.9999999997895083], ["int", 5.7423418572350405e-11], ["List[str]", 2.07418574924253e-11]], "_waitable_handle": [["str", 0.30000000000000004], ["Dict[str, Any]", 0.1], ["dict", 0.1], ["int", 0.1]], "readable": [["pathlib.Path", 0.21067734370458494], ["int", 0.11210340925871994], ["slice", 0.10013462248394697], ["bool", 0.0994894278288624], ["float", 0.09582744482943381], ["List[str]", 0.09582744482943381], ["str", 0.09428541740615062]], "writable": [["str", 0.447717071226835], ["bool", 0.1888541449789644], ["List[str]", 0.08121043383433213]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[82, 4], [83, 12]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "start", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeDagFileProcessorRunner.start", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[86, 4], [87, 27]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "start_time", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeDagFileProcessorRunner.start_time", "ret_exprs": ["return DEFAULT_DATE"], "ret_type": "", "ret_type_p": [["int", 0.5866075036987903], ["str", 0.2248530673794198], ["List[str]", 0.09426971446089494], ["datetime.date", 0.09426971446089494]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[90, 4], [91, 19]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pid", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeDagFileProcessorRunner.pid", "ret_exprs": ["return 1234"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[94, 4], [95, 19]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "done", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeDagFileProcessorRunner.done", "ret_exprs": ["return True"], "ret_type": "", "ret_type_p": [["bool", 0.9999999999999999]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[98, 4], [99, 27]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "result", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_result"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeDagFileProcessorRunner.result", "ret_exprs": ["return self._result"], "ret_type": "", "ret_type_p": [["bool", 0.18736205222650315], ["zerver.models.Realm", 0.10679178180308398], ["int", 0.09981339561723243], ["str", 0.0956904006175478], ["Union[server.models.User, int]", 0.09093682101392933]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[102, 4], [109, 9]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_create_process", "params": {"callback_requests": "", "dag_directory": "", "dag_ids": "", "file_path": "", "pickle_dags": ""}, "params_descr": {"callback_requests": "", "dag_directory": "", "dag_ids": "", "file_path": "", "pickle_dags": ""}, "params_occur": {"callback_requests": [["FakeDagFileProcessorRunner", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callback_requests"]], "dag_directory": [["FakeDagFileProcessorRunner", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callback_requests"]], "dag_ids": [["FakeDagFileProcessorRunner", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callback_requests"]], "file_path": [["FakeDagFileProcessorRunner", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callback_requests"]], "pickle_dags": [["FakeDagFileProcessorRunner", "file_path", "pickle_dags", "dag_ids", "dag_directory", "callback_requests"]]}, "params_p": {"args": [], "callback_requests": [["str", 0.8010509980000573], ["Optional[str]", 0.10095580342574384], ["pathlib.Path", 0.09799319857419866]], "dag_directory": [["str", 0.8010509980000573], ["Optional[str]", 0.10095580342574384], ["pathlib.Path", 0.09799319857419866]], "dag_ids": [["str", 0.8010509980000573], ["Optional[str]", 0.10095580342574384], ["pathlib.Path", 0.09799319857419866]], "file_path": [["str", 0.8010509980000573], ["Optional[str]", 0.10095580342574384], ["pathlib.Path", 0.09799319857419866]], "kwargs": [], "pickle_dags": [["str", 0.8010509980000573], ["Optional[str]", 0.10095580342574384], ["pathlib.Path", 0.09799319857419866]], "self": []}, "q_name": "FakeDagFileProcessorRunner._create_process", "ret_exprs": ["return FakeDagFileProcessorRunner( file_path, pickle_dags, dag_ids, dag_directory, callback_requests,)"], "ret_type": "", "ret_type_p": [["bool", 0.4558615754188564], ["str", 0.3148487891512637], ["pathlib.Path", 0.11435504891687472]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[112, 4], [113, 36]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "waitable_handle", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_waitable_handle"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FakeDagFileProcessorRunner.waitable_handle", "ret_exprs": ["return self._waitable_handle"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}], "name": "FakeDagFileProcessorRunner", "q_name": "FakeDagFileProcessorRunner", "variables": {}, "variables_p": {}}, {"cls_lc": [[116, 0], [1285, 9]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[117, 4], [122, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.setup_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[124, 4], [128, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_class", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.teardown_class", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[130, 4], [145, 97]], "fn_var_ln": {"obj": [[140, 16], [140, 19]], "results": [[134, 8], [134, 15]]}, "fn_var_occur": {"obj": [["obj", "parent_pipe", "recv"], ["isinstance", "obj", "DagParsingStat"], ["results", "append", "obj"], ["obj", "done"]], "results": [["results", "append", "obj"]]}, "name": "run_processor_manager_one_loop", "params": {"manager": "", "parent_pipe": "", "self": ""}, "params_descr": {"manager": "", "parent_pipe": "", "self": ""}, "params_occur": {"manager": [["manager", "processor", "_async_mode"], ["manager", "processor", "_run_parsing_loop"]], "parent_pipe": [["parent_pipe", "send", "DagParsingSignal", "AGENT_RUN_ONCE"], ["parent_pipe", "poll", "timeout"], ["obj", "parent_pipe", "recv"]], "self": []}, "params_p": {"args": [], "kwargs": [], "manager": [["str", 0.4065147956998594], ["Tuple[str, str, List[str]]", 0.10711509187521016], ["raiden.utils.BlockIdentifier", 0.09281981536596809], ["Optional[str]", 0.09094119449983736], ["Dict[str, object]", 0.09094119449983736]], "parent_pipe": [["Type", 0.11586582142399944]], "self": []}, "q_name": "TestDagProcessorJobRunner.run_processor_manager_one_loop", "ret_exprs": ["return results"], "ret_type": "", "ret_type_p": [["str", 0.18965719117655988], ["int", 0.10960907329763242], ["Set[str]", 0.10036371431607206], ["Mapping[str, int]", 0.09855430037701246], ["bool", 0.09718479569847169], ["\"Parameter\"", 0.0946750863556354]], "variables": {"obj": "", "results": ""}, "variables_p": {"obj": [["dict", 0.18071290522149186], ["starfish.core.intensity_table.intensity_table.IntensityTable", 0.10155270837739522], ["str", 0.08277588191700413]], "results": [["list", 0.666666666648512], ["str", 2.0908523957955214e-11], ["Dict[str, Any]", 4.628913987374009e-12], ["List[str]", 3.704937597441627e-12]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[148, 4], [187, 27]], "fn_var_ln": {"async_mode": [[157, 8], [157, 18]], "child_pipe": [[155, 8], [155, 18]], "filename_to_parse": [[149, 8], [149, 25]], "import_errors": [[181, 12], [181, 25]], "manager": [[158, 8], [158, 15]], "parent_pipe": [[155, 20], [155, 31]]}, "fn_var_occur": {"async_mode": [["async_mode", "conf", "get"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"], ["child_pipe", "close"]], "filename_to_parse": [["filename_to_parse", "tmpdir"], ["open", "filename_to_parse", "file_to_parse"], ["filename_to_parse", "remove"]], "import_errors": [["import_errors", "session", "query", "errors", "ImportError", "all"], ["len", "import_errors"], ["import_errors", "session", "query", "errors", "ImportError", "all"], ["len", "import_errors"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["parent_pipe", "close"]]}, "name": "test_remove_file_clears_import_error", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "tmpdir": [["filename_to_parse", "tmpdir"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": []}, "q_name": "TestDagProcessorJobRunner.test_remove_file_clears_import_error", "ret_exprs": [], "ret_type": "", "variables": {"async_mode": "", "child_pipe": "", "filename_to_parse": "", "import_errors": "", "manager": "", "parent_pipe": ""}, "variables_p": {"async_mode": [["str", 0.790535804326527], ["dict", 0.11658051518161985], ["Dict[Any, str]", 0.0928836804918532]], "child_pipe": [["int", 0.2504908973023042], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17566987461245318], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.17566987461245318]], "filename_to_parse": [["str", 0.4843766728509598], ["pathlib.Path", 0.09448042614246478], ["int", 0.09360285121437378], ["Dict[str, int]", 0.09300581725432903]], "import_errors": [["str", 0.7556659002868844], ["List[str]", 0.24433409971311565]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.09122477996159815], ["float", 0.09122477996159815]], "parent_pipe": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[190, 4], [211, 27]], "fn_var_ln": {"async_mode": [[195, 12], [195, 22]], "child_pipe": [[192, 8], [192, 18]], "manager": [[196, 12], [196, 19]], "parent_pipe": [[192, 20], [192, 31]]}, "fn_var_occur": {"async_mode": [["async_mode", "conf", "get"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dags_folder", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dags_folder", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"], ["child_pipe", "close"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dags_folder", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["parent_pipe", "close"]]}, "name": "test_max_runs_when_no_files", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_max_runs_when_no_files", "ret_exprs": [], "ret_type": "", "variables": {"async_mode": "", "child_pipe": "", "manager": "", "parent_pipe": ""}, "variables_p": {"async_mode": [["str", 0.891066809107907], ["dict", 0.10893319089209305]], "child_pipe": [["int", 0.2504908973023042], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17566987461245318], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.17566987461245318]], "manager": [["qiskiproviders.ibmq.job.ibmqjob.IBMQJob", 0.10401825008901028]], "parent_pipe": []}}, {"docstring": {"func": "Test that when a processor already exist with a filepath, a new processor won't be created", "long_descr": "with that filepath. The filepath will just be removed from the list.", "ret": null}, "fn_lc": [[215, 4], [251, 80]], "fn_var_ln": {"file_1": [[233, 8], [233, 14]], "file_2": [[234, 8], [234, 14]], "file_3": [[235, 8], [235, 14]], "manager": [[220, 8], [220, 15]]}, "fn_var_occur": {"file_1": [["manager", "processor", "_file_path_queue", "collections", "deque", "file_1", "file_2", "file_3"], ["manager", "processor", "_processors", "file_1", "MagicMock"], ["file_1", "manager", "processor", "_processors", "keys"]], "file_2": [["manager", "processor", "_file_path_queue", "collections", "deque", "file_1", "file_2", "file_3"], ["file_2", "manager", "processor", "_processors", "keys"]], "file_3": [["manager", "processor", "_file_path_queue", "collections", "deque", "file_1", "file_2", "file_3"], ["collections", "deque", "file_3", "manager", "processor", "_file_path_queue"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_file_path_queue", "collections", "deque", "file_1", "file_2", "file_3"], ["manager", "processor", "_processors", "file_1", "MagicMock"], ["manager", "processor", "start_new_processes"], ["file_1", "manager", "processor", "_processors", "keys"], ["file_2", "manager", "processor", "_processors", "keys"], ["collections", "deque", "file_3", "manager", "processor", "_file_path_queue"]]}, "name": "test_start_new_processes_with_same_filepath", "params": {"_": "", "self": ""}, "params_descr": {"_": "", "self": ""}, "params_occur": {"_": [], "self": []}, "params_p": {"_": [["str", 0.17299752331764812], ["List[str]", 0.09339522288878994]], "args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_start_new_processes_with_same_filepath", "ret_exprs": [], "ret_type": "", "variables": {"file_1": "", "file_2": "", "file_3": "", "manager": ""}, "variables_p": {"file_1": [["unittesmock.MagicMock", 0.33516305242766076], ["pathlib.Path", 0.2707061789899011], ["dict", 0.12151926469436111], ["list", 0.100106238657124], ["Dict[str, Any]", 0.08664817161874268], ["str", 0.08585709361221044]], "file_2": [["pathlib.Path", 0.5546653620354802], ["cutepaste.files.models.File", 0.15701942729148627], ["pathlib.PurePath", 0.0940309984158519], ["str", 0.08522820143671392]], "file_3": [["pathlib.Path", 0.6059947805589858], ["pathlib.PurePath", 0.10218978034396599], ["cutepaste.files.models.File", 0.10184001179468402]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[253, 4], [276, 70]], "fn_var_ln": {"manager": [[254, 8], [254, 15]], "mock_processor": [[267, 8], [267, 22]]}, "fn_var_occur": {"manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_processors", "mock_processor"], ["manager", "processor", "_file_stats", "DagFileStat", "None", "None"], ["manager", "processor", "set_file_paths"], ["manager", "processor", "_processors"], ["manager", "processor", "_file_stats"]], "mock_processor": [["mock_processor", "MagicMock"], ["mock_processor", "stop", "side_effect", "AttributeError"], ["mock_processor", "terminate", "side_effect", "None"], ["manager", "processor", "_processors", "mock_processor"]]}, "name": "test_set_file_paths_when_processor_file_path_not_in_new_file_paths", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_set_file_paths_when_processor_file_path_not_in_new_file_paths", "ret_exprs": [], "ret_type": "", "variables": {"manager": "", "mock_processor": ""}, "variables_p": {"manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "mock_processor": [["str", 0.35702526808295626], ["unittesmock.MagicMock", 0.25615415506459044], ["mock.Mock", 0.20456947677294113]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[278, 4], [299, 75]], "fn_var_ln": {"manager": [[279, 8], [279, 15]], "mock_processor": [[292, 8], [292, 22]]}, "fn_var_occur": {"manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_processors", "mock_processor"], ["manager", "processor", "set_file_paths"], ["manager", "processor", "_processors", "mock_processor"]], "mock_processor": [["mock_processor", "MagicMock"], ["mock_processor", "stop", "side_effect", "AttributeError"], ["mock_processor", "terminate", "side_effect", "None"], ["manager", "processor", "_processors", "mock_processor"], ["manager", "processor", "_processors", "mock_processor"]]}, "name": "test_set_file_paths_when_processor_file_path_is_in_new_file_paths", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_set_file_paths_when_processor_file_path_is_in_new_file_paths", "ret_exprs": [], "ret_type": "", "variables": {"manager": "", "mock_processor": ""}, "variables_p": {"manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "mock_processor": [["str", 0.35702526808295626], ["unittesmock.MagicMock", 0.25615415506459044], ["mock.Mock", 0.20456947677294113]]}}, {"docstring": {"func": "Test dag files are sorted alphabetically", "long_descr": null, "ret": null}, "fn_lc": [[306, 4], [331, 9]], "fn_var_ln": {"dag_files": [[310, 8], [310, 17]], "manager": [[313, 8], [313, 15]], "return_value": [[311, 8], [311, 35]]}, "fn_var_occur": {"dag_files": [["mock_find_path", "return_value", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"]], "return_value": [["mock_find_path", "return_value", "dag_files"]]}, "name": "test_file_paths_in_queue_sorted_alphabetically", "params": {"mock_find_path": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_descr": {"mock_find_path": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_occur": {"mock_find_path": [["mock_find_path", "return_value", "dag_files"]], "mock_isfile": [], "mock_might_contain_dag": [], "mock_zipfile": [], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_find_path": [["mock.MagicMock", 0.21125652946674056], ["unittesmock.MagicMock", 0.08962031606688868]], "mock_isfile": [["mock.Mock", 0.33253835909660556]], "mock_might_contain_dag": [["mock.Mock", 0.33253835909660556]], "mock_zipfile": [["mock.Mock", 0.33253835909660556]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_file_paths_in_queue_sorted_alphabetically", "ret_exprs": [], "ret_type": "", "variables": {"dag_files": "", "manager": "", "return_value": ""}, "variables_p": {"dag_files": [["str", 0.9173219732452665]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "return_value": [["List[Dict[str, Any]]", 0.19859580492429182], ["int", 0.19319276244331257], ["datetime.datetime.datetime", 0.16410480347099515], ["str", 0.15204694081414813], ["Dict[str, Union[Any, Any, Any]]", 0.11875087147775931], ["Dict[str, Union[int, str]]", 0.06126358331528927], ["Dict[str, Dict[str, Any]]", 0.05743200803379887]]}}, {"docstring": {"func": "Test files are randomly sorted and seeded by host name", "long_descr": null, "ret": null}, "fn_lc": [[338, 4], [369, 67]], "fn_var_ln": {"dag_files": [[342, 8], [342, 17]], "expected_order": [[362, 8], [362, 22]], "manager": [[345, 8], [345, 15]], "return_value": [[343, 8], [343, 35]]}, "fn_var_occur": {"dag_files": [["mock_find_path", "return_value", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"], ["expected_order", "collections", "deque", "dag_files"]], "expected_order": [["expected_order", "collections", "deque", "dag_files"], ["random", "Random", "get_hostname", "shuffle", "expected_order"], ["manager", "processor", "_file_path_queue", "expected_order"], ["manager", "processor", "_file_path_queue", "expected_order"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "expected_order"], ["manager", "processor", "_file_paths"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "expected_order"]], "return_value": [["mock_find_path", "return_value", "dag_files"]]}, "name": "test_file_paths_in_queue_sorted_random_seeded_by_host", "params": {"mock_find_path": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_descr": {"mock_find_path": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_occur": {"mock_find_path": [["mock_find_path", "return_value", "dag_files"]], "mock_isfile": [], "mock_might_contain_dag": [], "mock_zipfile": [], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_find_path": [["mock.MagicMock", 0.21125652946674056], ["unittesmock.MagicMock", 0.08962031606688868]], "mock_isfile": [["mock.Mock", 0.33253835909660556]], "mock_might_contain_dag": [["mock.Mock", 0.33253835909660556]], "mock_zipfile": [["mock.Mock", 0.33253835909660556]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_file_paths_in_queue_sorted_random_seeded_by_host", "ret_exprs": [], "ret_type": "", "variables": {"dag_files": "", "expected_order": "", "manager": "", "return_value": ""}, "variables_p": {"dag_files": [["str", 0.8236828445944233]], "expected_order": [["list", 0.3204829454391604], ["int", 0.12496092030351175], ["multiprocessing.queues.Queue[Any]", 0.09382786031806173]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "return_value": [["List[Dict[str, Any]]", 0.19859580492429182], ["int", 0.19319276244331257], ["datetime.datetime.datetime", 0.16410480347099515], ["str", 0.15204694081414813], ["Dict[str, Union[Any, Any, Any]]", 0.11875087147775931], ["Dict[str, Union[int, str]]", 0.06126358331528927], ["Dict[str, Dict[str, Any]]", 0.05743200803379887]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[372, 4], [387, 19]], "fn_var_ln": {"tzset": [[378, 8], [378, 13]]}, "fn_var_occur": {"tzset": [["tzset", "getattr", "time", "None"], ["tzset", "None"], ["tzset", "None"]]}, "name": "change_platform_timezone", "params": {"monkeypatch": "", "self": ""}, "params_descr": {"monkeypatch": "", "self": ""}, "params_occur": {"monkeypatch": [["monkeypatch", "setenv"], ["monkeypatch", "delenv"]], "self": []}, "params_p": {"args": [], "kwargs": [], "monkeypatch": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "self": []}, "q_name": "TestDagProcessorJobRunner.change_platform_timezone", "ret_exprs": [], "ret_type": "", "variables": {"tzset": ""}, "variables_p": {"tzset": [["list", 0.29086721805950705], ["List[str]", 0.1097928142855858], ["Optional[str]", 0.10917425435259763], ["dict", 0.09808371082626384], ["bool", 0.0976002962077151], ["int", 0.0951242528878977]]}}, {"docstring": {"func": "Test files are sorted by modified time", "long_descr": null, "ret": null}, "fn_lc": [[395, 4], [428, 9]], "fn_var_ln": {"dag_files": [[406, 8], [406, 17]], "manager": [[410, 8], [410, 15]], "paths_with_mtime": [[405, 8], [405, 24]], "return_value": [[408, 8], [408, 35]], "side_effect": [[407, 8], [407, 33]]}, "fn_var_occur": {"dag_files": [["dag_files", "list", "paths_with_mtime", "keys"], ["mock_find_path", "return_value", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"]], "paths_with_mtime": [["dag_files", "list", "paths_with_mtime", "keys"], ["mock_getmtime", "side_effect", "list", "paths_with_mtime", "values"]], "return_value": [["mock_find_path", "return_value", "dag_files"]], "side_effect": [["mock_getmtime", "side_effect", "list", "paths_with_mtime", "values"]]}, "name": "test_file_paths_in_queue_sorted_by_modified_time", "params": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_descr": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_occur": {"change_platform_timezone": [], "mock_find_path": [["mock_find_path", "return_value", "dag_files"]], "mock_getmtime": [["mock_getmtime", "side_effect", "list", "paths_with_mtime", "values"]], "mock_isfile": [], "mock_might_contain_dag": [], "mock_zipfile": [], "self": []}, "params_p": {"args": [], "change_platform_timezone": [["mock.Mock", 0.19176602822773373], ["unittesmock.MagicMock", 0.18512370822819008], ["tests.async_mock.MagicMock", 0.09641251627533211]], "kwargs": [], "mock_find_path": [["unittesmock.MagicMock", 0.6059410681133953], ["mock.MagicMock", 0.2197746539521588]], "mock_getmtime": [["unittesmock.MagicMock", 0.39987491896748273], ["mock.Mock", 0.3997133384955277]], "mock_isfile": [["mock.Mock", 0.19176602822773373], ["unittesmock.MagicMock", 0.18512370822819008], ["tests.async_mock.MagicMock", 0.09641251627533211]], "mock_might_contain_dag": [["mock.Mock", 0.19176602822773373], ["unittesmock.MagicMock", 0.18512370822819008], ["tests.async_mock.MagicMock", 0.09641251627533211]], "mock_zipfile": [["mock.Mock", 0.19176602822773373], ["unittesmock.MagicMock", 0.18512370822819008], ["tests.async_mock.MagicMock", 0.09641251627533211]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_file_paths_in_queue_sorted_by_modified_time", "ret_exprs": [], "ret_type": "", "variables": {"dag_files": "", "manager": "", "paths_with_mtime": "", "return_value": "", "side_effect": ""}, "variables_p": {"dag_files": [["str", 0.5134357768912742], ["list", 0.2088103973560475], ["List[Tuple[str, str]]", 0.1187237797304042], ["Iterable[str]", 0.08305879002307817], ["List[str]", 0.07597125599919594]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "paths_with_mtime": [["str", 0.3650884138204253], ["Set[str]", 0.299256159460767], ["List[str]", 0.21755066337287177], ["list", 0.1181047633459359]], "return_value": [["List[Dict[str, Any]]", 0.19859580492429182], ["int", 0.19319276244331257], ["datetime.datetime.datetime", 0.16410480347099515], ["str", 0.15204694081414813], ["Dict[str, Union[Any, Any, Any]]", 0.11875087147775931], ["Dict[str, Union[int, str]]", 0.06126358331528927], ["Dict[str, Dict[str, Any]]", 0.05743200803379887]], "side_effect": [["List[str]", 0.3033527599550473], ["str", 0.18216489976743896], ["Tuple[str, str, str]", 0.10899537430426687], ["Tuple[str, str, str, str, str]", 0.10899537430426687], ["Type[Dict[str, Any]]", 0.10396817349720908], ["Iterator[str]", 0.09734796332986287], ["list", 0.09517545484190822]]}}, {"docstring": {"func": "Check that a file is not enqueued for processing if it has been deleted", "long_descr": null, "ret": null}, "fn_lc": [[436, 4], [465, 98]], "fn_var_ln": {"dag_files": [[446, 8], [446, 17]], "manager": [[450, 8], [450, 15]], "return_value": [[448, 8], [448, 35]], "side_effect": [[447, 8], [447, 33]]}, "fn_var_occur": {"dag_files": [["mock_find_path", "return_value", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"]], "return_value": [["mock_find_path", "return_value", "dag_files"]], "side_effect": [["mock_getmtime", "side_effect", "FileNotFoundError"]]}, "name": "test_file_paths_in_queue_excludes_missing_file", "params": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_descr": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_occur": {"change_platform_timezone": [], "mock_find_path": [["mock_find_path", "return_value", "dag_files"]], "mock_getmtime": [["mock_getmtime", "side_effect", "FileNotFoundError"]], "mock_isfile": [], "mock_might_contain_dag": [], "mock_zipfile": [], "self": []}, "params_p": {"args": [], "change_platform_timezone": [["tests.async_mock.MagicMock", 0.10322218897310095], ["unittesmock.MagicMock", 0.09789797778510588]], "kwargs": [], "mock_find_path": [["unittesmock.MagicMock", 0.6210877205961151], ["mock.MagicMock", 0.20796627896803566]], "mock_getmtime": [["unittesmock.MagicMock", 0.07460595921430471]], "mock_isfile": [["tests.async_mock.MagicMock", 0.10322218897310095], ["unittesmock.MagicMock", 0.09789797778510588]], "mock_might_contain_dag": [["tests.async_mock.MagicMock", 0.10322218897310095], ["unittesmock.MagicMock", 0.09789797778510588]], "mock_zipfile": [["tests.async_mock.MagicMock", 0.10322218897310095], ["unittesmock.MagicMock", 0.09789797778510588]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_file_paths_in_queue_excludes_missing_file", "ret_exprs": [], "ret_type": "", "variables": {"dag_files": "", "manager": "", "return_value": "", "side_effect": ""}, "variables_p": {"dag_files": [["str", 0.9173219732452665]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "return_value": [["List[Dict[str, Any]]", 0.19859580492429182], ["int", 0.19319276244331257], ["datetime.datetime.datetime", 0.16410480347099515], ["str", 0.15204694081414813], ["Dict[str, Union[Any, Any, Any]]", 0.11875087147775931], ["Dict[str, Union[int, str]]", 0.06126358331528927], ["Dict[str, Dict[str, Any]]", 0.05743200803379887]], "side_effect": [["str", 0.37080176454269076], ["mock._patch[Literal]", 0.09301507231955213], ["int", 0.08655833422117606]]}}, {"docstring": {"func": "Check that new file is added to parsing queue", "long_descr": null, "ret": null}, "fn_lc": [[473, 4], [510, 9]], "fn_var_ln": {"dag_files": [[483, 8], [483, 17]], "manager": [[487, 8], [487, 15]], "return_value": [[485, 8], [485, 35]], "side_effect": [[484, 8], [484, 33]]}, "fn_var_occur": {"dag_files": [["mock_find_path", "return_value", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "add_new_file_path_to_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"]], "return_value": [["mock_find_path", "return_value", "dag_files"]], "side_effect": [["mock_getmtime", "side_effect"]]}, "name": "test_add_new_file_to_parsing_queue", "params": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_descr": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_occur": {"change_platform_timezone": [], "mock_find_path": [["mock_find_path", "return_value", "dag_files"]], "mock_getmtime": [["mock_getmtime", "side_effect"]], "mock_isfile": [], "mock_might_contain_dag": [], "mock_zipfile": [], "self": []}, "params_p": {"args": [], "change_platform_timezone": [["unittesmock.MagicMock", 0.28666163619983265], ["mock.Mock", 0.20038101563596844]], "kwargs": [], "mock_find_path": [["unittesmock.MagicMock", 0.6912502819323082], ["mock.MagicMock", 0.22023220262372833]], "mock_getmtime": [["unittesmock.MagicMock", 0.5391286854219673], ["mock.MagicMock", 0.09029635421223302], ["mock.Mock", 0.08994172752544484]], "mock_isfile": [["unittesmock.MagicMock", 0.28666163619983265], ["mock.Mock", 0.20038101563596844]], "mock_might_contain_dag": [["unittesmock.MagicMock", 0.28666163619983265], ["mock.Mock", 0.20038101563596844]], "mock_zipfile": [["unittesmock.MagicMock", 0.28666163619983265], ["mock.Mock", 0.20038101563596844]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_add_new_file_to_parsing_queue", "ret_exprs": [], "ret_type": "", "variables": {"dag_files": "", "manager": "", "return_value": "", "side_effect": ""}, "variables_p": {"dag_files": [["str", 0.9999999999999998]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "return_value": [["List[Dict[str, Any]]", 0.19859580492429182], ["int", 0.19319276244331257], ["datetime.datetime.datetime", 0.16410480347099515], ["str", 0.15204694081414813], ["Dict[str, Union[Any, Any, Any]]", 0.11875087147775931], ["Dict[str, Union[int, str]]", 0.06126358331528927], ["Dict[str, Dict[str, Any]]", 0.05743200803379887]], "side_effect": [["str", 0.46146968833119484], ["List[Dict[str, float]]", 0.10543346334745063], ["Dict[str, Dict[str, str]]", 0.0831681400737581]]}}, {"docstring": {"func": "Test recently updated files are processed even if min_file_process_interval is not reached", "long_descr": null, "ret": null}, "fn_lc": [[519, 4], [578, 13]], "fn_var_ln": {"dag_files": [[533, 8], [533, 17]], "file_1_new_mtime": [[564, 8], [564, 24]], "file_1_new_mtime_ts": [[565, 8], [565, 27]], "freezed_base_time": [[531, 8], [531, 25]], "initial_file_1_mtime": [[532, 8], [532, 28]], "last_finish_time": [[551, 8], [551, 24]], "manager": [[537, 8], [537, 15]], "return_value": [[535, 8], [535, 35]], "side_effect": [[570, 12], [570, 37]]}, "fn_var_occur": {"dag_files": [["mock_find_path", "return_value", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "set_file_paths", "dag_files"]], "file_1_new_mtime": [["file_1_new_mtime", "freezed_base_time", "timedelta", "seconds"], ["file_1_new_mtime_ts", "file_1_new_mtime", "timestamp"], ["last_finish_time", "file_1_new_mtime"]], "file_1_new_mtime_ts": [["file_1_new_mtime_ts", "file_1_new_mtime", "timestamp"], ["mock_getmtime", "side_effect", "file_1_new_mtime_ts"]], "freezed_base_time": [["freezed_base_time", "timezone", "datetime"], ["initial_file_1_mtime", "freezed_base_time", "timedelta", "minutes", "timestamp"], ["last_finish_time", "freezed_base_time", "timedelta", "seconds"], ["time_machine", "travel", "freezed_base_time"], ["file_1_new_mtime", "freezed_base_time", "timedelta", "seconds"], ["time_machine", "travel", "freezed_base_time"], ["manager", "processor", "_file_process_interval", "freezed_base_time", "manager", "processor", "get_last_finish_time", "total_seconds"]], "initial_file_1_mtime": [["initial_file_1_mtime", "freezed_base_time", "timedelta", "minutes", "timestamp"], ["mock_getmtime", "side_effect", "initial_file_1_mtime"]], "last_finish_time": [["last_finish_time", "freezed_base_time", "timedelta", "seconds"], ["manager", "processor", "_file_stats", "DagFileStat", "last_finish_time", "timedelta", "seconds"], ["last_finish_time", "file_1_new_mtime"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_file_stats", "DagFileStat", "last_finish_time", "timedelta", "seconds"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "set_file_paths", "dag_files"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "prepare_file_path_queue"], ["manager", "processor", "_file_path_queue", "collections", "deque"], ["manager", "processor", "_file_process_interval", "freezed_base_time", "manager", "processor", "get_last_finish_time", "total_seconds"]], "return_value": [["mock_find_path", "return_value", "dag_files"]], "side_effect": [["mock_getmtime", "side_effect", "initial_file_1_mtime"], ["mock_getmtime", "side_effect", "file_1_new_mtime_ts"]]}, "name": "test_recently_modified_file_is_parsed_with_mtime_mode", "params": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_descr": {"change_platform_timezone": "", "mock_find_path": "", "mock_getmtime": "", "mock_isfile": "", "mock_might_contain_dag": "", "mock_zipfile": "", "self": ""}, "params_occur": {"change_platform_timezone": [], "mock_find_path": [["mock_find_path", "return_value", "dag_files"]], "mock_getmtime": [["mock_getmtime", "side_effect", "initial_file_1_mtime"], ["mock_getmtime", "side_effect", "file_1_new_mtime_ts"]], "mock_isfile": [], "mock_might_contain_dag": [], "mock_zipfile": [], "self": []}, "params_p": {"args": [], "change_platform_timezone": [["unittesmock.MagicMock", 0.09983564261482868]], "kwargs": [], "mock_find_path": [["unittesmock.MagicMock", 0.5893595919680216], ["mock.MagicMock", 0.23081587739030468]], "mock_getmtime": [["unittesmock.MagicMock", 0.15746539647848462]], "mock_isfile": [["unittesmock.MagicMock", 0.09983564261482868]], "mock_might_contain_dag": [["unittesmock.MagicMock", 0.09983564261482868]], "mock_zipfile": [["unittesmock.MagicMock", 0.09983564261482868]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_recently_modified_file_is_parsed_with_mtime_mode", "ret_exprs": [], "ret_type": "", "variables": {"dag_files": "", "file_1_new_mtime": "", "file_1_new_mtime_ts": "", "freezed_base_time": "", "initial_file_1_mtime": "", "last_finish_time": "", "manager": "", "return_value": "", "side_effect": ""}, "variables_p": {"dag_files": [["str", 0.9999999999999998]], "file_1_new_mtime": [["dict", 0.09524983478889867]], "file_1_new_mtime_ts": [["int", 0.1738014758098752], ["str", 0.11114052607891621], ["datetime.datetime.datetime", 0.11108854346473465], ["List[Dict[str, Any]]", 0.09732778924954319], ["Dict[str, Union[Any, Any, Any]]", 0.09548533932708944], ["Dict[str, Dict[str, str]]", 0.0861928347288171], ["pytch.utils.Position", 0.08246579106906769]], "freezed_base_time": [["str", 0.6636826806331652], ["int", 0.08834308064873729]], "initial_file_1_mtime": [["str", 0.7281641500122824]], "last_finish_time": [["int", 0.46539834087191395], ["float", 0.16675197239745274], ["threading.Timer", 0.08315281201703173]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.18089770271076946], ["float", 0.09044885135538473]], "return_value": [["List[Dict[str, Any]]", 0.19859580492429182], ["int", 0.19319276244331257], ["datetime.datetime.datetime", 0.16410480347099515], ["str", 0.15204694081414813], ["Dict[str, Union[Any, Any, Any]]", 0.11875087147775931], ["Dict[str, Union[int, str]]", 0.06126358331528927], ["Dict[str, Dict[str, Any]]", 0.05743200803379887]], "side_effect": [["str", 0.6281405499397951], ["Union[Literal, str]", 0.19079921599552271], ["Dict[str, Union[Any, Any]]", 0.1075673367481839], ["int", 0.07349289731649829]]}}, {"docstring": {"func": "Ensure that DAGs are marked inactive when the file is parsed but the", "long_descr": "DagModel.last_parsed_time is not updated.", "ret": null}, "fn_lc": [[580, 4], [647, 44]], "fn_var_ln": {"active_dag_count": [[635, 12], [635, 28]], "dag": [[603, 12], [603, 15]], "dagbag": [[599, 8], [599, 14]], "last_parsed_time": [[604, 12], [604, 32]], "manager": [[585, 8], [585, 15]], "serialized_dag_count": [[642, 12], [642, 32]], "stat": [[609, 12], [609, 16]], "test_dag_path": [[598, 8], [598, 21]]}, "fn_var_occur": {"active_dag_count": [["active_dag_count", "session", "query", "func", "count", "DagModel", "dag_id", "filter", "DagModel", "is_active", "DagModel", "fileloc", "test_dag_path", "scalar"], ["active_dag_count", "session", "query", "func", "count", "DagModel", "dag_id", "filter", "DagModel", "is_active", "DagModel", "fileloc", "test_dag_path", "scalar"]], "dag": [["dag", "dagbag", "get_dag"], ["dag", "last_parsed_time", "timezone", "utcnow"], ["dag", "sync_to_db"], ["SerializedDagModel", "write_dag", "dag"]], "dagbag": [["dagbag", "DagBag", "test_dag_path", "read_dags_from_db", "False", "include_examples", "False"], ["dag", "dagbag", "get_dag"]], "last_parsed_time": [["dag", "last_parsed_time", "timezone", "utcnow"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "minutes", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_file_paths", "test_dag_path"], ["manager", "processor", "_file_stats", "test_dag_path", "stat"], ["manager", "processor", "_scan_stale_dags"]], "serialized_dag_count": [["serialized_dag_count", "session", "query", "func", "count", "SerializedDagModel", "dag_id", "filter", "SerializedDagModel", "fileloc", "test_dag_path", "scalar"], ["serialized_dag_count", "session", "query", "func", "count", "SerializedDagModel", "dag_id", "filter", "SerializedDagModel", "fileloc", "test_dag_path", "scalar"]], "stat": [["stat", "DagFileStat", "num_dags", "import_errors", "last_finish_time", "timezone", "utcnow", "timedelta", "hours", "last_duration", "run_count"], ["manager", "processor", "_file_stats", "test_dag_path", "stat"]], "test_dag_path": [["test_dag_path", "str", "TEST_DAG_FOLDER"], ["dagbag", "DagBag", "test_dag_path", "read_dags_from_db", "False", "include_examples", "False"], ["manager", "processor", "_file_paths", "test_dag_path"], ["manager", "processor", "_file_stats", "test_dag_path", "stat"], ["active_dag_count", "session", "query", "func", "count", "DagModel", "dag_id", "filter", "DagModel", "is_active", "DagModel", "fileloc", "test_dag_path", "scalar"], ["serialized_dag_count", "session", "query", "func", "count", "SerializedDagModel", "dag_id", "filter", "SerializedDagModel", "fileloc", "test_dag_path", "scalar"], ["active_dag_count", "session", "query", "func", "count", "DagModel", "dag_id", "filter", "DagModel", "is_active", "DagModel", "fileloc", "test_dag_path", "scalar"], ["serialized_dag_count", "session", "query", "func", "count", "SerializedDagModel", "dag_id", "filter", "SerializedDagModel", "fileloc", "test_dag_path", "scalar"]]}, "name": "test_scan_stale_dags", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_scan_stale_dags", "ret_exprs": [], "ret_type": "", "variables": {"active_dag_count": "", "dag": "", "dagbag": "", "last_parsed_time": "", "manager": "", "serialized_dag_count": "", "stat": "", "test_dag_path": ""}, "variables_p": {"active_dag_count": [["list", 0.299765424215934], ["dict", 0.21137198880771096], ["grpy.core.models.Grouping", 0.09876822872059268], ["str", 0.09483505179535505]], "dag": [["int", 0.4398335696812979], ["Dict[str, Any]", 0.09726902862561397], ["list", 0.09721055619272735], ["Type[Dict[str, Any]]", 0.08951277455512935], ["str", 0.08911134491507282], ["datetime.datetime", 0.08911134491507282]], "dagbag": [["str", 0.18336675404374544]], "last_parsed_time": [["dict", 0.8149312961224391], ["List[datetime.date]", 0.055183968085235485], ["list", 0.044969642251596824], ["datetime.date", 0.044155314837332434], ["datetime.datetime", 0.040759778703396164]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.20312531649843346], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.20312531649843346]], "serialized_dag_count": [["grpy.core.models.Grouping", 0.40332379919481187], ["dict", 0.1002557923991086], ["Optional[excars.models.rides.Ride]", 0.09255342750261514], ["Optional[guillotina.db.interfaces.ITransaction]", 0.08722303744381533]], "stat": [["int", 0.17737735210936223], ["list", 0.10851790821046772], ["float", 0.07887169810607311], ["str", 0.0785077586241752]], "test_dag_path": [["str", 0.4248843314207353], ["pathlib.Path", 0.20484632503044747], ["Union[str, pathlib.Path]", 0.11461573320056949], ["Iterable[str]", 0.08578960425377385], ["Union[pathlib.Path, str]", 0.08573315747319656], ["pathlib.PurePath", 0.08413084862127738]]}}, {"docstring": {"func": "Ensure only dags from current dag_directory are updated", "long_descr": null, "ret": null}, "fn_lc": [[656, 4], [707, 40]], "fn_var_ln": {"active_dag_count": [[706, 12], [706, 28]], "dag": [[681, 12], [681, 15]], "dag_directory": [[660, 8], [660, 21]], "dagbag": [[675, 8], [675, 14]], "last_parsed_time": [[687, 12], [687, 38]], "manager": [[661, 8], [661, 15]], "other_dag": [[686, 12], [686, 21]], "other_dagbag": [[677, 8], [677, 20]], "other_test_dag_path": [[676, 8], [676, 27]], "stat": [[691, 12], [691, 16]], "test_dag_path": [[674, 8], [674, 21]]}, "fn_var_occur": {"active_dag_count": [["active_dag_count", "session", "query", "func", "count", "DagModel", "dag_id", "filter", "DagModel", "is_active", "scalar"], ["active_dag_count", "session", "query", "func", "count", "DagModel", "dag_id", "filter", "DagModel", "is_active", "scalar"]], "dag": [["dag", "dagbag", "get_dag"], ["dag", "last_parsed_time", "timezone", "utcnow"], ["dag", "sync_to_db", "processor_subdir", "dag_directory"]], "dag_directory": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dag_directory", "max_runs", "processor_timeout", "timedelta", "minutes", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["dag", "sync_to_db", "processor_subdir", "dag_directory"]], "dagbag": [["dagbag", "DagBag", "test_dag_path", "read_dags_from_db", "False"], ["dag", "dagbag", "get_dag"]], "last_parsed_time": [["dag", "last_parsed_time", "timezone", "utcnow"], ["other_dag", "last_parsed_time", "timezone", "utcnow"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dag_directory", "max_runs", "processor_timeout", "timedelta", "minutes", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_file_paths", "test_dag_path"], ["manager", "processor", "_file_stats", "test_dag_path", "stat"], ["manager", "processor", "_scan_stale_dags"]], "other_dag": [["other_dag", "other_dagbag", "get_dag"], ["other_dag", "last_parsed_time", "timezone", "utcnow"], ["other_dag", "sync_to_db", "processor_subdir"]], "other_dagbag": [["other_dagbag", "DagBag", "other_test_dag_path", "read_dags_from_db", "False"], ["other_dag", "other_dagbag", "get_dag"]], "other_test_dag_path": [["other_test_dag_path", "str", "TEST_DAG_FOLDER"], ["other_dagbag", "DagBag", "other_test_dag_path", "read_dags_from_db", "False"]], "stat": [["stat", "DagFileStat", "num_dags", "import_errors", "last_finish_time", "timezone", "utcnow", "timedelta", "hours", "last_duration", "run_count"], ["manager", "processor", "_file_stats", "test_dag_path", "stat"]], "test_dag_path": [["test_dag_path", "str", "TEST_DAG_FOLDER"], ["dagbag", "DagBag", "test_dag_path", "read_dags_from_db", "False"], ["manager", "processor", "_file_paths", "test_dag_path"], ["manager", "processor", "_file_stats", "test_dag_path", "stat"]]}, "name": "test_scan_stale_dags_standalone_mode", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_scan_stale_dags_standalone_mode", "ret_exprs": [], "ret_type": "", "variables": {"active_dag_count": "", "dag": "", "dag_directory": "", "dagbag": "", "last_parsed_time": "", "manager": "", "other_dag": "", "other_dagbag": "", "other_test_dag_path": "", "stat": "", "test_dag_path": ""}, "variables_p": {"active_dag_count": [["grpy.core.models.Grouping", 0.6123384727580109], ["dict", 0.12738520296772676], ["golem.rpc.session.Publisher", 0.09495152901004675]], "dag": [["int", 0.4398335696812979], ["Dict[str, Any]", 0.09726902862561397], ["list", 0.09721055619272735], ["Type[Dict[str, Any]]", 0.08951277455512935], ["str", 0.08911134491507282], ["datetime.datetime", 0.08911134491507282]], "dag_directory": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.0904321243356923], ["float", 0.0904321243356923]], "dagbag": [["starfish.core.image.Filter.white_tophaWhiteTophat", 0.15666939330165477], ["str", 0.08006296773411407]], "last_parsed_time": [["dict", 0.8130147170294862], ["int", 0.0928363545030722], ["datetime.datetime", 0.05628624160708911], ["list", 0.03786268686035252]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.0904321243356923], ["float", 0.0904321243356923]], "other_dag": [["list", 0.3557544161479585], ["int", 0.17587728035290198], ["float", 0.07773268740760204], ["str", 0.07598912435497078], ["Type[Dict[str, Any]]", 0.07248951443272039]], "other_dagbag": [["src.pip_shims.models.ShimmedPathCollection", 0.19183754441713016], ["list", 0.09533507922439985], ["List[str]", 0.0824229014565753], ["Tuple[Literal, Literal, Literal]", 0.08226240196338343]], "other_test_dag_path": [["str", 0.33024231207853916], ["pathlib.Path", 0.29457347841729775], ["Union[pathlib.Path, str]", 0.09798825155826532], ["Iterable[str]", 0.09624335729053515], ["Union[str, pathlib.Path]", 0.09252478337219117], ["bool", 0.0884278172831714]], "stat": [["int", 0.17737735210936223], ["list", 0.10851790821046772], ["float", 0.07887169810607311], ["str", 0.0785077586241752]], "test_dag_path": [["pathlib.Path", 0.8072419582549062], ["str", 0.09607789491407057]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[714, 4], [744, 72]], "fn_var_ln": {"_start_time": [[737, 8], [737, 29]], "initial_waitables": [[740, 8], [740, 25]], "manager": [[717, 8], [717, 15]], "processor": [[730, 8], [730, 17]], "return_value": [[716, 8], [716, 41]]}, "fn_var_occur": {"_start_time": [["processor", "_start_time", "timezone", "make_aware", "datetime", "min"]], "initial_waitables": [["initial_waitables", "len", "manager", "processor", "waitables"], ["len", "manager", "processor", "waitables", "initial_waitables"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_processors", "processor"], ["manager", "processor", "waitables", "processor"], ["initial_waitables", "len", "manager", "processor", "waitables"], ["manager", "processor", "_kill_timed_out_processors"], ["len", "manager", "processor", "_processors"], ["len", "manager", "processor", "waitables", "initial_waitables"]], "processor": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["processor", "DagFileProcessorProcess", "file_path", "pickle_dags", "False", "dag_ids", "dag_directory", "TEST_DAG_FOLDER", "callback_requests"], ["processor", "_start_time", "timezone", "make_aware", "datetime", "min"], ["manager", "processor", "_processors", "processor"], ["manager", "processor", "waitables", "processor"], ["initial_waitables", "len", "manager", "processor", "waitables"], ["manager", "processor", "_kill_timed_out_processors"], ["len", "manager", "processor", "_processors"], ["len", "manager", "processor", "waitables", "initial_waitables"]], "return_value": [["mock_pid", "return_value"], ["mock_waitable_handle", "return_value"]]}, "name": "test_kill_timed_out_processors_kill", "params": {"mock_kill": "", "mock_pid": "", "mock_waitable_handle": "", "self": ""}, "params_descr": {"mock_kill": "", "mock_pid": "", "mock_waitable_handle": "", "self": ""}, "params_occur": {"mock_kill": [["mock_kill", "assert_called_once_with"]], "mock_pid": [["mock_pid", "return_value"]], "mock_waitable_handle": [["mock_waitable_handle", "return_value"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_kill": [["unittesmock.MagicMock", 1.0]], "mock_pid": [["unittesmock.MagicMock", 0.10789391151563854]], "mock_waitable_handle": [["mock.Mock", 0.35605424481073483], ["unittesmock.MagicMock", 0.34393858848047615]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_kill_timed_out_processors_kill", "ret_exprs": [], "ret_type": "", "variables": {"_start_time": "", "initial_waitables": "", "manager": "", "processor": "", "return_value": ""}, "variables_p": {"_start_time": [["float", 0.39158272561992974], ["int", 0.23288905248062405], ["datetime.timedelta", 0.11104280067335985], ["time.struct_time", 0.10084042266446201], ["datetime.datetime", 0.08525861302601777], ["datetime.datetime.timedelta", 0.0783863855356065]], "initial_waitables": [["List[int]", 0.37020484264044495], ["str", 0.2277778494274494], ["int", 0.21880692217998557], ["Set[str]", 0.09255121066011124], ["List[str]", 0.09065917509200887]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.20312531649843346], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.20312531649843346]], "processor": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.20312531649843346], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.20312531649843346]], "return_value": [["Dict[str, Dict[str, Any]]", 0.20161339253143212], ["str", 0.1913865318520525], ["Dict[str, Union[Any, Any, Any]]", 0.17952935020135255], ["List[Dict[str, Any]]", 0.134694885625275], ["datetime.datetime.datetime", 0.10912888764605755], ["Dict[str, int]", 0.0929131509749659], ["List[Dict[str, str]]", 0.09073380116886441]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[748, 4], [773, 56]], "fn_var_ln": {"_start_time": [[770, 8], [770, 29]], "manager": [[750, 8], [750, 15]], "processor": [[763, 8], [763, 17]], "return_value": [[749, 8], [749, 29]]}, "fn_var_occur": {"_start_time": [["processor", "_start_time", "timezone", "make_aware", "datetime", "max"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_processors", "processor"], ["manager", "processor", "_kill_timed_out_processors"]], "processor": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["processor", "DagFileProcessorProcess", "file_path", "pickle_dags", "False", "dag_ids", "dag_directory", "str", "TEST_DAG_FOLDER", "callback_requests"], ["processor", "_start_time", "timezone", "make_aware", "datetime", "max"], ["manager", "processor", "_processors", "processor"], ["manager", "processor", "_kill_timed_out_processors"]], "return_value": [["mock_pid", "return_value"]]}, "name": "test_kill_timed_out_processors_no_kill", "params": {"mock_dag_file_processor": "", "mock_pid": "", "self": ""}, "params_descr": {"mock_dag_file_processor": "", "mock_pid": "", "self": ""}, "params_occur": {"mock_dag_file_processor": [["mock_dag_file_processor", "kill", "assert_not_called"]], "mock_pid": [["mock_pid", "return_value"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_dag_file_processor": [["unittesmock.MagicMock", 0.10388911724262251], ["core_lib.core.models.Venue", 0.10047318508533738]], "mock_pid": [["unittesmock.MagicMock", 0.26730499340718433]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_kill_timed_out_processors_no_kill", "ret_exprs": [], "ret_type": "", "variables": {"_start_time": "", "manager": "", "processor": "", "return_value": ""}, "variables_p": {"_start_time": [["float", 0.39158272561992974], ["int", 0.23288905248062405], ["datetime.timedelta", 0.11104280067335985], ["time.struct_time", 0.10084042266446201], ["datetime.datetime", 0.08525861302601777], ["datetime.datetime.timedelta", 0.0783863855356065]], "manager": [["pytch.utils.Position", 0.11585963246690938]], "processor": [["pytch.utils.Position", 0.11585963246690938]], "return_value": [["Set[str]", 0.31968019372842504], ["str", 0.28974495331495453], ["list", 0.1978080233656786], ["int", 0.09819123429613609], ["List[str]", 0.09457559529480569]]}}, {"docstring": {"func": "Test to check that a DAG with a system.exit() doesn't break the scheduler.", "long_descr": null, "ret": null}, "fn_lc": [[777, 4], [816, 60]], "fn_var_ln": {"child_pipe": [[789, 8], [789, 18]], "dag_directory": [[783, 8], [783, 21]], "dag_id": [[782, 8], [782, 14]], "manager": [[791, 8], [791, 15]], "parent_pipe": [[789, 20], [789, 31]], "result": [[808, 12], [808, 18]]}, "fn_var_occur": {"child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dag_directory", "dag_ids", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "child_pipe", "pickle_dags", "False", "async_mode", "True"]], "dag_directory": [["dag_directory", "TEST_DAG_FOLDER", "parent"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dag_directory", "dag_ids", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "child_pipe", "pickle_dags", "False", "async_mode", "True"]], "dag_id": [["session", "get", "DagModel", "dag_id", "None"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "dag_directory", "dag_ids", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "child_pipe", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_run_parsing_loop"], ["sum", "stat", "run_count", "stat", "manager", "processor", "_file_stats", "values"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["parent_pipe", "poll", "timeout", "None"], ["result", "parent_pipe", "recv"]], "result": [["result", "None"], ["result", "parent_pipe", "recv"], ["isinstance", "result", "DagParsingStat", "result", "done"]]}, "name": "test_dag_with_system_exit", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_dag_with_system_exit", "ret_exprs": [], "ret_type": "", "variables": {"child_pipe": "", "dag_directory": "", "dag_id": "", "manager": "", "parent_pipe": "", "result": ""}, "variables_p": {"child_pipe": [["int", 0.2504908973023042], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17566987461245318], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.17566987461245318]], "dag_directory": [["tests.components.withings.common.ProfileConfig", 0.08961806219342097]], "dag_id": [["str", 0.4791542512566005], ["Set[int]", 0.20359522536329344], ["int", 0.10141812423760224]], "manager": [["qiskiproviders.ibmq.job.ibmqjob.IBMQJob", 0.09875148695814916]], "parent_pipe": [["str", 0.3108207543447559], ["Optional[str]", 0.10681832652553713], ["allennlp.common.configuration.ConfigItem", 0.0880337367824752]], "result": [["Generator[Any, None, None]", 0.2565220981288143], ["requests.models.Response", 0.13564382064055405]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[838, 8], [855, 63]], "fn_var_ln": {"n": [[839, 12], [839, 13]], "req": [[844, 16], [844, 19]]}, "fn_var_occur": {"n": [["logging", "info", "n"], ["logging", "debug", "n"]], "req": [["req", "CallbackRequest", "str", "dag_filepath"], ["pipe", "send", "req"]]}, "name": "keep_pipe_full", "params": {"exit_event": "", "pipe": ""}, "params_descr": {"exit_event": "", "pipe": ""}, "params_occur": {"exit_event": [["exit_event", "threading", "Event"], ["exit_event", "is_set"]], "pipe": [["pipe", "send", "req"]]}, "params_p": {"args": [], "exit_event": [["str", 0.17235124388946685], ["Callable", 0.09143092074317752], ["dict", 0.08315650304369479]], "kwargs": [], "pipe": [["bool", 0.28139152027279046], ["int", 0.19487462424042393], ["Callable", 0.13549039056604184], ["Dict[str, Dict[str, str]]", 0.09676022502450389]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_pipe_full_deadlock.<locals>.keep_pipe_full", "ret_exprs": [], "ret_type": "", "variables": {"n": "", "req": ""}, "variables_p": {"n": [["str", 0.8001558705333836], ["datetime.datetime", 0.11145843458872634], ["logging.Logger", 0.08838569487789007]], "req": [["dict", 0.4917328871226211]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[861, 8], [865, 28]], "fn_var_ln": {"processor": [[863, 12], [863, 21]]}, "fn_var_occur": {"processor": [["processor", "FakeDagFileProcessorRunner", "_create_process", "args", "kwargs"], ["fake_processors", "append", "processor"]]}, "name": "fake_processor_", "params": {"args": "", "kwargs": ""}, "params_descr": {"args": "", "kwargs": ""}, "params_occur": {"args": [["thread", "threading", "Thread", "target", "keep_pipe_full", "args", "parent_pipe", "exit_event"], ["processor", "FakeDagFileProcessorRunner", "_create_process", "args", "kwargs"]], "kwargs": [["processor", "FakeDagFileProcessorRunner", "_create_process", "args", "kwargs"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagProcessorJobRunner.test_pipe_full_deadlock.<locals>.fake_processor_", "ret_exprs": ["return processor"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {"processor": ""}, "variables_p": {"processor": [["Dict[str, Union[Any, Any]]", 0.13752366386326326], ["Dict[bytes, str]", 0.12880187981060065], ["threading._RLock", 0.08949687272029086], ["Optional[int]", 0.08678759227724787]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[822, 4], [893, 41]], "fn_var_ln": {"child_pipe": [[825, 8], [825, 18]], "dag_filepath": [[823, 8], [823, 20]], "exit_event": [[834, 8], [834, 18]], "fake_processors": [[859, 8], [859, 23]], "manager": [[869, 8], [869, 15]], "parent_pipe": [[825, 20], [825, 31]], "side_effect": [[867, 8], [867, 34]], "sock": [[829, 12], [829, 16]], "thread": [[857, 8], [857, 14]]}, "fn_var_occur": {"child_pipe": [["manager", "DagFileProcessorManager", "dag_directory", "dag_filepath", "dag_ids", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "child_pipe", "pickle_dags", "False", "async_mode", "True"], ["child_pipe", "close"]], "dag_filepath": [["manager", "DagFileProcessorManager", "dag_directory", "dag_filepath", "dag_ids", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "child_pipe", "pickle_dags", "False", "async_mode", "True"]], "exit_event": [["exit_event", "set"]], "fake_processors": [], "manager": [["manager", "DagFileProcessorManager", "dag_directory", "dag_filepath", "dag_ids", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "child_pipe", "pickle_dags", "False", "async_mode", "True"], ["manager", "_run_parsing_loop"]], "parent_pipe": [["parent_pipe", "close"]], "side_effect": [["mock_processor", "side_effect", "fake_processor_"]], "sock": [], "thread": [["thread", "start"], ["thread", "join", "timeout"]]}, "name": "test_pipe_full_deadlock", "params": {"mock_processor": "", "self": ""}, "params_descr": {"mock_processor": "", "self": ""}, "params_occur": {"mock_processor": [["mock_processor", "side_effect", "fake_processor_"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_processor": [["unittesmock.MagicMock", 0.9999999999123294], ["mock.Mock", 4.721543982704e-11], ["mock.MagicMock", 4.04551120243284e-11]], "self": []}, "q_name": "TestDagProcessorJobRunner.test_pipe_full_deadlock", "ret_exprs": [], "ret_type": "", "variables": {"child_pipe": "", "dag_filepath": "", "exit_event": "", "fake_processors": "", "manager": "", "parent_pipe": "", "side_effect": "", "sock": "", "thread": ""}, "variables_p": {"child_pipe": [["int", 0.3505164818082277], ["Tuple[Union[int, str]]", 0.17293579465478046], ["float", 0.11334627557472228], ["bytes", 0.11189627287109721], ["Tuple[int, int]", 0.08646789732739023], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.08317601156858027]], "dag_filepath": [["int", 0.3505164818082277], ["Tuple[Union[int, str]]", 0.17293579465478046], ["float", 0.11334627557472228], ["bytes", 0.11189627287109721], ["Tuple[int, int]", 0.08646789732739023], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.08317601156858027]], "exit_event": [["threading.Event", 0.49999999999214945], ["int", 0.2499999999930793], ["List[Tuple[int, Any]]", 3.7886110691363454e-12], ["Dict[str, Tuple[Any, Any]]", 3.2251592471886517e-12]], "fake_processors": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "manager": [["int", 0.3505164818082277], ["Tuple[Union[int, str]]", 0.17293579465478046], ["float", 0.11334627557472228], ["bytes", 0.11189627287109721], ["Tuple[int, int]", 0.08646789732739023], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.08317601156858027]], "parent_pipe": [["Generator[Any, None, None]", 0.09912702421733259]], "side_effect": [["str", 0.46146968833119484], ["List[Dict[str, float]]", 0.10543346334745063], ["Dict[str, Dict[str, str]]", 0.0831681400737581]], "sock": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "thread": [["str", 0.8208109477608224], ["Set[str]", 0.1791890522391775]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[897, 4], [940, 9]], "fn_var_ln": {"async_mode": [[910, 8], [910, 18]], "child_pipe": [[908, 8], [908, 18]], "dag_code": [[899, 8], [899, 16]], "filename_to_parse": [[898, 8], [898, 25]], "last_runtime": [[925, 8], [925, 20]], "manager": [[911, 8], [911, 15]], "parent_pipe": [[908, 20], [908, 31]]}, "fn_var_occur": {"async_mode": [["async_mode", "conf", "get"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"], ["child_pipe", "close"]], "dag_code": [["dag_code", "dedent"], ["file_to_parse", "writelines", "dag_code"]], "filename_to_parse": [["filename_to_parse", "tmpdir"], ["open", "filename_to_parse", "file_to_parse"]], "last_runtime": [["last_runtime", "manager", "processor", "get_last_runtime", "manager", "processor", "file_paths"], ["statsd_timing_mock", "assert_has_calls", "mock", "call", "timedelta", "seconds", "last_runtime", "mock", "call", "timedelta", "seconds", "last_runtime", "tags", "any_order", "True"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["last_runtime", "manager", "processor", "get_last_runtime", "manager", "processor", "file_paths"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["parent_pipe", "close"]]}, "name": "test_send_file_processing_statsd_timing", "params": {"self": "", "statsd_timing_mock": "", "tmpdir": ""}, "params_descr": {"self": "", "statsd_timing_mock": "", "tmpdir": ""}, "params_occur": {"self": [["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "statsd_timing_mock": [["statsd_timing_mock", "assert_has_calls", "mock", "call", "timedelta", "seconds", "last_runtime", "mock", "call", "timedelta", "seconds", "last_runtime", "tags", "any_order", "True"]], "tmpdir": [["filename_to_parse", "tmpdir"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "async_mode"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "statsd_timing_mock": [["unittesmock.MagicMock", 0.15254941244168813]], "tmpdir": [["tests.e2e.Helper", 0.10161122642482967], ["tests.test_util.aiohttp.AiohttpClientMocker", 0.09642247948010793], ["Exception", 0.09380048188251738]]}, "q_name": "TestDagProcessorJobRunner.test_send_file_processing_statsd_timing", "ret_exprs": [], "ret_type": "", "variables": {"async_mode": "", "child_pipe": "", "dag_code": "", "filename_to_parse": "", "last_runtime": "", "manager": "", "parent_pipe": ""}, "variables_p": {"async_mode": [["str", 0.790535804326527], ["dict", 0.11658051518161985], ["Dict[Any, str]", 0.0928836804918532]], "child_pipe": [["int", 0.2504908973023042], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17566987461245318], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.17566987461245318]], "dag_code": [["str", 0.8643530753301847], ["int", 0.13564692466981543]], "filename_to_parse": [["str", 0.4843766728509598], ["pathlib.Path", 0.09448042614246478], ["int", 0.09360285121437378], ["Dict[str, int]", 0.09300581725432903]], "last_runtime": [["str", 0.1730356583436679], ["raiden_contracts.tests.test_channel_update_transfer.test_update_invalid_balance_proof_arguments.balance_proof", 0.09079006184468144]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.09122477996159815], ["float", 0.09122477996159815]], "parent_pipe": []}}, {"docstring": {"func": "Test DagProcessorJobRunner._refresh_dag_dir method", "long_descr": null, "ret": null}, "fn_lc": [[942, 4], [969, 34]], "fn_var_ln": {"dag": [[959, 8], [959, 11]], "dagbag": [[956, 8], [956, 14]], "manager": [[944, 8], [944, 15]], "zipped_dag_path": [[957, 8], [957, 23]]}, "fn_var_occur": {"dag": [["dag", "dagbag", "get_dag"], ["dag", "sync_to_db"], ["SerializedDagModel", "write_dag", "dag"], ["DagCode", "has_dag", "dag", "fileloc"], ["dag", "get_is_active"]], "dagbag": [["dagbag", "DagBag", "dag_folder", "tmpdir", "include_examples", "False"], ["dagbag", "process_file", "zipped_dag_path"], ["dag", "dagbag", "get_dag"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "last_dag_dir_refresh_time", "timezone", "utcnow", "timedelta", "minutes"], ["manager", "processor", "_refresh_dag_dir"]], "zipped_dag_path": [["zipped_dag_path", "os", "path", "join", "TEST_DAGS_FOLDER"], ["dagbag", "process_file", "zipped_dag_path"]]}, "name": "test_refresh_dags_dir_doesnt_delete_zipped_dags", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [], "tmpdir": [["dagbag", "DagBag", "dag_folder", "tmpdir", "include_examples", "False"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": [["pathlib.Path", 0.13427234974775926], ["src.core.model.scripScript", 0.10654512904356502]]}, "q_name": "TestDagProcessorJobRunner.test_refresh_dags_dir_doesnt_delete_zipped_dags", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dagbag": "", "manager": "", "zipped_dag_path": ""}, "variables_p": {"dag": [["starfish.core.image.Filter.reduce.Reduce", 0.18253056164688672], ["Dict[str, int]", 0.12040139264875623], ["Tuple[Literal, Literal, Literal]", 0.10200526215239575], ["Optional[gardnr.models.Grow]", 0.10200526215239575]], "dagbag": [["multiprocessing.pool.Pool", 0.10319172936095708], ["pytch.utils.Position", 0.08337591825477911]], "manager": [["pytch.utils.Position", 0.11585963246690938]], "zipped_dag_path": [["str", 1.0]]}}, {"docstring": {"func": "Test DagProcessorJobRunner._refresh_dag_dir method", "long_descr": null, "ret": null}, "fn_lc": [[971, 4], [1002, 38]], "fn_var_ln": {"dag": [[988, 8], [988, 11]], "dagbag": [[985, 8], [985, 14]], "manager": [[973, 8], [973, 15]], "zipped_dag_path": [[986, 8], [986, 23]]}, "fn_var_occur": {"dag": [["dag", "dagbag", "get_dag"], ["dag", "sync_to_db"], ["SerializedDagModel", "write_dag", "dag"], ["DagCode", "has_dag", "dag", "fileloc"], ["dag", "get_is_active"]], "dagbag": [["dagbag", "DagBag", "dag_folder", "tmpdir", "include_examples", "False"], ["dagbag", "process_file", "zipped_dag_path"], ["dag", "dagbag", "get_dag"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "last_dag_dir_refresh_time", "timezone", "utcnow", "timedelta", "minutes"], ["manager", "processor", "_refresh_dag_dir"]], "zipped_dag_path": [["zipped_dag_path", "os", "path", "join", "TEST_DAGS_FOLDER"], ["dagbag", "process_file", "zipped_dag_path"]]}, "name": "test_refresh_dags_dir_deactivates_deleted_zipped_dags", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [], "tmpdir": [["dagbag", "DagBag", "dag_folder", "tmpdir", "include_examples", "False"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": [["pathlib.Path", 0.12021362905727316], ["src.core.model.scripScript", 0.11712324449205132]]}, "q_name": "TestDagProcessorJobRunner.test_refresh_dags_dir_deactivates_deleted_zipped_dags", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dagbag": "", "manager": "", "zipped_dag_path": ""}, "variables_p": {"dag": [["starfish.core.image.Filter.reduce.Reduce", 0.18253056164688672], ["Dict[str, int]", 0.12040139264875623], ["Tuple[Literal, Literal, Literal]", 0.10200526215239575], ["Optional[gardnr.models.Grow]", 0.10200526215239575]], "dagbag": [["multiprocessing.pool.Pool", 0.10319172936095708], ["pytch.utils.Position", 0.08337591825477911]], "manager": [["pytch.utils.Position", 0.11585963246690938]], "zipped_dag_path": [["str", 1.0]]}}, {"docstring": {"func": "Test DagProcessorJobRunner._fetch_callbacks method", "long_descr": null, "ret": null}, "fn_lc": [[1010, 4], [1055, 64]], "fn_var_ln": {"callback1": [[1014, 8], [1014, 17]], "callback2": [[1021, 8], [1021, 17]], "callback3": [[1028, 8], [1028, 17]], "child_pipe": [[1039, 8], [1039, 18]], "dag_filepath": [[1012, 8], [1012, 20]], "manager": [[1040, 8], [1040, 15]], "parent_pipe": [[1039, 20], [1039, 31]]}, "fn_var_occur": {"callback1": [["callback1", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["session", "add", "DbCallbackRequest", "callback", "callback1", "priority_weight"]], "callback2": [["callback2", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["session", "add", "DbCallbackRequest", "callback", "callback2", "priority_weight"]], "callback3": [["callback3", "SlaCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "processor_subdir", "str", "tmpdir"], ["session", "add", "DbCallbackRequest", "callback", "callback3", "priority_weight"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "str", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]], "dag_filepath": [["dag_filepath", "TEST_DAG_FOLDER"], ["callback1", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["callback2", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["callback3", "SlaCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "processor_subdir", "str", "tmpdir"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "str", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]]}, "name": "test_fetch_callbacks_from_database", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "tmpdir": [["callback1", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["callback2", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["callback3", "SlaCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "processor_subdir", "str", "tmpdir"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "str", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": []}, "q_name": "TestDagProcessorJobRunner.test_fetch_callbacks_from_database", "ret_exprs": [], "ret_type": "", "variables": {"callback1": "", "callback2": "", "callback3": "", "child_pipe": "", "dag_filepath": "", "manager": "", "parent_pipe": ""}, "variables_p": {"callback1": [["str", 0.3990072788768171], ["Pattern[str]", 0.3151295616817043], ["pydynasync.models.Changes", 0.09787574239424483], ["Mapping", 0.085598684700427]], "callback2": [["str", 0.3990072788768171], ["Pattern[str]", 0.3151295616817043], ["pydynasync.models.Changes", 0.09787574239424483], ["Mapping", 0.085598684700427]], "callback3": [["Pattern[str]", 0.3213732848515391], ["str", 0.3115830683679889], ["golem.rpc.session.WebSocketAddress", 0.10366795893554756], ["Mapping", 0.09551093713921403], ["int", 0.08190866182216675]], "child_pipe": [["int", 0.17643360531057742], ["pytch.utils.Position", 0.08188865124823365]], "dag_filepath": [["tests.wpweb-platform-tests.tools.manifesmanifesManifest", 0.44306497833843006], ["tests.unideploy.test_deployer.InMemoryOSUtils", 0.17702224971769792], ["qcodes.tests.parameter.test_group_parameter.Dummy", 0.0973614249894288], ["track.tests.factories.CategoryFactory", 0.09250813402161008]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17785613070320322], ["qiskiproviders.ibmq.job.ibmqjob.IBMQJob", 0.09902712497623713]], "parent_pipe": []}}, {"docstring": {"func": "Test DagProcessorJobRunner._fetch_callbacks method", "long_descr": null, "ret": null}, "fn_lc": [[1063, 4], [1102, 64]], "fn_var_ln": {"callback1": [[1067, 8], [1067, 17]], "callback2": [[1074, 8], [1074, 17]], "child_pipe": [[1086, 8], [1086, 18]], "dag_filepath": [[1065, 8], [1065, 20]], "manager": [[1087, 8], [1087, 15]], "parent_pipe": [[1086, 20], [1086, 31]]}, "fn_var_occur": {"callback1": [["callback1", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["session", "add", "DbCallbackRequest", "callback", "callback1", "priority_weight"]], "callback2": [["callback2", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "run_id"], ["session", "add", "DbCallbackRequest", "callback", "callback2", "priority_weight"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]], "dag_filepath": [["dag_filepath", "TEST_DAG_FOLDER"], ["callback1", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["callback2", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "run_id"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]]}, "name": "test_fetch_callbacks_for_current_dag_directory_only", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "tmpdir": [["callback1", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": []}, "q_name": "TestDagProcessorJobRunner.test_fetch_callbacks_for_current_dag_directory_only", "ret_exprs": [], "ret_type": "", "variables": {"callback1": "", "callback2": "", "child_pipe": "", "dag_filepath": "", "manager": "", "parent_pipe": ""}, "variables_p": {"callback1": [["str", 0.3990072788768171], ["Pattern[str]", 0.3151295616817043], ["pydynasync.models.Changes", 0.09787574239424483], ["Mapping", 0.085598684700427]], "callback2": [["Pattern[str]", 0.32243871432003346], ["str", 0.31213002463132944], ["Mapping", 0.1018958985732071], ["int", 0.0888304168050285], ["golem.rpc.session.WebSocketAddress", 0.08773868424772145]], "child_pipe": [["int", 0.2504908973023042], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17566987461245318], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.17566987461245318]], "dag_filepath": [["tests.wpweb-platform-tests.tools.manifesmanifesManifest", 0.44306497833843006], ["tests.unideploy.test_deployer.InMemoryOSUtils", 0.17702224971769792], ["qcodes.tests.parameter.test_group_parameter.Dummy", 0.0973614249894288], ["track.tests.factories.CategoryFactory", 0.09250813402161008]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.09122477996159815], ["float", 0.09122477996159815]], "parent_pipe": []}}, {"docstring": {"func": "Test DagProcessorJobRunner._fetch_callbacks method", "long_descr": null, "ret": null}, "fn_lc": [[1111, 4], [1146, 64]], "fn_var_ln": {"callback": [[1117, 16], [1117, 24]], "child_pipe": [[1126, 8], [1126, 18]], "dag_filepath": [[1113, 8], [1113, 20]], "manager": [[1127, 8], [1127, 15]], "parent_pipe": [[1126, 20], [1126, 31]]}, "fn_var_occur": {"callback": [["callback", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "run_id", "str", "i", "processor_subdir", "str", "tmpdir"], ["session", "add", "DbCallbackRequest", "callback", "callback", "priority_weight", "i"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "str", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]], "dag_filepath": [["dag_filepath", "TEST_DAG_FOLDER"], ["callback", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "run_id", "str", "i", "processor_subdir", "str", "tmpdir"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "str", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]]}, "name": "test_fetch_callbacks_from_database_max_per_loop", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [["self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "tmpdir": [["callback", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "run_id", "str", "i", "processor_subdir", "str", "tmpdir"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "str", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": []}, "q_name": "TestDagProcessorJobRunner.test_fetch_callbacks_from_database_max_per_loop", "ret_exprs": [], "ret_type": "", "variables": {"callback": "", "child_pipe": "", "dag_filepath": "", "manager": "", "parent_pipe": ""}, "variables_p": {"callback": [["str", 0.4752960519048617], ["Mapping", 0.09334912267912802], ["int", 0.09205635247709654], ["Tuple[int, int, int, int]", 0.09007370718299076]], "child_pipe": [["int", 0.17643360531057742], ["pytch.utils.Position", 0.08188865124823365]], "dag_filepath": [["track.tests.factories.CategoryFactory", 0.13045669602018808], ["qcodes.tests.parameter.test_group_parameter.Dummy", 0.10237709834096378], ["hpaction.tests.factories.HPActionDocumentsFactory", 0.08146186265228567], ["hpaction.tests.factories.DocusignEnvelopeFactory", 0.07688340294901302]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17785613070320322], ["qiskiproviders.ibmq.job.ibmqjob.IBMQJob", 0.09902712497623713]], "parent_pipe": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1154, 4], [1187, 64]], "fn_var_ln": {"callback": [[1158, 12], [1158, 20]], "child_pipe": [[1167, 8], [1167, 18]], "dag_filepath": [[1155, 8], [1155, 20]], "manager": [[1168, 8], [1168, 15]], "parent_pipe": [[1167, 20], [1167, 31]], "results": [[1182, 12], [1182, 19]]}, "fn_var_occur": {"callback": [["callback", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["session", "add", "DbCallbackRequest", "callback", "callback", "priority_weight"]], "child_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]], "dag_filepath": [["dag_filepath", "TEST_DAG_FOLDER"], ["callback", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"], ["results", "self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "parent_pipe": [["child_pipe", "parent_pipe", "multiprocessing", "Pipe"], ["results", "self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "results": [["results", "self", "run_processor_manager_one_loop", "manager", "parent_pipe"], ["len", "results"]]}, "name": "test_fetch_callbacks_from_database_not_standalone", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [["results", "self", "run_processor_manager_one_loop", "manager", "parent_pipe"]], "tmpdir": [["callback", "DagCallbackRequest", "dag_id", "full_filepath", "str", "dag_filepath", "is_failure_callback", "True", "processor_subdir", "str", "tmpdir", "run_id"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "tmpdir", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "child_pipe", "dag_ids", "pickle_dags", "False", "async_mode", "False"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": []}, "q_name": "TestDagProcessorJobRunner.test_fetch_callbacks_from_database_not_standalone", "ret_exprs": [], "ret_type": "", "variables": {"callback": "", "child_pipe": "", "dag_filepath": "", "manager": "", "parent_pipe": "", "results": ""}, "variables_p": {"callback": [["str", 0.3990072788768171], ["Pattern[str]", 0.3151295616817043], ["pydynasync.models.Changes", 0.09787574239424483], ["Mapping", 0.085598684700427]], "child_pipe": [["int", 0.2504908973023042], ["starfish.core.spots.FindSpots.blob.BlobDetector", 0.17566987461245318], ["starfish.core.types._spot_finding_results.SpotFindingResults", 0.17566987461245318]], "dag_filepath": [["tests.wpweb-platform-tests.tools.manifesmanifesManifest", 0.44306497833843006], ["tests.unideploy.test_deployer.InMemoryOSUtils", 0.17702224971769792], ["qcodes.tests.parameter.test_group_parameter.Dummy", 0.0973614249894288], ["track.tests.factories.CategoryFactory", 0.09250813402161008]], "manager": [["starfish.core.spots.FindSpots.blob.BlobDetector", 0.09122477996159815], ["float", 0.09122477996159815]], "parent_pipe": [], "results": [["int", 0.42870825395925566], ["str", 0.09773784094378943], ["list", 0.09332240752306815], ["List[int]", 0.09295699413144398], ["Iterator[Any]", 0.09258219647105827], ["dict", 0.09180287465738965]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1189, 4], [1285, 9]], "fn_var_ln": {"dag1_req1": [[1204, 8], [1204, 17]], "dag1_req2": [[1212, 8], [1212, 17]], "dag1_sla1": [[1220, 8], [1220, 17]], "dag1_sla2": [[1225, 8], [1225, 17]], "dag2_req1": [[1231, 8], [1231, 17]], "dag3_sla1": [[1240, 8], [1240, 17]], "manager": [[1191, 8], [1191, 15]]}, "fn_var_occur": {"dag1_req1": [["dag1_req1", "DagCallbackRequest", "full_filepath", "dag_id", "run_id", "is_failure_callback", "False", "processor_subdir", "tmpdir", "msg", "None"], ["manager", "processor", "_add_callback_to_queue", "dag1_req1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag2_req1", "full_filepath", "dag1_req1", "full_filepath"], ["set", "manager", "processor", "_callback_to_execute", "keys", "dag1_req1", "full_filepath", "dag2_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag2_req1", "full_filepath", "dag1_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag1_req1", "full_filepath", "dag2_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1", "dag1_req2"]], "dag1_req2": [["dag1_req2", "DagCallbackRequest", "full_filepath", "dag_id", "run_id", "is_failure_callback", "False", "processor_subdir", "tmpdir", "msg", "None"], ["manager", "processor", "_add_callback_to_queue", "dag1_req2"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1", "dag1_req2"]], "dag1_sla1": [["dag1_sla1", "SlaCallbackRequest", "full_filepath", "dag_id", "processor_subdir", "tmpdir"], ["manager", "processor", "_add_callback_to_queue", "dag1_sla1"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1", "dag1_req2"]], "dag1_sla2": [["dag1_sla2", "SlaCallbackRequest", "full_filepath", "dag_id", "processor_subdir", "tmpdir"], ["manager", "processor", "_add_callback_to_queue", "dag1_sla2"]], "dag2_req1": [["dag2_req1", "DagCallbackRequest", "full_filepath", "dag_id", "run_id", "is_failure_callback", "False", "processor_subdir", "tmpdir", "msg", "None"], ["manager", "processor", "_add_callback_to_queue", "dag2_req1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag2_req1", "full_filepath", "dag1_req1", "full_filepath"], ["set", "manager", "processor", "_callback_to_execute", "keys", "dag1_req1", "full_filepath", "dag2_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag2_req1", "full_filepath", "dag2_req1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag2_req1", "full_filepath", "dag1_req1", "full_filepath"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag1_req1", "full_filepath", "dag2_req1", "full_filepath"]], "dag3_sla1": [["dag3_sla1", "SlaCallbackRequest", "full_filepath", "dag_id", "processor_subdir", "tmpdir"], ["manager", "processor", "_add_callback_to_queue", "dag3_sla1"], ["manager", "processor", "_callback_to_execute", "dag3_sla1", "full_filepath", "dag3_sla1"]], "manager": [["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "processor", "_add_callback_to_queue", "dag1_req1"], ["manager", "processor", "_add_callback_to_queue", "dag1_sla1"], ["manager", "processor", "_add_callback_to_queue", "dag2_req1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag2_req1", "full_filepath", "dag1_req1", "full_filepath"], ["set", "manager", "processor", "_callback_to_execute", "keys", "dag1_req1", "full_filepath", "dag2_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1"], ["manager", "processor", "_callback_to_execute", "dag2_req1", "full_filepath", "dag2_req1"], ["manager", "processor", "_add_callback_to_queue", "dag1_sla2"], ["manager", "processor", "_add_callback_to_queue", "dag3_sla1"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag2_req1", "full_filepath", "dag1_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1"], ["manager", "processor", "_callback_to_execute", "dag3_sla1", "full_filepath", "dag3_sla1"], ["manager", "processor", "_add_callback_to_queue", "dag1_req2"], ["manager", "processor", "_file_path_queue", "collections", "deque", "dag1_req1", "full_filepath", "dag2_req1", "full_filepath"], ["manager", "processor", "_callback_to_execute", "dag1_req1", "full_filepath", "dag1_req1", "dag1_sla1", "dag1_req2"]]}, "name": "test_callback_queue", "params": {"self": "", "tmpdir": ""}, "params_descr": {"self": "", "tmpdir": ""}, "params_occur": {"self": [], "tmpdir": [["dag1_req1", "DagCallbackRequest", "full_filepath", "dag_id", "run_id", "is_failure_callback", "False", "processor_subdir", "tmpdir", "msg", "None"], ["dag1_req2", "DagCallbackRequest", "full_filepath", "dag_id", "run_id", "is_failure_callback", "False", "processor_subdir", "tmpdir", "msg", "None"], ["dag1_sla1", "SlaCallbackRequest", "full_filepath", "dag_id", "processor_subdir", "tmpdir"], ["dag1_sla2", "SlaCallbackRequest", "full_filepath", "dag_id", "processor_subdir", "tmpdir"], ["dag2_req1", "DagCallbackRequest", "full_filepath", "dag_id", "run_id", "is_failure_callback", "False", "processor_subdir", "tmpdir", "msg", "None"], ["dag3_sla1", "SlaCallbackRequest", "full_filepath", "dag_id", "processor_subdir", "tmpdir"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "tmpdir": []}, "q_name": "TestDagProcessorJobRunner.test_callback_queue", "ret_exprs": [], "ret_type": "", "variables": {"dag1_req1": "", "dag1_req2": "", "dag1_sla1": "", "dag1_sla2": "", "dag2_req1": "", "dag3_sla1": "", "manager": ""}, "variables_p": {"dag1_req1": [["int", 0.09276306819359803]], "dag1_req2": [["int", 0.09276306819359803]], "dag1_sla1": [["int", 0.2897114486882383], ["float", 0.08905843013046152], ["homeassistancomponents.zha.core.channels.ChannelPool", 0.0877084008669774]], "dag1_sla2": [["int", 0.2897114486882383], ["float", 0.08905843013046152], ["homeassistancomponents.zha.core.channels.ChannelPool", 0.0877084008669774]], "dag2_req1": [["int", 0.09276306819359803]], "dag3_sla1": [["int", 0.2897114486882383], ["float", 0.08905843013046152], ["homeassistancomponents.zha.core.channels.ChannelPool", 0.0877084008669774]], "manager": [["pytch.utils.Position", 0.11585963246690938]]}}], "name": "TestDagProcessorJobRunner", "q_name": "TestDagProcessorJobRunner", "variables": {}, "variables_p": {}}, {"cls_lc": [[1288, 0], [1380, 43]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1289, 4], [1291, 44]], "fn_var_ln": {"old_modules": [[1291, 8], [1291, 24]]}, "fn_var_occur": {"old_modules": [["self", "old_modules", "dict", "sys", "modules"]]}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "old_modules", "dict", "sys", "modules"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagFileProcessorAgent.setup_method", "ret_exprs": [], "ret_type": "", "variables": {"old_modules": ""}, "variables_p": {"old_modules": [["Pattern[str]", 0.14529324700480337], ["Dict[str, Any]", 0.13332593503781928], ["Dict[Type[Any], str]", 0.09810503759061373], ["Type[Callable[Any, int]]", 0.09539163912096836], ["dict", 0.09344156006904031], ["Dict[str, str]", 0.08991109904364854], ["Dict[Any, Union[int, str]]", 0.08799185533861917], ["Set[str]", 0.08695925359089687]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1293, 4], [1302, 32]], "fn_var_ln": {"remove_list": [[1296, 8], [1296, 19]]}, "fn_var_occur": {"remove_list": [["remove_list", "append", "mod"]]}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["mod", "self", "old_modules"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagFileProcessorAgent.teardown_method", "ret_exprs": [], "ret_type": "", "variables": {"remove_list": ""}, "variables_p": {"remove_list": [["list", 0.99999999999172], ["List[float]", 4.139903245981006e-12], ["str", 4.139903245981006e-12]]}}, {"docstring": {"func": "Configure the context to have logging.logging_config_class set to a fake logging", "long_descr": "class path, thus when reloading logging module the airflow.processor_manager\nlogger should not be configured.", "ret": null}, "fn_lc": [[1304, 4], [1334, 51]], "fn_var_ln": {"async_mode": [[1314, 12], [1314, 22]], "log_file_loc": [[1315, 12], [1315, 24]], "processor_agent": [[1323, 12], [1323, 27]], "test_dag_path": [[1313, 12], [1313, 25]]}, "fn_var_occur": {"async_mode": [["async_mode", "conf", "get"], ["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"]], "log_file_loc": [["log_file_loc", "conf", "get"], ["os", "remove", "log_file_loc"], ["os", "path", "isfile", "log_file_loc"]], "processor_agent": [["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"], ["processor_agent", "start"], ["processor_agent", "run_single_parsing_loop"], ["processor_agent", "_process", "join"]], "test_dag_path": [["test_dag_path", "TEST_DAG_FOLDER"], ["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"]]}, "name": "test_reload_module", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagFileProcessorAgent.test_reload_module", "ret_exprs": [], "ret_type": "", "variables": {"async_mode": "", "log_file_loc": "", "processor_agent": "", "test_dag_path": ""}, "variables_p": {"async_mode": [["str", 0.5196606792437186], ["Dict[Any, str]", 0.10528637124048681], ["Dict[str, str]", 0.09919517063556017], ["os._Environ[str]", 0.09600221670804633], ["FrozenSet", 0.09164528217115771], ["Optional[Dict[str, Any]]", 0.08821028000103032]], "log_file_loc": [["str", 0.6584904316851294], ["pathlib.Path", 0.06265682872590009]], "processor_agent": [["int", 0.2713961522786428], ["Dict[str, Tuple[Any, Any]]", 0.10020826074392855], ["bytes", 0.08483875494532064]], "test_dag_path": [["pathlib.Path", 0.3870113528049884], ["Dict[str, Union[Any, Any]]", 0.1462966342586019], ["list", 0.08445124143256623], ["str", 0.08443362213771251], ["List[pathlib.Path]", 0.08276779844249373]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1337, 4], [1360, 101]], "fn_var_ln": {"async_mode": [[1342, 8], [1342, 18]], "dag_ids": [[1359, 12], [1359, 19]], "processor_agent": [[1343, 8], [1343, 23]], "test_dag_path": [[1341, 8], [1341, 21]]}, "fn_var_occur": {"async_mode": [["async_mode", "conf", "get"], ["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"]], "dag_ids": [["dag_ids", "session", "query", "DagModel", "dag_id", "order_by", "all"], ["dag_ids", "session", "query", "SerializedDagModel", "dag_id", "order_by", "all"]], "processor_agent": [["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"], ["processor_agent", "start"], ["processor_agent", "run_single_parsing_loop"], ["processor_agent", "done"], ["processor_agent", "wait_until_finished"], ["processor_agent", "heartbeat"], ["processor_agent", "all_files_processed"], ["processor_agent", "done"]], "test_dag_path": [["test_dag_path", "TEST_DAG_FOLDER"], ["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"]]}, "name": "test_parse_once", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagFileProcessorAgent.test_parse_once", "ret_exprs": [], "ret_type": "", "variables": {"async_mode": "", "dag_ids": "", "processor_agent": "", "test_dag_path": ""}, "variables_p": {"async_mode": [["str", 0.5196606792437186], ["Dict[Any, str]", 0.10528637124048681], ["Dict[str, str]", 0.09919517063556017], ["os._Environ[str]", 0.09600221670804633], ["FrozenSet", 0.09164528217115771], ["Optional[Dict[str, Any]]", 0.08821028000103032]], "dag_ids": [["int", 0.4817132817490193], ["Type[Tuple[str, Any]]", 0.24412541256673348], ["Pattern[Any]", 0.09688477052552567], ["str", 0.08296260146230658]], "processor_agent": [["int", 0.2713961522786428], ["Dict[str, Tuple[Any, Any]]", 0.10020826074392855], ["bytes", 0.08483875494532064]], "test_dag_path": [["pathlib.Path", 0.3870113528049884], ["Dict[str, Union[Any, Any]]", 0.1462966342586019], ["list", 0.08445124143256623], ["str", 0.08443362213771251], ["List[pathlib.Path]", 0.08276779844249373]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1362, 4], [1380, 43]], "fn_var_ln": {"async_mode": [[1364, 8], [1364, 18]], "log_file_loc": [[1366, 8], [1366, 20]], "processor_agent": [[1373, 8], [1373, 23]], "test_dag_path": [[1363, 8], [1363, 21]]}, "fn_var_occur": {"async_mode": [["async_mode", "conf", "get"], ["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"]], "log_file_loc": [["log_file_loc", "conf", "get"], ["os", "remove", "log_file_loc"], ["os", "path", "isfile", "log_file_loc"]], "processor_agent": [["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"], ["processor_agent", "start"], ["processor_agent", "run_single_parsing_loop"], ["processor_agent", "_process", "join"]], "test_dag_path": [["test_dag_path", "TEST_DAG_FOLDER"], ["processor_agent", "DagFileProcessorAgent", "test_dag_path", "timedelta", "days", "False", "async_mode"]]}, "name": "test_launch_process", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDagFileProcessorAgent.test_launch_process", "ret_exprs": [], "ret_type": "", "variables": {"async_mode": "", "log_file_loc": "", "processor_agent": "", "test_dag_path": ""}, "variables_p": {"async_mode": [["str", 0.5196606792437186], ["Dict[Any, str]", 0.10528637124048681], ["Dict[str, str]", 0.09919517063556017], ["os._Environ[str]", 0.09600221670804633], ["FrozenSet", 0.09164528217115771], ["Optional[Dict[str, Any]]", 0.08821028000103032]], "log_file_loc": [["str", 0.6584904316851294], ["pathlib.Path", 0.06265682872590009]], "processor_agent": [["int", 0.2713961522786428], ["Dict[str, Tuple[Any, Any]]", 0.10020826074392855], ["bytes", 0.08483875494532064]], "test_dag_path": [["pathlib.Path", 0.3870113528049884], ["Dict[str, Union[Any, Any]]", 0.1462966342586019], ["list", 0.08445124143256623], ["str", 0.08443362213771251], ["List[pathlib.Path]", 0.08276779844249373]]}}], "name": "TestDagFileProcessorAgent", "q_name": "TestDagFileProcessorAgent", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "collections", "logging", "multiprocessing", "os", "pathlib", "random", "socket", "sys", "threading", "time", "datetime", "datetime", "timedelta", "logging", "config", "dictConfig", "tempfile", "TemporaryDirectory", "textwrap", "dedent", "unittest", "mock", "unittest", "mock", "MagicMock", "PropertyMock", "pytest", "time_machine", "sqlalchemy", "func", "airflow", "callbacks", "callback_requests", "CallbackRequest", "DagCallbackRequest", "SlaCallbackRequest", "airflow", "config_templates", "airflow_local_settings", "DEFAULT_LOGGING_CONFIG", "airflow", "configuration", "conf", "airflow", "dag_processing", "manager", "DagFileProcessorAgent", "DagFileProcessorManager", "DagFileStat", "DagParsingSignal", "DagParsingStat", "airflow", "dag_processing", "processor", "DagFileProcessorProcess", "airflow", "jobs", "dag_processor_job_runner", "DagProcessorJobRunner", "airflow", "jobs", "job", "Job", "airflow", "models", "DagBag", "DagModel", "DbCallbackRequest", "errors", "airflow", "models", "dagcode", "DagCode", "airflow", "models", "serialized_dag", "SerializedDagModel", "airflow", "utils", "timezone", "airflow", "utils", "net", "get_hostname", "airflow", "utils", "session", "create_session", "tests", "core", "test_logging_config", "SETTINGS_FILE_VALID", "settings_context", "tests", "models", "TEST_DAGS_FOLDER", "tests", "test_utils", "config", "conf_vars", "tests", "test_utils", "db", "clear_db_callbacks", "clear_db_dags", "clear_db_runs", "clear_db_serialized_dags"], "mod_var_ln": {"DEFAULT_DATE": [[67, 0], [67, 12]], "TEST_DAG_FOLDER": [[65, 0], [65, 15]]}, "mod_var_occur": {"DEFAULT_DATE": [["DEFAULT_DATE"]], "TEST_DAG_FOLDER": [["test_dag_path", "str", "TEST_DAG_FOLDER"], ["test_dag_path", "str", "TEST_DAG_FOLDER"], ["other_test_dag_path", "str", "TEST_DAG_FOLDER"], ["processor", "DagFileProcessorProcess", "file_path", "pickle_dags", "False", "dag_ids", "dag_directory", "TEST_DAG_FOLDER", "callback_requests"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "seconds", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["processor", "DagFileProcessorProcess", "file_path", "pickle_dags", "False", "dag_ids", "dag_directory", "str", "TEST_DAG_FOLDER", "callback_requests"], ["dag_directory", "TEST_DAG_FOLDER", "parent"], ["dag_filepath", "TEST_DAG_FOLDER"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["dag_filepath", "TEST_DAG_FOLDER"], ["dag_filepath", "TEST_DAG_FOLDER"], ["dag_filepath", "TEST_DAG_FOLDER"], ["dag_filepath", "TEST_DAG_FOLDER"], ["manager", "DagProcessorJobRunner", "job", "Job", "processor", "DagFileProcessorManager", "dag_directory", "TEST_DAG_FOLDER", "max_runs", "processor_timeout", "timedelta", "days", "signal_conn", "MagicMock", "dag_ids", "pickle_dags", "False", "async_mode", "True"], ["test_dag_path", "TEST_DAG_FOLDER"], ["test_dag_path", "TEST_DAG_FOLDER"], ["test_dag_path", "TEST_DAG_FOLDER"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 272}, "session_id": "I8NC2TLcmVacvH4QnmqNaqd9neFUgalQeHRmD9mBuH4", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"DEFAULT_DATE": "", "TEST_DAG_FOLDER": ""}, "variables_p": {"DEFAULT_DATE": [["dict", 0.535472311787338], ["float", 0.11181080647298922], ["datetime.datetime.date", 0.0947523502734066], ["multiprocessing.synchronize.Lock", 0.08957716783133589], ["datetime.date", 0.08430916231518602]], "TEST_DAG_FOLDER": [["str", 0.45917191358135623], ["pathlib.Path", 0.21785846560788313], ["dict", 0.07458118664661463]]}}}