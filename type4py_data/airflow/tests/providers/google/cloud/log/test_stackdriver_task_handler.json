{"error": null, "response": {"classes": [{"cls_lc": [[71, 0], [384, 57]], "cls_var_ln": {"DAG_ID": [[72, 4], [72, 10]], "TASK_ID": [[73, 4], [73, 11]]}, "cls_var_occur": {"DAG_ID": [], "TASK_ID": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[76, 4], [87, 23]], "fn_var_ln": {"ti": [[77, 8], [77, 15]]}, "fn_var_occur": {"ti": [["self", "ti", "create_task_instance", "dag_id", "self", "DAG_ID", "task_id", "self", "TASK_ID", "execution_date", "timezone", "datetime", "state", "TaskInstanceState", "RUNNING"], ["self", "ti", "try_number"], ["self", "ti", "raw", "False"]]}, "name": "task_instance", "params": {"clean_stackdriver_handlers": "", "create_task_instance": "", "self": ""}, "params_descr": {"clean_stackdriver_handlers": "", "create_task_instance": "", "self": ""}, "params_occur": {"clean_stackdriver_handlers": [], "create_task_instance": [["self", "ti", "create_task_instance", "dag_id", "self", "DAG_ID", "task_id", "self", "TASK_ID", "execution_date", "timezone", "datetime", "state", "TaskInstanceState", "RUNNING"]], "self": [["self", "ti", "create_task_instance", "dag_id", "self", "DAG_ID", "task_id", "self", "TASK_ID", "execution_date", "timezone", "datetime", "state", "TaskInstanceState", "RUNNING"], ["self", "ti", "try_number"], ["self", "ti", "raw", "False"]]}, "params_p": {"args": [], "clean_stackdriver_handlers": [["str", 0.10167534511531724], ["zproc.state.state.State", 0.09104612699000153], ["Iterable", 0.09104612699000153], ["T", 0.08906288896694685], ["Type[T]", 0.08906288896694685], ["dict", 0.08778635039227953], ["Dict[str, Any]", 0.08778635039227953]], "create_task_instance": [["Callable", 0.10747895249650237], ["Iterable[Callable]", 0.10747895249650237], ["int", 0.10634442684776577], ["db.models.Name", 0.10007499628677806], ["str", 0.09329467656107784]], "kwargs": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.task_instance", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["str", 0.40580745228982174], ["Dict[str, str]", 0.10841078417097845], ["int", 0.10025415401469545], ["List[str]", 0.09900473006670871], ["List[Dict[str, Any]]", 0.09780389636813379], ["Dict[str, Any]", 0.09295336227117469]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[89, 4], [95, 39]], "fn_var_ln": {"handler_kwargs": [[91, 8], [91, 22]], "logger": [[93, 8], [93, 19]], "stackdriver_task_handler": [[92, 8], [92, 32]], "transport_mock": [[90, 8], [90, 27]]}, "fn_var_occur": {"handler_kwargs": [["handler_kwargs", "self", "transport_mock", "handler_kwargs"], ["stackdriver_task_handler", "StackdriverTaskHandler", "handler_kwargs"]], "logger": [["self", "logger", "logging", "getLogger"], ["self", "logger", "addHandler", "stackdriver_task_handler"]], "stackdriver_task_handler": [["stackdriver_task_handler", "StackdriverTaskHandler", "handler_kwargs"], ["self", "logger", "addHandler", "stackdriver_task_handler"]], "transport_mock": [["self", "transport_mock", "mock", "MagicMock"], ["handler_kwargs", "self", "transport_mock", "handler_kwargs"]]}, "name": "_setup_handler", "params": {"handler_kwargs": "", "self": ""}, "params_descr": {"handler_kwargs": "", "self": ""}, "params_occur": {"handler_kwargs": [["handler_kwargs", "self", "transport_mock", "handler_kwargs"], ["stackdriver_task_handler", "StackdriverTaskHandler", "handler_kwargs"]], "self": [["self", "transport_mock", "mock", "MagicMock"], ["handler_kwargs", "self", "transport_mock", "handler_kwargs"], ["self", "logger", "logging", "getLogger"], ["self", "logger", "addHandler", "stackdriver_task_handler"]]}, "params_p": {"args": [], "handler_kwargs": [["Mapping[str, Any]", 0.4302320839131555]], "kwargs": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask._setup_handler", "ret_exprs": ["return stackdriver_task_handler"], "ret_type": "", "ret_type_p": [["str", 0.18593839782307464], ["int", 0.1594862792018164], ["List[str]", 0.08184001554987069]], "variables": {"handler_kwargs": "", "logger": "", "stackdriver_task_handler": "", "transport_mock": ""}, "variables_p": {"handler_kwargs": [["cmk.gui.plugins.views.utils.PainterOptions", 0.34038869592826626], ["list", 0.178008294520811], ["Dict[Any, str]", 0.1006242998916646], ["DefaultDict[Any, dict]", 0.09842190349141058]], "logger": [["logging.Logger", 1.0]], "stackdriver_task_handler": [["Dict[str, Dict[str, Any]]", 0.23078328574152723], ["str", 0.20004974354666166], ["Dict[bytes, Any]", 0.12273598295277846]], "transport_mock": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[99, 4], [117, 9]], "fn_var_ln": {"labels": [[108, 8], [108, 14]], "resource": [[114, 8], [114, 16]], "return_value": [[100, 8], [100, 50]], "stackdriver_task_handler": [[102, 8], [102, 32]]}, "fn_var_occur": {"labels": [["labels", "self", "TASK_ID", "self", "DAG_ID"], ["resource", "Resource", "type", "labels"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]], "resource": [["resource", "Resource", "type", "labels"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]], "return_value": [["mock_get_creds_and_project_id", "return_value"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler"], ["stackdriver_task_handler", "set_context", "self", "ti"], ["stackdriver_task_handler", "flush"]]}, "name": "test_should_set_labels", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler"], ["stackdriver_task_handler", "set_context", "self", "ti"], ["self", "logger", "info"], ["labels", "self", "TASK_ID", "self", "DAG_ID"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [["mock.Mock", 0.1753187603406292]], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_set_labels", "ret_exprs": [], "ret_type": "", "variables": {"labels": "", "resource": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"labels": [["Dict[str, str]", 0.18379425014802225], ["Dict[Type[Any], Type[Any]]", 0.1106139801274042], ["Dict[str, int]", 0.10868595237369862], ["Dict[Any, Tuple[Any, Any, Any]]", 0.1016379796641831], ["set", 0.0982553751680527], ["Dict[Any, int]", 0.09166898717276953]], "resource": [["Tuple[str, str, str]", 0.12212311243661853], ["Tuple[str, str, str, str, str]", 0.12212311243661853], ["mock.Mock", 0.09630974566711129], ["frozenset[str]", 0.08229829207984174]], "return_value": [["mock._Call", 0.17692186076559138], ["Optional[bytes]", 0.1381811071131984], ["Dict[str, List[Any]]", 0.1060050957077985], ["Dict[str, int]", 0.10390150489979823], ["str", 0.09434079831919982], ["list", 0.07811297398841446], ["bool", 0.07177804346068463]], "stackdriver_task_handler": [["Dict[str, str]", 0.28313592776588375], ["Dict[str, Optional[str]]", 0.18629516638487936], ["bool", 0.12872871132860855], ["Dict[str, Union[float, str]]", 0.1033248159676853], ["Dict[str, Union[Any, Any]]", 0.10180118551266241], ["Dict[Tuple[int, int, int, int], str]", 0.10024430324252037], ["Dict[str, Union[dict, Any, Any, str]]", 0.0964698897977602]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[121, 4], [142, 9]], "fn_var_ln": {"labels": [[132, 8], [132, 14]], "resource": [[139, 8], [139, 16]], "return_value": [[122, 8], [122, 50]], "stackdriver_task_handler": [[124, 8], [124, 32]]}, "fn_var_occur": {"labels": [["stackdriver_task_handler", "self", "_setup_handler", "labels"], ["labels", "self", "TASK_ID", "self", "DAG_ID"], ["resource", "Resource", "type", "labels"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]], "resource": [["resource", "Resource", "type", "labels"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]], "return_value": [["mock_get_creds_and_project_id", "return_value"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler", "labels"], ["stackdriver_task_handler", "set_context", "self", "ti"], ["stackdriver_task_handler", "flush"]]}, "name": "test_should_append_labels", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler", "labels"], ["stackdriver_task_handler", "set_context", "self", "ti"], ["self", "logger", "info"], ["labels", "self", "TASK_ID", "self", "DAG_ID"], ["self", "transport_mock", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "labels", "resource", "resource"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [["mock.Mock", 0.18880145439779755]], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_append_labels", "ret_exprs": [], "ret_type": "", "variables": {"labels": "", "resource": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"labels": [["List[Tuple[str, ...]]", 0.2805656836648374], ["str", 0.1893610531903699], ["dict", 0.1145764632321782], ["Type[property]", 0.09792478906521222]], "resource": [["Tuple[str, str, str]", 0.12212311243661853], ["Tuple[str, str, str, str, str]", 0.12212311243661853], ["mock.Mock", 0.09630974566711129], ["frozenset[str]", 0.08229829207984174]], "return_value": [["mock._Call", 0.17692186076559138], ["Optional[bytes]", 0.1381811071131984], ["Dict[str, List[Any]]", 0.1060050957077985], ["Dict[str, int]", 0.10390150489979823], ["str", 0.09434079831919982], ["list", 0.07811297398841446], ["bool", 0.07177804346068463]], "stackdriver_task_handler": [["Dict[str, Any]", 0.21406967247949638], ["Dict[str, Union[float, str]]", 0.19486885027710832], ["Dict[str, str]", 0.1912797010508494], ["str", 0.12282519294772684], ["Dict[str, Type[Any]]", 0.09450177252224755], ["bool", 0.0923427820263071], ["Dict[str, Dict[str, Any]]", 0.09011202869626435]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[146, 4], [170, 49]], "fn_var_ln": {"logs": [[153, 8], [153, 12]], "metadata": [[153, 14], [153, 22]], "return_value": [[150, 8], [150, 50]], "stackdriver_task_handler": [[152, 8], [152, 32]]}, "fn_var_occur": {"logs": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]], "metadata": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"], ["True", "metadata"]], "return_value": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_get_creds_and_project_id", "return_value"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "name": "test_should_read_logs_for_all_try", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_read_logs_for_all_try", "ret_exprs": [], "ret_type": "", "variables": {"logs": "", "metadata": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"logs": [["logging.Logger", 0.8912756573121282], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.10872434268787187]], "metadata": [["List[Dict[str, Any]]", 0.35917509511651446], ["logging.StreamHandler", 0.23396683598323603], ["bool", 0.1890979240727379], ["str", 0.14723218382744185], ["logging.Handler", 0.07052796100006962]], "return_value": [["str", 0.3140411154758315], ["List[Tuple[Any, Any, None]]", 0.1582609339794786], ["List[Dict[str, str]]", 0.12956510169827504], ["Dict[str, List[Any]]", 0.1165943198176166], ["int", 0.09662830028763492], ["Dict[str, Literal[-1]]", 0.08962242991345376]], "stackdriver_task_handler": [["str", 0.35630218123011054], ["logging.Logger", 0.19604264747942585], ["Union[Literal, str]", 0.09646668449760802], ["List[str]", 0.08758489473471381], ["int", 0.08626602208918692], ["Set[str]", 0.07118649068019957]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[174, 4], [200, 49]], "fn_var_ln": {"logs": [[183, 8], [183, 12]], "metadata": [[183, 14], [183, 22]], "return_value": [[178, 8], [178, 50]], "stackdriver_task_handler": [[181, 8], [181, 32]]}, "fn_var_occur": {"logs": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]], "metadata": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"], ["True", "metadata"]], "return_value": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_get_creds_and_project_id", "return_value"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "name": "test_should_read_logs_for_task_with_quote", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["self", "ti", "task_id"], ["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_read_logs_for_task_with_quote", "ret_exprs": [], "ret_type": "", "variables": {"logs": "", "metadata": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"logs": [["logging.Logger", 0.8912756573121282], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.10872434268787187]], "metadata": [["List[Dict[str, Any]]", 0.35917509511651446], ["logging.StreamHandler", 0.23396683598323603], ["bool", 0.1890979240727379], ["str", 0.14723218382744185], ["logging.Handler", 0.07052796100006962]], "return_value": [["str", 0.3140411154758315], ["List[Tuple[Any, Any, None]]", 0.1582609339794786], ["List[Dict[str, str]]", 0.12956510169827504], ["Dict[str, List[Any]]", 0.1165943198176166], ["int", 0.09662830028763492], ["Dict[str, Literal[-1]]", 0.08962242991345376]], "stackdriver_task_handler": [["str", 0.35630218123011054], ["logging.Logger", 0.19604264747942585], ["Union[Literal, str]", 0.09646668449760802], ["List[str]", 0.08758489473471381], ["int", 0.08626602208918692], ["Set[str]", 0.07118649068019957]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[204, 4], [229, 49]], "fn_var_ln": {"logs": [[211, 8], [211, 12]], "metadata": [[211, 14], [211, 22]], "return_value": [[208, 8], [208, 50]], "stackdriver_task_handler": [[209, 8], [209, 32]]}, "fn_var_occur": {"logs": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]], "metadata": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"], ["True", "metadata"]], "return_value": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_get_creds_and_project_id", "return_value"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "name": "test_should_read_logs_for_single_try", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_read_logs_for_single_try", "ret_exprs": [], "ret_type": "", "variables": {"logs": "", "metadata": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"logs": [["logging.Logger", 0.8912756573121282], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.10872434268787187]], "metadata": [["List[Dict[str, Any]]", 0.35917509511651446], ["logging.StreamHandler", 0.23396683598323603], ["bool", 0.1890979240727379], ["str", 0.14723218382744185], ["logging.Handler", 0.07052796100006962]], "return_value": [["str", 0.3140411154758315], ["List[Tuple[Any, Any, None]]", 0.1582609339794786], ["List[Dict[str, str]]", 0.12956510169827504], ["Dict[str, List[Any]]", 0.1165943198176166], ["int", 0.09662830028763492], ["Dict[str, Literal[-1]]", 0.08962242991345376]], "stackdriver_task_handler": [["str", 0.35630218123011054], ["logging.Logger", 0.19604264747942585], ["Union[Literal, str]", 0.09646668449760802], ["List[str]", 0.08758489473471381], ["int", 0.08626602208918692], ["Set[str]", 0.07118649068019957]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[233, 4], [281, 50]], "fn_var_ln": {"logs": [[262, 8], [262, 12]], "metadata1": [[241, 14], [241, 23]], "metadata2": [[262, 14], [262, 23]], "return_value": [[238, 8], [238, 50]], "stackdriver_task_handler": [[239, 8], [239, 32]]}, "fn_var_occur": {"logs": [["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti"], ["logs", "metadata2", "stackdriver_task_handler", "read", "self", "ti", "metadata1"]], "metadata1": [["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti"], ["False", "metadata1"], ["logs", "metadata2", "stackdriver_task_handler", "read", "self", "ti", "metadata1"]], "metadata2": [["logs", "metadata2", "stackdriver_task_handler", "read", "self", "ti", "metadata1"], ["True", "metadata2"]], "return_value": [["mock_client", "return_value", "list_log_entries", "side_effect", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_get_creds_and_project_id", "return_value"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"], ["mock_client", "return_value", "list_log_entries", "return_value", "next_page_token", "None"], ["mock_client", "return_value", "list_log_entries", "assert_called_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti"], ["logs", "metadata2", "stackdriver_task_handler", "read", "self", "ti", "metadata1"]]}, "name": "test_should_read_logs_with_pagination", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "return_value", "list_log_entries", "side_effect", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"], ["mock_client", "return_value", "list_log_entries", "return_value", "next_page_token", "None"], ["mock_client", "return_value", "list_log_entries", "assert_called_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti"], ["logs", "metadata2", "stackdriver_task_handler", "read", "self", "ti", "metadata1"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_read_logs_with_pagination", "ret_exprs": [], "ret_type": "", "variables": {"logs": "", "metadata1": "", "metadata2": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"logs": [["logging.Logger", 0.7852821014535678], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.10678817322537845]], "metadata1": [["List[Dict[str, Any]]", 0.30684612964878205], ["logging.StreamHandler", 0.2040549942567877], ["bool", 0.201555174945926], ["str", 0.13740636214585938], ["logging.Handler", 0.07945965919664141]], "metadata2": [["List[Dict[str, Any]]", 0.4119029974048839], ["bool", 0.2736996407097986], ["logging.StreamHandler", 0.17312961758933748], ["str", 0.07469268159758859], ["logging.Handler", 0.06657506269839142]], "return_value": [["mock._Call", 0.20396194157597597], ["str", 0.12014820883706408], ["tests.utils.MockCoroutine", 0.10132961330155371], ["Dict[str, int]", 0.09970212281584702], ["Dict[Any, Union[Any, Any]]", 0.09745732928180119], ["Dict[str, Any]", 0.0892428811162584]], "stackdriver_task_handler": [["str", 0.4071412014267077], ["logging.Logger", 0.204915399961967], ["Union[Literal, str]", 0.11643594448648308], ["logging.Handler", 0.09492771818743721], ["int", 0.08866521025898588], ["List[str]", 0.08791452567841912]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[285, 4], [296, 50]], "fn_var_ln": {"logs": [[293, 8], [293, 12]], "metadata1": [[293, 14], [293, 23]], "return_value": [[290, 8], [290, 50]], "stackdriver_task_handler": [[292, 8], [292, 32]]}, "fn_var_occur": {"logs": [["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti", "True"]], "metadata1": [["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti", "True"], ["True", "metadata1"]], "return_value": [["mock_client", "return_value", "list_log_entries", "side_effect", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "None"], ["mock_get_creds_and_project_id", "return_value"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti", "True"]]}, "name": "test_should_read_logs_with_download", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "return_value", "list_log_entries", "side_effect", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "mock", "MagicMock", "pages", "iter", "_create_list_log_entries_response_mock", "None"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler"], ["logs", "metadata1", "stackdriver_task_handler", "read", "self", "ti", "True"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_read_logs_with_download", "ret_exprs": [], "ret_type": "", "variables": {"logs": "", "metadata1": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"logs": [["logging.Logger", 0.45222407890391525], ["logging.Formatter", 0.2527230805843713], ["logging.RootLogger", 0.09473626951475672], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.08515450416403554]], "metadata1": [["List[Dict[str, Any]]", 0.35601120632837774], ["logging.StreamHandler", 0.2265714686946484], ["bool", 0.1902222747736252], ["str", 0.15526466872111366], ["logging.Handler", 0.07193038148223499]], "return_value": [["mock._Call", 0.20396194157597597], ["str", 0.12014820883706408], ["tests.utils.MockCoroutine", 0.10132961330155371], ["Dict[str, int]", 0.09970212281584702], ["Dict[Any, Union[Any, Any]]", 0.09745732928180119], ["Dict[str, Any]", 0.0892428811162584]], "stackdriver_task_handler": [["str", 0.34747585340666554], ["logging.Logger", 0.2690852928943501], ["Union[Literal, str]", 0.10240904712570192], ["List[str]", 0.08948988561553384], ["int", 0.08897547453168002]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[300, 4], [336, 49]], "fn_var_ln": {"entry": [[312, 8], [312, 13]], "logs": [[316, 8], [316, 12]], "metadata": [[316, 14], [316, 22]], "page": [[313, 8], [313, 12]], "resource": [[302, 8], [302, 16]], "return_value": [[301, 8], [301, 50]], "stackdriver_task_handler": [[310, 8], [310, 32]]}, "fn_var_occur": {"entry": [["entry", "mock", "MagicMock", "json_payload"], ["page", "mock", "MagicMock", "entries", "entry", "entry", "next_page_token", "None"]], "logs": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]], "metadata": [["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"], ["True", "metadata"]], "page": [["page", "mock", "MagicMock", "entries", "entry", "entry", "next_page_token", "None"], ["mock_client", "return_value", "list_log_entries", "return_value", "pages", "n", "n", "page"]], "resource": [["resource", "Resource", "type", "labels"], ["stackdriver_task_handler", "self", "_setup_handler", "resource", "resource"]], "return_value": [["mock_get_creds_and_project_id", "return_value"], ["mock_client", "return_value", "list_log_entries", "return_value", "pages", "n", "n", "page"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "stackdriver_task_handler": [["stackdriver_task_handler", "self", "_setup_handler", "resource", "resource"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "name": "test_should_read_logs_with_custom_resources", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "return_value", "list_log_entries", "return_value", "pages", "n", "n", "page"], ["mock_client", "return_value", "list_log_entries", "assert_called_once_with", "request", "ListLogEntriesRequest", "resource_names", "filter", "order_by", "page_size", "page_token", "None"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["stackdriver_task_handler", "self", "_setup_handler", "resource", "resource"], ["logs", "metadata", "stackdriver_task_handler", "read", "self", "ti"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [["mock.Mock", 0.3009018758631546], ["tests.test_util.aiohttp.AiohttpClientMocker", 0.10496092449061951]], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_read_logs_with_custom_resources", "ret_exprs": [], "ret_type": "", "variables": {"entry": "", "logs": "", "metadata": "", "page": "", "resource": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"entry": [["mock.Mock", 0.7459480053316491]], "logs": [["logging.Logger", 0.8912756573121282], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.10872434268787187]], "metadata": [["List[Dict[str, Any]]", 0.35917509511651446], ["logging.StreamHandler", 0.23396683598323603], ["bool", 0.1890979240727379], ["str", 0.14723218382744185], ["logging.Handler", 0.07052796100006962]], "page": [["mock.Mock", 0.7306349230078089]], "resource": [["str", 0.19016800516588855], ["raiden.utils.InitiatorAddress", 0.09470128096350852], ["int", 0.09210457723193427]], "return_value": [["str", 0.32943343093161515], ["Optional[bytes]", 0.10884527867866461], ["Dict[Any, Union[int, str]]", 0.1019091119371989]], "stackdriver_task_handler": [["logging.Logger", 0.31843435103682577], ["logging.Handler", 0.10242305831370738], ["List[str]", 0.0911316522676795], ["bool", 0.09051247403168855]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[340, 4], [357, 49]], "fn_var_ln": {"client": [[344, 8], [344, 14]], "return_value": [[341, 8], [341, 50]], "stackdriver_task_handler": [[343, 8], [343, 32]]}, "fn_var_occur": {"client": [["client", "stackdriver_task_handler", "_client"], ["mock_client", "return_value", "client"]], "return_value": [["mock_get_creds_and_project_id", "return_value"], ["mock_client", "return_value", "client"]], "stackdriver_task_handler": [["stackdriver_task_handler", "StackdriverTaskHandler", "gcp_key_path"], ["client", "stackdriver_task_handler", "_client"]]}, "name": "test_should_use_credentials", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [["mock_client", "assert_called_once_with", "credentials", "client_info", "mock", "ANY", "project"], ["mock_client", "return_value", "client"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"], ["mock_get_creds_and_project_id", "assert_called_once_with", "disable_logging", "True", "key_path", "scopes", "frozenset"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_use_credentials", "ret_exprs": [], "ret_type": "", "variables": {"client": "", "return_value": "", "stackdriver_task_handler": ""}, "variables_p": {"client": [["Dict[str, Any]", 0.12633133810297414]], "return_value": [["str", 0.21186189882835094], ["list", 0.20542690924483298], ["Optional[bytes]", 0.14823183605365]], "stackdriver_task_handler": [["Dict[str, float]", 0.15106784778625476], ["List[Dict[str, Any]]", 0.0825188235161649]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[361, 4], [384, 57]], "fn_var_ln": {"expected_filter": [[376, 8], [376, 23]], "filter_params": [[375, 8], [375, 21]], "parsed_qs": [[368, 8], [368, 17]], "parsed_url": [[367, 8], [367, 18]], "return_value": [[362, 8], [362, 50]], "stackdriver_task_handler": [[364, 8], [364, 32]], "url": [[365, 8], [365, 11]]}, "fn_var_occur": {"expected_filter": [["expected_filter", "self", "ti", "task_id", "self", "DAG_ID", "self", "ti", "execution_date", "isoformat", "self", "ti", "try_number"], ["set", "expected_filter", "set", "filter_params"]], "filter_params": [["filter_params", "parsed_qs", "split"], ["set", "expected_filter", "set", "filter_params"]], "parsed_qs": [["parsed_qs", "parse_qs", "parsed_url", "query"], ["set", "parsed_qs", "keys"], ["filter_params", "parsed_qs", "split"]], "parsed_url": [["parsed_url", "urlsplit", "url"], ["parsed_qs", "parse_qs", "parsed_url", "query"], ["parsed_url", "scheme"], ["parsed_url", "netloc"], ["parsed_url", "path"]], "return_value": [["mock_get_creds_and_project_id", "return_value"]], "stackdriver_task_handler": [["stackdriver_task_handler", "StackdriverTaskHandler", "gcp_key_path"], ["url", "stackdriver_task_handler", "get_external_log_url", "self", "ti", "self", "ti", "try_number"]], "url": [["url", "stackdriver_task_handler", "get_external_log_url", "self", "ti", "self", "ti", "try_number"], ["parsed_url", "urlsplit", "url"]]}, "name": "test_should_return_valid_external_url", "params": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": "", "self": ""}, "params_occur": {"mock_client": [], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]], "self": [["url", "stackdriver_task_handler", "get_external_log_url", "self", "ti", "self", "ti", "try_number"], ["expected_filter", "self", "ti", "task_id", "self", "DAG_ID", "self", "ti", "execution_date", "isoformat", "self", "ti", "try_number"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [["mock.Mock", 0.0877118275330355]], "mock_get_creds_and_project_id": [], "self": []}, "q_name": "TestStackdriverLoggingHandlerTask.test_should_return_valid_external_url", "ret_exprs": [], "ret_type": "", "variables": {"expected_filter": "", "filter_params": "", "parsed_qs": "", "parsed_url": "", "return_value": "", "stackdriver_task_handler": "", "url": ""}, "variables_p": {"expected_filter": [["Dict[str, List[str]]", 0.38511593014575607], ["Dict[str, Union[Any, Any]]", 0.2967900384175938], ["list", 0.11143907202540024], ["Dict[str, list]", 0.09627898253643902]], "filter_params": [["str", 0.11737710524982153], ["Type[Dict[str, Any]]", 0.10089906364069925], ["Tuple[Any, Any, Any]", 0.0952917254490337]], "parsed_qs": [["cmk.utils.tags.TagConfig", 0.07508957114768972]], "parsed_url": [["str", 0.8161648830694666]], "return_value": [["str", 0.4029893660029407], ["list", 0.09544487822885474], ["List[str]", 0.09097441370326881], ["int", 0.09060738835910558]], "stackdriver_task_handler": [["dict", 0.09269569667182204]], "url": [["bool", 0.18882161100120648], ["Dict[str, str]", 0.1883692386757182], ["str", 0.09441080550060324], ["dict", 0.09092247476634527]]}}], "name": "TestStackdriverLoggingHandlerTask", "q_name": "TestStackdriverLoggingHandlerTask", "variables": {"DAG_ID": "", "TASK_ID": ""}, "variables_p": {"DAG_ID": [["Optional[str]", 0.09999999999999999], ["int", 0.09999999999999999], ["List[int]", 0.09999999999999999]], "TASK_ID": [["str", 0.4], ["medtagger.types.TaskID", 0.1], ["Type[str]", 0.1], ["Optional[str]", 0.1]]}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[33, 0], [36, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_create_list_log_entries_response_mock", "params": {"messages": "", "token": ""}, "params_descr": {"messages": "", "token": ""}, "params_occur": {"messages": [["ListLogEntriesResponse", "entries", "LogEntry", "json_payload", "message", "message", "messages", "next_page_token", "token"]], "token": [["ListLogEntriesResponse", "entries", "LogEntry", "json_payload", "message", "message", "messages", "next_page_token", "token"]]}, "params_p": {"args": [], "kwargs": [], "messages": [["str", 0.716901242255742], ["tuple", 0.10402097125985105], ["int", 0.08851026491194518]], "token": [["str", 0.716901242255742], ["tuple", 0.10402097125985105], ["int", 0.08851026491194518]]}, "q_name": "_create_list_log_entries_response_mock", "ret_exprs": ["return ListLogEntriesResponse( entries=[LogEntry(json_payload={\"message\": message}) for message in messages], next_page_token=token)"], "ret_type": "", "ret_type_p": [["List[str]", 0.4391173104255487], ["List[T]", 0.17980124643837447], ["List[Tuple[str, str, bool]]", 0.08982285437006694], ["str", 0.08802062628230359]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[40, 0], [47, 19]], "fn_var_ln": {"handler": [[43, 8], [43, 15]]}, "fn_var_occur": {"handler": [["handler", "handler_ref"], ["isinstance", "handler", "StackdriverTaskHandler"]]}, "name": "clean_stackdriver_handlers", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "clean_stackdriver_handlers", "ret_exprs": [], "ret_type": "", "variables": {"handler": ""}, "variables_p": {"handler": [["str", 0.27858386873627905]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[53, 0], [68, 104]], "fn_var_ln": {"logger": [[58, 4], [58, 10]], "return_value": [[54, 4], [54, 46]], "stackdriver_task_handler": [[57, 4], [57, 28]], "transport_type": [[56, 4], [56, 18]]}, "fn_var_occur": {"logger": [["logger", "logging", "getLogger"], ["logger", "addHandler", "stackdriver_task_handler"], ["logger", "info"]], "return_value": [["mock_get_creds_and_project_id", "return_value"], ["transport_type", "assert_called_once_with", "mock_client", "return_value"], ["transport_type", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "resource", "Resource", "type", "labels"]], "stackdriver_task_handler": [["stackdriver_task_handler", "StackdriverTaskHandler", "transport", "transport_type", "labels"], ["logger", "addHandler", "stackdriver_task_handler"], ["stackdriver_task_handler", "flush"]], "transport_type": [["transport_type", "mock", "MagicMock"], ["stackdriver_task_handler", "StackdriverTaskHandler", "transport", "transport_type", "labels"], ["transport_type", "assert_called_once_with", "mock_client", "return_value"], ["transport_type", "return_value", "send", "assert_called_once_with", "mock", "ANY", "labels", "resource", "Resource", "type", "labels"]]}, "name": "test_should_pass_message_to_client", "params": {"mock_client": "", "mock_get_creds_and_project_id": ""}, "params_descr": {"mock_client": "", "mock_get_creds_and_project_id": ""}, "params_occur": {"mock_client": [["transport_type", "assert_called_once_with", "mock_client", "return_value"], ["mock_client", "assert_called_once_with", "credentials", "client_info", "mock", "ANY", "project"]], "mock_get_creds_and_project_id": [["mock_get_creds_and_project_id", "return_value"]]}, "params_p": {"args": [], "kwargs": [], "mock_client": [], "mock_get_creds_and_project_id": []}, "q_name": "test_should_pass_message_to_client", "ret_exprs": [], "ret_type": "", "variables": {"logger": "", "return_value": "", "stackdriver_task_handler": "", "transport_type": ""}, "variables_p": {"logger": [["logging.Logger", 0.9999999999999999]], "return_value": [["str", 0.2881273701071677], ["Dict[str, List[Any]]", 0.22475569563589554], ["List[Dict[str, str]]", 0.11632278247256515], ["Dict[Any, Union[int, str]]", 0.09442592957626933]], "stackdriver_task_handler": [["Dict[str, Dict[str, Any]]", 0.21377929284446767], ["str", 0.19007533363235726], ["Dict[str, Any]", 0.17494641586883547], ["Dict[bytes, Any]", 0.10050619161232434]], "transport_type": [["mock.Mock", 0.25931549510602553], ["str", 0.08316635806099172]]}}], "imports": ["__future__", "annotations", "logging", "unittest", "mock", "urllib", "parse", "parse_qs", "urlsplit", "pytest", "google", "cloud", "logging", "Resource", "google", "cloud", "logging_v2", "types", "ListLogEntriesRequest", "ListLogEntriesResponse", "LogEntry", "airflow", "providers", "google", "cloud", "log", "stackdriver_task_handler", "StackdriverTaskHandler", "airflow", "utils", "timezone", "airflow", "utils", "state", "TaskInstanceState", "tests", "test_utils", "db", "clear_db_dags", "clear_db_runs"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 99}, "session_id": "AzLMzLpy_lxZTnky8EiwcSmso3i133JxTet6eal6nbw", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}