{"error": null, "response": {"classes": [{"cls_lc": [[51, 0], [150, 88]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "Asserts that the CloudSQLExportTrigger correctly serializes its arguments", "long_descr": "and classpath.", "ret": null}, "fn_lc": [[52, 4], [65, 9]], "fn_var_ln": {"classpath": [[57, 8], [57, 17]], "kwargs": [[57, 19], [57, 25]]}, "fn_var_occur": {"classpath": [["classpath", "kwargs", "trigger", "serialize"], ["classpath", "CLASSPATH"]], "kwargs": [["classpath", "kwargs", "trigger", "serialize"], ["kwargs", "OPERATION_NAME", "PROJECT_ID", "None", "TEST_GCP_CONN_ID", "TEST_POLL_INTERVAL"]]}, "name": "test_async_export_trigger_serialization_should_execute_successfully", "params": {"self": "", "trigger": ""}, "params_descr": {"self": "", "trigger": ""}, "params_occur": {"self": [], "trigger": [["classpath", "kwargs", "trigger", "serialize"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "trigger": [["antidote.providers.tag.TagProvider", 0.21603869508253054], ["str", 0.16352105402406064], ["Callable", 0.10688414078483373]]}, "q_name": "TestCloudSQLExportTrigger.test_async_export_trigger_serialization_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"classpath": "", "kwargs": ""}, "variables_p": {"classpath": [["Set[str]", 0.4999999999750701], ["int", 0.49999999996228883], ["Dict[str, Union[int, str]]", 1.582796261262258e-11], ["List[str]", 1.3730011143514454e-11], ["str", 1.0971499556494418e-11], ["bool", 1.0865339793385232e-11]], "kwargs": [["Set[str]", 0.21850569760924926], ["bool", 0.10102711759192756], ["str", 0.0858082679438756], ["dict", 0.08138349779967036]]}}, {"docstring": {"func": "Tests the CloudSQLExportTrigger only fires once the job execution reaches a successful state.", "long_descr": null, "ret": null}, "fn_lc": [[69, 4], [89, 9]], "fn_var_ln": {"actual": [[80, 8], [80, 14]], "generator": [[79, 8], [79, 17]], "return_value": [[75, 8], [75, 39]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "OPERATION_NAME", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]], "return_value": [["mock_get_operation", "return_value", "OPERATION_NAME"]]}, "name": "test_async_export_trigger_on_success_should_execute_successfully", "params": {"mock_get_operation": "", "self": "", "trigger": ""}, "params_descr": {"mock_get_operation": "", "self": "", "trigger": ""}, "params_occur": {"mock_get_operation": [["mock_get_operation", "return_value", "OPERATION_NAME"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_operation": [["mock.MagicMock", 0.11147080992778044]], "self": [], "trigger": [["asyncio.StreamWriter", 0.5977179140719551], ["asyncio.StreamReader", 0.30834080423774235]]}, "q_name": "TestCloudSQLExportTrigger.test_async_export_trigger_on_success_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "return_value": ""}, "variables_p": {"actual": [["str", 0.29613341910152197], ["Dict[str, Any]", 0.1732394713291662], ["Dict[str, str]", 0.15861250906234242], ["Optional[int]", 0.09671680522900608]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]], "return_value": [["str", 0.3830681809315176], ["Optional[bytes]", 0.1085154342529381], ["Dict[Any, Union[int, str]]", 0.10266947196462466], ["Dict[str, Any]", 0.08922306340126726], ["List[Dict[str, str]]", 0.08629288315117296]]}}, {"docstring": {"func": "Test that CloudSQLExportTrigger does not fire while a job is still running.", "long_descr": null, "ret": null}, "fn_lc": [[93, 4], [114, 39]], "fn_var_ln": {"return_value": [[100, 8], [100, 39]], "task": [[105, 8], [105, 12]]}, "fn_var_occur": {"return_value": [["mock_get_operation", "return_value", "OPERATION_NAME"]], "task": [["task", "asyncio", "create_task", "trigger", "run", "__anext__"], ["task", "done", "False"]]}, "name": "test_async_export_trigger_running_should_execute_successfully", "params": {"caplog": "", "mock_get_operation": "", "self": "", "trigger": ""}, "params_descr": {"caplog": "", "mock_get_operation": "", "self": "", "trigger": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "INFO"], ["TEST_POLL_INTERVAL", "caplog", "text"]], "mock_get_operation": [["mock_get_operation", "return_value", "OPERATION_NAME"]], "self": [], "trigger": [["task", "asyncio", "create_task", "trigger", "run", "__anext__"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.7244908287112746]], "kwargs": [], "mock_get_operation": [["mock.MagicMock", 0.10629953573171483]], "self": [], "trigger": []}, "q_name": "TestCloudSQLExportTrigger.test_async_export_trigger_running_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"return_value": "", "task": ""}, "variables_p": {"return_value": [["str", 0.3830681809315176], ["Optional[bytes]", 0.1085154342529381], ["Dict[Any, Union[int, str]]", 0.10266947196462466], ["Dict[str, Any]", 0.08922306340126726], ["List[Dict[str, str]]", 0.08629288315117296]], "task": [["asyncio.tasks.Task[None]", 0.19643276539820578], ["List[str]", 0.11367958078351113], ["Dict[str, int]", 0.09946648513600341], ["asyncio.tasks.Task[Any]", 0.0829218957480618]]}}, {"docstring": {"func": "Test that CloudSQLExportTrigger fires the correct event in case of an error.", "long_descr": null, "ret": null}, "fn_lc": [[118, 4], [136, 53]], "fn_var_ln": {"actual": [[135, 8], [135, 14]], "expected_event": [[128, 8], [128, 22]], "generator": [[134, 8], [134, 17]], "return_value": [[122, 8], [122, 39]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "expected_event", "actual"]], "expected_event": [["expected_event", "OPERATION_NAME"], ["TriggerEvent", "expected_event", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]], "return_value": [["mock_get_operation", "return_value", "OPERATION_NAME"]]}, "name": "test_async_export_trigger_error_should_execute_successfully", "params": {"mock_get_operation": "", "self": "", "trigger": ""}, "params_descr": {"mock_get_operation": "", "self": "", "trigger": ""}, "params_occur": {"mock_get_operation": [["mock_get_operation", "return_value", "OPERATION_NAME"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_operation": [["mock.MagicMock", 0.14296325941444168]], "self": [], "trigger": [["asyncio.StreamWriter", 0.5105443797208074], ["asyncio.StreamReader", 0.40542783490916523]]}, "q_name": "TestCloudSQLExportTrigger.test_async_export_trigger_error_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "expected_event": "", "generator": "", "return_value": ""}, "variables_p": {"actual": [["float", 0.25139049101368954], ["Optional[str]", 0.10217849438181688], ["str", 0.0956397256196871]], "expected_event": [["Set[str]", 0.09577016814685933], ["List[Tuple[Any, str]]", 0.08852379288583032], ["Dict[str, str]", 0.08753167533125368], ["list", 0.0832366488983733]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]], "return_value": [["str", 0.3830681809315176], ["Optional[bytes]", 0.1085154342529381], ["Dict[Any, Union[int, str]]", 0.10266947196462466], ["Dict[str, Any]", 0.08922306340126726], ["List[Dict[str, str]]", 0.08629288315117296]]}}, {"docstring": {"func": "Test that CloudSQLExportTrigger fires the correct event in case of an error.", "long_descr": null, "ret": null}, "fn_lc": [[140, 4], [150, 88]], "fn_var_ln": {"actual": [[149, 8], [149, 14]], "generator": [[148, 8], [148, 17]], "side_effect": [[146, 8], [146, 38]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]], "side_effect": [["mock_get_operation", "side_effect", "Exception"]]}, "name": "test_async_export_trigger_exception_should_execute_successfully", "params": {"mock_get_operation": "", "self": "", "trigger": ""}, "params_descr": {"mock_get_operation": "", "self": "", "trigger": ""}, "params_occur": {"mock_get_operation": [["mock_get_operation", "side_effect", "Exception"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_operation": [["mock.Mock", 0.141776306113477], ["str", 0.08912033488535244]], "self": [], "trigger": [["asyncio.StreamWriter", 0.6010377792594929], ["asyncio.StreamReader", 0.3099457603681312]]}, "q_name": "TestCloudSQLExportTrigger.test_async_export_trigger_exception_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "side_effect": ""}, "variables_p": {"actual": [["int", 0.19412407945911686], ["Tuple[Any, Any, Any, Any, Any, Any, Any]", 0.09850073403783119], ["Dict[str, float]", 0.08348205718629689], ["List[int]", 0.08277127376192583], ["Optional[str]", 0.07748136730496737]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]], "side_effect": [["str", 0.36045427203214114], ["List[str]", 0.18103163119821478], ["float", 0.14833897127153173]]}}], "name": "TestCloudSQLExportTrigger", "q_name": "TestCloudSQLExportTrigger", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[41, 0], [48, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "trigger", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "trigger", "ret_exprs": ["return CloudSQLExportTrigger( operation_name=OPERATION_NAME, project_id=PROJECT_ID, impersonation_chain=None, gcp_conn_id=TEST_GCP_CONN_ID, poke_interval=TEST_POLL_INTERVAL,)"], "ret_type": "", "ret_type_p": [["str", 0.10601288867462898]], "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "asyncio", "logging", "unittest", "mock", "async_mock", "pytest", "airflow", "providers", "google", "cloud", "triggers", "cloud_sql", "CloudSQLExportTrigger", "airflow", "triggers", "base", "TriggerEvent"], "mod_var_ln": {"CLASSPATH": [[28, 0], [28, 9]], "HOOK_STR": [[32, 0], [32, 8]], "OPERATION_NAME": [[34, 0], [34, 14]], "OPERATION_URL": [[35, 0], [35, 13]], "PROJECT_ID": [[33, 0], [33, 10]], "TASK_ID": [[29, 0], [29, 7]], "TEST_GCP_CONN_ID": [[31, 0], [31, 16]], "TEST_POLL_INTERVAL": [[30, 0], [30, 18]]}, "mod_var_occur": {"CLASSPATH": [["classpath", "CLASSPATH"]], "HOOK_STR": [], "OPERATION_NAME": [["OPERATION_URL", "PROJECT_ID", "OPERATION_NAME"], ["CloudSQLExportTrigger", "operation_name", "OPERATION_NAME", "project_id", "PROJECT_ID", "impersonation_chain", "None", "gcp_conn_id", "TEST_GCP_CONN_ID", "poke_interval", "TEST_POLL_INTERVAL"], ["kwargs", "OPERATION_NAME", "PROJECT_ID", "None", "TEST_GCP_CONN_ID", "TEST_POLL_INTERVAL"], ["mock_get_operation", "return_value", "OPERATION_NAME"], ["TriggerEvent", "OPERATION_NAME", "actual"], ["mock_get_operation", "return_value", "OPERATION_NAME"], ["mock_get_operation", "return_value", "OPERATION_NAME"], ["expected_event", "OPERATION_NAME"]], "OPERATION_URL": [], "PROJECT_ID": [["OPERATION_URL", "PROJECT_ID", "OPERATION_NAME"], ["CloudSQLExportTrigger", "operation_name", "OPERATION_NAME", "project_id", "PROJECT_ID", "impersonation_chain", "None", "gcp_conn_id", "TEST_GCP_CONN_ID", "poke_interval", "TEST_POLL_INTERVAL"], ["kwargs", "OPERATION_NAME", "PROJECT_ID", "None", "TEST_GCP_CONN_ID", "TEST_POLL_INTERVAL"]], "TASK_ID": [], "TEST_GCP_CONN_ID": [["CloudSQLExportTrigger", "operation_name", "OPERATION_NAME", "project_id", "PROJECT_ID", "impersonation_chain", "None", "gcp_conn_id", "TEST_GCP_CONN_ID", "poke_interval", "TEST_POLL_INTERVAL"], ["kwargs", "OPERATION_NAME", "PROJECT_ID", "None", "TEST_GCP_CONN_ID", "TEST_POLL_INTERVAL"]], "TEST_POLL_INTERVAL": [["CloudSQLExportTrigger", "operation_name", "OPERATION_NAME", "project_id", "PROJECT_ID", "impersonation_chain", "None", "gcp_conn_id", "TEST_GCP_CONN_ID", "poke_interval", "TEST_POLL_INTERVAL"], ["kwargs", "OPERATION_NAME", "PROJECT_ID", "None", "TEST_GCP_CONN_ID", "TEST_POLL_INTERVAL"], ["TEST_POLL_INTERVAL", "caplog", "text"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 38}, "session_id": "aXZEzhfy_YgQoqRuUNMpYmNkWfFTiKXBvCDkUWIkWPc", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"CLASSPATH": "", "HOOK_STR": "", "OPERATION_NAME": "", "OPERATION_URL": "", "PROJECT_ID": "", "TASK_ID": "", "TEST_GCP_CONN_ID": "", "TEST_POLL_INTERVAL": ""}, "variables_p": {"CLASSPATH": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1]], "HOOK_STR": [["str", 0.6], ["Type[Optional[str]]", 0.2], ["property", 0.1]], "OPERATION_NAME": [["str", 1.0000000000000002]], "OPERATION_URL": [["str", 0.7999999999999999], ["classmethod", 0.09999999999999999]], "PROJECT_ID": [["str", 0.9999999999999999]], "TASK_ID": [["str", 0.4], ["Type[str]", 0.1], ["Optional[str]", 0.1]], "TEST_GCP_CONN_ID": [["str", 0.8055238812197885], ["Dict[str, str]", 0.09865776341220281]], "TEST_POLL_INTERVAL": [["str", 0.6257359430334934], ["int", 0.09329408602005937], ["Optional[Literal]", 0.09131955482943127]]}}}