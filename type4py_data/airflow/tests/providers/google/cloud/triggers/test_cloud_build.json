{"error": null, "response": {"classes": [{"cls_lc": [[97, 0], [197, 87]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[99, 4], [102, 16]], "fn_var_ln": {"f": [[100, 8], [100, 9]]}, "fn_var_occur": {"f": [["f", "Future"], ["f", "set_result", "result_to_mock"]]}, "name": "_mock_build_result", "params": {"result_to_mock": ""}, "params_descr": {"result_to_mock": ""}, "params_occur": {"result_to_mock": [["f", "set_result", "result_to_mock"]]}, "params_p": {"args": [], "kwargs": [], "result_to_mock": [["Dict[str, Any]", 0.2850171520495535], ["dict", 0.12845825767815688], ["str", 0.0945751403381399]], "self": []}, "q_name": "TestCloudBuildCreateBuildTrigger._mock_build_result", "ret_exprs": ["return f"], "ret_type": "", "ret_type_p": [["str", 0.5804412333732265]], "variables": {"f": ""}, "variables_p": {"f": [["str", 0.17943230978450442], ["Dict[str, Any]", 0.11779236626976138], ["list", 0.11690186456363395], ["Dict[str, Union[Any, Any]]", 0.08397279106468408], ["Dict[str, Union[Any, Any, Any, Any]]", 0.08356034635684136]]}}, {"docstring": {"func": "Asserts that the CloudBuildCreateBuildTrigger correctly serializes its arguments", "long_descr": "and classpath.", "ret": null}, "fn_lc": [[104, 4], [119, 9]], "fn_var_ln": {"classpath": [[110, 8], [110, 17]], "kwargs": [[110, 19], [110, 25]]}, "fn_var_occur": {"classpath": [["classpath", "kwargs", "trigger", "serialize"]], "kwargs": [["classpath", "kwargs", "trigger", "serialize"], ["kwargs", "TEST_BUILD_ID", "TEST_PROJECT_ID", "TEST_CONN_ID", "None", "TEST_POLL_INTERVAL", "TEST_LOCATION"]]}, "name": "test_serialization", "params": {"self": "", "trigger": ""}, "params_descr": {"self": "", "trigger": ""}, "params_occur": {"self": [], "trigger": [["classpath", "kwargs", "trigger", "serialize"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "trigger": [["antidote.providers.tag.TagProvider", 0.21603869508253054], ["str", 0.16352105402406064], ["Callable", 0.10688414078483373]]}, "q_name": "TestCloudBuildCreateBuildTrigger.test_serialization", "ret_exprs": [], "ret_type": "", "variables": {"classpath": "", "kwargs": ""}, "variables_p": {"classpath": [["Set[str]", 0.4999999999750701], ["int", 0.49999999996228883], ["Dict[str, Union[int, str]]", 1.582796261262258e-11], ["List[str]", 1.3730011143514454e-11], ["str", 1.0971499556494418e-11], ["bool", 1.0865339793385232e-11]], "kwargs": [["dict", 0.20435583707230204], ["List[List[str]]", 0.09974977444476496], ["Dict[str, Any]", 0.09637739362887598], ["bool", 0.09049111930898589]]}}, {"docstring": {"func": "Tests the CloudBuildCreateBuildTrigger only fires once the job execution reaches a successful state.", "long_descr": null, "ret": null}, "fn_lc": [[123, 4], [142, 9]], "fn_var_ln": {"actual": [[131, 8], [131, 14]], "generator": [[130, 8], [130, 17]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "TEST_BUILD_INSTANCE", "TEST_BUILD_ID", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]]}, "name": "test_trigger_on_success_yield_successfully", "params": {"mock_hook": "", "self": "", "trigger": ""}, "params_descr": {"mock_hook": "", "self": "", "trigger": ""}, "params_occur": {"mock_hook": [["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "SUCCESS", "steps", "BuildStep", "name"]], "self": [["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "SUCCESS", "steps", "BuildStep", "name"]], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_hook": [["mock.MagicMock", 0.09949278118979576]], "self": [], "trigger": []}, "q_name": "TestCloudBuildCreateBuildTrigger.test_trigger_on_success_yield_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": ""}, "variables_p": {"actual": [["str", 0.23037282363540418], ["list", 0.1166030278462295], ["dict", 0.09329673874041511]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]]}}, {"docstring": {"func": "Test that CloudBuildCreateBuildTrigger does not fire while a build is still running.", "long_descr": null, "ret": null}, "fn_lc": [[146, 4], [165, 39]], "fn_var_ln": {"task": [[155, 8], [155, 12]]}, "fn_var_occur": {"task": [["task", "asyncio", "create_task", "trigger", "run", "__anext__"], ["task", "done", "False"]]}, "name": "test_trigger_on_running_wait_successfully", "params": {"caplog": "", "mock_hook": "", "self": "", "trigger": ""}, "params_descr": {"caplog": "", "mock_hook": "", "self": "", "trigger": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "INFO"], ["caplog", "text"], ["TEST_POLL_INTERVAL", "caplog", "text"]], "mock_hook": [["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "WORKING", "steps", "BuildStep", "name"]], "self": [["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "WORKING", "steps", "BuildStep", "name"]], "trigger": [["task", "asyncio", "create_task", "trigger", "run", "__anext__"]]}, "params_p": {"args": [], "caplog": [], "kwargs": [], "mock_hook": [["mock.MagicMock", 0.09845250842528507]], "self": [], "trigger": []}, "q_name": "TestCloudBuildCreateBuildTrigger.test_trigger_on_running_wait_successfully", "ret_exprs": [], "ret_type": "", "variables": {"task": ""}, "variables_p": {"task": [["asyncio.tasks.Task[None]", 0.19643276539820578], ["List[str]", 0.11367958078351113], ["Dict[str, int]", 0.09946648513600341], ["asyncio.tasks.Task[Any]", 0.0829218957480618]]}}, {"docstring": {"func": "Test that CloudBuildCreateBuildTrigger fires the correct event in case of an error.", "long_descr": null, "ret": null}, "fn_lc": [[169, 4], [185, 78]], "fn_var_ln": {"actual": [[184, 8], [184, 14]], "generator": [[183, 8], [183, 17]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]]}, "name": "test_trigger_on_error_yield_successfully", "params": {"caplog": "", "mock_hook": "", "self": "", "trigger": ""}, "params_descr": {"caplog": "", "mock_hook": "", "self": "", "trigger": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "INFO"]], "mock_hook": [["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "FAILURE", "steps", "BuildStep", "name", "status_detail"]], "self": [["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "FAILURE", "steps", "BuildStep", "name", "status_detail"]], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.4830283825920425], ["mock.Mock", 0.23552724923132123]], "kwargs": [], "mock_hook": [["mock.MagicMock", 0.09978825581511494]], "self": [], "trigger": [["asyncio.StreamWriter", 0.01572291689368302]]}, "q_name": "TestCloudBuildCreateBuildTrigger.test_trigger_on_error_yield_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": ""}, "variables_p": {"actual": [["int", 0.19412407945911686], ["Tuple[Any, Any, Any, Any, Any, Any, Any]", 0.09850073403783119], ["Dict[str, float]", 0.08348205718629689], ["List[int]", 0.08277127376192583], ["Optional[str]", 0.07748136730496737]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]]}}, {"docstring": {"func": "Test that CloudBuildCreateBuildTrigger fires the correct event in case of an error.", "long_descr": null, "ret": null}, "fn_lc": [[189, 4], [197, 87]], "fn_var_ln": {"actual": [[196, 8], [196, 14]], "generator": [[195, 8], [195, 17]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]]}, "name": "test_trigger_on_exec_yield_successfully", "params": {"mock_hook": "", "self": "", "trigger": ""}, "params_descr": {"mock_hook": "", "self": "", "trigger": ""}, "params_occur": {"mock_hook": [["mock_hook", "return_value", "get_cloud_build", "side_effect", "Exception"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_hook": [["mock.MagicMock", 0.07750425309739487]], "self": [], "trigger": []}, "q_name": "TestCloudBuildCreateBuildTrigger.test_trigger_on_exec_yield_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": ""}, "variables_p": {"actual": [["int", 0.19412407945911686], ["Tuple[Any, Any, Any, Any, Any, Any, Any]", 0.09850073403783119], ["Dict[str, float]", 0.08348205718629689], ["List[int]", 0.08277127376192583], ["Optional[str]", 0.07748136730496737]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]]}}], "name": "TestCloudBuildCreateBuildTrigger", "q_name": "TestCloudBuildCreateBuildTrigger", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[86, 0], [94, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "trigger", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "trigger", "ret_exprs": ["return CloudBuildCreateBuildTrigger( id_=TEST_BUILD_ID, project_id=TEST_PROJECT_ID, gcp_conn_id=TEST_CONN_ID, impersonation_chain=None, poll_interval=TEST_POLL_INTERVAL, location=TEST_LOCATION,)"], "ret_type": "", "ret_type_p": [["str", 0.36645097181572955], ["float", 0.21044905480837064], ["bool", 0.10039298429368942]], "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "asyncio", "logging", "asyncio", "Future", "unittest", "mock", "pytest", "google", "cloud", "devtools", "cloudbuild_v1", "types", "Build", "BuildStep", "airflow", "providers", "google", "cloud", "triggers", "cloud_build", "CloudBuildCreateBuildTrigger", "airflow", "triggers", "base", "TriggerEvent"], "mod_var_ln": {"CLOUD_BUILD_PATH": [[30, 0], [30, 16]], "REPO_SOURCE": [[33, 0], [33, 11]], "TEST_BUILD": [[34, 0], [34, 10]], "TEST_BUILD_ID": [[32, 0], [32, 13]], "TEST_BUILD_INSTANCE": [[48, 0], [48, 19]], "TEST_BUILD_WORKING": [[39, 0], [39, 18]], "TEST_CONN_ID": [[45, 0], [45, 12]], "TEST_LOCATION": [[47, 0], [47, 13]], "TEST_POLL_INTERVAL": [[46, 0], [46, 18]], "TEST_PROJECT_ID": [[31, 0], [31, 15]]}, "mod_var_occur": {"CLOUD_BUILD_PATH": [], "REPO_SOURCE": [["TEST_BUILD", "REPO_SOURCE"], ["TEST_BUILD_WORKING", "REPO_SOURCE"]], "TEST_BUILD": [], "TEST_BUILD_ID": [["CloudBuildCreateBuildTrigger", "id_", "TEST_BUILD_ID", "project_id", "TEST_PROJECT_ID", "gcp_conn_id", "TEST_CONN_ID", "impersonation_chain", "None", "poll_interval", "TEST_POLL_INTERVAL", "location", "TEST_LOCATION"], ["kwargs", "TEST_BUILD_ID", "TEST_PROJECT_ID", "TEST_CONN_ID", "None", "TEST_POLL_INTERVAL", "TEST_LOCATION"], ["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "SUCCESS", "steps", "BuildStep", "name"], ["TriggerEvent", "TEST_BUILD_INSTANCE", "TEST_BUILD_ID", "actual"], ["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "WORKING", "steps", "BuildStep", "name"], ["mock_hook", "return_value", "get_cloud_build", "return_value", "self", "_mock_build_result", "Build", "id", "TEST_BUILD_ID", "status", "Build", "Status", "FAILURE", "steps", "BuildStep", "name", "status_detail"]], "TEST_BUILD_INSTANCE": [["TriggerEvent", "TEST_BUILD_INSTANCE", "TEST_BUILD_ID", "actual"]], "TEST_BUILD_WORKING": [], "TEST_CONN_ID": [["CloudBuildCreateBuildTrigger", "id_", "TEST_BUILD_ID", "project_id", "TEST_PROJECT_ID", "gcp_conn_id", "TEST_CONN_ID", "impersonation_chain", "None", "poll_interval", "TEST_POLL_INTERVAL", "location", "TEST_LOCATION"], ["kwargs", "TEST_BUILD_ID", "TEST_PROJECT_ID", "TEST_CONN_ID", "None", "TEST_POLL_INTERVAL", "TEST_LOCATION"]], "TEST_LOCATION": [["CloudBuildCreateBuildTrigger", "id_", "TEST_BUILD_ID", "project_id", "TEST_PROJECT_ID", "gcp_conn_id", "TEST_CONN_ID", "impersonation_chain", "None", "poll_interval", "TEST_POLL_INTERVAL", "location", "TEST_LOCATION"], ["kwargs", "TEST_BUILD_ID", "TEST_PROJECT_ID", "TEST_CONN_ID", "None", "TEST_POLL_INTERVAL", "TEST_LOCATION"]], "TEST_POLL_INTERVAL": [["CloudBuildCreateBuildTrigger", "id_", "TEST_BUILD_ID", "project_id", "TEST_PROJECT_ID", "gcp_conn_id", "TEST_CONN_ID", "impersonation_chain", "None", "poll_interval", "TEST_POLL_INTERVAL", "location", "TEST_LOCATION"], ["kwargs", "TEST_BUILD_ID", "TEST_PROJECT_ID", "TEST_CONN_ID", "None", "TEST_POLL_INTERVAL", "TEST_LOCATION"], ["TEST_POLL_INTERVAL", "caplog", "text"]], "TEST_PROJECT_ID": [["CloudBuildCreateBuildTrigger", "id_", "TEST_BUILD_ID", "project_id", "TEST_PROJECT_ID", "gcp_conn_id", "TEST_CONN_ID", "impersonation_chain", "None", "poll_interval", "TEST_POLL_INTERVAL", "location", "TEST_LOCATION"], ["kwargs", "TEST_BUILD_ID", "TEST_PROJECT_ID", "TEST_CONN_ID", "None", "TEST_POLL_INTERVAL", "TEST_LOCATION"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 39}, "session_id": "58LvE7rKungUxQ65jxnsfgBSWTxHVkLB5TOi2G38x1w", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"CLOUD_BUILD_PATH": "", "REPO_SOURCE": "", "TEST_BUILD": "", "TEST_BUILD_ID": "", "TEST_BUILD_INSTANCE": "", "TEST_BUILD_WORKING": "", "TEST_CONN_ID": "", "TEST_LOCATION": "", "TEST_POLL_INTERVAL": "", "TEST_PROJECT_ID": ""}, "variables_p": {"CLOUD_BUILD_PATH": [["str", 0.8579661151513757], ["Optional[str]", 0.14203388484862417]], "REPO_SOURCE": [["str", 0.4762542892183141], ["dict", 0.11039795079788942]], "TEST_BUILD": [["bool", 0.37583936494098025], ["int", 0.17434570163670104], ["Type[object]", 0.15575071874747268], ["str", 0.15085808902554992]], "TEST_BUILD_ID": [["str", 0.6375274648325044], ["int", 0.3624725351674954]], "TEST_BUILD_INSTANCE": [["Dict[str, Any]", 0.1323312245102936], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.11482403715809869], ["int", 0.09466237559116816], ["str", 0.08449908733157967], ["list", 0.08438392412831477]], "TEST_BUILD_WORKING": [["bool", 0.37583936494098025], ["int", 0.17434570163670104], ["Type[object]", 0.15575071874747268], ["str", 0.15085808902554992]], "TEST_CONN_ID": [["str", 0.36709391649623535], ["int", 0.27274376049031335], ["list", 0.09207271498549259]], "TEST_LOCATION": [["int", 0.12890971860142736], ["Optional[str]", 0.10727198221128383], ["List[str]", 0.10692970296467888], ["list", 0.10223556974531563], ["List[Union[Any, Any]]", 0.09890360249863567], ["Dict[str, str]", 0.08933952168918695], ["str", 0.08817359871137789], ["Type[tuple]", 0.08421910431653082]], "TEST_POLL_INTERVAL": [["str", 0.3280921968472085], ["int", 0.24072289090614635], ["Dict[str, str]", 0.09373893268470994], ["Dict[str, Union[Any, Any, Any]]", 0.08741975752303718], ["dict", 0.08561789255208896], ["List[str]", 0.0791581651082157]], "TEST_PROJECT_ID": [["str", 0.2704010938380629], ["int", 0.2391792170818276], ["Optional[List[str]]", 0.08144464312334253]]}}}