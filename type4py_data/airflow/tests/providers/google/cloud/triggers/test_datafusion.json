{"error": null, "response": {"classes": [{"cls_lc": [[58, 0], [140, 87]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "Asserts that the DataFusionStartPipelineTrigger correctly serializes its arguments", "long_descr": "and classpath.", "ret": null}, "fn_lc": [[59, 4], [73, 9]], "fn_var_ln": {"classpath": [[64, 8], [64, 17]], "kwargs": [[64, 19], [64, 25]]}, "fn_var_occur": {"classpath": [["classpath", "kwargs", "trigger", "serialize"], ["classpath", "CLASSPATH"]], "kwargs": [["classpath", "kwargs", "trigger", "serialize"], ["kwargs", "INSTANCE_URL", "NAMESPACE", "PIPELINE_NAME", "PIPELINE_ID", "TEST_GCP_PROJECT_ID", "None"]]}, "name": "test_start_pipeline_trigger_serialization_should_execute_successfully", "params": {"self": "", "trigger": ""}, "params_descr": {"self": "", "trigger": ""}, "params_occur": {"self": [], "trigger": [["classpath", "kwargs", "trigger", "serialize"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "trigger": [["antidote.providers.tag.TagProvider", 0.20889725233041595], ["bool", 0.08596042093349504]]}, "q_name": "TestDataFusionStartPipelineTrigger.test_start_pipeline_trigger_serialization_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"classpath": "", "kwargs": ""}, "variables_p": {"classpath": [["Set[str]", 0.4999999999750701], ["int", 0.49999999996228883], ["Dict[str, Union[int, str]]", 1.582796261262258e-11], ["List[str]", 1.3730011143514454e-11], ["str", 1.0971499556494418e-11], ["bool", 1.0865339793385232e-11]], "kwargs": [["str", 0.38004973373480305], ["Dict[str, Union[int, str]]", 0.11279072252329048], ["Dict[str, Tuple[Any, Any]]", 0.11215152231231683], ["Dict[str, Any]", 0.10988229994834965], ["bytes", 0.09347601414010498]]}}, {"docstring": {"func": "Tests the DataFusionStartPipelineTrigger only fires once the job execution reaches a successful state.", "long_descr": null, "ret": null}, "fn_lc": [[77, 4], [89, 9]], "fn_var_ln": {"actual": [[85, 8], [85, 14]], "generator": [[84, 8], [84, 17]], "return_value": [[83, 8], [83, 41]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "PIPELINE_ID", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]], "return_value": [["mock_pipeline_status", "return_value"]]}, "name": "test_start_pipeline_trigger_on_success_should_execute_successfully", "params": {"mock_pipeline_status": "", "self": "", "trigger": ""}, "params_descr": {"mock_pipeline_status": "", "self": "", "trigger": ""}, "params_occur": {"mock_pipeline_status": [["mock_pipeline_status", "return_value"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_pipeline_status": [["mock.MagicMock", 0.11730079152864886]], "self": [], "trigger": [["str", 0.09294742050788858]]}, "q_name": "TestDataFusionStartPipelineTrigger.test_start_pipeline_trigger_on_success_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "return_value": ""}, "variables_p": {"actual": [["List[str]", 0.09979883837448138], ["Union[Literal, int]", 0.09913085932130279]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]], "return_value": [["int", 0.2019394697254881], ["str", 0.19308589920525446], ["List[Dict[str, Any]]", 0.14243513930147336], ["Dict[str, Dict[str, Any]]", 0.11827891728138035], ["Dict[str, Union[Any, Any, Any]]", 0.08293675731555421], ["bytes", 0.07921306490725989], ["Dict[str, int]", 0.07324341594128495]]}}, {"docstring": {"func": "Test that DataFusionStartPipelineTrigger does not fire while a job is still running.", "long_descr": null, "ret": null}, "fn_lc": [[93, 4], [112, 39]], "fn_var_ln": {"return_value": [[100, 8], [100, 41]], "task": [[102, 8], [102, 12]]}, "fn_var_occur": {"return_value": [["mock_pipeline_status", "return_value"]], "task": [["task", "asyncio", "create_task", "trigger", "run", "__anext__"], ["task", "done", "False"]]}, "name": "test_start_pipeline_trigger_running_should_execute_successfully", "params": {"caplog": "", "mock_pipeline_status": "", "self": "", "trigger": ""}, "params_descr": {"caplog": "", "mock_pipeline_status": "", "self": "", "trigger": ""}, "params_occur": {"caplog": [["caplog", "set_level", "logging", "INFO"], ["caplog", "text"], ["TEST_POLL_INTERVAL", "caplog", "text"]], "mock_pipeline_status": [["mock_pipeline_status", "return_value"]], "self": [], "trigger": [["task", "asyncio", "create_task", "trigger", "run", "__anext__"]]}, "params_p": {"args": [], "caplog": [["logging.Logger", 0.3930234539437832], ["logging.FileHandler", 0.19008938676510606], ["logging.StreamHandler", 0.18785502877034255]], "kwargs": [], "mock_pipeline_status": [["mock.MagicMock", 0.11761609161189604]], "self": [], "trigger": [["int", 0.11380056969860561], ["str", 0.09741349336377066]]}, "q_name": "TestDataFusionStartPipelineTrigger.test_start_pipeline_trigger_running_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"return_value": "", "task": ""}, "variables_p": {"return_value": [["int", 0.2019394697254881], ["str", 0.19308589920525446], ["List[Dict[str, Any]]", 0.14243513930147336], ["Dict[str, Dict[str, Any]]", 0.11827891728138035], ["Dict[str, Union[Any, Any, Any]]", 0.08293675731555421], ["bytes", 0.07921306490725989], ["Dict[str, int]", 0.07324341594128495]], "task": [["asyncio.tasks.Task[None]", 0.19643276539820578], ["List[str]", 0.11367958078351113], ["Dict[str, int]", 0.09946648513600341], ["asyncio.tasks.Task[Any]", 0.0829218957480618]]}}, {"docstring": {"func": "Test that DataFusionStartPipelineTrigger fires the correct event in case of an error.", "long_descr": null, "ret": null}, "fn_lc": [[116, 4], [126, 78]], "fn_var_ln": {"actual": [[125, 8], [125, 14]], "generator": [[124, 8], [124, 17]], "return_value": [[122, 8], [122, 41]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]], "return_value": [["mock_pipeline_status", "return_value"]]}, "name": "test_start_pipeline_trigger_error_should_execute_successfully", "params": {"mock_pipeline_status": "", "self": "", "trigger": ""}, "params_descr": {"mock_pipeline_status": "", "self": "", "trigger": ""}, "params_occur": {"mock_pipeline_status": [["mock_pipeline_status", "return_value"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_pipeline_status": [["mock.MagicMock", 0.10568678303436943]], "self": [], "trigger": [["str", 0.15134965706710948]]}, "q_name": "TestDataFusionStartPipelineTrigger.test_start_pipeline_trigger_error_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "return_value": ""}, "variables_p": {"actual": [["int", 0.19412407945911686], ["Tuple[Any, Any, Any, Any, Any, Any, Any]", 0.09850073403783119], ["Dict[str, float]", 0.08348205718629689], ["List[int]", 0.08277127376192583], ["Optional[str]", 0.07748136730496737]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]], "return_value": [["int", 0.2019394697254881], ["str", 0.19308589920525446], ["List[Dict[str, Any]]", 0.14243513930147336], ["Dict[str, Dict[str, Any]]", 0.11827891728138035], ["Dict[str, Union[Any, Any, Any]]", 0.08293675731555421], ["bytes", 0.07921306490725989], ["Dict[str, int]", 0.07324341594128495]]}}, {"docstring": {"func": "Test that DataFusionStartPipelineTrigger fires the correct event in case of an error.", "long_descr": null, "ret": null}, "fn_lc": [[130, 4], [140, 87]], "fn_var_ln": {"actual": [[139, 8], [139, 14]], "generator": [[138, 8], [138, 17]], "side_effect": [[136, 8], [136, 40]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "actual"]], "generator": [["generator", "trigger", "run"], ["actual", "generator", "asend", "None"]], "side_effect": [["mock_pipeline_status", "side_effect", "Exception"]]}, "name": "test_start_pipeline_trigger_exception_should_execute_successfully", "params": {"mock_pipeline_status": "", "self": "", "trigger": ""}, "params_descr": {"mock_pipeline_status": "", "self": "", "trigger": ""}, "params_occur": {"mock_pipeline_status": [["mock_pipeline_status", "side_effect", "Exception"]], "self": [], "trigger": [["generator", "trigger", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_pipeline_status": [["str", 0.18757053542005003]], "self": [], "trigger": [["str", 0.09740882130400838]]}, "q_name": "TestDataFusionStartPipelineTrigger.test_start_pipeline_trigger_exception_should_execute_successfully", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "side_effect": ""}, "variables_p": {"actual": [["int", 0.19412407945911686], ["Tuple[Any, Any, Any, Any, Any, Any, Any]", 0.09850073403783119], ["Dict[str, float]", 0.08348205718629689], ["List[int]", 0.08277127376192583], ["Optional[str]", 0.07748136730496737]], "generator": [["kornia.augmentation.base._BasicAugmentationBase", 0.16174662751959534], ["Union[Literal, Literal]", 0.12016314415089882]], "side_effect": [["str", 0.2763625119115123], ["List[str]", 0.11604543685408512]]}}], "name": "TestDataFusionStartPipelineTrigger", "q_name": "TestDataFusionStartPipelineTrigger", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[47, 0], [55, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "trigger", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "trigger", "ret_exprs": ["return DataFusionStartPipelineTrigger( instance_url=INSTANCE_URL, namespace=NAMESPACE, pipeline_name=PIPELINE_NAME, pipeline_id=PIPELINE_ID, poll_interval=TEST_POLL_INTERVAL, gcp_conn_id=TEST_GCP_PROJECT_ID,)"], "ret_type": "", "ret_type_p": [["bytes", 0.1056705521231904], ["Optional[BaseException]", 0.09867671186111972], ["int", 0.09351830678597553]], "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "asyncio", "logging", "unittest", "mock", "pytest", "airflow", "providers", "google", "cloud", "triggers", "datafusion", "DataFusionStartPipelineTrigger", "airflow", "triggers", "base", "TriggerEvent"], "mod_var_ln": {"CLASSPATH": [[29, 0], [29, 9]], "HOOK_STATUS_STR": [[28, 0], [28, 15]], "INSTANCE": [[34, 0], [34, 8]], "INSTANCE_NAME": [[33, 0], [33, 13]], "INSTANCE_URL": [[39, 0], [39, 12]], "LOCATION": [[32, 0], [32, 8]], "NAMESPACE": [[40, 0], [40, 9]], "PIPELINE": [[37, 0], [37, 8]], "PIPELINE_ID": [[38, 0], [38, 11]], "PIPELINE_NAME": [[36, 0], [36, 13]], "PROJECT_ID": [[35, 0], [35, 10]], "RUNTIME_ARGS": [[41, 0], [41, 12]], "TASK_ID": [[31, 0], [31, 7]], "TEST_GCP_PROJECT_ID": [[43, 0], [43, 19]], "TEST_POLL_INTERVAL": [[42, 0], [42, 18]]}, "mod_var_occur": {"CLASSPATH": [["classpath", "CLASSPATH"]], "HOOK_STATUS_STR": [], "INSTANCE": [], "INSTANCE_NAME": [["INSTANCE", "INSTANCE_NAME"]], "INSTANCE_URL": [["DataFusionStartPipelineTrigger", "instance_url", "INSTANCE_URL", "namespace", "NAMESPACE", "pipeline_name", "PIPELINE_NAME", "pipeline_id", "PIPELINE_ID", "poll_interval", "TEST_POLL_INTERVAL", "gcp_conn_id", "TEST_GCP_PROJECT_ID"], ["kwargs", "INSTANCE_URL", "NAMESPACE", "PIPELINE_NAME", "PIPELINE_ID", "TEST_GCP_PROJECT_ID", "None"]], "LOCATION": [], "NAMESPACE": [["DataFusionStartPipelineTrigger", "instance_url", "INSTANCE_URL", "namespace", "NAMESPACE", "pipeline_name", "PIPELINE_NAME", "pipeline_id", "PIPELINE_ID", "poll_interval", "TEST_POLL_INTERVAL", "gcp_conn_id", "TEST_GCP_PROJECT_ID"], ["kwargs", "INSTANCE_URL", "NAMESPACE", "PIPELINE_NAME", "PIPELINE_ID", "TEST_GCP_PROJECT_ID", "None"]], "PIPELINE": [], "PIPELINE_ID": [["DataFusionStartPipelineTrigger", "instance_url", "INSTANCE_URL", "namespace", "NAMESPACE", "pipeline_name", "PIPELINE_NAME", "pipeline_id", "PIPELINE_ID", "poll_interval", "TEST_POLL_INTERVAL", "gcp_conn_id", "TEST_GCP_PROJECT_ID"], ["kwargs", "INSTANCE_URL", "NAMESPACE", "PIPELINE_NAME", "PIPELINE_ID", "TEST_GCP_PROJECT_ID", "None"], ["TriggerEvent", "PIPELINE_ID", "actual"]], "PIPELINE_NAME": [["DataFusionStartPipelineTrigger", "instance_url", "INSTANCE_URL", "namespace", "NAMESPACE", "pipeline_name", "PIPELINE_NAME", "pipeline_id", "PIPELINE_ID", "poll_interval", "TEST_POLL_INTERVAL", "gcp_conn_id", "TEST_GCP_PROJECT_ID"], ["kwargs", "INSTANCE_URL", "NAMESPACE", "PIPELINE_NAME", "PIPELINE_ID", "TEST_GCP_PROJECT_ID", "None"]], "PROJECT_ID": [], "RUNTIME_ARGS": [], "TASK_ID": [], "TEST_GCP_PROJECT_ID": [["DataFusionStartPipelineTrigger", "instance_url", "INSTANCE_URL", "namespace", "NAMESPACE", "pipeline_name", "PIPELINE_NAME", "pipeline_id", "PIPELINE_ID", "poll_interval", "TEST_POLL_INTERVAL", "gcp_conn_id", "TEST_GCP_PROJECT_ID"], ["kwargs", "INSTANCE_URL", "NAMESPACE", "PIPELINE_NAME", "PIPELINE_ID", "TEST_GCP_PROJECT_ID", "None"]], "TEST_POLL_INTERVAL": [["DataFusionStartPipelineTrigger", "instance_url", "INSTANCE_URL", "namespace", "NAMESPACE", "pipeline_name", "PIPELINE_NAME", "pipeline_id", "PIPELINE_ID", "poll_interval", "TEST_POLL_INTERVAL", "gcp_conn_id", "TEST_GCP_PROJECT_ID"], ["TEST_POLL_INTERVAL", "caplog", "text"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 44}, "session_id": "wBDyAzg9Dxvi4-SbowJVp_nU9Gq58SpBVdcax83IH5s", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"CLASSPATH": "", "HOOK_STATUS_STR": "", "INSTANCE": "", "INSTANCE_NAME": "", "INSTANCE_URL": "", "LOCATION": "", "NAMESPACE": "", "PIPELINE": "", "PIPELINE_ID": "", "PIPELINE_NAME": "", "PROJECT_ID": "", "RUNTIME_ARGS": "", "TASK_ID": "", "TEST_GCP_PROJECT_ID": "", "TEST_POLL_INTERVAL": ""}, "variables_p": {"CLASSPATH": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1]], "HOOK_STATUS_STR": [["str", 0.520639444735479], ["int", 0.35682435228745624], ["staticmethod", 0.12253620297706481]], "INSTANCE": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "INSTANCE_NAME": [["str", 0.16666666672042907], ["Tuple[str, str, str, str, str]", 0.16666666664664942], ["List[str]", 0.16666666664664942], ["Tuple[str, str, str]", 0.16666666664664942], ["frozenset[str]", 0.16666666664664942], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 2.316193477872715e-11], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 2.316193477872715e-11]], "INSTANCE_URL": [["str", 0.9999999999999998]], "LOCATION": [["str", 0.39999999999999997], ["dict", 0.09999999999999999], ["Optional['Location']", 0.09999999999999999], ["Tuple[int, int]", 0.09999999999999999]], "NAMESPACE": [["str", 0.793198789251551], ["dict", 0.20680121074844923]], "PIPELINE": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "PIPELINE_ID": [["str", 0.650171504086484], ["int", 0.2378666182892464], ["Dict[str, str]", 0.11196187762426953]], "PIPELINE_NAME": [["str", 0.9031341547448137]], "PROJECT_ID": [["Optional[str]", 0.4], ["str", 0.4], ["dict", 0.1]], "RUNTIME_ARGS": [["Dict[str, str]", 0.2], ["List[str]", 0.2], ["list", 0.2], ["tuple", 0.2], ["Tuple[str]", 0.1]], "TASK_ID": [["str", 0.4], ["Type[str]", 0.1], ["Optional[str]", 0.1]], "TEST_GCP_PROJECT_ID": [["str", 0.9999999999999999]], "TEST_POLL_INTERVAL": [["str", 0.6823649924150104], ["int", 0.12009651878436285], ["Optional[str]", 0.1065701874299303]]}}}