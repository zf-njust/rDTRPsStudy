{"error": null, "response": {"classes": [{"cls_lc": [[50, 0], [143, 51]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "Test OracleToGoogleCloudStorageOperator instance is properly initialized.", "long_descr": null, "ret": null}, "fn_lc": [[51, 4], [57, 43]], "fn_var_ln": {"op": [[53, 8], [53, 10]]}, "fn_var_occur": {"op": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["op", "task_id", "TASK_ID"], ["op", "sql", "SQL"], ["op", "bucket", "BUCKET"], ["op", "filename", "JSON_FILENAME"]]}, "name": "test_init", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_init", "ret_exprs": [], "ret_type": "", "variables": {"op": ""}, "variables_p": {"op": [["Dict[str, Union[Any, bool, str]]", 0.23929929746151088]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[73, 8], [79, 60]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_assert_upload", "params": {"bucket": "", "gzip": "", "metadata": "", "mime_type": "", "obj": "", "tmp_filename": ""}, "params_descr": {"bucket": "", "gzip": "", "metadata": "", "mime_type": "", "obj": "", "tmp_filename": ""}, "params_occur": {"bucket": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "oracle_conn_id", "ORACLE_CONN_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["BUCKET", "bucket"]], "gzip": [["GZIP", "gzip"]], "metadata": [], "mime_type": [], "obj": [["JSON_FILENAME", "format", "obj"]], "tmp_filename": [["open", "tmp_filename", "file"]]}, "params_p": {"args": [], "bucket": [["str", 0.20983431230075147], ["int", 0.20983431230075147], ["Optional[bytes]", 0.17803672171136464], ["Mapping[str, Any]", 0.1121289659878839]], "gzip": [["bool", 0.31034865031086395], ["str", 0.2121044696842061], ["int", 0.1849097695104553], ["Optional[str]", 0.10742655200411168], ["float", 0.09777004672181731], ["Sequence[Dict[str, str]]", 0.08744051176854571]], "kwargs": [], "metadata": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "mime_type": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "obj": [["str", 0.7994248742445959], ["bool", 0.10200390613697426], ["int", 0.09857121961842974]], "self": [], "tmp_filename": [["str", 0.8104425661808049], ["Optional[str]", 0.09408988588163818]]}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_exec_success_json.<locals>._assert_upload", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test successful run of execute function for JSON", "long_descr": null, "ret": null}, "fn_lc": [[61, 4], [86, 81]], "fn_var_ln": {"gcs_hook_mock": [[71, 8], [71, 21]], "op": [[63, 8], [63, 10]], "oracle_hook_mock": [[67, 8], [67, 24]]}, "fn_var_occur": {"gcs_hook_mock": [["gcs_hook_mock", "upload", "side_effect", "_assert_upload"]], "op": [["op", "execute", "None"]], "oracle_hook_mock": [["oracle_hook_mock", "get_conn", "cursor", "execute", "assert_called_once_with", "SQL"]]}, "name": "test_exec_success_json", "params": {"gcs_hook_mock_class": "", "oracle_hook_mock_class": "", "self": ""}, "params_descr": {"gcs_hook_mock_class": "", "oracle_hook_mock_class": "", "self": ""}, "params_occur": {"gcs_hook_mock_class": [], "oracle_hook_mock_class": [["oracle_hook_mock_class", "assert_called_once_with", "oracle_conn_id", "ORACLE_CONN_ID"]], "self": []}, "params_p": {"args": [], "gcs_hook_mock_class": [], "kwargs": [], "oracle_hook_mock_class": [], "self": []}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_exec_success_json", "ret_exprs": [], "ret_type": "", "variables": {"gcs_hook_mock": "", "op": "", "oracle_hook_mock": ""}, "variables_p": {"gcs_hook_mock": [], "op": [["Dict[str, str]", 0.13247281322225193], ["List[str]", 0.09148843208565034], ["int", 0.08917907452731462], ["list", 0.0879936029972686], ["dict", 0.08518551098738916], ["Dict[str, Dict[str, str]]", 0.08196872927604497]], "oracle_hook_mock": [["bool", 0.3542827001583012], ["mock.Mock", 0.1642273866973677], ["str", 0.08485697688658964]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[102, 8], [107, 58]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_assert_upload", "params": {"bucket": "", "gzip": "", "metadata": "", "mime_type": "", "obj": "", "tmp_filename": ""}, "params_descr": {"bucket": "", "gzip": "", "metadata": "", "mime_type": "", "obj": "", "tmp_filename": ""}, "params_occur": {"bucket": [["BUCKET", "bucket"]], "gzip": [["GZIP", "gzip"]], "metadata": [], "mime_type": [], "obj": [["expected_upload", "obj", "file", "read"]], "tmp_filename": [["open", "tmp_filename", "file"]]}, "params_p": {"args": [], "bucket": [["bool", 0.31034865031086395], ["str", 0.2121044696842061], ["int", 0.1849097695104553], ["Optional[str]", 0.10742655200411168], ["float", 0.09777004672181731], ["Sequence[Dict[str, str]]", 0.08744051176854571]], "gzip": [["bool", 0.31034865031086395], ["str", 0.2121044696842061], ["int", 0.1849097695104553], ["Optional[str]", 0.10742655200411168], ["float", 0.09777004672181731], ["Sequence[Dict[str, str]]", 0.08744051176854571]], "kwargs": [], "metadata": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "mime_type": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "obj": [["str", 0.5662193080867797], ["Optional[str]", 0.13741048348053062], ["bool", 0.09447498720480671]], "self": [], "tmp_filename": [["str", 0.8104425661808049], ["Optional[str]", 0.09408988588163818]]}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_file_splitting.<locals>._assert_upload", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that ndjson is split by approx_max_file_size_bytes param.", "long_descr": null, "ret": null}, "fn_lc": [[90, 4], [118, 24]], "fn_var_ln": {"expected_upload": [[97, 8], [97, 23]], "gcs_hook_mock": [[96, 8], [96, 21]], "op": [[111, 8], [111, 10]], "oracle_hook_mock": [[92, 8], [92, 24]]}, "fn_var_occur": {"expected_upload": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "approx_max_file_size_bytes", "len", "expected_upload", "JSON_FILENAME", "format"]], "gcs_hook_mock": [["gcs_hook_mock", "upload", "side_effect", "_assert_upload"]], "op": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "approx_max_file_size_bytes", "len", "expected_upload", "JSON_FILENAME", "format"], ["op", "execute", "None"]], "oracle_hook_mock": []}, "name": "test_file_splitting", "params": {"gcs_hook_mock_class": "", "oracle_hook_mock_class": "", "self": ""}, "params_descr": {"gcs_hook_mock_class": "", "oracle_hook_mock_class": "", "self": ""}, "params_occur": {"gcs_hook_mock_class": [], "oracle_hook_mock_class": [], "self": []}, "params_p": {"args": [], "gcs_hook_mock_class": [], "kwargs": [], "oracle_hook_mock_class": [], "self": []}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_file_splitting", "ret_exprs": [], "ret_type": "", "variables": {"expected_upload": "", "gcs_hook_mock": "", "op": "", "oracle_hook_mock": ""}, "variables_p": {"expected_upload": [["str", 0.1828790462398836], ["Dict[int, str]", 0.1227430575934041], ["list", 0.10857770606978595], ["Dict[str, int]", 0.10228196960670322], ["List[Union[Any, Any]]", 0.10150093887616413], ["List[Dict[str, Any]]", 0.09015338087718262]], "gcs_hook_mock": [], "op": [["Dict[str, Union[Any, bool, str]]", 0.2303854412919776], ["Dict[str, Optional[str]]", 0.08859644982809059], ["Dict[str, Union[int, str]]", 0.0866224684466865], ["Dict[int, Union[Any, Any]]", 0.07691352224108133], ["Dict[str, int]", 0.075201103014182], ["Dict[Any, str]", 0.07506846750675326]], "oracle_hook_mock": [["str", 0.49999999999739186], ["bool", 3.12867318493596e-11], ["list", 2.261134476370882e-11]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[130, 8], [133, 63]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_assert_upload", "params": {"bucket": "", "gzip": "", "metadata": "", "mime_type": "", "obj": "", "tmp_filename": ""}, "params_descr": {"bucket": "", "gzip": "", "metadata": "", "mime_type": "", "obj": "", "tmp_filename": ""}, "params_occur": {"bucket": [], "gzip": [], "metadata": [], "mime_type": [], "obj": [["obj", "SCHEMA_FILENAME"]], "tmp_filename": [["open", "tmp_filename", "file"]]}, "params_p": {"args": [], "bucket": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "gzip": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "kwargs": [], "metadata": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "mime_type": [["str", 0.3417102963988437], ["List[str]", 0.2590566805972581], ["Iterable[List[Any]]", 0.1031348157602093], ["bool", 0.08982857572327023]], "obj": [["bool", 0.31034865031086395], ["str", 0.2121044696842061], ["int", 0.1849097695104553], ["Optional[str]", 0.10742655200411168], ["float", 0.09777004672181731], ["Sequence[Dict[str, str]]", 0.08744051176854571]], "self": [], "tmp_filename": [["str", 0.8104425661808049], ["Optional[str]", 0.09408988588163818]]}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_schema_file.<locals>._assert_upload", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test writing schema files.", "long_descr": null, "ret": null}, "fn_lc": [[122, 4], [143, 51]], "fn_var_ln": {"gcs_hook_mock": [[128, 8], [128, 21]], "op": [[137, 8], [137, 10]], "oracle_hook_mock": [[124, 8], [124, 24]]}, "fn_var_occur": {"gcs_hook_mock": [["gcs_hook_mock", "upload", "side_effect", "_assert_upload"], ["gcs_hook_mock", "upload", "call_count"]], "op": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "schema_filename", "SCHEMA_FILENAME"], ["op", "execute", "None"]], "oracle_hook_mock": []}, "name": "test_schema_file", "params": {"gcs_hook_mock_class": "", "oracle_hook_mock_class": "", "self": ""}, "params_descr": {"gcs_hook_mock_class": "", "oracle_hook_mock_class": "", "self": ""}, "params_occur": {"gcs_hook_mock_class": [], "oracle_hook_mock_class": [], "self": []}, "params_p": {"args": [], "gcs_hook_mock_class": [["Generator[None, Any, None]", 0.24655283943647327], ["mock.Mock", 0.16836933784717373]], "kwargs": [], "oracle_hook_mock_class": [["Generator[None, Any, None]", 0.24655283943647327], ["mock.Mock", 0.16836933784717373]], "self": []}, "q_name": "TestOracleToGoogleCloudStorageOperator.test_schema_file", "ret_exprs": [], "ret_type": "", "variables": {"gcs_hook_mock": "", "op": "", "oracle_hook_mock": ""}, "variables_p": {"gcs_hook_mock": [], "op": [["Dict[str, Union[Any, bool, str]]", 0.18448911547108343], ["Dict[str, Union[int, str]]", 0.06701333182701834], ["str", 0.06685704373451257]], "oracle_hook_mock": [["str", 0.49999999999739186], ["bool", 3.12867318493596e-11], ["list", 2.261134476370882e-11]]}}], "name": "TestOracleToGoogleCloudStorageOperator", "q_name": "TestOracleToGoogleCloudStorageOperator", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "unittest", "mock", "oracledb", "airflow", "providers", "google", "cloud", "transfers", "oracle_to_gcs", "OracleToGCSOperator"], "mod_var_ln": {"BUCKET": [[29, 0], [29, 6]], "CURSOR_DESCRIPTION": [[34, 0], [34, 18]], "GZIP": [[31, 0], [31, 4]], "JSON_FILENAME": [[30, 0], [30, 13]], "NDJSON_LINES": [[38, 0], [38, 12]], "ORACLE_CONN_ID": [[27, 0], [27, 14]], "ROWS": [[33, 0], [33, 4]], "SCHEMA_FILENAME": [[43, 0], [43, 15]], "SCHEMA_JSON": [[44, 0], [44, 11]], "SQL": [[28, 0], [28, 3]], "TASK_ID": [[26, 0], [26, 7]]}, "mod_var_occur": {"BUCKET": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["op", "bucket", "BUCKET"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "oracle_conn_id", "ORACLE_CONN_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["BUCKET", "bucket"], ["BUCKET", "bucket"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "approx_max_file_size_bytes", "len", "expected_upload", "JSON_FILENAME", "format"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "schema_filename", "SCHEMA_FILENAME"]], "CURSOR_DESCRIPTION": [["oracle_hook_mock", "get_conn", "cursor", "description", "CURSOR_DESCRIPTION"], ["oracle_hook_mock", "get_conn", "cursor", "description", "CURSOR_DESCRIPTION"], ["oracle_hook_mock", "get_conn", "cursor", "description", "CURSOR_DESCRIPTION"]], "GZIP": [["GZIP", "gzip"], ["GZIP", "gzip"]], "JSON_FILENAME": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["op", "filename", "JSON_FILENAME"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "oracle_conn_id", "ORACLE_CONN_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["JSON_FILENAME", "format", "obj"], ["expected_upload", "JSON_FILENAME", "format", "join", "NDJSON_LINES", "JSON_FILENAME", "format", "NDJSON_LINES"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "approx_max_file_size_bytes", "len", "expected_upload", "JSON_FILENAME", "format"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "schema_filename", "SCHEMA_FILENAME"]], "NDJSON_LINES": [["join", "NDJSON_LINES", "file", "read"], ["expected_upload", "JSON_FILENAME", "format", "join", "NDJSON_LINES", "JSON_FILENAME", "format", "NDJSON_LINES"]], "ORACLE_CONN_ID": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "oracle_conn_id", "ORACLE_CONN_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["oracle_hook_mock_class", "assert_called_once_with", "oracle_conn_id", "ORACLE_CONN_ID"]], "ROWS": [["oracle_hook_mock", "get_conn", "cursor", "__iter__", "return_value", "iter", "ROWS"], ["oracle_hook_mock", "get_conn", "cursor", "__iter__", "return_value", "iter", "ROWS"], ["oracle_hook_mock", "get_conn", "cursor", "__iter__", "return_value", "iter", "ROWS"]], "SCHEMA_FILENAME": [["obj", "SCHEMA_FILENAME"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "schema_filename", "SCHEMA_FILENAME"]], "SCHEMA_JSON": [["join", "SCHEMA_JSON", "file", "read"]], "SQL": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["op", "sql", "SQL"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "oracle_conn_id", "ORACLE_CONN_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["oracle_hook_mock", "get_conn", "cursor", "execute", "assert_called_once_with", "SQL"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "approx_max_file_size_bytes", "len", "expected_upload", "JSON_FILENAME", "format"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "schema_filename", "SCHEMA_FILENAME"]], "TASK_ID": [["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["op", "task_id", "TASK_ID"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "oracle_conn_id", "ORACLE_CONN_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "approx_max_file_size_bytes", "len", "expected_upload", "JSON_FILENAME", "format"], ["op", "OracleToGCSOperator", "task_id", "TASK_ID", "sql", "SQL", "bucket", "BUCKET", "filename", "JSON_FILENAME", "schema_filename", "SCHEMA_FILENAME"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 39}, "session_id": "Uo7iR2azHEb2OJbkjuH4SpEeD7jhv5edt2P_wLyVe1k", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"BUCKET": "", "CURSOR_DESCRIPTION": "", "GZIP": "", "JSON_FILENAME": "", "NDJSON_LINES": "", "ORACLE_CONN_ID": "", "ROWS": "", "SCHEMA_FILENAME": "", "SCHEMA_JSON": "", "SQL": "", "TASK_ID": ""}, "variables_p": {"BUCKET": [["str", 0.1949702400949186], ["Dict[str, str]", 0.12080949667948004], ["int", 0.08270200625235241]], "CURSOR_DESCRIPTION": [["str", 0.39545343670703337], ["int", 0.09324296159272745], ["Optional[str]", 0.08958682935268827], ["bool", 0.08958682935268827]], "GZIP": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1]], "JSON_FILENAME": [["str", 0.29943356606568583], ["List[Dict[str, str]]", 0.10209400278751714], ["Dict[str, Any]", 0.09876761021498436], ["frozenset[str]", 0.09861607394346478]], "NDJSON_LINES": [["str", 0.4307164569648601], ["List[str]", 0.1761099235663407], ["List[Dict[str, Any]]", 0.09881063384635284], ["list", 0.09057011321778971], ["Dict[str, int]", 0.0826175648461466]], "ORACLE_CONN_ID": [["str", 0.14827174444215266], ["int", 0.0850499472574298], ["tools.bots.cloud.status.Status", 0.07569119178413014]], "ROWS": [["int", 0.14268118892097462], ["float", 0.11189920648159299], ["Dict[str, Union[Any, Any, Any]]", 0.11098362973917103], ["Optional[bytes]", 0.10881314760141314], ["str", 0.10331747945519011]], "SCHEMA_FILENAME": [["str", 0.7825083962647988], ["List[str]", 0.1139191668735218], ["list", 0.10357243686167951]], "SCHEMA_JSON": [["bytes", 0.21797395039484285], ["list", 0.10723445256515501], ["Pattern[str]", 0.09438711775901486], ["str", 0.0922114938885735]], "SQL": [["int", 0.5315816717871652], ["str", 0.08505309141876057]], "TASK_ID": [["str", 0.33622303859557534], ["int", 0.0847412257507795], ["Dict[str, int]", 0.07751202549812658]]}}}