{"error": null, "response": {"classes": [{"cls_lc": [[31, 0], [215, 40]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[37, 8], [41, 57]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_client_tasks_side_effect", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDockerSwarmOperator.test_execute.<locals>._client_tasks_side_effect", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[43, 8], [44, 40]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_client_service_logs_effect", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDockerSwarmOperator.test_execute.<locals>._client_service_logs_effect", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[33, 4], [113, 69]], "fn_var_ln": {"client_mock": [[46, 8], [46, 19]], "csargs": [[106, 8], [106, 14]], "cskwargs": [[106, 16], [106, 24]], "mock_obj": [[35, 8], [35, 16]], "operator": [[59, 8], [59, 16]], "return_value": [[57, 8], [57, 46]]}, "fn_var_occur": {"client_mock": [["client_mock", "mock", "Mock", "spec", "APIClient"], ["client_mock", "create_service", "return_value"], ["client_mock", "service_logs", "return_value", "_client_service_logs_effect"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "side_effect", "_client_tasks_side_effect"], ["docker_api_client_patcher", "return_value", "client_mock"], ["client_mock", "service_logs", "assert_called_once_with", "follow", "True", "stdout", "True", "stderr", "True", "is_tty", "True"], ["csargs", "cskwargs", "client_mock", "create_service", "call_args_list"], ["client_mock", "tasks", "call_count"], ["client_mock", "remove_service", "assert_called_once_with"]], "csargs": [["csargs", "cskwargs", "client_mock", "create_service", "call_args_list"], ["len", "csargs"], ["csargs", "mock_obj"]], "cskwargs": [["csargs", "cskwargs", "client_mock", "create_service", "call_args_list"], ["cskwargs", "startswith"], ["cskwargs", "types", "ServiceMode", "mode", "replicas"]], "mock_obj": [["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"], ["types_mock", "TaskTemplate", "assert_called_once_with", "container_spec", "mock_obj", "restart_policy", "mock_obj", "resources", "mock_obj", "networks", "placement", "types", "Placement", "constraints"], ["csargs", "mock_obj"]], "operator": [["operator", "DockerSwarmOperator", "api_version", "command", "environment", "image", "mem_limit", "user", "task_id", "mounts", "types", "Mount", "source", "target", "type", "auto_remove", "tty", "True", "configs", "types", "ConfigReference", "config_id", "config_name", "secrets", "types", "SecretReference", "secret_id", "secret_name", "mode", "types", "ServiceMode", "mode", "replicas", "networks", "placement", "types", "Placement", "constraints"], ["operator", "execute", "None"]], "return_value": [["client_mock", "create_service", "return_value"], ["client_mock", "service_logs", "return_value", "_client_service_logs_effect"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"], ["docker_api_client_patcher", "return_value", "client_mock"]]}, "name": "test_execute", "params": {"docker_api_client_patcher": "", "self": "", "types_mock": ""}, "params_descr": {"docker_api_client_patcher": "", "self": "", "types_mock": ""}, "params_occur": {"docker_api_client_patcher": [["docker_api_client_patcher", "return_value", "client_mock"], ["docker_api_client_patcher", "assert_called_once_with", "base_url", "tls", "False", "version", "timeout", "DEFAULT_TIMEOUT_SECONDS"]], "self": [], "types_mock": [["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"], ["types_mock", "TaskTemplate", "assert_called_once_with", "container_spec", "mock_obj", "restart_policy", "mock_obj", "resources", "mock_obj", "networks", "placement", "types", "Placement", "constraints"], ["types_mock", "ContainerSpec", "assert_called_once_with", "image", "command", "user", "mounts", "types", "Mount", "source", "target", "type", "tty", "True", "env", "configs", "types", "ConfigReference", "config_id", "config_name", "secrets", "types", "SecretReference", "secret_id", "secret_name"], ["types_mock", "RestartPolicy", "assert_called_once_with", "condition"], ["types_mock", "Resources", "assert_called_once_with", "mem_limit"]]}, "params_p": {"args": [], "docker_api_client_patcher": [["str", 0.1278690421612484], ["bool", 0.10211593817264723], ["List[str]", 0.0989084213140331], ["Optional[str]", 0.09641351603417134]], "kwargs": [], "self": [], "types_mock": [["Dict[str, Any]", 0.11086751133564975]]}, "q_name": "TestDockerSwarmOperator.test_execute", "ret_exprs": [], "ret_type": "", "variables": {"client_mock": "", "csargs": "", "cskwargs": "", "mock_obj": "", "operator": "", "return_value": ""}, "variables_p": {"client_mock": [], "csargs": [["List[str]", 0.24106219049817612], ["Dict[str, Union[Any, Any, Any]]", 0.11162944221787813], ["Dict[int, int]", 0.10021094765775257], ["Dict[str, List[str]]", 0.09746493214574142]], "cskwargs": [["str", 0.30527087964560257], ["List[Dict[str, Any]]", 0.2068519988852131], ["Set[str]", 0.19377968158142872], ["Dict[Optional[str], str]", 0.18659992670700634], ["int", 0.10749751318074934]], "mock_obj": [["Dict[str, int]", 0.14269282011980386], ["Dict[str, Dict[str, str]]", 0.10408675089622797], ["str", 0.08854347098636817]], "operator": [["MutableSequence[str]", 0.11795828670275656]], "return_value": [["str", 0.5949521351511211], ["Dict[str, Any]", 0.09416540672171962], ["List[Tuple[str, str]]", 0.09232004940133537]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[116, 4], [137, 69]], "fn_var_ln": {"client_mock": [[120, 8], [120, 19]], "mock_obj": [[118, 8], [118, 16]], "operator": [[132, 8], [132, 16]], "return_value": [[130, 8], [130, 46]]}, "fn_var_occur": {"client_mock": [["client_mock", "mock", "Mock", "spec", "APIClient"], ["client_mock", "create_service", "return_value"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "return_value"], ["docker_api_client_patcher", "return_value", "client_mock"], ["client_mock", "remove_service", "assert_called_once_with"]], "mock_obj": [["mock_obj", "mock", "Mock"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"]], "operator": [["operator", "DockerSwarmOperator", "image", "auto_remove", "task_id", "enable_logging", "False"], ["operator", "execute", "None"]], "return_value": [["client_mock", "create_service", "return_value"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "return_value"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"], ["docker_api_client_patcher", "return_value", "client_mock"]]}, "name": "test_auto_remove", "params": {"docker_api_client_patcher": "", "self": "", "types_mock": ""}, "params_descr": {"docker_api_client_patcher": "", "self": "", "types_mock": ""}, "params_occur": {"docker_api_client_patcher": [["docker_api_client_patcher", "return_value", "client_mock"]], "self": [], "types_mock": [["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"]]}, "params_p": {"args": [], "docker_api_client_patcher": [], "kwargs": [], "self": [], "types_mock": [["Dict[str, Any]", 0.11086751133564975]]}, "q_name": "TestDockerSwarmOperator.test_auto_remove", "ret_exprs": [], "ret_type": "", "variables": {"client_mock": "", "mock_obj": "", "operator": "", "return_value": ""}, "variables_p": {"client_mock": [], "mock_obj": [["mock.Mock", 0.188882637736245], ["Union[mock.AsyncMock, mock.MagicMock]", 0.10322350573603675], ["mock.MagicMock", 0.09418672462620016]], "operator": [], "return_value": [["bool", 0.10830658444835879]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[140, 4], [163, 80]], "fn_var_ln": {"client_mock": [[144, 8], [144, 19]], "mock_obj": [[142, 8], [142, 16]], "operator": [[156, 8], [156, 16]], "return_value": [[154, 8], [154, 46]]}, "fn_var_occur": {"client_mock": [["client_mock", "mock", "Mock", "spec", "APIClient"], ["client_mock", "create_service", "return_value"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "return_value"], ["docker_api_client_patcher", "return_value", "client_mock"], ["client_mock", "remove_service", "call_count"]], "mock_obj": [["mock_obj", "mock", "Mock"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"]], "operator": [["operator", "DockerSwarmOperator", "image", "auto_remove", "task_id", "enable_logging", "False"], ["operator", "execute", "None"]], "return_value": [["client_mock", "create_service", "return_value"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "return_value"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"], ["docker_api_client_patcher", "return_value", "client_mock"]]}, "name": "test_no_auto_remove", "params": {"docker_api_client_patcher": "", "self": "", "types_mock": ""}, "params_descr": {"docker_api_client_patcher": "", "self": "", "types_mock": ""}, "params_occur": {"docker_api_client_patcher": [["docker_api_client_patcher", "return_value", "client_mock"]], "self": [], "types_mock": [["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"]]}, "params_p": {"args": [], "docker_api_client_patcher": [], "kwargs": [], "self": [], "types_mock": [["Dict[str, Any]", 0.12319174389541986]]}, "q_name": "TestDockerSwarmOperator.test_no_auto_remove", "ret_exprs": [], "ret_type": "", "variables": {"client_mock": "", "mock_obj": "", "operator": "", "return_value": ""}, "variables_p": {"client_mock": [], "mock_obj": [["mock.Mock", 0.188882637736245], ["Union[mock.AsyncMock, mock.MagicMock]", 0.10322350573603675], ["mock.MagicMock", 0.09418672462620016]], "operator": [], "return_value": [["bool", 0.10830658444835879]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[167, 4], [189, 36]], "fn_var_ln": {"client_mock": [[171, 8], [171, 19]], "mock_obj": [[169, 8], [169, 16]], "msg": [[186, 8], [186, 11]], "operator": [[183, 8], [183, 16]], "return_value": [[181, 8], [181, 46]]}, "fn_var_occur": {"client_mock": [["client_mock", "mock", "Mock", "spec", "APIClient"], ["client_mock", "create_service", "return_value"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "return_value", "status"], ["docker_api_client_patcher", "return_value", "client_mock"]], "mock_obj": [["mock_obj", "mock", "Mock"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"]], "msg": [["str", "ctx", "value", "msg"]], "operator": [["operator", "DockerSwarmOperator", "image", "auto_remove", "task_id", "enable_logging", "False"], ["operator", "execute", "None"]], "return_value": [["client_mock", "create_service", "return_value"], ["client_mock", "images", "return_value"], ["client_mock", "pull", "return_value"], ["client_mock", "tasks", "return_value", "status"], ["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"], ["docker_api_client_patcher", "return_value", "client_mock"]]}, "name": "test_non_complete_service_raises_error", "params": {"docker_api_client_patcher": "", "self": "", "status": "", "types_mock": ""}, "params_descr": {"docker_api_client_patcher": "", "self": "", "status": "", "types_mock": ""}, "params_occur": {"docker_api_client_patcher": [["docker_api_client_patcher", "return_value", "client_mock"]], "self": [], "status": [["client_mock", "tasks", "return_value", "status"]], "types_mock": [["types_mock", "TaskTemplate", "return_value", "mock_obj"], ["types_mock", "ContainerSpec", "return_value", "mock_obj"], ["types_mock", "RestartPolicy", "return_value", "mock_obj"], ["types_mock", "Resources", "return_value", "mock_obj"]]}, "params_p": {"args": [], "docker_api_client_patcher": [["str", 0.29339218457252914], ["Dict[str, Any]", 0.265526852406885], ["List[str]", 0.08597588078777918]], "kwargs": [], "self": [], "status": [["str", 0.31872883740817304], ["int", 0.16004884535716646]], "types_mock": [["mock.Mock", 0.18666500549389015], ["Dict[str, Any]", 0.11755787896274812], ["mock.MagicMock", 0.10252829040878696]]}, "q_name": "TestDockerSwarmOperator.test_non_complete_service_raises_error", "ret_exprs": [], "ret_type": "", "variables": {"client_mock": "", "mock_obj": "", "msg": "", "operator": "", "return_value": ""}, "variables_p": {"client_mock": [], "mock_obj": [["mock.Mock", 0.188882637736245], ["Union[mock.AsyncMock, mock.MagicMock]", 0.10322350573603675], ["mock.MagicMock", 0.09418672462620016]], "msg": [["str", 0.3850542976050998], ["Exception", 0.1634065706045287], ["list", 0.09058824769964786], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.08178520753086004], ["tuple", 0.08093908743807054]], "operator": [], "return_value": [["bool", 0.10830658444835879]]}}, {"docstring": {"func": "Test operator on_kill method if APIClient created.", "long_descr": null, "ret": null}, "fn_lc": [[192, 4], [202, 85]], "fn_var_ln": {"op": [[194, 8], [194, 10]], "service": [[195, 8], [195, 18]]}, "fn_var_occur": {"op": [["op", "DockerSwarmOperator", "image", "task_id"], ["op", "service", "service_exists", "None"], ["op", "hook", "get_conn"], ["op", "on_kill"]], "service": [["op", "service", "service_exists", "None"]]}, "name": "test_on_kill_client_created", "params": {"docker_api_client_patcher": "", "self": "", "service_exists": ""}, "params_descr": {"docker_api_client_patcher": "", "self": "", "service_exists": ""}, "params_occur": {"docker_api_client_patcher": [["docker_api_client_patcher", "return_value", "remove_service", "assert_called_once_with"], ["docker_api_client_patcher", "return_value", "remove_service", "assert_not_called"]], "self": [], "service_exists": [["op", "service", "service_exists", "None"]]}, "params_p": {"args": [], "docker_api_client_patcher": [["str", 0.10430672374699802]], "kwargs": [], "self": [], "service_exists": [["Callable[[List, bool], None]", 0.10621800301298545]]}, "q_name": "TestDockerSwarmOperator.test_on_kill_client_created", "ret_exprs": [], "ret_type": "", "variables": {"op": "", "service": ""}, "variables_p": {"op": [["list", 0.17797855061032808], ["int", 0.11222160051350132], ["Optional[str]", 0.10219209652428482], ["bytes", 0.09064762803936909], ["RuntimeError", 0.09015746112402744]], "service": [["Dict[Any, List[str]]", 0.20702243275264168], ["int", 0.15364338258680132], ["Type[List[Any]]", 0.08862071499885904], ["str", 0.08349483322478518], ["Set[int]", 0.08002979103180163]]}}, {"docstring": {"func": "Test operator on_kill method if APIClient not created in case of error.", "long_descr": null, "ret": null}, "fn_lc": [[204, 4], [215, 40]], "fn_var_ln": {"mock_service": [[208, 8], [208, 20]], "op": [[207, 8], [207, 10]], "service": [[209, 8], [209, 18]], "side_effect": [[206, 8], [206, 45]]}, "fn_var_occur": {"mock_service": [["mock_service", "mock", "MagicMock"], ["op", "service", "mock_service"], ["mock_service", "assert_not_called"]], "op": [["op", "DockerSwarmOperator", "image", "task_id"], ["op", "service", "mock_service"], ["op", "hook", "get_conn"], ["op", "on_kill"]], "service": [["op", "service", "mock_service"]], "side_effect": [["docker_api_client_patcher", "side_effect", "APIError"]]}, "name": "test_on_kill_client_not_created", "params": {"docker_api_client_patcher": "", "self": ""}, "params_descr": {"docker_api_client_patcher": "", "self": ""}, "params_occur": {"docker_api_client_patcher": [["docker_api_client_patcher", "side_effect", "APIError"], ["docker_api_client_patcher", "return_value", "remove_service", "assert_not_called"]], "self": []}, "params_p": {"args": [], "docker_api_client_patcher": [["str", 0.08959769367157186]], "kwargs": [], "self": []}, "q_name": "TestDockerSwarmOperator.test_on_kill_client_not_created", "ret_exprs": [], "ret_type": "", "variables": {"mock_service": "", "op": "", "service": "", "side_effect": ""}, "variables_p": {"mock_service": [["mock.Mock", 0.28789570221167565]], "op": [["Optional[str]", 0.09224240803941908]], "service": [["str", 0.11912077891165895], ["list", 0.11712331977783062]], "side_effect": [["str", 0.8081905285340462], ["int", 0.19180947146595378]]}}], "name": "TestDockerSwarmOperator", "q_name": "TestDockerSwarmOperator", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "unittest", "mock", "pytest", "docker", "APIClient", "types", "docker", "constants", "DEFAULT_TIMEOUT_SECONDS", "docker", "errors", "APIError", "airflow", "exceptions", "AirflowException", "airflow", "providers", "docker", "operators", "docker_swarm", "DockerSwarmOperator"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 45}, "session_id": "DeK-QwYb3KH90ratoc9ohTUjkQhOPtQCmWVvtdo8DKA", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}