{"error": null, "response": {"classes": [{"cls_lc": [[36, 0], [155, 13]], "cls_var_ln": {"CONN_ID": [[38, 4], [38, 11]], "DBT_RUN_ID": [[39, 4], [39, 14]], "TASK_ID": [[37, 4], [37, 11]], "TIMEOUT": [[40, 4], [40, 11]]}, "cls_var_occur": {"CONN_ID": [], "DBT_RUN_ID": [], "TASK_ID": [], "TIMEOUT": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[42, 4], [55, 27]], "fn_var_ln": {"conn": [[53, 8], [53, 12]], "sensor": [[43, 8], [43, 19]]}, "fn_var_occur": {"conn": [["conn", "Connection", "conn_id", "conn_type", "DbtCloudHook", "conn_type", "login", "ACCOUNT_ID", "password", "TOKEN"], ["db", "merge_conn", "conn"]], "sensor": [["self", "sensor", "DbtCloudJobRunSensor", "task_id", "dbt_cloud_conn_id", "run_id", "RUN_ID", "account_id", "ACCOUNT_ID", "timeout", "poke_interval"]]}, "name": "setup_class", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "sensor", "DbtCloudJobRunSensor", "task_id", "dbt_cloud_conn_id", "run_id", "RUN_ID", "account_id", "ACCOUNT_ID", "timeout", "poke_interval"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbtCloudJobRunSensor.setup_class", "ret_exprs": [], "ret_type": "", "variables": {"conn": "", "sensor": ""}, "variables_p": {"conn": [["str", 0.8924066314760892]], "sensor": [["str", 0.505685958344104], ["bool", 0.10809507893449818], ["Dict[str, Union[Any, Any]]", 0.10647144592779192], ["List[str]", 0.09059210350688408]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[57, 4], [61, 46]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_init", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "sensor", "dbt_cloud_conn_id"], ["self", "sensor", "run_id", "RUN_ID"], ["self", "sensor", "timeout"], ["self", "sensor", "poke_interval"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbtCloudJobRunSensor.test_init", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[75, 4], [88, 36]], "fn_var_ln": {"error_message": [[85, 16], [85, 29]], "return_value": [[76, 8], [76, 40]]}, "fn_var_occur": {"error_message": [["error_message", "RUN_ID"], ["error_message", "RUN_ID"], ["pytest", "raises", "DbtCloudJobRunException", "match", "error_message"]], "return_value": [["mock_job_run_status", "return_value", "job_run_status"]]}, "name": "test_poke", "params": {"expected_poke_result": "", "job_run_status": "", "mock_job_run_status": "", "self": ""}, "params_descr": {"expected_poke_result": "", "job_run_status": "", "mock_job_run_status": "", "self": ""}, "params_occur": {"expected_poke_result": [["self", "sensor", "poke", "expected_poke_result"]], "job_run_status": [["mock_job_run_status", "return_value", "job_run_status"], ["job_run_status", "DbtCloudJobRunStatus", "ERROR", "value"]], "mock_job_run_status": [["mock_job_run_status", "return_value", "job_run_status"]], "self": [["self", "sensor", "poke", "expected_poke_result"], ["self", "sensor", "poke"]]}, "params_p": {"args": [], "expected_poke_result": [["int", 0.10933488322539525]], "job_run_status": [], "kwargs": [], "mock_job_run_status": [], "self": []}, "q_name": "TestDbtCloudJobRunSensor.test_poke", "ret_exprs": [], "ret_type": "", "variables": {"error_message": "", "return_value": ""}, "variables_p": {"error_message": [["int", 0.18418111867047388], ["raiden.utils.Any", 0.18097441451046792], ["Set[str]", 0.10883680510398502], ["List[Dict[str, Any]]", 0.09669799997183491], ["RuntimeError", 0.08849748312859558], ["DefaultDict[Any, int]", 0.08737425748240459], ["float", 0.08376607112328598]], "return_value": [["str", 0.26116860087858934], ["Optional[bytes]", 0.1527176117043097], ["list", 0.10277852508499338], ["int", 0.0688223380914748], ["Dict[str, Any]", 0.06657977766498581]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[92, 4], [102, 36]], "fn_var_ln": {"task": [[93, 8], [93, 12]]}, "fn_var_occur": {"task": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"], ["task", "execute", "mock", "MagicMock"]]}, "name": "test_dbt_cloud_job_run_sensor_finish_before_deferred", "params": {"mock_defer": "", "mock_hook": "", "self": ""}, "params_descr": {"mock_defer": "", "mock_hook": "", "self": ""}, "params_occur": {"mock_defer": [["mock_defer", "called"]], "mock_hook": [["mock_hook", "return_value", "get_job_run_status", "return_value", "DbtCloudJobRunStatus", "SUCCESS", "value"]], "self": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"]]}, "params_p": {"args": [], "kwargs": [], "mock_defer": [["mock.MagicMock", 0.1124891349017863], ["mock.Mock", 0.11107850525887643]], "mock_hook": [["mock.MagicMock", 0.09241730801114308]], "self": []}, "q_name": "TestDbtCloudJobRunSensor.test_dbt_cloud_job_run_sensor_finish_before_deferred", "ret_exprs": [], "ret_type": "", "variables": {"task": ""}, "variables_p": {"task": [["str", 0.10185747252828874], ["pymysql.connections.Connection", 0.09689341861562487]]}}, {"docstring": {"func": "Assert execute method defer for Dbt cloud job run status sensors", "long_descr": null, "ret": null}, "fn_lc": [[105, 4], [117, 109]], "fn_var_ln": {"task": [[107, 8], [107, 12]]}, "fn_var_occur": {"task": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"], ["task", "execute"]]}, "name": "test_execute_with_deferrable_mode", "params": {"mock_hook": "", "self": ""}, "params_descr": {"mock_hook": "", "self": ""}, "params_occur": {"mock_hook": [["mock_hook", "return_value", "get_job_run_status", "return_value", "DbtCloudJobRunStatus", "STARTING", "value"]], "self": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"]]}, "params_p": {"args": [], "kwargs": [], "mock_hook": [], "self": []}, "q_name": "TestDbtCloudJobRunSensor.test_execute_with_deferrable_mode", "ret_exprs": [], "ret_type": "", "variables": {"task": ""}, "variables_p": {"task": [["str", 0.10185747252828874], ["pymysql.connections.Connection", 0.09689341861562487]]}}, {"docstring": {"func": "Assert execute_complete log success message when trigger fire with target status", "long_descr": null, "ret": null}, "fn_lc": [[119, 4], [134, 45]], "fn_var_ln": {"msg": [[129, 8], [129, 11]], "task": [[121, 8], [121, 12]]}, "fn_var_occur": {"msg": [["msg", "self", "DBT_RUN_ID"], ["task", "execute_complete", "context", "event", "msg", "self", "DBT_RUN_ID"], ["mock_log_info", "assert_called_with", "msg"]], "task": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"], ["mock", "patch", "object", "task", "log", "mock_log_info"], ["task", "execute_complete", "context", "event", "msg", "self", "DBT_RUN_ID"]]}, "name": "test_execute_complete_success", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"], ["msg", "self", "DBT_RUN_ID"], ["task", "execute_complete", "context", "event", "msg", "self", "DBT_RUN_ID"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbtCloudJobRunSensor.test_execute_complete_success", "ret_exprs": [], "ret_type": "", "variables": {"msg": "", "task": ""}, "variables_p": {"msg": [["str", 0.2004606765036112], ["dict", 0.10961808844675791], ["Dict[str, Any]", 0.10311925576853], ["list", 0.09588869261298383]], "task": [["str", 0.10185747252828874], ["pymysql.connections.Connection", 0.09689341861562487]]}}, {"docstring": {"func": "Assert execute_complete method to raise exception on the cancelled and error status", "long_descr": null, "ret": null}, "fn_lc": [[143, 4], [155, 13]], "fn_var_ln": {"task": [[145, 8], [145, 12]]}, "fn_var_occur": {"task": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"], ["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]]}, "name": "test_execute_complete_failure", "params": {"mock_message": "", "mock_status": "", "self": ""}, "params_descr": {"mock_message": "", "mock_status": "", "self": ""}, "params_occur": {"mock_message": [["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]], "mock_status": [["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]], "self": [["task", "DbtCloudJobRunSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT", "deferrable", "True"], ["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]]}, "params_p": {"args": [], "kwargs": [], "mock_message": [["str", 0.09739544401749098]], "mock_status": [["str", 0.09739544401749098]], "self": []}, "q_name": "TestDbtCloudJobRunSensor.test_execute_complete_failure", "ret_exprs": [], "ret_type": "", "variables": {"task": ""}, "variables_p": {"task": [["str", 0.10185747252828874], ["pymysql.connections.Connection", 0.09689341861562487]]}}], "name": "TestDbtCloudJobRunSensor", "q_name": "TestDbtCloudJobRunSensor", "variables": {"CONN_ID": "", "DBT_RUN_ID": "", "TASK_ID": "", "TIMEOUT": ""}, "variables_p": {"CONN_ID": [["Optional[str]", 0.09999999999999999], ["int", 0.09999999999999999], ["List[int]", 0.09999999999999999], ["services.ticketing.transfer.models.TicketID", 0.09999999999999999], ["Type[models.User]", 0.09999999999999999], ["shop.transfer.models.ShopID", 0.09999999999999999], ["Type[pipeline.netfile.models.AbstractSchedule]", 0.09999999999999999]], "DBT_RUN_ID": [["str", 0.5980153549176938], ["int", 0.11822325771466384], ["Optional[str]", 0.11822325771466384]], "TASK_ID": [["str", 0.4], ["Type[bot_app.models.Products]", 0.1], ["Type[str]", 0.1], ["Optional[str]", 0.1]], "TIMEOUT": [["int", 0.49999999999999994], ["float", 0.3], ["str", 0.09999999999999999]]}}, {"cls_lc": [[158, 0], [221, 13]], "cls_var_ln": {"CONN_ID": [[160, 4], [160, 11]], "DBT_RUN_ID": [[161, 4], [161, 14]], "TASK_ID": [[159, 4], [159, 11]], "TIMEOUT": [[162, 4], [162, 11]], "depcrecation_message": [[164, 4], [164, 24]]}, "cls_var_occur": {"CONN_ID": [], "DBT_RUN_ID": [], "TASK_ID": [], "TIMEOUT": [], "depcrecation_message": []}, "funcs": [{"docstring": {"func": "Assert execute method defer for Dbt cloud job run status sensors", "long_descr": null, "ret": null}, "fn_lc": [[170, 4], [183, 109]], "fn_var_ln": {"task": [[174, 12], [174, 16]]}, "fn_var_occur": {"task": [["task", "DbtCloudJobRunAsyncSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT"], ["task", "execute"]]}, "name": "test_dbt_job_run_sensor_async", "params": {"mock_hook": "", "self": ""}, "params_descr": {"mock_hook": "", "self": ""}, "params_occur": {"mock_hook": [["mock_hook", "return_value", "get_job_run_status", "return_value", "DbtCloudJobRunStatus", "STARTING", "value"]], "self": [["pytest", "warns", "AirflowProviderDeprecationWarning", "match", "self", "depcrecation_message"], ["task", "DbtCloudJobRunAsyncSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT"]]}, "params_p": {"args": [], "kwargs": [], "mock_hook": [], "self": []}, "q_name": "TestDbtCloudJobRunSensorAsync.test_dbt_job_run_sensor_async", "ret_exprs": [], "ret_type": "", "variables": {"task": ""}, "variables_p": {"task": [["list", 0.27802518278257443], ["List[Tuple[int, float]]", 0.11729683128510747], ["List[float]", 0.10525586483129463], ["dict", 0.10203089046523241], ["str", 0.0946876391738249], ["Dict[str, List[Any]]", 0.09267506092752481], ["List[str]", 0.09267506092752481]]}}, {"docstring": {"func": "Assert execute_complete log success message when trigger fire with target status", "long_descr": null, "ret": null}, "fn_lc": [[185, 4], [200, 45]], "fn_var_ln": {"msg": [[195, 8], [195, 11]], "task": [[188, 12], [188, 16]]}, "fn_var_occur": {"msg": [["msg", "self", "DBT_RUN_ID"], ["task", "execute_complete", "context", "event", "msg", "self", "DBT_RUN_ID"], ["mock_log_info", "assert_called_with", "msg"]], "task": [["task", "DbtCloudJobRunAsyncSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT"], ["mock", "patch", "object", "task", "log", "mock_log_info"], ["task", "execute_complete", "context", "event", "msg", "self", "DBT_RUN_ID"]]}, "name": "test_dbt_job_run_sensor_async_execute_complete_success", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["pytest", "warns", "AirflowProviderDeprecationWarning", "match", "self", "depcrecation_message"], ["task", "DbtCloudJobRunAsyncSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT"], ["msg", "self", "DBT_RUN_ID"], ["task", "execute_complete", "context", "event", "msg", "self", "DBT_RUN_ID"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbtCloudJobRunSensorAsync.test_dbt_job_run_sensor_async_execute_complete_success", "ret_exprs": [], "ret_type": "", "variables": {"msg": "", "task": ""}, "variables_p": {"msg": [["str", 0.2004606765036112], ["dict", 0.10961808844675791], ["Dict[str, Any]", 0.10311925576853], ["list", 0.09588869261298383]], "task": [["list", 0.27802518278257443], ["List[Tuple[int, float]]", 0.11729683128510747], ["List[float]", 0.10525586483129463], ["dict", 0.10203089046523241], ["str", 0.0946876391738249], ["Dict[str, List[Any]]", 0.09267506092752481], ["List[str]", 0.09267506092752481]]}}, {"docstring": {"func": "Assert execute_complete method to raise exception on the cancelled and error status", "long_descr": null, "ret": null}, "fn_lc": [[209, 4], [221, 13]], "fn_var_ln": {"task": [[212, 12], [212, 16]]}, "fn_var_occur": {"task": [["task", "DbtCloudJobRunAsyncSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT"], ["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]]}, "name": "test_dbt_job_run_sensor_async_execute_complete_failure", "params": {"mock_message": "", "mock_status": "", "self": ""}, "params_descr": {"mock_message": "", "mock_status": "", "self": ""}, "params_occur": {"mock_message": [["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]], "mock_status": [["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]], "self": [["pytest", "warns", "AirflowProviderDeprecationWarning", "match", "self", "depcrecation_message"], ["task", "DbtCloudJobRunAsyncSensor", "dbt_cloud_conn_id", "self", "CONN_ID", "task_id", "self", "TASK_ID", "run_id", "self", "DBT_RUN_ID", "timeout", "self", "TIMEOUT"], ["task", "execute_complete", "context", "event", "mock_status", "mock_message", "self", "DBT_RUN_ID"]]}, "params_p": {"args": [], "kwargs": [], "mock_message": [["str", 0.09442838649660158]], "mock_status": [["str", 0.09442838649660158]], "self": []}, "q_name": "TestDbtCloudJobRunSensorAsync.test_dbt_job_run_sensor_async_execute_complete_failure", "ret_exprs": [], "ret_type": "", "variables": {"task": ""}, "variables_p": {"task": [["list", 0.27802518278257443], ["List[Tuple[int, float]]", 0.11729683128510747], ["List[float]", 0.10525586483129463], ["dict", 0.10203089046523241], ["str", 0.0946876391738249], ["Dict[str, List[Any]]", 0.09267506092752481], ["List[str]", 0.09267506092752481]]}}], "name": "TestDbtCloudJobRunSensorAsync", "q_name": "TestDbtCloudJobRunSensorAsync", "variables": {"CONN_ID": "", "DBT_RUN_ID": "", "TASK_ID": "", "TIMEOUT": "", "depcrecation_message": ""}, "variables_p": {"CONN_ID": [["Optional[str]", 0.09999999999999999], ["int", 0.09999999999999999], ["List[int]", 0.09999999999999999], ["services.ticketing.transfer.models.TicketID", 0.09999999999999999], ["Type[models.User]", 0.09999999999999999], ["shop.transfer.models.ShopID", 0.09999999999999999], ["Type[pipeline.netfile.models.AbstractSchedule]", 0.09999999999999999]], "DBT_RUN_ID": [["str", 0.5980153549176938], ["int", 0.11822325771466384], ["Optional[str]", 0.11822325771466384]], "TASK_ID": [["str", 0.4], ["Type[bot_app.models.Products]", 0.1], ["Type[str]", 0.1], ["Optional[str]", 0.1]], "TIMEOUT": [["int", 0.49999999999999994], ["float", 0.3], ["str", 0.09999999999999999]], "depcrecation_message": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]]}}], "funcs": [], "imports": ["__future__", "annotations", "unittest", "mock", "unittest", "mock", "patch", "pytest", "airflow", "exceptions", "AirflowException", "AirflowProviderDeprecationWarning", "TaskDeferred", "airflow", "models", "connection", "Connection", "airflow", "providers", "dbt", "cloud", "hooks", "dbt", "DbtCloudHook", "DbtCloudJobRunException", "DbtCloudJobRunStatus", "airflow", "providers", "dbt", "cloud", "sensors", "dbt", "DbtCloudJobRunAsyncSensor", "DbtCloudJobRunSensor", "airflow", "providers", "dbt", "cloud", "triggers", "dbt", "DbtCloudRunJobTrigger", "airflow", "utils", "db"], "mod_var_ln": {"ACCOUNT_ID": [[31, 0], [31, 10]], "RUN_ID": [[32, 0], [32, 6]], "TOKEN": [[33, 0], [33, 5]]}, "mod_var_occur": {"ACCOUNT_ID": [["self", "sensor", "DbtCloudJobRunSensor", "task_id", "dbt_cloud_conn_id", "run_id", "RUN_ID", "account_id", "ACCOUNT_ID", "timeout", "poke_interval"], ["conn", "Connection", "conn_id", "conn_type", "DbtCloudHook", "conn_type", "login", "ACCOUNT_ID", "password", "TOKEN"]], "RUN_ID": [["self", "sensor", "DbtCloudJobRunSensor", "task_id", "dbt_cloud_conn_id", "run_id", "RUN_ID", "account_id", "ACCOUNT_ID", "timeout", "poke_interval"], ["self", "sensor", "run_id", "RUN_ID"], ["error_message", "RUN_ID"], ["error_message", "RUN_ID"]], "TOKEN": [["conn", "Connection", "conn_id", "conn_type", "DbtCloudHook", "conn_type", "login", "ACCOUNT_ID", "password", "TOKEN"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 46}, "session_id": "eabGKFBCj1ramSHR4F6oynub0_Vit26cSCG5dHhGruA", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"ACCOUNT_ID": "", "RUN_ID": "", "TOKEN": ""}, "variables_p": {"ACCOUNT_ID": [["str", 0.7127683040915961], ["bool", 0.10219494652194273], ["django.contrib.auth.models.AbstractUser", 0.09396243930598398]], "RUN_ID": [["str", 0.5933651504262681], ["Union[server.models.Bike, int]", 0.11656366488487648], ["Optional[str]", 0.1013903760644553], ["int", 0.09786978684238416]], "TOKEN": [["str", 0.786689109423567], ["Tuple[str, str]", 0.10665544528821666], ["Tuple[str, str, str]", 0.10665544528821666]]}}}