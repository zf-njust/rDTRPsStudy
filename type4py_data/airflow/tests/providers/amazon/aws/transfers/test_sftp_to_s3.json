{"error": null, "response": {"classes": [{"cls_lc": [[45, 0], [119, 59]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[46, 4], [64, 28]], "fn_var_ln": {"dag": [[61, 8], [61, 16]], "hook": [[56, 8], [56, 17]], "no_host_key_check": [[49, 8], [49, 30]], "s3_bucket": [[62, 8], [62, 22]], "s3_key": [[64, 8], [64, 19]], "sftp_client": [[59, 8], [59, 24]], "sftp_path": [[63, 8], [63, 22]], "ssh_client": [[58, 8], [58, 23]]}, "fn_var_occur": {"dag": [["dag", "DAG", "TEST_DAG_ID", "schedule", "start_date", "DEFAULT_DATE"], ["self", "dag", "dag"]], "hook": [["hook", "SSHHook", "ssh_conn_id"], ["hook", "no_host_key_check", "True"], ["self", "hook", "hook"], ["self", "ssh_client", "self", "hook", "get_conn"]], "no_host_key_check": [["hook", "no_host_key_check", "True"]], "s3_bucket": [["self", "s3_bucket", "BUCKET"]], "s3_key": [["self", "s3_key", "S3_KEY"]], "sftp_client": [["self", "sftp_client", "self", "ssh_client", "open_sftp"]], "sftp_path": [["self", "sftp_path", "SFTP_PATH"]], "ssh_client": [["self", "ssh_client", "self", "hook", "get_conn"], ["self", "sftp_client", "self", "ssh_client", "open_sftp"]]}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "hook", "hook"], ["self", "ssh_client", "self", "hook", "get_conn"], ["self", "sftp_client", "self", "ssh_client", "open_sftp"], ["self", "dag", "dag"], ["self", "s3_bucket", "BUCKET"], ["self", "sftp_path", "SFTP_PATH"], ["self", "s3_key", "S3_KEY"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestSFTPToS3Operator.setup_method", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "hook": "", "no_host_key_check": "", "s3_bucket": "", "s3_key": "", "sftp_client": "", "sftp_path": "", "ssh_client": ""}, "variables_p": {"dag": [["List[str]", 0.2051141318971504], ["Dict[str, Any]", 0.10443504032726235], ["str", 0.0956888810863684]], "hook": [["str", 0.6039866472547754], ["int", 0.39601335274522487]], "no_host_key_check": [["str", 0.38769190026126965], ["List[str]", 0.18156003203378573], ["Set[str]", 0.1475680062932504], ["bool", 0.1300037517534881], ["Type[Dict[str, Any]]", 0.08076062618508523], ["list", 0.07241568347312088]], "s3_bucket": [["str", 0.8199488656435532], ["Optional[str]", 0.09181426674007255]], "s3_key": [["str", 0.706534015047574], ["VT", 0.09289358421585563], ["KT", 0.09289358421585563]], "sftp_client": [["int", 0.3828542236333622], ["str", 0.13824428291419108], ["\"Client\"", 0.10518387908439339], ["set", 0.08824251616696105]], "sftp_path": [["List[str]", 0.9999999998339758], ["str", 8.076434955458418e-11]], "ssh_client": [["str", 0.3772401631742052], ["int", 0.2722806909835247], ["Optional[str]", 0.11510111632407301]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[69, 4], [119, 59]], "fn_var_ln": {"conn": [[89, 8], [89, 12]], "create_file_task": [[77, 8], [77, 24]], "objects_in_dest_bucket": [[109, 8], [109, 30]], "run_task": [[94, 8], [94, 16]], "s3_hook": [[88, 8], [88, 15]], "test_remote_file_content": [[71, 8], [71, 32]]}, "fn_var_occur": {"conn": [["conn", "boto3", "client"], ["conn", "create_bucket", "Bucket", "self", "s3_bucket"], ["objects_in_dest_bucket", "conn", "list_objects", "Bucket", "self", "s3_bucket", "Prefix", "self", "s3_key"], ["conn", "delete_object", "Bucket", "self", "s3_bucket", "Key", "self", "s3_key"], ["conn", "delete_bucket", "Bucket", "self", "s3_bucket"]], "create_file_task": [["create_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "test_remote_file_content", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"], ["create_file_task", "None"], ["create_file_task", "execute", "None"]], "objects_in_dest_bucket": [["objects_in_dest_bucket", "conn", "list_objects", "Bucket", "self", "s3_bucket", "Prefix", "self", "s3_key"], ["len", "objects_in_dest_bucket"], ["objects_in_dest_bucket", "self", "s3_key"]], "run_task": [["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"], ["run_task", "None"], ["run_task", "execute", "None"]], "s3_hook": [["s3_hook", "S3Hook", "aws_conn_id", "None"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"]], "test_remote_file_content": [["create_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "test_remote_file_content", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"]]}, "name": "test_sftp_to_s3_operation", "params": {"self": "", "use_temp_file": ""}, "params_descr": {"self": "", "use_temp_file": ""}, "params_occur": {"self": [["create_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "test_remote_file_content", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"], ["conn", "create_bucket", "Bucket", "self", "s3_bucket"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"], ["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"], ["objects_in_dest_bucket", "conn", "list_objects", "Bucket", "self", "s3_bucket", "Prefix", "self", "s3_key"], ["objects_in_dest_bucket", "self", "s3_key"], ["conn", "delete_object", "Bucket", "self", "s3_bucket", "Key", "self", "s3_key"], ["conn", "delete_bucket", "Bucket", "self", "s3_bucket"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"]], "use_temp_file": [["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "use_temp_file": [["int", 0.1249721444138], ["dict", 0.12273823457041441], ["tracim.models.data.Content", 0.1090609559100488], ["bool", 0.10643195494079379], ["IO[bytes]", 0.09015086117469918], ["TextIO", 0.08498054161744223], ["Set[str]", 0.08497241657771755]]}, "q_name": "TestSFTPToS3Operator.test_sftp_to_s3_operation", "ret_exprs": [], "ret_type": "", "variables": {"conn": "", "create_file_task": "", "objects_in_dest_bucket": "", "run_task": "", "s3_hook": "", "test_remote_file_content": ""}, "variables_p": {"conn": [["list", 0.2967397875014237], ["str", 0.09087146940646836]], "create_file_task": [["str", 0.4964866436392439], ["Tuple[str, str, str]", 0.10742591546355583], ["Counter[str]", 0.09774728161713374], ["Dict[str, Union[float, str]]", 0.08742302326832317]], "objects_in_dest_bucket": [["str", 0.10272021077525949], ["set", 0.09287213986608837], ["int", 0.09068557141287568]], "run_task": [["str", 0.2925668428062534], ["Dict[str, Any]", 0.19595940590907535], ["kitovu.utils.JsonType", 0.10632678285563286], ["dict", 0.1027656533473689]], "s3_hook": [["int", 0.3191733541240404]], "test_remote_file_content": [["str", 0.6222270289326216], ["Dict[str, Union[float, str]]", 0.0950934068696111], ["Counter[str]", 0.092073763209435]]}}], "name": "TestSFTPToS3Operator", "q_name": "TestSFTPToS3Operator", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "boto3", "pytest", "moto", "mock_s3", "airflow", "models", "DAG", "airflow", "providers", "amazon", "aws", "hooks", "s3", "S3Hook", "airflow", "providers", "amazon", "aws", "transfers", "sftp_to_s3", "SFTPToS3Operator", "airflow", "providers", "ssh", "hooks", "ssh", "SSHHook", "airflow", "providers", "ssh", "operators", "ssh", "SSHOperator", "airflow", "utils", "timezone", "datetime", "tests", "test_utils", "config", "conf_vars"], "mod_var_ln": {"BUCKET": [[32, 0], [32, 6]], "DEFAULT_DATE": [[42, 0], [42, 12]], "S3_CONN_ID": [[36, 0], [36, 10]], "S3_KEY": [[33, 0], [33, 6]], "S3_MOCK_FILES": [[39, 0], [39, 13]], "SFTP_CONN_ID": [[35, 0], [35, 12]], "SFTP_MOCK_FILE": [[38, 0], [38, 14]], "SFTP_PATH": [[34, 0], [34, 9]], "TEST_DAG_ID": [[41, 0], [41, 11]]}, "mod_var_occur": {"BUCKET": [["self", "s3_bucket", "BUCKET"], ["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"]], "DEFAULT_DATE": [["dag", "DAG", "TEST_DAG_ID", "schedule", "start_date", "DEFAULT_DATE"]], "S3_CONN_ID": [["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"]], "S3_KEY": [["self", "s3_key", "S3_KEY"], ["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"]], "S3_MOCK_FILES": [], "SFTP_CONN_ID": [["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"]], "SFTP_MOCK_FILE": [], "SFTP_PATH": [["self", "sftp_path", "SFTP_PATH"], ["run_task", "SFTPToS3Operator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "s3_conn_id", "S3_CONN_ID", "use_temp_file", "use_temp_file", "task_id", "dag", "self", "dag"]], "TEST_DAG_ID": [["dag", "DAG", "TEST_DAG_ID", "schedule", "start_date", "DEFAULT_DATE"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 26}, "session_id": "Ywt3gwmW_a-bbm8R0h_JpF_mxW0JYt-wWMXoGuz3Nxw", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"BUCKET": "", "DEFAULT_DATE": "", "S3_CONN_ID": "", "S3_KEY": "", "S3_MOCK_FILES": "", "SFTP_CONN_ID": "", "SFTP_MOCK_FILE": "", "SFTP_PATH": "", "TEST_DAG_ID": ""}, "variables_p": {"BUCKET": [["str", 0.6057419295889772], ["boto.s3.buckeBucket", 0.21548720070246286], ["List[str]", 0.09318214146245958]], "DEFAULT_DATE": [["str", 0.30036407004859894], ["datetime.date", 0.19688657639863033], ["datetime.date.time.date", 0.18654557004547628], ["Pattern[str]", 0.1058943364923881], ["datetime.datetime", 0.09996587371264191]], "S3_CONN_ID": [["str", 0.8996616492104952], ["Optional[str]", 0.10033835078950495]], "S3_KEY": [["str", 0.9999999999999999]], "S3_MOCK_FILES": [["str", 1.0]], "SFTP_CONN_ID": [["str", 0.5888867181481575], ["Pattern[str]", 0.1728604154347], ["int", 0.12528410323238645]], "SFTP_MOCK_FILE": [["str", 0.9099313272482847], ["Tuple[List[Any]]", 0.09006867275171547]], "SFTP_PATH": [["str", 0.5899751780023275]], "TEST_DAG_ID": [["str", 0.41850494217102907], ["datetime.date.time.date", 0.10271444155306478], ["datetime.datetime", 0.0951582943031182], ["Type[prm.journals.models.moods.Mood]", 0.0922220897531326], ["int", 0.0896331180268239], ["datetime.timedelta", 0.08038192274703541]]}}}