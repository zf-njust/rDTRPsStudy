{"error": null, "response": {"classes": [{"cls_lc": [[45, 0], [136, 37]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[46, 4], [64, 28]], "fn_var_ln": {"dag": [[61, 8], [61, 16]], "hook": [[56, 8], [56, 17]], "no_host_key_check": [[49, 8], [49, 30]], "s3_bucket": [[62, 8], [62, 22]], "s3_key": [[64, 8], [64, 19]], "sftp_client": [[59, 8], [59, 24]], "sftp_path": [[63, 8], [63, 22]], "ssh_client": [[58, 8], [58, 23]]}, "fn_var_occur": {"dag": [["dag", "DAG", "TEST_DAG_ID", "start_date", "DEFAULT_DATE", "schedule"], ["self", "dag", "dag"]], "hook": [["hook", "SSHHook", "ssh_conn_id"], ["hook", "no_host_key_check", "True"], ["self", "hook", "hook"], ["self", "ssh_client", "self", "hook", "get_conn"]], "no_host_key_check": [["hook", "no_host_key_check", "True"]], "s3_bucket": [["self", "s3_bucket", "BUCKET"]], "s3_key": [["self", "s3_key", "S3_KEY"]], "sftp_client": [["self", "sftp_client", "self", "ssh_client", "open_sftp"]], "sftp_path": [["self", "sftp_path", "SFTP_PATH"]], "ssh_client": [["self", "ssh_client", "self", "hook", "get_conn"], ["self", "sftp_client", "self", "ssh_client", "open_sftp"]]}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "hook", "hook"], ["self", "ssh_client", "self", "hook", "get_conn"], ["self", "sftp_client", "self", "ssh_client", "open_sftp"], ["self", "dag", "dag"], ["self", "s3_bucket", "BUCKET"], ["self", "sftp_path", "SFTP_PATH"], ["self", "s3_key", "S3_KEY"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestS3ToSFTPOperator.setup_method", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "hook": "", "no_host_key_check": "", "s3_bucket": "", "s3_key": "", "sftp_client": "", "sftp_path": "", "ssh_client": ""}, "variables_p": {"dag": [["str", 0.4917788533828551], ["int", 0.20067317348512076], ["datetime.datetime", 0.0968914853384428]], "hook": [["str", 0.6039866472547754], ["int", 0.39601335274522487]], "no_host_key_check": [["str", 0.38769190026126965], ["List[str]", 0.18156003203378573], ["Set[str]", 0.1475680062932504], ["bool", 0.1300037517534881], ["Type[Dict[str, Any]]", 0.08076062618508523], ["list", 0.07241568347312088]], "s3_bucket": [["str", 0.8199488656435532], ["Optional[str]", 0.09181426674007255]], "s3_key": [["str", 0.706534015047574], ["VT", 0.09289358421585563], ["KT", 0.09289358421585563]], "sftp_client": [["int", 0.3828542236333622], ["str", 0.13824428291419108], ["\"Client\"", 0.10518387908439339], ["set", 0.08824251616696105]], "sftp_path": [["List[str]", 0.9999999998339758], ["str", 8.076434955458418e-11]], "ssh_client": [["str", 0.3772401631742052], ["int", 0.2722806909835247], ["Optional[str]", 0.11510111632407301]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[68, 4], [121, 59]], "fn_var_ln": {"check_file_task": [[107, 8], [107, 23]], "conn": [[77, 8], [77, 12]], "objects_in_dest_bucket": [[86, 8], [86, 30]], "result": [[115, 8], [115, 14]], "run_task": [[94, 8], [94, 16]], "s3_hook": [[69, 8], [69, 15]], "test_remote_file_content": [[71, 8], [71, 32]]}, "fn_var_occur": {"check_file_task": [["check_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"], ["check_file_task", "None"], ["result", "check_file_task", "execute", "None"]], "conn": [["conn", "boto3", "client"], ["conn", "create_bucket", "Bucket", "self", "s3_bucket"], ["objects_in_dest_bucket", "conn", "list_objects", "Bucket", "self", "s3_bucket", "Prefix", "self", "s3_key"], ["conn", "delete_object", "Bucket", "self", "s3_bucket", "Key", "self", "s3_key"], ["conn", "delete_bucket", "Bucket", "self", "s3_bucket"]], "objects_in_dest_bucket": [["objects_in_dest_bucket", "conn", "list_objects", "Bucket", "self", "s3_bucket", "Prefix", "self", "s3_key"], ["len", "objects_in_dest_bucket"], ["objects_in_dest_bucket", "self", "s3_key"]], "result": [["result", "check_file_task", "execute", "None"], ["result", "strip", "test_remote_file_content", "encode"]], "run_task": [["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"], ["run_task", "None"], ["run_task", "execute", "None"]], "s3_hook": [["s3_hook", "S3Hook", "aws_conn_id", "None"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"], ["s3_hook", "load_file", "LOCAL_FILE_PATH", "self", "s3_key", "bucket_name", "BUCKET"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"]], "test_remote_file_content": [["file", "write", "test_remote_file_content"], ["result", "strip", "test_remote_file_content", "encode"]]}, "name": "test_s3_to_sftp_operation", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["conn", "create_bucket", "Bucket", "self", "s3_bucket"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"], ["s3_hook", "load_file", "LOCAL_FILE_PATH", "self", "s3_key", "bucket_name", "BUCKET"], ["objects_in_dest_bucket", "conn", "list_objects", "Bucket", "self", "s3_bucket", "Prefix", "self", "s3_key"], ["objects_in_dest_bucket", "self", "s3_key"], ["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"], ["check_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"], ["conn", "delete_object", "Bucket", "self", "s3_bucket", "Key", "self", "s3_key"], ["conn", "delete_bucket", "Bucket", "self", "s3_bucket"], ["s3_hook", "check_for_bucket", "self", "s3_bucket"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestS3ToSFTPOperator.test_s3_to_sftp_operation", "ret_exprs": [], "ret_type": "", "variables": {"check_file_task": "", "conn": "", "objects_in_dest_bucket": "", "result": "", "run_task": "", "s3_hook": "", "test_remote_file_content": ""}, "variables_p": {"check_file_task": [["str", 0.6982123260973208], ["Tuple[str]", 0.10514426129491075], ["Optional[List[Any]]", 0.102204759241574], ["Tuple[Literal]", 0.09443865336619443]], "conn": [["list", 0.2967397875014237], ["str", 0.09087146940646836]], "objects_in_dest_bucket": [["str", 0.10272021077525949], ["set", 0.09287213986608837], ["int", 0.09068557141287568]], "result": [["Dict[str, Any]", 0.2062615186520877], ["List[List[Any]]", 0.09626448639289555], ["List[Tuple[str, bytes]]", 0.09319451521947582]], "run_task": [["Dict[str, Any]", 0.1848322597732442], ["str", 0.16787089035658997], ["kitovu.utils.JsonType", 0.12479489861924878], ["dict", 0.12420080866896621], ["int", 0.1199880526252083]], "s3_hook": [["str", 0.3277379097474231], ["zerver.models.Message", 0.10838801998351821], ["float", 0.09287393590417431]], "test_remote_file_content": [["str", 0.3794591761939383], ["Dict[str, Dict[str, Any]]", 0.3269821784184205], ["Dict[str, str]", 0.111887379696775], ["Dict[str, Union[float, str]]", 0.09202814321524648], ["Set[str]", 0.0896431224756197]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[123, 4], [133, 38]], "fn_var_ln": {"remove_file_task": [[125, 8], [125, 24]]}, "fn_var_occur": {"remove_file_task": [["remove_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"], ["remove_file_task", "None"], ["remove_file_task", "execute", "None"]]}, "name": "delete_remote_resource", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["remove_file_task", "SSHOperator", "task_id", "ssh_hook", "self", "hook", "command", "self", "sftp_path", "do_xcom_push", "True", "dag", "self", "dag"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestS3ToSFTPOperator.delete_remote_resource", "ret_exprs": [], "ret_type": "", "variables": {"remove_file_task": ""}, "variables_p": {"remove_file_task": [["str", 0.6982123260973208], ["Tuple[str]", 0.10514426129491075], ["Optional[List[Any]]", 0.102204759241574], ["Tuple[Literal]", 0.09443865336619443]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[135, 4], [136, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "delete_remote_resource"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestS3ToSFTPOperator.teardown_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "name": "TestS3ToSFTPOperator", "q_name": "TestS3ToSFTPOperator", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "boto3", "moto", "mock_s3", "airflow", "models", "DAG", "airflow", "providers", "amazon", "aws", "hooks", "s3", "S3Hook", "airflow", "providers", "amazon", "aws", "transfers", "s3_to_sftp", "S3ToSFTPOperator", "airflow", "providers", "ssh", "hooks", "ssh", "SSHHook", "airflow", "providers", "ssh", "operators", "ssh", "SSHOperator", "airflow", "utils", "timezone", "datetime", "tests", "test_utils", "config", "conf_vars"], "mod_var_ln": {"BUCKET": [[32, 0], [32, 6]], "DEFAULT_DATE": [[42, 0], [42, 12]], "LOCAL_FILE_PATH": [[36, 0], [36, 15]], "S3_KEY": [[33, 0], [33, 6]], "S3_MOCK_FILES": [[39, 0], [39, 13]], "SFTP_CONN_ID": [[35, 0], [35, 12]], "SFTP_MOCK_FILE": [[38, 0], [38, 14]], "SFTP_PATH": [[34, 0], [34, 9]], "TASK_ID": [[31, 0], [31, 7]], "TEST_DAG_ID": [[41, 0], [41, 11]]}, "mod_var_occur": {"BUCKET": [["self", "s3_bucket", "BUCKET"], ["s3_hook", "load_file", "LOCAL_FILE_PATH", "self", "s3_key", "bucket_name", "BUCKET"], ["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"]], "DEFAULT_DATE": [["dag", "DAG", "TEST_DAG_ID", "start_date", "DEFAULT_DATE", "schedule"]], "LOCAL_FILE_PATH": [["open", "LOCAL_FILE_PATH", "file"], ["s3_hook", "load_file", "LOCAL_FILE_PATH", "self", "s3_key", "bucket_name", "BUCKET"]], "S3_KEY": [["self", "s3_key", "S3_KEY"], ["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"]], "S3_MOCK_FILES": [], "SFTP_CONN_ID": [["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"]], "SFTP_MOCK_FILE": [], "SFTP_PATH": [["self", "sftp_path", "SFTP_PATH"], ["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"]], "TASK_ID": [["run_task", "S3ToSFTPOperator", "s3_bucket", "BUCKET", "s3_key", "S3_KEY", "sftp_path", "SFTP_PATH", "sftp_conn_id", "SFTP_CONN_ID", "task_id", "TASK_ID", "dag", "self", "dag"]], "TEST_DAG_ID": [["dag", "DAG", "TEST_DAG_ID", "start_date", "DEFAULT_DATE", "schedule"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 30}, "session_id": "QcVmPKbuwaA0PJ6L2KL97GV2vfGCAYbR-urpK3bz2x0", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"BUCKET": "", "DEFAULT_DATE": "", "LOCAL_FILE_PATH": "", "S3_KEY": "", "S3_MOCK_FILES": "", "SFTP_CONN_ID": "", "SFTP_MOCK_FILE": "", "SFTP_PATH": "", "TASK_ID": "", "TEST_DAG_ID": ""}, "variables_p": {"BUCKET": [["bytes", 0.2134552887114847], ["str", 0.2103779903490002], ["List[str]", 0.0977528250420601], ["Optional[str]", 0.09767751614293341], ["Dict[str, Any]", 0.09321564593085398]], "DEFAULT_DATE": [["str", 0.5179024020267493], ["datetime.datetime", 0.2924656337509726], ["Pattern[str]", 0.09743161320501621], ["datetime.datetime.timezone", 0.09220035101726183]], "LOCAL_FILE_PATH": [["str", 0.6818705534155687]], "S3_KEY": [["str", 0.9999999999999999]], "S3_MOCK_FILES": [["str", 1.0]], "SFTP_CONN_ID": [["str", 0.4800389140524563], ["int", 0.20034573013920035], ["Dict[str, int]", 0.08784596808950226], ["taxonomy.db.models.base.EnumField", 0.08289634548776213]], "SFTP_MOCK_FILE": [["str", 0.9099313272482847], ["Tuple[List[Any]]", 0.09006867275171547]], "SFTP_PATH": [["str", 0.5899751780023275]], "TASK_ID": [["str", 0.780885565080042], ["int", 0.12662890576108685]], "TEST_DAG_ID": [["str", 0.5749979497887654], ["Type[prm.journals.models.moods.Mood]", 0.10269565418368115], ["datetime.timedelta", 0.0803712745618105]]}}}