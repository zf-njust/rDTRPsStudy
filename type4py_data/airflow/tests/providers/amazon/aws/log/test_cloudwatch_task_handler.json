{"error": null, "response": {"classes": [{"cls_lc": [[51, 0], [164, 59]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[54, 4], [92, 42]], "fn_var_ln": {"cloudwatch_task_handler": [[59, 8], [59, 36]], "conn": [[86, 8], [86, 17]], "dag": [[68, 8], [68, 16]], "dag_id": [[66, 8], [66, 14]], "dag_run": [[70, 8], [70, 15]], "date": [[65, 8], [65, 12]], "local_log_location": [[57, 8], [57, 31]], "region_name": [[56, 8], [56, 24]], "remote_log_group": [[55, 8], [55, 29]], "remote_log_stream": [[81, 8], [81, 30]], "task": [[69, 8], [69, 12]], "task_id": [[67, 8], [67, 15]], "ti": [[76, 8], [76, 15]]}, "fn_var_occur": {"cloudwatch_task_handler": [["self", "cloudwatch_task_handler", "CloudwatchTaskHandler", "self", "local_log_location", "self", "region_name", "self", "remote_log_group"], ["self", "cloudwatch_task_handler", "hook"], ["self", "cloudwatch_task_handler", "handler", "None"]], "conn": [["self", "conn", "boto3", "client", "region_name", "self", "region_name"]], "dag": [["self", "dag", "DAG", "dag_id", "dag_id", "start_date", "date"], ["task", "EmptyOperator", "task_id", "task_id", "dag", "self", "dag"], ["dag_run", "DagRun", "dag_id", "self", "dag", "dag_id", "execution_date", "date", "run_id", "run_type"]], "dag_id": [["self", "dag", "DAG", "dag_id", "dag_id", "start_date", "date"], ["dag_run", "DagRun", "dag_id", "self", "dag", "dag_id", "execution_date", "date", "run_id", "run_type"], ["self", "remote_log_stream", "dag_id", "task_id", "date", "isoformat", "self", "ti", "try_number", "replace"]], "dag_run": [["dag_run", "DagRun", "dag_id", "self", "dag", "dag_id", "execution_date", "date", "run_id", "run_type"], ["session", "add", "dag_run"], ["session", "refresh", "dag_run"], ["self", "ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"], ["self", "ti", "dag_run", "dag_run"]], "date": [["date", "datetime"], ["self", "dag", "DAG", "dag_id", "dag_id", "start_date", "date"], ["dag_run", "DagRun", "dag_id", "self", "dag", "dag_id", "execution_date", "date", "run_id", "run_type"], ["self", "remote_log_stream", "dag_id", "task_id", "date", "isoformat", "self", "ti", "try_number", "replace"]], "local_log_location": [["self", "local_log_location", "str", "tmp_path_factory", "mktemp"], ["self", "cloudwatch_task_handler", "CloudwatchTaskHandler", "self", "local_log_location", "self", "region_name", "self", "remote_log_group"]], "region_name": [["self", "region_name"], ["self", "cloudwatch_task_handler", "CloudwatchTaskHandler", "self", "local_log_location", "self", "region_name", "self", "remote_log_group"], ["self", "conn", "boto3", "client", "region_name", "self", "region_name"]], "remote_log_group": [["self", "remote_log_group"], ["self", "cloudwatch_task_handler", "CloudwatchTaskHandler", "self", "local_log_location", "self", "region_name", "self", "remote_log_group"]], "remote_log_stream": [["self", "remote_log_stream", "dag_id", "task_id", "date", "isoformat", "self", "ti", "try_number", "replace"]], "task": [["task", "EmptyOperator", "task_id", "task_id", "dag", "self", "dag"], ["self", "ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"]], "task_id": [["task", "EmptyOperator", "task_id", "task_id", "dag", "self", "dag"], ["self", "remote_log_stream", "dag_id", "task_id", "date", "isoformat", "self", "ti", "try_number", "replace"]], "ti": [["self", "ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"], ["self", "ti", "dag_run", "dag_run"], ["self", "ti", "try_number"], ["self", "ti", "state", "State", "RUNNING"], ["self", "remote_log_stream", "dag_id", "task_id", "date", "isoformat", "self", "ti", "try_number", "replace"]]}, "name": "setup_tests", "params": {"create_log_template": "", "self": "", "tmp_path_factory": ""}, "params_descr": {"create_log_template": "", "self": "", "tmp_path_factory": ""}, "params_occur": {"create_log_template": [], "self": [["self", "remote_log_group"], ["self", "region_name"], ["self", "local_log_location", "str", "tmp_path_factory", "mktemp"], ["self", "cloudwatch_task_handler", "CloudwatchTaskHandler", "self", "local_log_location", "self", "region_name", "self", "remote_log_group"], ["self", "cloudwatch_task_handler", "hook"], ["self", "dag", "DAG", "dag_id", "dag_id", "start_date", "date"], ["task", "EmptyOperator", "task_id", "task_id", "dag", "self", "dag"], ["dag_run", "DagRun", "dag_id", "self", "dag", "dag_id", "execution_date", "date", "run_id", "run_type"], ["self", "ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"], ["self", "ti", "dag_run", "dag_run"], ["self", "ti", "try_number"], ["self", "ti", "state", "State", "RUNNING"], ["self", "remote_log_stream", "dag_id", "task_id", "date", "isoformat", "self", "ti", "try_number", "replace"], ["self", "conn", "boto3", "client", "region_name", "self", "region_name"], ["self", "cloudwatch_task_handler", "handler", "None"]], "tmp_path_factory": [["self", "local_log_location", "str", "tmp_path_factory", "mktemp"]]}, "params_p": {"args": [], "create_log_template": [["str", 0.5549999124785047], ["bool", 0.09678252265004166], ["List[str]", 0.08001984721336065], ["Optional[Tuple[str, ...]]", 0.07766051478097982], ["bytes", 0.07549451331881774]], "kwargs": [], "self": [], "tmp_path_factory": [["str", 0.798258780736598], ["List[str]", 0.201741219263402]]}, "q_name": "TestCloudwatchTaskHandler.setup_tests", "ret_exprs": [], "ret_type": "", "variables": {"cloudwatch_task_handler": "", "conn": "", "dag": "", "dag_id": "", "dag_run": "", "date": "", "local_log_location": "", "region_name": "", "remote_log_group": "", "remote_log_stream": "", "task": "", "task_id": "", "ti": ""}, "variables_p": {"cloudwatch_task_handler": [["List[Dict[str, float]]", 0.15787695822543593], ["int", 0.11672203697073734], ["Tuple[str]", 0.08186074073640967]], "conn": [["str", 0.907442339916268], ["Dict[str, List[str]]", 0.09255766008373195]], "dag": [["int", 0.36980873029761585], ["str", 0.30258726712614464], ["datetime.datetime.timedelta", 0.11697419451146063], ["datetime.datetime.datetime", 0.11697419451146063]], "dag_id": [["str", 0.525463642326379], ["int", 0.20627496142755047], ["Optional[str]", 0.08827824625552659]], "dag_run": [["magic.models.card.Card", 0.10966201852283676], ["Dict[str, dict]", 0.09876380795059767]], "date": [["str", 0.3537107273181892], ["datetime.datetime.date", 0.18226585198186998], ["list", 0.1589839796910622], ["datetime.datetime.datetime", 0.09219510807779907]], "local_log_location": [["int", 0.22118714599527053], ["List[str]", 0.1975644288405559], ["list", 0.17650280641528876], ["Type[cmk.utils.crash_reporting.CrashReportStore]", 0.17382489474927101], ["Dict[Any, str]", 0.14654952133884372], ["str", 0.08437120266077024]], "region_name": [["List[str]", 0.3121770008056492], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.19475175404997816], ["str", 0.19106493949827447], ["Tuple[str]", 0.10652050076448864], ["List[Tuple[Any, str]]", 0.09823731355781903], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.0972484913237905]], "remote_log_group": [["int", 0.3847896381043596], ["str", 0.23736231868122692], ["List[str]", 0.10281674007164475], ["Tuple[str]", 0.09258369191333742], ["Type[str]", 0.08912305956134128]], "remote_log_stream": [["str", 0.3095131202818172], ["int", 0.20381698953311453], ["Optional[int]", 0.10569613074870268], ["tracim.models.data.Content", 0.09571888119135262], ["Dict[str, str]", 0.09564154412954694], ["Type[tuple]", 0.09531246495506435], ["datetime.datetime", 0.09430086916040165]], "task": [["taskiapplication.models.task.Task", 0.10431696257611625]], "task_id": [["cmk.utils.type_defs.UserId", 0.08371133515481251]], "ti": [["int", 0.3730574849468627], ["List[str]", 0.3298147029485696], ["Dict[Any, str]", 0.07839207421902476]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[94, 4], [95, 73]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_hook", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["isinstance", "self", "cloudwatch_task_handler", "hook", "AwsLogsHook"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCloudwatchTaskHandler.test_hook", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[97, 4], [99, 85]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_handler", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cloudwatch_task_handler", "set_context", "self", "ti"], ["isinstance", "self", "cloudwatch_task_handler", "handler", "CloudWatchLogHandler"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCloudwatchTaskHandler.test_handler", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[101, 4], [109, 79]], "fn_var_ln": {"handler": [[102, 8], [102, 15]], "messages": [[104, 8], [104, 16]]}, "fn_var_occur": {"handler": [["handler", "self", "cloudwatch_task_handler"], ["handler", "set_context", "self", "ti"], ["handler", "handle", "message"]], "messages": [["messages", "str", "i", "i", "range"], ["mock_emit", "assert_has_calls", "call", "message", "message", "messages"]]}, "name": "test_write", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["handler", "self", "cloudwatch_task_handler"], ["handler", "set_context", "self", "ti"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCloudwatchTaskHandler.test_write", "ret_exprs": [], "ret_type": "", "variables": {"handler": "", "messages": ""}, "variables_p": {"handler": [["Dict[int, Any]", 0.49660614998290636], ["int", 0.10079759231890048], ["dict", 0.10072927603386825], ["Final", 0.10027179702652388]], "messages": [["str", 0.6], ["int", 0.4]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[111, 4], [125, 9]], "fn_var_ln": {"current_time": [[113, 8], [113, 20]], "events": [[114, 8], [114, 14]], "handler": [[112, 8], [112, 15]]}, "fn_var_occur": {"current_time": [["current_time", "int", "time", "time"], ["events", "current_time", "current_time", "current_time"], ["handler", "_event_to_str", "event", "event", "events", "get_time_str", "current_time", "get_time_str", "current_time", "get_time_str", "current_time"]], "events": [["events", "current_time", "current_time", "current_time"], ["handler", "_event_to_str", "event", "event", "events", "get_time_str", "current_time", "get_time_str", "current_time", "get_time_str", "current_time"]], "handler": [["handler", "self", "cloudwatch_task_handler"], ["handler", "_event_to_str", "event", "event", "events", "get_time_str", "current_time", "get_time_str", "current_time", "get_time_str", "current_time"]]}, "name": "test_event_to_str", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["handler", "self", "cloudwatch_task_handler"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCloudwatchTaskHandler.test_event_to_str", "ret_exprs": [], "ret_type": "", "variables": {"current_time": "", "events": "", "handler": ""}, "variables_p": {"current_time": [["int", 0.7899658182943265]], "events": [["str", 0.2028467171593159], ["bytes", 0.09713379592395618], ["mock.Mock", 0.09697222672151781], ["aw_core.models.Event", 0.09624463468499651]], "handler": [["int", 0.4549005315919108], ["List[int]", 0.1578657450903387], ["List[Tuple[str, int]]", 0.10584798083107518], ["List[str]", 0.0994766450428903], ["bool", 0.09690889891940528], ["str", 0.08500019852437954]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[127, 4], [155, 9]], "fn_var_ln": {"current_time": [[132, 8], [132, 20]], "events": [[145, 8], [145, 14]], "msg_template": [[144, 8], [144, 20]]}, "fn_var_occur": {"current_time": [["current_time", "int", "time", "time"], ["generate_log_events", "self", "conn", "self", "remote_log_group", "self", "remote_log_stream", "current_time", "current_time", "current_time"], ["events", "join", "get_time_str", "current_time", "get_time_str", "current_time", "get_time_str", "current_time"]], "events": [["events", "join", "get_time_str", "current_time", "get_time_str", "current_time", "get_time_str", "current_time"], ["self", "cloudwatch_task_handler", "read", "self", "ti", "msg_template", "format", "self", "remote_log_group", "self", "remote_log_stream", "events", "True"]], "msg_template": [["self", "cloudwatch_task_handler", "read", "self", "ti", "msg_template", "format", "self", "remote_log_group", "self", "remote_log_stream", "events", "True"]]}, "name": "test_read", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["generate_log_events", "self", "conn", "self", "remote_log_group", "self", "remote_log_stream", "current_time", "current_time", "current_time"], ["self", "cloudwatch_task_handler", "read", "self", "ti", "msg_template", "format", "self", "remote_log_group", "self", "remote_log_stream", "events", "True"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCloudwatchTaskHandler.test_read", "ret_exprs": [], "ret_type": "", "variables": {"current_time": "", "events": "", "msg_template": ""}, "variables_p": {"current_time": [["int", 1.0]], "events": [["str", 0.9071638465715283]], "msg_template": [["str", 1.0]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[157, 4], [164, 59]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_close_prevents_duplicate_calls", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cloudwatch_task_handler", "set_context", "self", "ti"], ["self", "cloudwatch_task_handler", "close"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCloudwatchTaskHandler.test_close_prevents_duplicate_calls", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "name": "TestCloudwatchTaskHandler", "q_name": "TestCloudwatchTaskHandler", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[40, 0], [42, 52]], "fn_var_ln": {"dt_time": [[41, 4], [41, 11]]}, "fn_var_occur": {"dt_time": [["dt_time", "dt", "utcfromtimestamp", "time_in_milliseconds"], ["dt_time", "strftime"]]}, "name": "get_time_str", "params": {"time_in_milliseconds": ""}, "params_descr": {"time_in_milliseconds": ""}, "params_occur": {"time_in_milliseconds": [["dt_time", "dt", "utcfromtimestamp", "time_in_milliseconds"]]}, "params_p": {"args": [], "kwargs": [], "time_in_milliseconds": [["str", 0.4865684836105434], ["int", 0.23228112583294602], ["Tuple[int, int]", 0.08556730219198122]]}, "q_name": "get_time_str", "ret_exprs": ["return dt_time.strftime(\"%Y-%m-%d %H:%M:%S,000\")"], "ret_type": "", "ret_type_p": [["app.models.user.UserInDB", 0.09665307854412769], ["float", 0.0854593068322164], ["str", 0.08106296054432847], ["Optional[datetime.datetime]", 0.07767503045315931]], "variables": {"dt_time": ""}, "variables_p": {"dt_time": [["dict", 0.5149867580310787], ["float", 0.1845397291224325], ["Type[tuple]", 0.12276093044595877], ["datetime.datetime", 0.09076559918059833], ["int", 0.08694698321993168]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[46, 0], [48, 13]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "logmock", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "logmock", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[167, 0], [170, 105]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "generate_log_events", "params": {"conn": "", "log_events": "", "log_group_name": "", "log_stream_name": ""}, "params_descr": {"conn": "", "log_events": "", "log_group_name": "", "log_stream_name": ""}, "params_occur": {"conn": [["conn", "create_log_group", "logGroupName", "log_group_name"], ["conn", "create_log_stream", "logGroupName", "log_group_name", "logStreamName", "log_stream_name"], ["conn", "put_log_events", "logGroupName", "log_group_name", "logStreamName", "log_stream_name", "logEvents", "log_events"]], "log_events": [["conn", "put_log_events", "logGroupName", "log_group_name", "logStreamName", "log_stream_name", "logEvents", "log_events"]], "log_group_name": [["conn", "create_log_group", "logGroupName", "log_group_name"], ["conn", "create_log_stream", "logGroupName", "log_group_name", "logStreamName", "log_stream_name"], ["conn", "put_log_events", "logGroupName", "log_group_name", "logStreamName", "log_stream_name", "logEvents", "log_events"]], "log_stream_name": [["conn", "create_log_stream", "logGroupName", "log_group_name", "logStreamName", "log_stream_name"], ["conn", "put_log_events", "logGroupName", "log_group_name", "logStreamName", "log_stream_name", "logEvents", "log_events"]]}, "params_p": {"args": [], "conn": [["str", 0.8122750745124215], ["list", 0.09621431534976849], ["Optional[str]", 0.0915106101378101]], "kwargs": [], "log_events": [["str", 0.191114105924294], ["int", 0.09638079656953348], ["bool", 0.09209551297720685], ["Callable", 0.09010972845518705]], "log_group_name": [["str", 0.8122750745124215], ["list", 0.09621431534976849], ["Optional[str]", 0.0915106101378101]], "log_stream_name": [["str", 0.6875397613819265], ["Type[object]", 0.1264727425038088], ["int", 0.09525764811285661]]}, "q_name": "generate_log_events", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "time", "datetime", "datetime", "dt", "unittest", "mock", "unittest", "mock", "call", "boto3", "moto", "pytest", "watchtower", "CloudWatchLogHandler", "airflow", "models", "DAG", "DagRun", "TaskInstance", "airflow", "operators", "empty", "EmptyOperator", "airflow", "providers", "amazon", "aws", "hooks", "logs", "AwsLogsHook", "airflow", "providers", "amazon", "aws", "log", "cloudwatch_task_handler", "CloudwatchTaskHandler", "airflow", "utils", "session", "create_session", "airflow", "utils", "state", "State", "airflow", "utils", "timezone", "datetime", "tests", "test_utils", "config", "conf_vars"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 39}, "session_id": "NEsSpHmZ7mqswCTHpkFyzdBDtE3Tii7QVbjZohD0u6U", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}