{"error": null, "response": {"classes": [{"cls_lc": [[35, 0], [120, 85]], "cls_var_ln": {"TRIGGER": [[36, 4], [36, 11]]}, "cls_var_occur": {"TRIGGER": []}, "funcs": [{"docstring": {"func": "Asserts that the SnowflakeSqlApiTrigger correctly serializes its arguments", "long_descr": "and classpath.", "ret": null}, "fn_lc": [[44, 4], [57, 9]], "fn_var_ln": {"classpath": [[49, 8], [49, 17]], "kwargs": [[49, 19], [49, 25]]}, "fn_var_occur": {"classpath": [["classpath", "kwargs", "self", "TRIGGER", "serialize"]], "kwargs": [["classpath", "kwargs", "self", "TRIGGER", "serialize"], ["kwargs", "POLL_INTERVAL", "LIFETIME", "RENEWAL_DELTA"]]}, "name": "test_snowflake_sql_trigger_serialization", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["classpath", "kwargs", "self", "TRIGGER", "serialize"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestSnowflakeSqlApiTrigger.test_snowflake_sql_trigger_serialization", "ret_exprs": [], "ret_type": "", "variables": {"classpath": "", "kwargs": ""}, "variables_p": {"classpath": [["int", 0.9072467587489553], ["float", 0.09275324125104448]], "kwargs": [["Dict[str, List[Any]]", 0.26602045621146975], ["defaultdict", 0.11780939504732232], ["bool", 0.09418095557851557], ["Tuple[Tuple[str, Any]]", 0.09375096379172314], ["Dict[str, Any]", 0.087526734027312], ["list", 0.08714161059906854], ["int", 0.08179352692818517], ["Dict[str, Union[Any, Any]]", 0.0804318010069726]]}}, {"docstring": {"func": "Tests that the SnowflakeSqlApiTrigger in running by mocking get_query_status to true", "long_descr": null, "ret": null}, "fn_lc": [[62, 4], [73, 39]], "fn_var_ln": {"return_value": [[66, 8], [66, 42]], "task": [[68, 8], [68, 12]]}, "fn_var_occur": {"return_value": [["mock_get_query_status", "return_value"]], "task": [["task", "asyncio", "create_task", "self", "TRIGGER", "run", "__anext__"], ["task", "done", "False"]]}, "name": "test_snowflake_sql_trigger_running", "params": {"mock_get_query_status": "", "mock_get_sql_api_query_status_async": "", "self": ""}, "params_descr": {"mock_get_query_status": "", "mock_get_sql_api_query_status_async": "", "self": ""}, "params_occur": {"mock_get_query_status": [["mock_get_query_status", "return_value"]], "mock_get_sql_api_query_status_async": [], "self": [["task", "asyncio", "create_task", "self", "TRIGGER", "run", "__anext__"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_query_status": [["Callable", 0.10167495334381219]], "mock_get_sql_api_query_status_async": [["Callable[..., None]", 0.20477643411136445], ["str", 0.20477643411136445], ["Callable", 0.19688055807157426], ["dict", 0.10264026143023211], ["Dict[str, Tuple[str, str]]", 0.0977771293868641]], "self": []}, "q_name": "TestSnowflakeSqlApiTrigger.test_snowflake_sql_trigger_running", "ret_exprs": [], "ret_type": "", "variables": {"return_value": "", "task": ""}, "variables_p": {"return_value": [["str", 0.24995168944870455], ["Dict[str, object]", 0.10969613464522122], ["List[Dict[str, Any]]", 0.10485381806724474], ["datetime.timedelta", 0.08186004280615486], ["Dict[str, Union[int, str]]", 0.078910414027876], ["Dict[str, Union[Any, Any]]", 0.0771136620927972]], "task": [["asyncio.tasks.Task[Any]", 0.23982604312238753], ["asyncio.tasks.Task[None]", 0.172053880956072]]}}, {"docstring": {"func": "Test SnowflakeSqlApiTrigger run method with success status and mock the get_sql_api_query_status", "long_descr": "result and  get_query_status to False.", "ret": null}, "fn_lc": [[78, 4], [95, 104]], "fn_var_ln": {"actual": [[94, 8], [94, 14]], "generator": [[93, 8], [93, 17]], "return_value": [[87, 8], [87, 56]], "statement_query_ids": [[86, 8], [86, 27]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "statement_query_ids", "actual"]], "generator": [["generator", "self", "TRIGGER", "run"], ["actual", "generator", "asend", "None"]], "return_value": [["mock_get_query_status", "return_value"], ["mock_get_sql_api_query_status_async", "return_value", "statement_query_ids"]], "statement_query_ids": [["mock_get_sql_api_query_status_async", "return_value", "statement_query_ids"], ["TriggerEvent", "statement_query_ids", "actual"]]}, "name": "test_snowflake_sql_trigger_completed", "params": {"mock_get_query_status": "", "mock_get_sql_api_query_status_async": "", "self": ""}, "params_descr": {"mock_get_query_status": "", "mock_get_sql_api_query_status_async": "", "self": ""}, "params_occur": {"mock_get_query_status": [["mock_get_query_status", "return_value"]], "mock_get_sql_api_query_status_async": [["mock_get_sql_api_query_status_async", "return_value", "statement_query_ids"]], "self": [["generator", "self", "TRIGGER", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_query_status": [["Callable", 0.10502349262222677]], "mock_get_sql_api_query_status_async": [["Callable", 0.475003004876445], ["Callable[[int], Tuple]", 0.11330528729595861]], "self": []}, "q_name": "TestSnowflakeSqlApiTrigger.test_snowflake_sql_trigger_completed", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "return_value": "", "statement_query_ids": ""}, "variables_p": {"actual": [["int", 0.17075678132739988], ["List[str]", 0.1009778350234875], ["str", 0.08880249735808587], ["Union[Literal, int]", 0.07593862763779577]], "generator": [["float", 0.11160429968213009], ["dict", 0.09860471174282338], ["DefaultDict[str, Set[str]]", 0.09638409246411558]], "return_value": [["str", 0.7794082390123798], ["List[Dict[str, str]]", 0.11451063652690999], ["Dict[str, Union[int, str]]", 0.10608112446071036]], "statement_query_ids": [["int", 0.36589609075357504], ["Type[Tuple[str, Any]]", 0.31793078194333246], ["str", 0.08582713434938384], ["set", 0.07089846150439749]]}}, {"docstring": {"func": "Test SnowflakeSqlApiTrigger task is executed and triggered with failure status.", "long_descr": null, "ret": null}, "fn_lc": [[99, 4], [110, 52]], "fn_var_ln": {"actual": [[109, 8], [109, 14]], "generator": [[108, 8], [108, 17]], "mock_response": [[101, 8], [101, 21]], "return_value": [[106, 8], [106, 56]]}, "fn_var_occur": {"actual": [["actual", "generator", "asend", "None"], ["TriggerEvent", "mock_response", "actual"]], "generator": [["generator", "self", "TRIGGER", "run"], ["actual", "generator", "asend", "None"]], "mock_response": [["mock_get_sql_api_query_status_async", "return_value", "mock_response"], ["TriggerEvent", "mock_response", "actual"]], "return_value": [["mock_get_sql_api_query_status_async", "return_value", "mock_response"]]}, "name": "test_snowflake_sql_trigger_failure_status", "params": {"mock_get_sql_api_query_status_async": "", "self": ""}, "params_descr": {"mock_get_sql_api_query_status_async": "", "self": ""}, "params_occur": {"mock_get_sql_api_query_status_async": [["mock_get_sql_api_query_status_async", "return_value", "mock_response"]], "self": [["generator", "self", "TRIGGER", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_sql_api_query_status_async": [], "self": []}, "q_name": "TestSnowflakeSqlApiTrigger.test_snowflake_sql_trigger_failure_status", "ret_exprs": [], "ret_type": "", "variables": {"actual": "", "generator": "", "mock_response": "", "return_value": ""}, "variables_p": {"actual": [["str", 0.19643094669602373], ["Union[None, MutableMapping[str, Any], MutableSequence[Any], bool, float, int, str]", 0.11124317976092091], ["list", 0.10213395914610036], ["float", 0.09990306618291347], ["List[int]", 0.09113044300651103], ["int", 0.085467509905225]], "generator": [["float", 0.11160429968213009], ["dict", 0.09860471174282338], ["DefaultDict[str, Set[str]]", 0.09638409246411558]], "mock_response": [["Dict[str, List[Any]]", 0.31546617966422913], ["Dict[str, Union[Any, Any, Any]]", 0.19086844093244573], ["Dict[str, int]", 0.114802947275192], ["List[Tuple[str, Any]]", 0.102577645516134], ["Dict[str, str]", 0.09693369279946476], ["Pattern[str]", 0.09424371382930265], ["datetime.datetime", 0.08510737998323163]], "return_value": [["int", 0.3645204823145001], ["str", 0.25785431764978384], ["Dict[str, Dict[str, Any]]", 0.16088705313459642]]}}, {"docstring": {"func": "Tests the SnowflakeSqlApiTrigger does not fire if there is an exception.", "long_descr": null, "ret": null}, "fn_lc": [[114, 4], [120, 85]], "fn_var_ln": {"side_effect": [[116, 8], [116, 55]], "task": [[118, 8], [118, 12]]}, "fn_var_occur": {"side_effect": [["mock_get_sql_api_query_status_async", "side_effect", "Exception"]], "task": [["task", "i", "i", "self", "TRIGGER", "run"], ["len", "task"], ["TriggerEvent", "task"]]}, "name": "test_snowflake_sql_trigger_exception", "params": {"mock_get_sql_api_query_status_async": "", "self": ""}, "params_descr": {"mock_get_sql_api_query_status_async": "", "self": ""}, "params_occur": {"mock_get_sql_api_query_status_async": [["mock_get_sql_api_query_status_async", "side_effect", "Exception"]], "self": [["task", "i", "i", "self", "TRIGGER", "run"]]}, "params_p": {"args": [], "kwargs": [], "mock_get_sql_api_query_status_async": [["int", 0.12674692082825093], ["str", 0.08688344337408094]], "self": []}, "q_name": "TestSnowflakeSqlApiTrigger.test_snowflake_sql_trigger_exception", "ret_exprs": [], "ret_type": "", "variables": {"side_effect": "", "task": ""}, "variables_p": {"side_effect": [["str", 0.27480826618518156], ["Set[str]", 0.14236070085651095], ["list", 0.10227355948540541], ["Dict[Tuple[Any, str], str]", 0.0960528233230448], ["asyncio.futures.Future[Any]", 0.09115697034953098], ["frozenset[str]", 0.08666059057272314]], "task": [["dict", 0.08634703812155624], ["Dict[str, float]", 0.0862222665001587], ["str", 0.08288875652529604]]}}], "name": "TestSnowflakeSqlApiTrigger", "q_name": "TestSnowflakeSqlApiTrigger", "variables": {"TRIGGER": ""}, "variables_p": {"TRIGGER": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]]}}], "funcs": [], "imports": ["__future__", "annotations", "asyncio", "datetime", "timedelta", "unittest", "mock", "pytest", "airflow", "providers", "snowflake", "triggers", "snowflake_trigger", "SnowflakeSqlApiTrigger", "airflow", "triggers", "base", "TriggerEvent"], "mod_var_ln": {"LIFETIME": [[30, 0], [30, 8]], "MODULE": [[32, 0], [32, 6]], "POLL_INTERVAL": [[29, 0], [29, 13]], "RENEWAL_DELTA": [[31, 0], [31, 13]], "TASK_ID": [[28, 0], [28, 7]]}, "mod_var_occur": {"LIFETIME": [["TRIGGER", "SnowflakeSqlApiTrigger", "poll_interval", "POLL_INTERVAL", "query_ids", "snowflake_conn_id", "token_life_time", "LIFETIME", "token_renewal_delta", "RENEWAL_DELTA"], ["kwargs", "POLL_INTERVAL", "LIFETIME", "RENEWAL_DELTA"]], "MODULE": [], "POLL_INTERVAL": [["TRIGGER", "SnowflakeSqlApiTrigger", "poll_interval", "POLL_INTERVAL", "query_ids", "snowflake_conn_id", "token_life_time", "LIFETIME", "token_renewal_delta", "RENEWAL_DELTA"], ["kwargs", "POLL_INTERVAL", "LIFETIME", "RENEWAL_DELTA"]], "RENEWAL_DELTA": [["TRIGGER", "SnowflakeSqlApiTrigger", "poll_interval", "POLL_INTERVAL", "query_ids", "snowflake_conn_id", "token_life_time", "LIFETIME", "token_renewal_delta", "RENEWAL_DELTA"], ["kwargs", "POLL_INTERVAL", "LIFETIME", "RENEWAL_DELTA"]], "TASK_ID": []}, "no_types_annot": {"D": 0, "I": 0, "U": 31}, "session_id": "eXaaHbenx5domcJbcqxQVG0pPuHxPEjqUiHLIy55fbU", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"LIFETIME": "", "MODULE": "", "POLL_INTERVAL": "", "RENEWAL_DELTA": "", "TASK_ID": ""}, "variables_p": {"LIFETIME": [["Tuple[str, str, str, str]", 0.08606503370502858]], "MODULE": [["str", 0.6000000000000001], ["property", 0.20000000000000004], ["list", 0.10000000000000002]], "POLL_INTERVAL": [["Tuple[str, str, str, str]", 0.08606503370502858]], "RENEWAL_DELTA": [["Tuple[str, str, str, str]", 0.08606503370502858]], "TASK_ID": [["str", 0.4], ["Type[str]", 0.1], ["Optional[str]", 0.1]]}}}