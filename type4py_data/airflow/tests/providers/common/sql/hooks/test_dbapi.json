{"error": null, "response": {"classes": [{"cls_lc": [[30, 0], [31, 35]], "cls_var_ln": {"conn_name_attr": [[31, 4], [31, 18]]}, "cls_var_occur": {"conn_name_attr": []}, "funcs": [], "name": "DbApiHookInProvider", "q_name": "DbApiHookInProvider", "variables": {"conn_name_attr": ""}, "variables_p": {"conn_name_attr": [["str", 0.9999999984412052], ["Tuple[str, str, bool, str, str, str, str]", 8.316126869679678e-10], ["List[str]", 1.331690806861904e-10], ["Tuple[Any, Any]", 1.331690806861904e-10], ["bool", 1.3275060008743415e-10]]}}, {"cls_lc": [[34, 0], [35, 8]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [], "name": "NonDbApiHook", "q_name": "NonDbApiHook", "variables": {}, "variables_p": {}}, {"cls_lc": [[47, 8], [52, 27]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[51, 12], [52, 27]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "get_conn", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "mock", "MagicMock", "rowcount", "spec"], ["self", "conn", "mock", "MagicMock"], ["self", "conn", "cursor", "return_value", "self", "cur"], ["conn", "self", "conn"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.setup_method.<locals>.UnitTestDbApiHook.get_conn", "ret_exprs": ["return conn"], "ret_type": "", "ret_type_p": [["str", 0.19999999999999998], ["bool", 0.09999999999999999], ["pyspark.sql.SparkSession", 0.09999999999999999]], "variables": {}, "variables_p": {}}], "name": "UnitTestDbApiHook", "q_name": "TestDbApiHook.setup_method.<locals>.UnitTestDbApiHook", "variables": {}, "variables_p": {}}, {"cls_lc": [[38, 0], [447, 77]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[39, 4], [56, 82]], "fn_var_ln": {"conn": [[45, 8], [45, 12]], "conn_name_attr": [[48, 12], [48, 26]], "cur": [[40, 8], [40, 16]], "db_hook": [[54, 8], [54, 20]], "db_hook_no_log_sql": [[55, 8], [55, 31]], "db_hook_schema_override": [[56, 8], [56, 36]], "log": [[49, 12], [49, 15]]}, "fn_var_occur": {"conn": [], "conn_name_attr": [], "cur": [], "db_hook": [["self", "db_hook", "UnitTestDbApiHook"]], "db_hook_no_log_sql": [["self", "db_hook_no_log_sql", "UnitTestDbApiHook", "log_sql", "False"]], "db_hook_schema_override": [["self", "db_hook_schema_override", "UnitTestDbApiHook", "schema"]], "log": []}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "UnitTestDbApiHook"], ["self", "db_hook_no_log_sql", "UnitTestDbApiHook", "log_sql", "False"], ["self", "db_hook_schema_override", "UnitTestDbApiHook", "schema"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.setup_method", "ret_exprs": [], "ret_type": "", "variables": {"conn": "", "conn_name_attr": "", "cur": "", "db_hook": "", "db_hook_no_log_sql": "", "db_hook_schema_override": "", "log": ""}, "variables_p": {"conn": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "conn_name_attr": [["str", 0.9999999984412052], ["Tuple[str, str, bool, str, str, str, str]", 8.316126869679678e-10], ["List[str]", 1.331690806861904e-10], ["Tuple[Any, Any]", 1.331690806861904e-10], ["bool", 1.3275060008743415e-10]], "cur": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "db_hook": [["int", 0.5900677370531217], ["float", 0.10496929619766604], ["str", 0.1006842927486859], ["Dict[str, List[float]]", 0.09467108800188906]], "db_hook_no_log_sql": [["float", 0.33008954202848406], ["int", 0.20797667516725513]], "db_hook_schema_override": [["int", 0.18097699221567118], ["str", 0.12565142343367117], ["sqlite3.Connection", 0.12095646929169983], ["homeassistanauth.models.User", 0.08945154800465732]], "log": [["str", 0.30000000000000004], ["bool", 0.1], ["Dict[str, Union[Any, Any, Any]]", 0.1], ["Dict[str, Union[Any, Any, Any, Any]]", 0.1], ["Dict[str, Union[dict, Any, Any, Any, Any]]", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[58, 4], [68, 59]], "fn_var_ln": {"rows": [[60, 8], [60, 12]], "statement": [[59, 8], [59, 17]]}, "fn_var_occur": {"rows": [["self", "cur", "fetchall", "return_value", "rows"], ["rows", "self", "db_hook", "get_records", "statement"]], "statement": [["rows", "self", "db_hook", "get_records", "statement"], ["self", "cur", "execute", "assert_called_once_with", "statement"]]}, "name": "test_get_records", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "fetchall", "return_value", "rows"], ["rows", "self", "db_hook", "get_records", "statement"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["self", "cur", "execute", "assert_called_once_with", "statement"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_records", "ret_exprs": [], "ret_type": "", "variables": {"rows": "", "statement": ""}, "variables_p": {"rows": [["float", 0.36200427988876716], ["str", 0.24696932279704187], ["int", 0.19347397716489084], ["Type[List[Any]]", 0.09511149745745894]], "statement": [["list", 0.21905028315575453]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[70, 4], [81, 71]], "fn_var_ln": {"parameters": [[72, 8], [72, 18]], "rows": [[73, 8], [73, 12]], "statement": [[71, 8], [71, 17]]}, "fn_var_occur": {"parameters": [["rows", "self", "db_hook", "get_records", "statement", "parameters"], ["self", "cur", "execute", "assert_called_once_with", "statement", "parameters"]], "rows": [["self", "cur", "fetchall", "return_value", "rows"], ["rows", "self", "db_hook", "get_records", "statement", "parameters"]], "statement": [["rows", "self", "db_hook", "get_records", "statement", "parameters"], ["self", "cur", "execute", "assert_called_once_with", "statement", "parameters"]]}, "name": "test_get_records_parameters", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "fetchall", "return_value", "rows"], ["rows", "self", "db_hook", "get_records", "statement", "parameters"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["self", "cur", "execute", "assert_called_once_with", "statement", "parameters"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_records_parameters", "ret_exprs": [], "ret_type": "", "variables": {"parameters": "", "rows": "", "statement": ""}, "variables_p": {"parameters": [], "rows": [["str", 0.7322225716931136], ["int", 0.1643735574725626], ["Dict[str, int]", 0.10340387083432398]], "statement": [["list", 0.08635413640924057]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[83, 4], [92, 59]], "fn_var_ln": {"statement": [[84, 8], [84, 17]]}, "fn_var_occur": {"statement": [["self", "db_hook", "get_records", "statement"], ["self", "cur", "execute", "assert_called_once_with", "statement"]]}, "name": "test_get_records_exception", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "fetchall", "side_effect", "RuntimeError"], ["self", "db_hook", "get_records", "statement"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["self", "cur", "execute", "assert_called_once_with", "statement"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_records_exception", "ret_exprs": [], "ret_type": "", "variables": {"statement": ""}, "variables_p": {"statement": [["int", 0.9005482105334106]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[94, 4], [108, 54]], "fn_var_ln": {"commit_count": [[103, 8], [103, 20]], "rows": [[96, 8], [96, 12]], "sql": [[106, 8], [106, 11]], "table": [[95, 8], [95, 13]]}, "fn_var_occur": {"commit_count": [["commit_count", "self", "conn", "commit", "call_count"]], "rows": [["self", "db_hook", "insert_rows", "table", "rows"]], "sql": [["sql", "table"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]], "table": [["self", "db_hook", "insert_rows", "table", "rows"], ["sql", "table"]]}, "name": "test_insert_rows", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "insert_rows", "table", "rows"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["commit_count", "self", "conn", "commit", "call_count"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_insert_rows", "ret_exprs": [], "ret_type": "", "variables": {"commit_count": "", "rows": "", "sql": "", "table": ""}, "variables_p": {"commit_count": [["int", 0.6427783641329655], ["float", 0.3572216358670346]], "rows": [["List[Dict[str, str]]", 0.22445922079955075], ["List[Dict]", 0.21252223132754355], ["list", 0.16367835146199677], ["List[str]", 0.1390195464525874], ["List[Sequence[str]]", 0.09583854269560454], ["List[List]", 0.0819062588684432]], "sql": [["Pattern[str]", 0.09996486986945646], ["Dict[str, int]", 0.09982220270130242], ["str", 0.08830884175078463], ["int", 0.08654910222303965], ["list", 0.07589593493813492], ["Dict[str, Union[dict, Any]]", 0.0757723466511685], ["Dict[str, str]", 0.0757723466511685], ["List[Tuple[str, str, Any]]", 0.0757723466511685]], "table": [["List[Dict]", 0.23083149334610387], ["Mapping[Type[swagger_spec_compatibility.rules.common.RuleProtocol], Iterable[swagger_spec_compatibility.rules.common.ValidationMessage]]", 0.19410468089222518], ["List[Mapping]", 0.1020858725677167], ["List[list]", 0.09189844549575271], ["Tuple[Hashable]", 0.08951603592460071], ["list", 0.08895229949602988]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[110, 4], [124, 54]], "fn_var_ln": {"commit_count": [[119, 8], [119, 20]], "rows": [[112, 8], [112, 12]], "sql": [[122, 8], [122, 11]], "table": [[111, 8], [111, 13]]}, "fn_var_occur": {"commit_count": [["commit_count", "self", "conn", "commit", "call_count"]], "rows": [["self", "db_hook", "insert_rows", "table", "rows", "replace", "True"]], "sql": [["sql", "table"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]], "table": [["self", "db_hook", "insert_rows", "table", "rows", "replace", "True"], ["sql", "table"]]}, "name": "test_insert_rows_replace", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "insert_rows", "table", "rows", "replace", "True"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["commit_count", "self", "conn", "commit", "call_count"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_insert_rows_replace", "ret_exprs": [], "ret_type": "", "variables": {"commit_count": "", "rows": "", "sql": "", "table": ""}, "variables_p": {"commit_count": [["int", 0.6427783641329655], ["float", 0.3572216358670346]], "rows": [["int", 0.25067164937352976], ["defaultdict", 0.10662215134271265], ["str", 0.08089142948087405], ["List[Dict[str, Any]]", 0.08081536583303042], ["List[Tuple[str, str, str]]", 0.08081536583303042]], "sql": [["Pattern[str]", 0.09996486986945646], ["Dict[str, int]", 0.09982220270130242], ["str", 0.08830884175078463], ["int", 0.08654910222303965], ["list", 0.07589593493813492], ["Dict[str, Union[dict, Any]]", 0.0757723466511685], ["Dict[str, str]", 0.0757723466511685], ["List[Tuple[str, str, Any]]", 0.0757723466511685]], "table": [["str", 0.21927712680440786], ["list", 0.21270669990287494], ["Set[str]", 0.12198666742123207], ["int", 0.09056598835134594], ["dict", 0.0882933654265368]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[126, 4], [141, 54]], "fn_var_ln": {"commit_count": [[136, 8], [136, 20]], "rows": [[128, 8], [128, 12]], "sql": [[139, 8], [139, 11]], "table": [[127, 8], [127, 13]], "target_fields": [[129, 8], [129, 21]]}, "fn_var_occur": {"commit_count": [["commit_count", "self", "conn", "commit", "call_count"]], "rows": [["self", "db_hook", "insert_rows", "table", "rows", "target_fields"]], "sql": [["sql", "table", "target_fields"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]], "table": [["self", "db_hook", "insert_rows", "table", "rows", "target_fields"], ["sql", "table", "target_fields"]], "target_fields": [["self", "db_hook", "insert_rows", "table", "rows", "target_fields"], ["sql", "table", "target_fields"]]}, "name": "test_insert_rows_target_fields", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "insert_rows", "table", "rows", "target_fields"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["commit_count", "self", "conn", "commit", "call_count"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_insert_rows_target_fields", "ret_exprs": [], "ret_type": "", "variables": {"commit_count": "", "rows": "", "sql": "", "table": "", "target_fields": ""}, "variables_p": {"commit_count": [["int", 0.6427783641329655], ["float", 0.3572216358670346]], "rows": [["list", 0.2092570369197615], ["List[str]", 0.19523820792503802], ["List[List[str]]", 0.10255372065720983], ["List[Dict[str, Any]]", 0.10201116830023416], ["Dict[int, List[str]]", 0.10201116830023416], ["float", 0.10201116830023416], ["Tuple[str]", 0.09268448726782819]], "sql": [["str", 0.18469525262327896], ["bool", 0.13606485229109225], ["Dict[str, Union[Any, Any]]", 0.1205876801255768], ["Dict[str, str]", 0.09779047885031575], ["int", 0.08489522583491417]], "table": [["list", 0.27781358595200856], ["Tuple[int, int]", 0.14778620960997146], ["str", 0.12491888567729831], ["Type[tortoise.contrib.pydantic.base.PydanticModel]", 0.0930912541912968], ["Dict[str, str]", 0.08847453109432095]], "target_fields": [["str", 0.40726729737248446], ["list", 0.2156830965267031], ["List[str]", 0.09722802148807529], ["int", 0.09618972662042123], ["Type[str]", 0.09618972662042123], ["List[Tuple[str, str, Any]]", 0.08744213137189459]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[143, 4], [158, 54]], "fn_var_ln": {"commit_count": [[153, 8], [153, 20]], "commit_every": [[146, 8], [146, 20]], "rows": [[145, 8], [145, 12]], "sql": [[156, 8], [156, 11]], "table": [[144, 8], [144, 13]]}, "fn_var_occur": {"commit_count": [["commit_count", "divmod", "len", "rows", "commit_every"], ["commit_count", "self", "conn", "commit", "call_count"]], "commit_every": [["self", "db_hook", "insert_rows", "table", "rows", "commit_every", "commit_every"], ["commit_count", "divmod", "len", "rows", "commit_every"]], "rows": [["self", "db_hook", "insert_rows", "table", "rows", "commit_every", "commit_every"], ["commit_count", "divmod", "len", "rows", "commit_every"]], "sql": [["sql", "table"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]], "table": [["self", "db_hook", "insert_rows", "table", "rows", "commit_every", "commit_every"], ["sql", "table"]]}, "name": "test_insert_rows_commit_every", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "insert_rows", "table", "rows", "commit_every", "commit_every"], ["self", "conn", "close", "call_count"], ["self", "cur", "close", "call_count"], ["commit_count", "self", "conn", "commit", "call_count"], ["self", "cur", "execute", "assert_any_call", "sql", "row"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_insert_rows_commit_every", "ret_exprs": [], "ret_type": "", "variables": {"commit_count": "", "commit_every": "", "rows": "", "sql": "", "table": ""}, "variables_p": {"commit_count": [["int", 0.30404686803167136], ["dict", 0.09701564330089803], ["Counter[int]", 0.08186284802708618]], "commit_every": [["int", 0.18693948310767802], ["list", 0.18446140025922014], ["Iterator[int]", 0.11427018855434294], ["Iterator[Tuple[str, ...]]", 0.10520677545752108], ["List[Dict[str, Any]]", 0.10520677545752108], ["set", 0.10520677545752108], ["str", 0.08186085108197372]], "rows": [["List[List]", 0.29619379074072516], ["List[List[Any]]", 0.28329061391798877], ["List[list]", 0.11565246792779654], ["Iterator[int]", 0.1105493659646443], ["list", 0.10148835453898572], ["List[List[int]]", 0.09282540690985945]], "sql": [["Pattern[str]", 0.09996486986945646], ["Dict[str, int]", 0.09982220270130242], ["str", 0.08830884175078463], ["int", 0.08654910222303965], ["list", 0.07589593493813492], ["Dict[str, Union[dict, Any]]", 0.0757723466511685], ["Dict[str, str]", 0.0757723466511685], ["List[Tuple[str, str, Any]]", 0.0757723466511685]], "table": [["List[Dict]", 0.23083149334610387], ["Mapping[Type[swagger_spec_compatibility.rules.common.RuleProtocol], Iterable[swagger_spec_compatibility.rules.common.ValidationMessage]]", 0.19410468089222518], ["List[Mapping]", 0.1020858725677167], ["List[list]", 0.09189844549575271], ["Tuple[Hashable]", 0.08951603592460071], ["list", 0.08895229949602988]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[160, 4], [171, 83]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_schema_not_none", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "schema", "port"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_schema_not_none", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[173, 4], [184, 108]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_schema_override", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook_schema_override", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "schema", "port"], ["self", "db_hook_schema_override", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_schema_override", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[186, 4], [192, 76]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_schema_none", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "schema", "None", "port"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_schema_none", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[194, 4], [207, 9]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_special_characters", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "schema", "port"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_special_characters", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[209, 4], [220, 78]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_login_none", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "None", "password", "schema", "port"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_login_none", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[222, 4], [233, 74]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_password_none", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "None", "schema", "port"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_password_none", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[235, 4], [246, 68]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_authority_none", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "None", "password", "None", "schema", "port"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_authority_none", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[248, 4], [258, 89]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_extra", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_extra", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[260, 4], [271, 95]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_extra_with_schema", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "schema", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_extra_with_schema", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[273, 4], [284, 94]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_extra_with_port", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "port", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_extra_with_port", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[286, 4], [296, 90]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_extra_with_port_and_empty_host", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "login", "password", "port", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_extra_with_port_and_empty_host", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[298, 4], [310, 100]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_extra_with_port_and_schema", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "schema", "port", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_extra_with_port_and_schema", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[312, 4], [324, 91]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_without_password", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "password", "None", "schema", "port", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_without_password", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[326, 4], [338, 85]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_without_auth", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "host", "login", "None", "password", "None", "schema", "port", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_without_auth", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[340, 4], [351, 82]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_uri_without_auth_and_empty_host", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "get_connection", "mock", "MagicMock", "return_value", "Connection", "conn_type", "login", "None", "password", "None", "schema", "port", "extra", "json", "dumps"], ["self", "db_hook", "get_uri"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_get_uri_without_auth_and_empty_host", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[353, 4], [356, 52]], "fn_var_ln": {"statement": [[354, 8], [354, 17]]}, "fn_var_occur": {"statement": [["self", "db_hook", "run", "statement"]]}, "name": "test_run_log", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "run", "statement"], ["self", "db_hook", "log", "info", "call_count"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_log", "ret_exprs": [], "ret_type": "", "variables": {"statement": ""}, "variables_p": {"statement": [["list", 0.29821165757689494], ["str", 0.19295272128668367], ["deque[Any]", 0.11215326567278759], ["int", 0.09988526866813861], ["List[Dict[str, Any]]", 0.09432704718058929]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[358, 4], [361, 63]], "fn_var_ln": {"statement": [[359, 8], [359, 17]]}, "fn_var_occur": {"statement": [["self", "db_hook_no_log_sql", "run", "statement"]]}, "name": "test_run_no_log", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook_no_log_sql", "run", "statement"], ["self", "db_hook_no_log_sql", "log", "info", "call_count"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_no_log", "ret_exprs": [], "ret_type": "", "variables": {"statement": ""}, "variables_p": {"statement": [["list", 0.2183368749439541], ["str", 0.20194197208888842], ["List[Dict[str, Any]]", 0.12561316873674383], ["deque", 0.08996473374389496]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[369, 8], [373, 22]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "handler", "params": {"cur": ""}, "params_descr": {"cur": ""}, "params_occur": {"cur": [["cur", "execute", "assert_called_once_with", "sql", "param"]]}, "params_p": {"args": [], "cur": [["bytes", 0.19557033829195597], ["List[str]", 0.05892149749900461]], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_with_handler.<locals>.handler", "ret_exprs": ["return obj"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[363, 4], [378, 28]], "fn_var_ln": {"called": [[366, 8], [366, 14]], "obj": [[367, 8], [367, 11]], "param": [[365, 8], [365, 13]], "result": [[375, 8], [375, 14]], "sql": [[364, 8], [364, 11]]}, "fn_var_occur": {"called": [["self", "conn", "commit", "called"]], "obj": [["result", "obj"]], "param": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"]], "result": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"], ["result", "obj"]], "sql": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"]]}, "name": "test_run_with_handler", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"], ["self", "conn", "commit", "called"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_with_handler", "ret_exprs": [], "ret_type": "", "variables": {"called": "", "obj": "", "param": "", "result": "", "sql": ""}, "variables_p": {"called": [["list", 0.28312392740724146], ["float", 0.2370008458501583], ["str", 0.1981992448454855], ["Optional[bool]", 0.09626429369857996], ["int", 0.09049105823720816]], "obj": [["List[str]", 0.3], ["Dict[str, Union[Any, Any]]", 0.09999999999999999], ["Pattern[str]", 0.09999999999999999], ["Dict[str, str]", 0.09999999999999999], ["tuple", 0.09999999999999999]], "param": [["allennlp.common.configuration.ConfigItem", 0.11049725544461164]], "result": [["Generator[Dict[str, Any], None, None]", 0.1346247379443097], ["bool", 0.12821367206280238], ["Dict[str, List[Any]]", 0.09895006030424788]], "sql": [["allennlp.common.configuration.ConfigItem", 0.11049725544461164]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[386, 8], [390, 22]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "handler", "params": {"cur": ""}, "params_descr": {"cur": ""}, "params_occur": {"cur": [["cur", "execute", "assert_called_with", "sql", "param"]]}, "params_p": {"args": [], "cur": [["bytes", 0.19557033829195597], ["List[str]", 0.05892149749900461]], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_with_handler_multiple.<locals>.handler", "ret_exprs": ["return obj"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[380, 4], [395, 35]], "fn_var_ln": {"called": [[383, 8], [383, 14]], "obj": [[384, 8], [384, 11]], "param": [[382, 8], [382, 13]], "result": [[392, 8], [392, 14]], "sql": [[381, 8], [381, 11]]}, "fn_var_occur": {"called": [["self", "conn", "commit", "called"]], "obj": [["result", "obj", "obj"]], "param": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"]], "result": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"], ["result", "obj", "obj"]], "sql": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"]]}, "name": "test_run_with_handler_multiple", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["result", "self", "db_hook", "run", "sql", "parameters", "param", "handler", "handler"], ["self", "conn", "commit", "called"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_with_handler_multiple", "ret_exprs": [], "ret_type": "", "variables": {"called": "", "obj": "", "param": "", "result": "", "sql": ""}, "variables_p": {"called": [["list", 0.28312392740724146], ["float", 0.2370008458501583], ["str", 0.1981992448454855], ["Optional[bool]", 0.09626429369857996], ["int", 0.09049105823720816]], "obj": [["List[str]", 0.3], ["Dict[str, Union[Any, Any]]", 0.09999999999999999], ["Pattern[str]", 0.09999999999999999], ["Dict[str, str]", 0.09999999999999999], ["tuple", 0.09999999999999999]], "param": [["allennlp.common.configuration.ConfigItem", 0.11049725544461164]], "result": [["Generator[Dict[str, Any], None, None]", 0.1346247379443097], ["bool", 0.12821367206280238], ["Dict[str, List[Any]]", 0.09895006030424788]], "sql": [["allennlp.common.configuration.ConfigItem", 0.11049725544461164]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[397, 4], [400, 69]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_run_no_queries", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "db_hook", "run", "sql"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_no_queries", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[402, 4], [403, 59]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_instance_check_works_for_provider_derived_hook", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_instance_check_works_for_provider_derived_hook", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[405, 4], [406, 56]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_instance_check_works_for_non_db_api_hook", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_instance_check_works_for_non_db_api_hook", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[408, 4], [411, 65]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_instance_check_works_for_legacy_db_api_hook", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_instance_check_works_for_legacy_db_api_hook", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[413, 4], [420, 77]], "fn_var_ln": {"query": [[416, 8], [416, 13]], "rows": [[417, 8], [417, 12]]}, "fn_var_occur": {"query": [["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_all_handler"]], "rows": [["self", "cur", "fetchall", "return_value", "rows"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_all_handler"]]}, "name": "test_run_fetch_all_handler_select_1", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "rowcount"], ["self", "cur", "description", "tuple", "None"], ["self", "cur", "fetchall", "return_value", "rows"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_all_handler"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_fetch_all_handler_select_1", "ret_exprs": [], "ret_type": "", "variables": {"query": "", "rows": ""}, "variables_p": {"query": [["Iterator[Any]", 0.1411952270225847], ["str", 0.12130583559400936], ["Set[Hashable]", 0.084258529542161], ["set", 0.08281859320527866]], "rows": [["Optional[str]", 0.36489847093723154], ["float", 0.20506205650468123], ["int", 0.13715451480844804]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[422, 4], [429, 77]], "fn_var_ln": {"query": [[425, 8], [425, 13]], "rows": [[426, 8], [426, 12]]}, "fn_var_occur": {"query": [["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_all_handler"]], "rows": [["rows", "None"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_all_handler"]]}, "name": "test_run_fetch_all_handler_print", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "rowcount"], ["self", "cur", "description", "None"], ["self", "cur", "fetchall", "side_effect", "Exception"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_all_handler"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_fetch_all_handler_print", "ret_exprs": [], "ret_type": "", "variables": {"query": "", "rows": ""}, "variables_p": {"query": [["Iterator[Any]", 0.1411952270225847], ["str", 0.12130583559400936], ["Set[Hashable]", 0.084258529542161], ["set", 0.08281859320527866]], "rows": [["list", 0.2839134053056126], ["Generator[Tuple[Any, Any, Any], None, None]", 0.10602342002629657], ["Generator[Any, None, None]", 0.08271039601037364]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[431, 4], [438, 77]], "fn_var_ln": {"query": [[434, 8], [434, 13]], "rows": [[435, 8], [435, 12]]}, "fn_var_occur": {"query": [["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_one_handler"]], "rows": [["self", "cur", "fetchone", "return_value", "rows"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_one_handler"]]}, "name": "test_run_fetch_one_handler_select_1", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "rowcount"], ["self", "cur", "description", "tuple", "None"], ["self", "cur", "fetchone", "return_value", "rows"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_one_handler"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_fetch_one_handler_select_1", "ret_exprs": [], "ret_type": "", "variables": {"query": "", "rows": ""}, "variables_p": {"query": [["Iterator[Any]", 0.1411952270225847], ["str", 0.12130583559400936], ["Set[Hashable]", 0.084258529542161], ["set", 0.08281859320527866]], "rows": [["Optional[str]", 0.36489847093723154], ["float", 0.20506205650468123], ["int", 0.13715451480844804]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[440, 4], [447, 77]], "fn_var_ln": {"query": [[443, 8], [443, 13]], "rows": [[444, 8], [444, 12]]}, "fn_var_occur": {"query": [["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_one_handler"]], "rows": [["rows", "None"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_one_handler"]]}, "name": "test_run_fetch_one_handler_print", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "cur", "rowcount"], ["self", "cur", "description", "None"], ["self", "cur", "fetchone", "side_effect", "Exception"], ["rows", "self", "db_hook", "run", "sql", "query", "handler", "fetch_one_handler"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestDbApiHook.test_run_fetch_one_handler_print", "ret_exprs": [], "ret_type": "", "variables": {"query": "", "rows": ""}, "variables_p": {"query": [["Iterator[Any]", 0.1411952270225847], ["str", 0.12130583559400936], ["Set[Hashable]", 0.084258529542161], ["set", 0.08281859320527866]], "rows": [["list", 0.2839134053056126], ["Generator[Tuple[Any, Any, Any], None, None]", 0.10602342002629657], ["Generator[Any, None, None]", 0.08271039601037364]]}}], "name": "TestDbApiHook", "q_name": "TestDbApiHook", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "json", "unittest", "mock", "pytest", "airflow", "hooks", "base", "BaseHook", "airflow", "models", "Connection", "airflow", "providers", "common", "sql", "hooks", "sql", "DbApiHook", "fetch_all_handler", "fetch_one_handler", "airflow", "hooks", "dbapi", "DbApiHook", "LegacyDbApiHook"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 90}, "session_id": "5cHYR6StGQZOoXXMzyZZcs58uhUDLltACoDqz1rN2q4", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}