{"error": null, "response": {"classes": [{"cls_lc": [[43, 0], [71, 64]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[50, 4], [51, 64]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_use_internal_api_disabled", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestInternalApiConfig.test_get_use_internal_api_disabled", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[59, 4], [61, 110]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_get_use_internal_api_enabled", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestInternalApiConfig.test_get_use_internal_api_enabled", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[69, 4], [71, 64]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_force_database_direct_access", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestInternalApiConfig.test_force_database_direct_access", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "name": "TestInternalApiConfig", "q_name": "TestInternalApiConfig", "variables": {}, "variables_p": {}}, {"cls_lc": [[75, 0], [250, 9]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[78, 4], [79, 27]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fake_method", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestInternalApiCall.fake_method", "ret_exprs": ["return \"local-call\""], "ret_type": "builtins.str", "ret_type_p": [["int", 0.11396570753870466]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[83, 4], [84, 59]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fake_method_with_params", "params": {"dag_id": "builtins.str", "session": "", "task_id": "builtins.int"}, "params_descr": {"dag_id": "", "session": "", "task_id": ""}, "params_occur": {"dag_id": [["dag_id", "task_id"]], "session": [], "task_id": [["dag_id", "task_id"]]}, "params_p": {"args": [], "dag_id": [["str", 0.6482740341594883], ["int", 0.21884047473364954], ["Optional[str]", 0.13288549110686226]], "kwargs": [], "self": [], "session": [["str", 0.18948036996980938], ["bool", 0.12136095494469745], ["List[dict]", 0.10716180716071742], ["Optional[str]", 0.09063214160824204]], "task_id": [["str", 0.6482740341594883], ["int", 0.21884047473364954], ["Optional[str]", 0.13288549110686226]]}, "q_name": "TestInternalApiCall.fake_method_with_params", "ret_exprs": ["return f\"local-call-with-params-{dag_id}-{task_id}\""], "ret_type": "builtins.str", "ret_type_p": [["str", 0.9999999999999999]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[88, 4], [89, 61]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fake_class_method_with_params", "params": {"cls": "", "dag_id": "builtins.str", "session": ""}, "params_descr": {"cls": "", "dag_id": "", "session": ""}, "params_occur": {"cls": [], "dag_id": [], "session": []}, "params_p": {"args": [], "cls": [["bool", 0.32089113450025825], ["List[str]", 0.17176599326892383], ["str", 0.08359254174003926]], "dag_id": [["bool", 0.32089113450025825], ["List[str]", 0.17176599326892383], ["str", 0.08359254174003926]], "kwargs": [], "self": [], "session": [["bool", 0.32089113450025825], ["List[str]", 0.17176599326892383], ["str", 0.08359254174003926]]}, "q_name": "TestInternalApiCall.fake_class_method_with_params", "ret_exprs": ["return f\"local-classmethod-call-with-params-{dag_id}\""], "ret_type": "builtins.str", "ret_type_p": [["str", 0.23402883543721298]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[93, 4], [97, 69]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fake_class_method_with_serialized_params", "params": {"session": "", "ti": "TaskInstance | TaskInstancePydantic"}, "params_descr": {"session": "", "ti": ""}, "params_occur": {"session": [], "ti": [["ti", "task_id"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "session": [["bool", 0.0997070035920209], ["List[str]", 0.09521385918176618], ["tuple", 0.08889287660017843]], "ti": [["str", 0.3924404115681204], ["IO[str]", 0.12032697213223181], ["dict", 0.10582574025267642], ["Dict[str, Optional[str]]", 0.09980223859366512], ["type", 0.0946440625417361], ["Optional[Dict]", 0.0906159466422212]]}, "q_name": "TestInternalApiCall.fake_class_method_with_serialized_params", "ret_exprs": ["return f\"local-classmethod-call-with-serialized-{ti.task_id}\""], "ret_type": "builtins.str", "ret_type_p": [["str", 0.23402883543721298]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[106, 4], [110, 46]], "fn_var_ln": {"result": [[107, 8], [107, 14]]}, "fn_var_occur": {"result": [["result", "TestInternalApiCall", "fake_method"]]}, "name": "test_local_call", "params": {"mock_requests": "", "self": ""}, "params_descr": {"mock_requests": "", "self": ""}, "params_occur": {"mock_requests": [["mock_requests", "post", "assert_not_called"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_requests": [], "self": []}, "q_name": "TestInternalApiCall.test_local_call", "ret_exprs": [], "ret_type": "", "variables": {"result": ""}, "variables_p": {"result": [["str", 0.2608078058007582], ["list", 0.18592783698604637], ["Dict[str, Union[Any, Any, Any]]", 0.14576425467697096], ["Dict[str, Union[Any, int, str]]", 0.10323556434760685], ["List[Union[Any, Any, Any, Any, Any]]", 0.10320829862572377], ["List[str]", 0.09529866360953407]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[119, 4], [140, 9]], "fn_var_ln": {"_content": [[123, 8], [123, 25]], "expected_data": [[129, 8], [129, 21]], "response": [[120, 8], [120, 16]], "result": [[127, 8], [127, 14]], "status_code": [[121, 8], [121, 28]]}, "fn_var_occur": {"_content": [["response", "_content", "json", "dumps", "BaseSerialization", "serialize"]], "expected_data": [["expected_data", "json", "dumps", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "response": [["response", "requests", "Response"], ["response", "status_code"], ["response", "_content", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "return_value", "response"]], "result": [["result", "TestInternalApiCall", "fake_method"]], "status_code": [["response", "status_code"]]}, "name": "test_remote_call", "params": {"mock_requests": "", "self": ""}, "params_descr": {"mock_requests": "", "self": ""}, "params_occur": {"mock_requests": [["mock_requests", "post", "return_value", "response"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_requests": [], "self": []}, "q_name": "TestInternalApiCall.test_remote_call", "ret_exprs": [], "ret_type": "", "variables": {"_content": "", "expected_data": "", "response": "", "result": "", "status_code": ""}, "variables_p": {"_content": [["list", 0.6921052676501099], ["List[str]", 0.30789473234989007]], "expected_data": [["Dict[str, str]", 0.2064500378906161], ["Dict[str, Union[Any, str]]", 0.1728359031490355], ["Dict[str, Dict[str, Any]]", 0.12604269525681067], ["bytes", 0.10464010498790474], ["dict", 0.09074673516183389]], "response": [["requests.Response", 0.804969898823808]], "result": [["str", 0.2608078058007582], ["list", 0.18592783698604637], ["Dict[str, Union[Any, Any, Any]]", 0.14576425467697096], ["Dict[str, Union[Any, int, str]]", 0.10323556434760685], ["List[Union[Any, Any, Any, Any, Any]]", 0.10320829862572377], ["List[str]", 0.09529866360953407]], "status_code": [["int", 0.3477481137026018], ["List[int]", 0.2005213624357815], ["Dict[int, bytes]", 0.18599700152737064], ["List[Tuple[Any, str]]", 0.08936090893080435], ["Set[int]", 0.08887963446956011], ["frozenset[int]", 0.08749297893388158]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[149, 4], [179, 9]], "fn_var_ln": {"_content": [[153, 8], [153, 25]], "expected_data": [[160, 8], [160, 21]], "response": [[150, 8], [150, 16]], "result": [[157, 8], [157, 14]], "status_code": [[151, 8], [151, 28]]}, "fn_var_occur": {"_content": [["response", "_content", "json", "dumps", "BaseSerialization", "serialize"]], "expected_data": [["expected_data", "json", "dumps", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "response": [["response", "requests", "Response"], ["response", "status_code"], ["response", "_content", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "return_value", "response"]], "result": [["result", "TestInternalApiCall", "fake_method_with_params", "task_id", "session"]], "status_code": [["response", "status_code"]]}, "name": "test_remote_call_with_params", "params": {"mock_requests": "", "self": ""}, "params_descr": {"mock_requests": "", "self": ""}, "params_occur": {"mock_requests": [["mock_requests", "post", "return_value", "response"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_requests": [], "self": []}, "q_name": "TestInternalApiCall.test_remote_call_with_params", "ret_exprs": [], "ret_type": "", "variables": {"_content": "", "expected_data": "", "response": "", "result": "", "status_code": ""}, "variables_p": {"_content": [["list", 0.6921052676501099], ["List[str]", 0.30789473234989007]], "expected_data": [["Dict[str, str]", 0.2064500378906161], ["Dict[str, Union[Any, str]]", 0.1728359031490355], ["Dict[str, Dict[str, Any]]", 0.12604269525681067], ["bytes", 0.10464010498790474], ["dict", 0.09074673516183389]], "response": [["requests.Response", 0.804969898823808]], "result": [["str", 0.39902718205388454], ["Dict[str, Union[bool, str]]", 0.12034066602300399], ["Type[ValueError]", 0.09687839186578506], ["Dict[str, Union[Any, Any, Any]]", 0.08656024929625797], ["bool", 0.08589632269148299], ["Union[Literal, Literal]", 0.07954214718171801]], "status_code": [["int", 0.3477481137026018], ["List[int]", 0.2005213624357815], ["Dict[int, bytes]", 0.18599700152737064], ["List[Tuple[Any, str]]", 0.08936090893080435], ["Set[int]", 0.08887963446956011], ["frozenset[int]", 0.08749297893388158]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[188, 4], [217, 9]], "fn_var_ln": {"_content": [[192, 8], [192, 25]], "expected_data": [[199, 8], [199, 21]], "response": [[189, 8], [189, 16]], "result": [[196, 8], [196, 14]], "status_code": [[190, 8], [190, 28]]}, "fn_var_occur": {"_content": [["response", "_content", "json", "dumps", "BaseSerialization", "serialize"]], "expected_data": [["expected_data", "json", "dumps", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "response": [["response", "requests", "Response"], ["response", "status_code"], ["response", "_content", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "return_value", "response"]], "result": [["result", "TestInternalApiCall", "fake_class_method_with_params", "session"]], "status_code": [["response", "status_code"]]}, "name": "test_remote_classmethod_call_with_params", "params": {"mock_requests": "", "self": ""}, "params_descr": {"mock_requests": "", "self": ""}, "params_occur": {"mock_requests": [["mock_requests", "post", "return_value", "response"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_requests": [], "self": []}, "q_name": "TestInternalApiCall.test_remote_classmethod_call_with_params", "ret_exprs": [], "ret_type": "", "variables": {"_content": "", "expected_data": "", "response": "", "result": "", "status_code": ""}, "variables_p": {"_content": [["list", 0.6921052676501099], ["List[str]", 0.30789473234989007]], "expected_data": [["Dict[str, str]", 0.2064500378906161], ["Dict[str, Union[Any, str]]", 0.1728359031490355], ["Dict[str, Dict[str, Any]]", 0.12604269525681067], ["bytes", 0.10464010498790474], ["dict", 0.09074673516183389]], "response": [["requests.Response", 0.804969898823808]], "result": [["List[str]", 0.215471756278109], ["list", 0.08708735367388439]], "status_code": [["int", 0.3477481137026018], ["List[int]", 0.2005213624357815], ["Dict[int, bytes]", 0.18599700152737064], ["List[Tuple[Any, str]]", 0.08936090893080435], ["Set[int]", 0.08887963446956011], ["frozenset[int]", 0.08749297893388158]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[226, 4], [250, 9]], "fn_var_ln": {"_content": [[230, 8], [230, 25]], "expected_data": [[238, 8], [238, 21]], "response": [[227, 8], [227, 16]], "result": [[235, 8], [235, 14]], "status_code": [[228, 8], [228, 28]], "ti": [[233, 8], [233, 10]]}, "fn_var_occur": {"_content": [["response", "_content", "json", "dumps", "BaseSerialization", "serialize"]], "expected_data": [["expected_data", "json", "dumps", "json", "dumps", "BaseSerialization", "serialize", "ti", "use_pydantic_models", "True"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "response": [["response", "requests", "Response"], ["response", "status_code"], ["response", "_content", "json", "dumps", "BaseSerialization", "serialize"], ["mock_requests", "post", "return_value", "response"]], "result": [["result", "TestInternalApiCall", "fake_class_method_with_serialized_params", "ti", "session"]], "status_code": [["response", "status_code"]], "ti": [["ti", "TaskInstance", "task", "EmptyOperator", "task_id", "run_id", "state", "State", "RUNNING"], ["result", "TestInternalApiCall", "fake_class_method_with_serialized_params", "ti", "session"], ["expected_data", "json", "dumps", "json", "dumps", "BaseSerialization", "serialize", "ti", "use_pydantic_models", "True"]]}, "name": "test_remote_call_with_serialized_model", "params": {"mock_requests": "", "self": ""}, "params_descr": {"mock_requests": "", "self": ""}, "params_occur": {"mock_requests": [["mock_requests", "post", "return_value", "response"], ["mock_requests", "post", "assert_called_once_with", "url", "data", "expected_data", "headers"]], "self": []}, "params_p": {"args": [], "kwargs": [], "mock_requests": [], "self": []}, "q_name": "TestInternalApiCall.test_remote_call_with_serialized_model", "ret_exprs": [], "ret_type": "", "variables": {"_content": "", "expected_data": "", "response": "", "result": "", "status_code": "", "ti": ""}, "variables_p": {"_content": [["list", 0.6921052676501099], ["List[str]", 0.30789473234989007]], "expected_data": [["Dict[str, float]", 0.4744299488435305], ["dict", 0.43079899016339174]], "response": [["requests.Response", 0.804969898823808]], "result": [["List[str]", 0.215471756278109], ["list", 0.08708735367388439]], "status_code": [["int", 0.3477481137026018], ["List[int]", 0.2005213624357815], ["Dict[int, bytes]", 0.18599700152737064], ["List[Tuple[Any, str]]", 0.08936090893080435], ["Set[int]", 0.08887963446956011], ["frozenset[int]", 0.08749297893388158]], "ti": [["str", 0.27866500169306574], ["list", 0.08533827594361747]]}}], "name": "TestInternalApiCall", "q_name": "TestInternalApiCall", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[38, 0], [39, 42]], "fn_var_ln": {"_initialized": [[39, 4], [39, 34]]}, "fn_var_occur": {"_initialized": [["InternalApiConfig", "_initialized", "False"]]}, "name": "reset_init_api_config", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "reset_init_api_config", "ret_exprs": [], "ret_type": "", "variables": {"_initialized": ""}, "variables_p": {"_initialized": [["dict", 0.11647287049045418], ["dss.config.Replica", 0.1117936082076988], ["str", 0.1094618718617461], ["Dict[str, str]", 0.09395255669846846]]}}], "imports": ["__future__", "annotations", "json", "unittest", "mock", "pytest", "requests", "airflow", "api_internal", "internal_api_call", "InternalApiConfig", "internal_api_call", "airflow", "models", "taskinstance", "TaskInstance", "airflow", "operators", "empty", "EmptyOperator", "airflow", "serialization", "pydantic", "taskinstance", "TaskInstancePydantic", "airflow", "serialization", "serialized_objects", "BaseSerialization", "airflow", "settings", "_ENABLE_AIP_44", "airflow", "utils", "state", "State", "tests", "test_utils", "config", "conf_vars"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 8, "I": 0, "U": 41}, "session_id": "fQYjouTiSD1xsuI4-7AshgtnytZR4Copd21k3tAxZjs", "set": null, "tc": [false, null], "type_annot_cove": 0.16, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}