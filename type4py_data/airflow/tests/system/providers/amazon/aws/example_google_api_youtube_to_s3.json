{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[78, 0], [94, 20]], "fn_var_ln": {"conn": [[80, 4], [80, 8]], "conn_extra": [[85, 4], [85, 14]], "conn_extra_json": [[90, 4], [90, 19]], "json_data": [[79, 4], [79, 13]], "scopes": [[84, 4], [84, 10]], "session": [[92, 4], [92, 11]]}, "fn_var_occur": {"conn": [["conn", "Connection", "conn_id", "conn_id_name", "conn_type"], ["conn", "set_extra", "conn_extra_json"], ["session", "add", "conn"]], "conn_extra": [["conn_extra", "scopes", "json_data"], ["conn_extra_json", "json", "dumps", "conn_extra"]], "conn_extra_json": [["conn_extra_json", "json", "dumps", "conn_extra"], ["conn", "set_extra", "conn_extra_json"]], "json_data": [["json_data", "boto3", "client", "get_secret_value", "SecretId", "secret_arn"], ["conn_extra", "scopes", "json_data"]], "scopes": [["conn_extra", "scopes", "json_data"]], "session": [["session", "settings", "Session"], ["session", "add", "conn"], ["session", "commit"]]}, "name": "create_connection_gcp", "params": {"conn_id_name": "builtins.str", "secret_arn": "builtins.str"}, "params_descr": {"conn_id_name": "", "secret_arn": ""}, "params_occur": {"conn_id_name": [["conn", "Connection", "conn_id", "conn_id_name", "conn_type"]], "secret_arn": [["json_data", "boto3", "client", "get_secret_value", "SecretId", "secret_arn"]]}, "params_p": {"args": [], "conn_id_name": [["str", 0.8219525307804079], ["int", 0.17804746921959214]], "kwargs": [], "secret_arn": [["str", 0.684408543111898], ["List[str]", 0.11662052178353154]]}, "q_name": "create_connection_gcp", "ret_exprs": [], "ret_type": "", "variables": {"conn": "", "conn_extra": "", "conn_extra_json": "", "json_data": "", "scopes": "", "session": ""}, "variables_p": {"conn": [["Optional[str]", 0.3322639903468998], ["str", 0.33091447765030924], ["List[Tuple[str, Any]]", 0.11876535980818437], ["list", 0.10264376182431038]], "conn_extra": [["Dict[str, Callable[[Any, Any], Any]]", 0.5257072129782516], ["str", 0.23714639351087413], ["int", 0.14411329642746729], ["Dict[str, float]", 0.09303309708340686]], "conn_extra_json": [["List[Dict[str, Any]]", 0.12610461164291362], ["Dict[str, Any]", 0.10974300446609736], ["Dict[str, int]", 0.09650876409858933], ["int", 0.09018045935159165], ["Dict[str, str]", 0.08636375795987136]], "json_data": [["Dict[Any, str]", 0.11060218757523818], ["Dict[str, str]", 0.08611225992178871], ["str", 0.07721213995996645], ["Dict[str, Union[float, str]]", 0.07611769457417006]], "scopes": [["str", 0.3719245667059914], ["bool", 0.20124038753849038], ["int", 0.1962801135950119]], "session": [["Optional[str]", 0.0607836960422308]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[98, 0], [100, 38]], "fn_var_ln": {"waiter": [[99, 4], [99, 10]]}, "fn_var_occur": {"waiter": [["waiter", "boto3", "client", "get_waiter"], ["waiter", "wait", "Bucket", "s3_bucket_name"]]}, "name": "wait_for_bucket", "params": {"s3_bucket_name": ""}, "params_descr": {"s3_bucket_name": ""}, "params_occur": {"s3_bucket_name": [["waiter", "wait", "Bucket", "s3_bucket_name"]]}, "params_p": {"args": [], "kwargs": [], "s3_bucket_name": [["str", 0.5873709142609683], ["int", 0.11350927982282218], ["Callable", 0.08621034265453256]]}, "q_name": "wait_for_bucket", "ret_exprs": [], "ret_type": "", "variables": {"waiter": ""}, "variables_p": {"waiter": [["str", 0.9035148580208017], ["Pattern[str]", 0.09648514197919858]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[104, 0], [112, 89]], "fn_var_ln": {"output": [[106, 4], [106, 10]], "task_instance": [[105, 4], [105, 17]], "video_ids": [[110, 8], [110, 17]]}, "fn_var_occur": {"output": [["output", "task_instance", "xcom_pull", "task_ids", "key"], ["video_ids", "item", "item", "output"]], "task_instance": [["task_instance", "kwargs"], ["output", "task_instance", "xcom_pull", "task_ids", "key"]], "video_ids": [["video_ids", "item", "item", "output"], ["kwargs", "xcom_push", "key", "value", "join", "video_ids"]]}, "name": "transform_video_ids", "params": {"kwargs": ""}, "params_descr": {"kwargs": ""}, "params_occur": {"kwargs": [["task_instance", "kwargs"], ["kwargs", "xcom_push", "key", "value", "join", "video_ids"]]}, "params_p": {"args": [], "kwargs": []}, "q_name": "transform_video_ids", "ret_exprs": [], "ret_type": "", "variables": {"output": "", "task_instance": "", "video_ids": ""}, "variables_p": {"output": [["Dict[str, Any]", 0.18241332292817075], ["str", 0.1167508558945718], ["Dict[str, List[str]]", 0.09451983945199591], ["Optional[str]", 0.0925992615188226], ["Dict[Any, List[Any]]", 0.0896387530810211]], "task_instance": [["Dict[str, Any]", 0.2719482676491356], ["click.decorators._IdentityFunction", 0.11275809041013021], ["kitovu.utils.JsonType", 0.11000954823270263], ["List[str]", 0.10784730848035226], ["dict", 0.0986146874809815], ["str", 0.08974561285446543]], "video_ids": [["Dict[str, str]", 0.62012804398612], ["set", 0.1413140565772386], ["Type[str]", 0.1413140565772386], ["Iterator[Any]", 0.09724384285940287]]}}], "imports": ["__future__", "annotations", "json", "datetime", "datetime", "boto3", "airflow", "DAG", "settings", "airflow", "decorators", "task", "airflow", "models", "Connection", "airflow", "models", "baseoperator", "chain", "airflow", "providers", "amazon", "aws", "operators", "s3", "S3CreateBucketOperator", "S3DeleteBucketOperator", "airflow", "providers", "amazon", "aws", "transfers", "google_api_to_s3", "GoogleApiToS3Operator", "airflow", "utils", "trigger_rule", "TriggerRule", "tests", "system", "providers", "amazon", "aws", "utils", "ENV_ID_KEY", "SystemTestContextBuilder", "tests", "system", "utils", "watcher", "watcher", "tests", "system", "utils", "get_test_run"], "mod_var_ln": {"DAG_ID": [[64, 0], [64, 6]], "SECRET_ARN_KEY": [[72, 0], [72, 14]], "YOUTUBE_CHANNEL_ID": [[66, 0], [66, 18]], "YOUTUBE_VIDEO_FIELDS": [[70, 0], [70, 20]], "YOUTUBE_VIDEO_PARTS": [[69, 0], [69, 19]], "YOUTUBE_VIDEO_PUBLISHED_AFTER": [[67, 0], [67, 29]], "YOUTUBE_VIDEO_PUBLISHED_BEFORE": [[68, 0], [68, 30]], "conn_id_name": [[124, 4], [124, 16]], "create_s3_bucket": [[131, 4], [131, 20]], "delete_s3_bucket": [[177, 4], [177, 20]], "env_id": [[123, 4], [123, 10]], "s3_bucket_name": [[129, 4], [129, 18]], "secret_arn": [[125, 4], [125, 14]], "set_up_connection": [[127, 4], [127, 21]], "sys_test_context_task": [[74, 0], [74, 21]], "test_context": [[122, 4], [122, 16]], "test_run": [[206, 0], [206, 8]], "transform_video_ids_task": [[157, 4], [157, 28]], "video_data_to_s3": [[160, 4], [160, 20]], "video_ids_to_s3": [[136, 4], [136, 19]], "wait_for_bucket_creation": [[133, 4], [133, 28]]}, "mod_var_occur": {"DAG_ID": [["DAG", "dag_id", "DAG_ID", "schedule", "start_date", "datetime", "tags", "catchup", "False", "dag"]], "SECRET_ARN_KEY": [["sys_test_context_task", "SystemTestContextBuilder", "add_variable", "SECRET_ARN_KEY", "build"], ["secret_arn", "test_context", "SECRET_ARN_KEY"]], "YOUTUBE_CHANNEL_ID": [["video_ids_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "google_api_endpoint_path", "gcp_conn_id", "conn_id_name", "google_api_endpoint_params", "YOUTUBE_CHANNEL_ID", "YOUTUBE_VIDEO_PUBLISHED_AFTER", "YOUTUBE_VIDEO_PUBLISHED_BEFORE", "google_api_response_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"]], "YOUTUBE_VIDEO_FIELDS": [["video_data_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "gcp_conn_id", "conn_id_name", "google_api_endpoint_path", "google_api_endpoint_params", "YOUTUBE_VIDEO_PARTS", "YOUTUBE_VIDEO_FIELDS", "google_api_endpoint_params_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"]], "YOUTUBE_VIDEO_PARTS": [["video_data_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "gcp_conn_id", "conn_id_name", "google_api_endpoint_path", "google_api_endpoint_params", "YOUTUBE_VIDEO_PARTS", "YOUTUBE_VIDEO_FIELDS", "google_api_endpoint_params_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"]], "YOUTUBE_VIDEO_PUBLISHED_AFTER": [["video_ids_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "google_api_endpoint_path", "gcp_conn_id", "conn_id_name", "google_api_endpoint_params", "YOUTUBE_CHANNEL_ID", "YOUTUBE_VIDEO_PUBLISHED_AFTER", "YOUTUBE_VIDEO_PUBLISHED_BEFORE", "google_api_response_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"]], "YOUTUBE_VIDEO_PUBLISHED_BEFORE": [["video_ids_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "google_api_endpoint_path", "gcp_conn_id", "conn_id_name", "google_api_endpoint_params", "YOUTUBE_CHANNEL_ID", "YOUTUBE_VIDEO_PUBLISHED_AFTER", "YOUTUBE_VIDEO_PUBLISHED_BEFORE", "google_api_response_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"]], "conn_id_name": [["set_up_connection", "create_connection_gcp", "conn_id_name", "secret_arn", "secret_arn"], ["video_ids_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "google_api_endpoint_path", "gcp_conn_id", "conn_id_name", "google_api_endpoint_params", "YOUTUBE_CHANNEL_ID", "YOUTUBE_VIDEO_PUBLISHED_AFTER", "YOUTUBE_VIDEO_PUBLISHED_BEFORE", "google_api_response_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"], ["video_data_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "gcp_conn_id", "conn_id_name", "google_api_endpoint_path", "google_api_endpoint_params", "YOUTUBE_VIDEO_PARTS", "YOUTUBE_VIDEO_FIELDS", "google_api_endpoint_params_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"]], "create_s3_bucket": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "delete_s3_bucket": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "env_id": [["conn_id_name", "env_id"], ["s3_bucket_name", "env_id"]], "s3_bucket_name": [["create_s3_bucket", "S3CreateBucketOperator", "task_id", "bucket_name", "s3_bucket_name"], ["wait_for_bucket_creation", "wait_for_bucket", "s3_bucket_name", "s3_bucket_name"], ["video_ids_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "google_api_endpoint_path", "gcp_conn_id", "conn_id_name", "google_api_endpoint_params", "YOUTUBE_CHANNEL_ID", "YOUTUBE_VIDEO_PUBLISHED_AFTER", "YOUTUBE_VIDEO_PUBLISHED_BEFORE", "google_api_response_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"], ["video_data_to_s3", "GoogleApiToS3Operator", "task_id", "google_api_service_name", "google_api_service_version", "gcp_conn_id", "conn_id_name", "google_api_endpoint_path", "google_api_endpoint_params", "YOUTUBE_VIDEO_PARTS", "YOUTUBE_VIDEO_FIELDS", "google_api_endpoint_params_via_xcom", "s3_destination_key", "s3_bucket_name", "s3_overwrite", "True"], ["delete_s3_bucket", "S3DeleteBucketOperator", "task_id", "bucket_name", "s3_bucket_name", "force_delete", "True", "trigger_rule", "TriggerRule", "ALL_DONE"]], "secret_arn": [["set_up_connection", "create_connection_gcp", "conn_id_name", "secret_arn", "secret_arn"]], "set_up_connection": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "sys_test_context_task": [["test_context", "sys_test_context_task"]], "test_context": [["env_id", "test_context", "ENV_ID_KEY"], ["secret_arn", "test_context", "SECRET_ARN_KEY"], ["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "test_run": [], "transform_video_ids_task": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "video_data_to_s3": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "video_ids_to_s3": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]], "wait_for_bucket_creation": [["chain", "test_context", "set_up_connection", "create_s3_bucket", "wait_for_bucket_creation", "video_ids_to_s3", "transform_video_ids_task", "video_data_to_s3", "delete_s3_bucket"]]}, "no_types_annot": {"D": 2, "I": 0, "U": 36}, "session_id": "iRbG16c6Zjt0NxEoOSX_SQazLfbrBd0s0adXnP4MOMM", "set": null, "tc": [false, null], "type_annot_cove": 0.05, "typed_seq": "", "untyped_seq": "", "variables": {"DAG_ID": "", "SECRET_ARN_KEY": "", "YOUTUBE_CHANNEL_ID": "", "YOUTUBE_VIDEO_FIELDS": "", "YOUTUBE_VIDEO_PARTS": "", "YOUTUBE_VIDEO_PUBLISHED_AFTER": "", "YOUTUBE_VIDEO_PUBLISHED_BEFORE": "", "conn_id_name": "", "create_s3_bucket": "", "delete_s3_bucket": "", "env_id": "", "s3_bucket_name": "", "secret_arn": "", "set_up_connection": "", "sys_test_context_task": "", "test_context": "", "test_run": "", "transform_video_ids_task": "", "video_data_to_s3": "", "video_ids_to_s3": "", "wait_for_bucket_creation": ""}, "variables_p": {"DAG_ID": [["int", 0.35274973746887883], ["Type[projecbetting.models.Odd]", 0.10470941839845614], ["str", 0.0967413222700786], ["correios.models.posting.TrackingCode", 0.08956049567409095]], "SECRET_ARN_KEY": [["str", 0.9999999999999999]], "YOUTUBE_CHANNEL_ID": [["str", 0.586854164746939], ["int", 0.23261955513162508], ["taxonomy.db.models.base.EnumField", 0.09061720580346072], ["bytes", 0.0899090743179752]], "YOUTUBE_VIDEO_FIELDS": [["bool", 0.48149007528524707], ["List[str]", 0.13970248515328443], ["int", 0.09721243332951247], ["str", 0.09190076149492056], ["dict", 0.09004663453040872]], "YOUTUBE_VIDEO_PARTS": [["str", 0.4760602168969871], ["Dict[str, str]", 0.22991385625702573], ["Dict[int, str]", 0.09962627272110379], ["List[str]", 0.09587328478429641]], "YOUTUBE_VIDEO_PUBLISHED_AFTER": [["dict", 0.2600044680784261], ["str", 0.24790542549242622], ["Dict[str, str]", 0.19976678154273697], ["list", 0.09430641852496068], ["Type[Tuple[str, ...]]", 0.08571052888880946]], "YOUTUBE_VIDEO_PUBLISHED_BEFORE": [["dict", 0.2600044680784261], ["str", 0.24790542549242622], ["Dict[str, str]", 0.19976678154273697], ["list", 0.09430641852496068], ["Type[Tuple[str, ...]]", 0.08571052888880946]], "conn_id_name": [["str", 0.8978160686597527]], "create_s3_bucket": [["str", 0.12352528397790168], ["Tuple[str]", 0.09797255057519536]], "delete_s3_bucket": [["str", 0.4125337550546182], ["raiden.utils.Any", 0.09866140885133105]], "env_id": [["str", 0.9090119640468988], ["int", 0.0909880359531014]], "s3_bucket_name": [["str", 0.9117095379993632], ["Optional[List[int]]", 0.08829046200063692]], "secret_arn": [["str", 1.0]], "set_up_connection": [["str", 0.10062042724092335]], "sys_test_context_task": [["str", 0.5096993297625712], ["int", 0.09793096367691599]], "test_context": [["List[Tuple[str, int]]", 0.29965332843646364], ["str", 0.191466023217352], ["Dict[str, datetime.datetime]", 0.17364366090009942], ["Dict[str, int]", 0.1236121699259737], ["List[Optional[Any]]", 0.11654936051544705]], "test_run": [["int", 0.4999999998760807], ["bool", 0.4999999998358487], ["str", 2.480259286043124e-10], ["list", 4.00446876512944e-11]], "transform_video_ids_task": [["dict", 0.29457132933775504], ["Optional[str]", 0.10133906144974247], ["bytes", 0.09389362624006191], ["grpy.core.models.Grouping", 0.09371656387981918]], "video_data_to_s3": [["Optional[Dict[str, Any]]", 0.18657108112810086], ["List[Union[Any, Any]]", 0.08426595601768479]], "video_ids_to_s3": [["Dict[str, Any]", 0.10972552641104409], ["Dict[str, int]", 0.09538687250976428]], "wait_for_bucket_creation": [["int", 0.397293590745713], ["float", 0.2836313179573347], ["dict", 0.0849690170715354]]}}}