{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[33, 0], [36, 40]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean_db", "params": {"session": ""}, "params_descr": {"session": ""}, "params_occur": {"session": [["session", "query", "DagRun", "delete"], ["session", "query", "TaskInstance", "delete"]]}, "params_p": {"args": [], "kwargs": [], "session": [["grouper.models.base.session.Session", 0.11990957790855057], ["grouper.models.group.Group", 0.11990957790855057], ["models.Queue", 0.08719401443250785], ["str", 0.0825206741781574]]}, "q_name": "clean_db", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "A simple DAG with a single task. NotPreviouslySkippedDep is met.", "long_descr": null, "ret": null}, "fn_lc": [[39, 0], [58, 37]], "fn_var_ln": {"dep": [[55, 4], [55, 7]], "op1": [[50, 8], [50, 11]], "start_date": [[43, 4], [43, 14]], "ti1": [[52, 5], [52, 8]]}, "fn_var_occur": {"dep": [["dep", "NotPreviouslySkippedDep"], ["len", "list", "dep", "get_dep_statuses", "ti1", "session", "DepContext"], ["dep", "is_met", "ti1", "session"]], "op1": [["op1", "EmptyOperator", "task_id"], ["ti1", "refresh_from_task", "op1"]], "start_date": [["start_date", "pendulum", "datetime"], ["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["ti1", "dag_maker", "create_dagrun", "execution_date", "start_date", "task_instances"]], "ti1": [["ti1", "dag_maker", "create_dagrun", "execution_date", "start_date", "task_instances"], ["ti1", "refresh_from_task", "op1"], ["len", "list", "dep", "get_dep_statuses", "ti1", "session", "DepContext"], ["dep", "is_met", "ti1", "session"], ["ti1", "state", "State", "SKIPPED"]]}, "name": "test_no_parent", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["ti1", "dag_maker", "create_dagrun", "execution_date", "start_date", "task_instances"]], "session": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["len", "list", "dep", "get_dep_statuses", "ti1", "session", "DepContext"], ["dep", "is_met", "ti1", "session"]]}, "params_p": {"args": [], "dag_maker": [["models.User", 0.23514130795894328], ["zerver.models.UserProfile", 0.18978660873996533], ["str", 0.10206115668194501], ["app.models.User", 0.09868059199879806], ["models.UserAuth", 0.08461081330640265]], "kwargs": [], "session": [["grouper.models.user.User", 0.3598892729013871], ["grouper.models.base.session.Session", 0.17994463645069356]]}, "q_name": "test_no_parent", "ret_exprs": [], "ret_type": "", "variables": {"dep": "", "op1": "", "start_date": "", "ti1": ""}, "variables_p": {"dep": [["dict", 0.4964108046382216], ["List[Dict[str, Any]]", 0.10868410332617368], ["int", 0.10401229666113569], ["Dict[str, str]", 0.0983963846955501]], "op1": [["Dict[Any, str]", 0.2626532010521986], ["Dict[str, Union[Any, bool, str]]", 0.18401855382254753], ["Dict[str, Optional[str]]", 0.10787162554788178], ["dict", 0.08755106701739954], ["int", 0.08547801911895114]], "start_date": [], "ti1": [["str", 0.2171570711674951], ["geode.models.common.Address", 0.11497603232367928], ["Dict[str, Any]", 0.10219025933071155], ["int", 0.09326633251767268], ["list", 0.09099511031929043], ["List[Tuple[str, Any]]", 0.08952323329069393]]}}, {"docstring": {"func": "A simple DAG with no branching. Both op1 and op2 are EmptyOperator. NotPreviouslySkippedDep is met.", "long_descr": null, "ret": null}, "fn_lc": [[61, 0], [82, 37]], "fn_var_ln": {"_": [[76, 4], [76, 5]], "dep": [[79, 4], [79, 7]], "op1": [[72, 8], [72, 11]], "op2": [[73, 8], [73, 11]], "start_date": [[65, 4], [65, 14]], "ti2": [[76, 7], [76, 10]]}, "fn_var_occur": {"_": [["_", "ti2", "dag_maker", "create_dagrun", "task_instances"]], "dep": [["dep", "NotPreviouslySkippedDep"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"]], "op1": [["op1", "EmptyOperator", "task_id"], ["op1", "op2"]], "op2": [["op2", "EmptyOperator", "task_id"], ["op1", "op2"], ["ti2", "refresh_from_task", "op2"]], "start_date": [["start_date", "pendulum", "datetime"], ["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"]], "ti2": [["_", "ti2", "dag_maker", "create_dagrun", "task_instances"], ["ti2", "refresh_from_task", "op2"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"], ["ti2", "state", "State", "SKIPPED"]]}, "name": "test_no_skipmixin_parent", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["_", "ti2", "dag_maker", "create_dagrun", "task_instances"]], "session": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"]]}, "params_p": {"args": [], "dag_maker": [["int", 0.18994579810537301], ["models.User", 0.10249273531918762]], "kwargs": [], "session": [["str", 0.17974748054524042], ["grouper.models.base.session.Session", 0.17717822264398603], ["grouper.models.user.User", 0.17717822264398603]]}, "q_name": "test_no_skipmixin_parent", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "dep": "", "op1": "", "op2": "", "start_date": "", "ti2": ""}, "variables_p": {"_": [["int", 0.6735490628254894], ["str", 0.08249406285968565]], "dep": [["dict", 0.4964108046382216], ["List[Dict[str, Any]]", 0.10868410332617368], ["int", 0.10401229666113569], ["Dict[str, str]", 0.0983963846955501]], "op1": [["Pattern[Any]", 0.2650537788171139], ["Dict[str, Union[Any, Any, Any]]", 0.1161347669483028], ["Dict[str, str]", 0.10064090791402337], ["dict", 0.09286057147798296], ["str", 0.09276268242869652], ["list", 0.086678711119582], ["Dict[int, str]", 0.08220818865404256], ["Dict[str, Type[Any]]", 0.08142834839109074]], "op2": [["Pattern[Any]", 0.19175444165051886], ["dict", 0.1745263043487751], ["Dict[str, Any]", 0.16639354897923508], ["Dict[str, Union[Any, Any, Any]]", 0.11437071860956977], ["Dict[str, str]", 0.09938404802855995], ["telegram.utils.AsyncResult", 0.08627781631044762], ["str", 0.08413705980503192], ["Dict[str, Dict[str, Any]]", 0.0831560622678617]], "start_date": [], "ti2": [["dict", 0.09549424449953386], ["str", 0.08957291643256832]]}}, {"docstring": {"func": "A simple DAG with a BranchPythonOperator that follows op2. NotPreviouslySkippedDep is met.", "long_descr": null, "ret": null}, "fn_lc": [[85, 0], [107, 37]], "fn_var_ln": {"dagrun": [[100, 4], [100, 10]], "dep": [[104, 4], [104, 7]], "op1": [[96, 8], [96, 11]], "op2": [[97, 8], [97, 11]], "start_date": [[89, 4], [89, 14]], "ti": [[101, 4], [101, 6]], "ti2": [[101, 8], [101, 11]]}, "fn_var_occur": {"dagrun": [["dagrun", "dag_maker", "create_dagrun", "run_type", "DagRunType", "MANUAL", "state", "State", "RUNNING"], ["ti", "ti2", "dagrun", "task_instances"]], "dep": [["dep", "NotPreviouslySkippedDep"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"]], "op1": [["op1", "BranchPythonOperator", "task_id", "python_callable"], ["op1", "op2"]], "op2": [["op2", "EmptyOperator", "task_id"], ["op1", "op2"]], "start_date": [["start_date", "pendulum", "datetime"], ["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"]], "ti": [["ti", "ti2", "dagrun", "task_instances"], ["ti", "run"]], "ti2": [["ti", "ti2", "dagrun", "task_instances"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"], ["ti2", "state", "State", "SKIPPED"]]}, "name": "test_parent_follow_branch", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["dagrun", "dag_maker", "create_dagrun", "run_type", "DagRunType", "MANUAL", "state", "State", "RUNNING"]], "session": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.29070117388997324], ["Optional[int]", 0.0985122202611304], ["List[recidiviz.persistence.database.schema.state.schema.StatePerson]", 0.09448743380854112], ["Dict[str, Any]", 0.09421852537958389]], "kwargs": [], "session": [["grouper.models.user.User", 0.5785002728435193], ["grouper.models.base.session.Session", 0.2892501364217597]]}, "q_name": "test_parent_follow_branch", "ret_exprs": [], "ret_type": "", "variables": {"dagrun": "", "dep": "", "op1": "", "op2": "", "start_date": "", "ti": "", "ti2": ""}, "variables_p": {"dagrun": [["str", 0.40973041918430597], ["list", 0.22231663987776296], ["Optional[types.TracebackType]", 0.10918820867433685], ["Dict[str, Union[int, str]]", 0.0857429476163633]], "dep": [["dict", 0.4964108046382216], ["List[Dict[str, Any]]", 0.10868410332617368], ["int", 0.10401229666113569], ["Dict[str, str]", 0.0983963846955501]], "op1": [["str", 0.19120392975596978], ["int", 0.17584796154768162], ["Dict[str, str]", 0.11423018334870609], ["Pattern[Any]", 0.10252926726729616], ["Tuple[str, str]", 0.08207596543276739], ["dict", 0.08111885288162066], ["list", 0.08034760654024363]], "op2": [["Pattern[Any]", 0.2650537788171139], ["Dict[str, Union[Any, Any, Any]]", 0.1161347669483028], ["Dict[str, str]", 0.10064090791402337], ["dict", 0.09286057147798296], ["str", 0.09276268242869652], ["list", 0.086678711119582], ["Dict[int, str]", 0.08220818865404256], ["Dict[str, Type[Any]]", 0.08142834839109074]], "start_date": [], "ti": [["str", 0.29292023692016916], ["Dict[str, str]", 0.10319255647243768], ["Mapping", 0.10171952077373705], ["Tuple[int, int, int, int]", 0.096443968159892], ["dict", 0.08217834774269936], ["List[Dict[str, str]]", 0.08020902535524237], ["int", 0.08020902535524237]], "ti2": [["int", 0.2115128956026066], ["list", 0.12544524670326954], ["Dict[str, Any]", 0.1026597600470868], ["Type[manager.projects.models.snapshots.Snapshot]", 0.09421632062383993], ["str", 0.08486444844149933]]}}, {"docstring": {"func": "A simple DAG with a BranchPythonOperator that does not follow op2. NotPreviouslySkippedDep is not met.", "long_descr": null, "ret": null}, "fn_lc": [[110, 0], [135, 44]], "fn_var_ln": {"dep": [[132, 4], [132, 7]], "op1": [[121, 8], [121, 11]], "op2": [[122, 8], [122, 11]], "op3": [[123, 8], [123, 11]], "start_date": [[114, 4], [114, 14]], "tis": [[126, 4], [126, 7]]}, "fn_var_occur": {"dep": [["dep", "NotPreviouslySkippedDep"], ["len", "list", "dep", "get_dep_statuses", "tis", "session", "DepContext"], ["dep", "is_met", "tis", "session"]], "op1": [["op1", "BranchPythonOperator", "task_id", "python_callable"], ["op1", "op2", "op3"]], "op2": [["op2", "EmptyOperator", "task_id"], ["op1", "op2", "op3"]], "op3": [["op3", "EmptyOperator", "task_id"], ["op1", "op2", "op3"]], "start_date": [["start_date", "pendulum", "datetime"], ["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"]], "tis": [["tis", "ti", "task_id", "ti", "ti", "dag_maker", "create_dagrun", "run_type", "DagRunType", "MANUAL", "state", "State", "RUNNING", "task_instances"], ["tis", "run"], ["len", "list", "dep", "get_dep_statuses", "tis", "session", "DepContext"], ["dep", "is_met", "tis", "session"], ["tis", "state", "State", "SKIPPED"]]}, "name": "test_parent_skip_branch", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["tis", "ti", "task_id", "ti", "ti", "dag_maker", "create_dagrun", "run_type", "DagRunType", "MANUAL", "state", "State", "RUNNING", "task_instances"]], "session": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["len", "list", "dep", "get_dep_statuses", "tis", "session", "DepContext"], ["dep", "is_met", "tis", "session"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.11024775015450294]], "kwargs": [], "session": [["grouper.models.user.User", 0.5785002728435193], ["grouper.models.base.session.Session", 0.2892501364217597]]}, "q_name": "test_parent_skip_branch", "ret_exprs": [], "ret_type": "", "variables": {"dep": "", "op1": "", "op2": "", "op3": "", "start_date": "", "tis": ""}, "variables_p": {"dep": [["dict", 0.4964108046382216], ["List[Dict[str, Any]]", 0.10868410332617368], ["int", 0.10401229666113569], ["Dict[str, str]", 0.0983963846955501]], "op1": [["str", 0.20133706815533653], ["dict", 0.18569329995177536], ["Dict[str, str]", 0.10439443260478797], ["list", 0.09764775773671645], ["Dict[str, Optional[str]]", 0.09097854209950135]], "op2": [["Pattern[Any]", 0.31009746229780155], ["str", 0.25306320510175906], ["Dict[str, str]", 0.17917338048540177], ["Dict[str, Union[Any, Any, Any]]", 0.09322078256194516], ["Dict[int, Any]", 0.07995347773597332]], "op3": [["Pattern[Any]", 0.31009746229780155], ["str", 0.25306320510175906], ["Dict[str, str]", 0.17917338048540177], ["Dict[str, Union[Any, Any, Any]]", 0.09322078256194516], ["Dict[int, Any]", 0.07995347773597332]], "start_date": [], "tis": [["pydynasync.models.Changes", 0.2817611494436216], ["Dict[str, dict]", 0.12361397901618881], ["Dict[str, str]", 0.12139768301750888], ["list", 0.09429860962844179], ["Type[List[Any]]", 0.08703455273512022], ["dict", 0.08683324237428454]]}}, {"docstring": {"func": "A simple DAG with a BranchPythonOperator that does not follow op2. Parent task is not yet", "long_descr": "executed (no xcom data). NotPreviouslySkippedDep is met (no decision).", "ret": null}, "fn_lc": [[138, 0], [161, 34]], "fn_var_ln": {"_": [[155, 12], [155, 13]], "dep": [[158, 4], [158, 7]], "op1": [[150, 8], [150, 11]], "op2": [[151, 8], [151, 11]], "op3": [[152, 8], [152, 11]], "start_date": [[143, 4], [143, 14]], "ti2": [[155, 7], [155, 10]]}, "fn_var_occur": {"_": [["_", "ti2", "_", "dag_maker", "create_dagrun", "task_instances"]], "dep": [["dep", "NotPreviouslySkippedDep"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"]], "op1": [["op1", "BranchPythonOperator", "task_id", "python_callable"], ["op1", "op2", "op3"]], "op2": [["op2", "EmptyOperator", "task_id"], ["op1", "op2", "op3"], ["ti2", "refresh_from_task", "op2"]], "op3": [["op3", "EmptyOperator", "task_id"], ["op1", "op2", "op3"]], "start_date": [["start_date", "pendulum", "datetime"], ["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"]], "ti2": [["_", "ti2", "_", "dag_maker", "create_dagrun", "task_instances"], ["ti2", "refresh_from_task", "op2"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"], ["ti2", "state", "State", "NONE"]]}, "name": "test_parent_not_executed", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["_", "ti2", "_", "dag_maker", "create_dagrun", "task_instances"]], "session": [["dag_maker", "schedule", "None", "start_date", "start_date", "session", "session"], ["len", "list", "dep", "get_dep_statuses", "ti2", "session", "DepContext"], ["dep", "is_met", "ti2", "session"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.10257727869139223], ["grouper.models.permission.Permission", 0.09818541080937003], ["app.models.farm.Farm", 0.09707518502561203]], "kwargs": [], "session": [["grouper.models.user.User", 0.5785002728435193], ["grouper.models.base.session.Session", 0.2892501364217597]]}, "q_name": "test_parent_not_executed", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "dep": "", "op1": "", "op2": "", "op3": "", "start_date": "", "ti2": ""}, "variables_p": {"_": [["int", 0.3998753742297976], ["float", 0.35994758818418693], ["notifications.models.Notification", 0.09474727915764218]], "dep": [["dict", 0.4964108046382216], ["List[Dict[str, Any]]", 0.10868410332617368], ["int", 0.10401229666113569], ["Dict[str, str]", 0.0983963846955501]], "op1": [["str", 0.20133706815533653], ["dict", 0.18569329995177536], ["Dict[str, str]", 0.10439443260478797], ["list", 0.09764775773671645], ["Dict[str, Optional[str]]", 0.09097854209950135]], "op2": [["Dict[str, Any]", 0.29760629508896147], ["Pattern[Any]", 0.15042644379089065], ["Dict[str, Union[Any, Any, Any]]", 0.10820013402802083], ["List[str]", 0.09381070794816489], ["Dict[int, int]", 0.0933214386881834], ["str", 0.08722486614574547], ["dict", 0.0855695151296567], ["Dict[str, Dict[str, Any]]", 0.08384059918037658]], "op3": [["Pattern[Any]", 0.31009746229780155], ["str", 0.25306320510175906], ["Dict[str, str]", 0.17917338048540177], ["Dict[str, Union[Any, Any, Any]]", 0.09322078256194516], ["Dict[int, Any]", 0.07995347773597332]], "start_date": [], "ti2": [["list", 0.19524252157426636], ["alerta.models.alerAlert", 0.10471107181256407], ["dict", 0.09130265862054499]]}}], "imports": ["__future__", "annotations", "pendulum", "pytest", "airflow", "models", "DagRun", "TaskInstance", "airflow", "operators", "empty", "EmptyOperator", "airflow", "operators", "python", "BranchPythonOperator", "airflow", "ti_deps", "dep_context", "DepContext", "airflow", "ti_deps", "deps", "not_previously_skipped_dep", "NotPreviouslySkippedDep", "airflow", "utils", "state", "State", "airflow", "utils", "types", "DagRunType"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 47}, "session_id": "J9kkRqb9TqFu7YJlgKjZjC-QT87EPQKN6w_DgFvmun4", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}