{"error": null, "response": {"classes": [{"cls_lc": [[107, 0], [123, 57]], "cls_var_ln": {"callback_ran": [[112, 4], [112, 16]], "dag_id": [[109, 4], [109, 10]], "execution_date": [[110, 4], [110, 18]], "task_id": [[108, 4], [108, 11]], "task_state_in_callback": [[111, 4], [111, 26]]}, "cls_var_occur": {"callback_ran": [], "dag_id": [], "execution_date": [], "task_id": [], "task_state_in_callback": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[114, 4], [119, 33]], "fn_var_ln": {"callback_ran": [[119, 8], [119, 25]], "dag_id": [[116, 8], [116, 19]], "execution_date": [[117, 8], [117, 27]], "task_id": [[115, 8], [115, 20]], "task_state_in_callback": [[118, 8], [118, 35]]}, "fn_var_occur": {"callback_ran": [["self", "callback_ran", "False"]], "dag_id": [["self", "dag_id", "ti", "dag_id"]], "execution_date": [["self", "execution_date", "ti", "execution_date"]], "task_id": [["self", "task_id", "ti", "task_id"]], "task_state_in_callback": [["self", "task_state_in_callback"]]}, "name": "wrap_task_instance", "params": {"self": "", "ti": ""}, "params_descr": {"self": "", "ti": ""}, "params_occur": {"self": [["self", "task_id", "ti", "task_id"], ["self", "dag_id", "ti", "dag_id"], ["self", "execution_date", "ti", "execution_date"], ["self", "task_state_in_callback"], ["self", "callback_ran", "False"]], "ti": [["self", "task_id", "ti", "task_id"], ["self", "dag_id", "ti", "dag_id"], ["self", "execution_date", "ti", "execution_date"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["Callable", 0.21183879207638687], ["str", 0.10165788829268531], ["viewer.models.Gallery", 0.09415717662522338], ["excars.models.profiles.Profile", 0.09008329937221901]]}, "q_name": "CallbackWrapper.wrap_task_instance", "ret_exprs": [], "ret_type": "", "variables": {"callback_ran": "", "dag_id": "", "execution_date": "", "task_id": "", "task_state_in_callback": ""}, "variables_p": {"callback_ran": [["int", 0.27712245872222524], ["float", 0.17820333225480273], ["Tuple[str, str]", 0.1683509055061248], ["\"Point\"", 0.0922355393685229], ["str", 0.08668882309001626]], "dag_id": [["int", 0.7764564279050963], ["str", 0.2235435720949038]], "execution_date": [["int", 0.8773544927562092], ["datetime.timedelta", 0.12264550724379095]], "task_id": [["str", 0.46586348035800795], ["set", 0.11672674535361059], ["list", 0.09121999258394262]], "task_state_in_callback": [["int", 0.8519918785643013], ["str", 0.1480081214356989]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[121, 4], [123, 57]], "fn_var_ln": {"callback_ran": [[122, 8], [122, 25]], "task_state_in_callback": [[123, 8], [123, 35]]}, "fn_var_occur": {"callback_ran": [["self", "callback_ran", "True"]], "task_state_in_callback": [["self", "task_state_in_callback", "context", "state"]]}, "name": "success_handler", "params": {"context": "", "self": ""}, "params_descr": {"context": "", "self": ""}, "params_occur": {"context": [["self", "task_state_in_callback", "context", "state"]], "self": [["self", "callback_ran", "True"], ["self", "task_state_in_callback", "context", "state"]]}, "params_p": {"args": [], "context": [["str", 0.2174980900285749], ["dict", 0.10171808044270068], ["bool", 0.09002224439717993]], "kwargs": [], "self": []}, "q_name": "CallbackWrapper.success_handler", "ret_exprs": [], "ret_type": "", "variables": {"callback_ran": "", "task_state_in_callback": ""}, "variables_p": {"callback_ran": [["BaseException", 0.1172413026207192], ["int", 0.10605287853200478], ["str", 0.09914764225679121], ["models.scenes.layouts.Layout", 0.09473477566543159]], "task_state_in_callback": [["int", 0.8140744367176763], ["Final", 0.10307729381074897], ["str", 0.08284826947157459]]}}], "name": "CallbackWrapper", "q_name": "CallbackWrapper", "variables": {"callback_ran": "", "dag_id": "str | None", "execution_date": "datetime.datetime | None", "task_id": "str | None", "task_state_in_callback": "str | None"}, "variables_p": {"callback_ran": [["str", 0.4], ["bool", 0.2], ["int", 0.1], ["set", 0.1]], "dag_id": [["Optional[str]", 0.09999999999999999], ["int", 0.09999999999999999], ["List[int]", 0.09999999999999999], ["services.ticketing.transfer.models.TicketID", 0.09999999999999999], ["Type[models.User]", 0.09999999999999999], ["shop.transfer.models.ShopID", 0.09999999999999999], ["Type[pipeline.netfile.models.AbstractSchedule]", 0.09999999999999999], ["shortcuts.actions.base.GroupIDField", 0.09999999999999999]], "execution_date": [["str", 0.5309981072561922], ["Dict[str, Dict[str, str]]", 0.14365386517434214], ["float", 0.13232945606051183], ["bytes", 0.10537212890330082], ["int", 0.08764644260565306]], "task_id": [["str", 0.4], ["Type[bot_app.models.Products]", 0.1], ["medtagger.types.TaskID", 0.1], ["Type[str]", 0.1], ["Optional[str]", 0.1]], "task_state_in_callback": [["int", 0.7], ["Tuple[int, float]", 0.09999999999999999], ["Dict[str, int]", 0.09999999999999999], ["Dict[str, Tuple[int, int]]", 0.09999999999999999]]}}, {"cls_lc": [[1657, 8], [1658, 16]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [], "name": "TestError", "q_name": "TestTaskInstance.test_post_execute_hook.<locals>.TestError", "variables": {}, "variables_p": {}}, {"cls_lc": [[1660, 8], [1663, 54]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1661, 12], [1663, 54]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "post_execute", "params": {"context": "", "result": "", "self": ""}, "params_descr": {"context": "", "result": "", "self": ""}, "params_occur": {"context": [], "result": [], "self": []}, "params_p": {"args": [], "context": [["str", 0.3383685104850616], ["bool", 0.32843609745551616], ["Callable", 0.11451387630356698]], "kwargs": [], "result": [["str", 0.3383685104850616], ["bool", 0.32843609745551616], ["Callable", 0.11451387630356698]], "self": []}, "q_name": "TestTaskInstance.test_post_execute_hook.<locals>.TestOperator.post_execute", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "name": "TestOperator", "q_name": "TestTaskInstance.test_post_execute_hook.<locals>.TestOperator", "variables": {}, "variables_p": {}}, {"cls_lc": [[126, 0], [3193, 95]], "cls_var_ln": {"_prev_dates_param_list": [[2229, 4], [2229, 26]]}, "cls_var_occur": {"_prev_dates_param_list": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[128, 4], [136, 26]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean_db", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.clean_db", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[138, 4], [143, 17]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "clean_db"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.setup_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[145, 4], [146, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "clean_db"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.teardown_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that tasks properly take start/end dates from DAGs", "long_descr": null, "ret": null}, "fn_lc": [[148, 4], [182, 72]], "fn_var_ln": {"op1": [[155, 8], [155, 11]], "op2": [[164, 8], [164, 11]], "op3": [[174, 8], [174, 11]]}, "fn_var_occur": {"op1": [["op1", "EmptyOperator", "task_id"], ["op1", "start_date", "None", "op1", "end_date", "None"], ["dag", "add_task", "op1"], ["op1", "start_date", "dag", "start_date", "op1", "end_date", "dag", "end_date"]], "op2": [["op2", "EmptyOperator", "task_id", "start_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["dag", "add_task", "op2"], ["op2", "start_date", "dag", "start_date", "op2", "end_date", "dag", "end_date"]], "op3": [["op3", "EmptyOperator", "task_id", "start_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["dag", "add_task", "op3"], ["op3", "start_date", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["op3", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days"]]}, "name": "test_set_task_dates", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [["base.Connection", 0.3006598674273824], ["core.models.Grouping", 0.20858522188375148], ["Callable", 0.09824995935917]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_set_task_dates", "ret_exprs": [], "ret_type": "", "variables": {"op1": "", "op2": "", "op3": ""}, "variables_p": {"op1": [["ofxtools.models.bank.xfer.INTRARS", 0.17999101595076053], ["arxiv.canonical.domain.version.Event", 0.106667900156587], ["int", 0.10115010051452299], ["ofxtools.models.common.STATUS", 0.09992539213364461], ["datetime.datetime.datetime", 0.09694175661890408], ["o2a.converter.task_group.TaskGroup", 0.09222582218090704], ["legistar.models.MatterStatus", 0.09070214113500748]], "op2": [["str", 0.17820959630394406], ["Dict[str, Dict[str, Any]]", 0.10825322772901652], ["datetime.datetime", 0.10026438651507795], ["datetime.datetime.datetime", 0.09990474230733147], ["uuid.UUID", 0.09309433229560451], ["datetime.date", 0.08649922546551718]], "op3": [["str", 0.17820959630394406], ["Dict[str, Dict[str, Any]]", 0.10825322772901652], ["datetime.datetime", 0.10026438651507795], ["datetime.datetime.datetime", 0.09990474230733147], ["uuid.UUID", 0.09309433229560451], ["datetime.date", 0.08649922546551718]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[184, 4], [188, 65]], "fn_var_ln": {"ti": [[185, 8], [185, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance", "session", "session"], ["ti", "current_state", "session", "session", "None"], ["ti", "run"], ["ti", "current_state", "session", "session", "State", "SUCCESS"]]}, "name": "test_current_state", "params": {"create_task_instance": "", "self": "", "session": ""}, "params_descr": {"create_task_instance": "", "self": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "session", "session"]], "self": [], "session": [["ti", "create_task_instance", "session", "session"], ["ti", "current_state", "session", "session", "None"], ["ti", "current_state", "session", "session", "State", "SUCCESS"]]}, "params_p": {"args": [], "create_task_instance": [["zam_repondeur.models.Dossier", 0.09604679782807284], ["zerver.models.UserProfile", 0.08843839151837658]], "kwargs": [], "self": [], "session": [["serverwamp.session.WAMPSession", 0.09927726970853354], ["recidiviz.persistence.database.session.Session", 0.09319159685847718]]}, "q_name": "TestTaskInstance.test_current_state", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.451735056647269], ["str", 0.26564113965581165], ["golem.rpc.session.WebSocketAddress", 0.10356053353318206]]}}, {"docstring": {"func": "Test assigning Operators to Dags, including deferred assignment", "long_descr": null, "ret": null}, "fn_lc": [[190, 4], [219, 30]], "fn_var_ln": {"dag": [[216, 8], [216, 14]], "op": [[198, 8], [198, 10]]}, "fn_var_occur": {"dag": [["dag_maker", "dag"], ["op", "dag"], ["op", "dag", "dag"], ["op", "dag", "dag2"], ["op", "dag", "dag"], ["op", "dag", "dag"], ["op", "dag", "tasks"]], "op": [["op", "EmptyOperator", "task_id"], ["op", "has_dag"], ["getattr", "op"], ["op", "dag"], ["op", "dag", "dag"], ["op", "dag", "dag2"], ["op", "dag", "dag"], ["op", "dag", "dag"], ["op", "dag", "tasks"]]}, "name": "test_set_dag", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag"], ["dag_maker", "dag2"]], "self": []}, "params_p": {"args": [], "dag_maker": [["core.models.Recipe", 0.12688809994544914], ["Tuple[int, int]", 0.11527701062556939], ["tests.basilisp.helpers.CompileFn", 0.08505813530912038]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_set_dag", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "op": ""}, "variables_p": {"dag": [["sqlite3.dbapi2.Connection", 0.3724170926822583], ["sqlite3.Connection", 0.13931267068479491], ["multiprocessing.connection.Listener", 0.13276587488360117]], "op": [["str", 0.2976636065163747], ["list", 0.23766856544578635], ["RuntimeError", 0.09787698423810738], ["jumeaux.models.Report", 0.08820358463324467], ["dict", 0.08763413802314908]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[221, 4], [245, 42]], "fn_var_ln": {"_": [[227, 8], [227, 9]], "dag": [[237, 8], [237, 15]], "op1": [[222, 8], [222, 11]], "op2": [[223, 8], [223, 11]], "op3": [[225, 13], [225, 16]], "op4": [[227, 11], [227, 14]]}, "fn_var_occur": {"_": [["_", "op4", "create_dummy_dag", "task_id"]], "dag": [["dag", "op3", "create_dummy_dag", "task_id"], ["op1", "dag", "dag"], ["op2", "dag", "dag"]], "op1": [["op1", "EmptyOperator", "task_id"], ["i", "has_dag", "i", "op1", "op2", "op3", "op4", "False", "False", "True", "True"], ["op1", "set_downstream", "op2"], ["op1", "dag", "dag"], ["op1", "set_downstream", "op2"], ["op1", "set_downstream", "op4"], ["op1", "set_downstream", "op3", "op4"]], "op2": [["op2", "EmptyOperator", "task_id"], ["i", "has_dag", "i", "op1", "op2", "op3", "op4", "False", "False", "True", "True"], ["op1", "set_downstream", "op2"], ["op1", "set_downstream", "op2"], ["op2", "dag", "dag"]], "op3": [["dag", "op3", "create_dummy_dag", "task_id"], ["i", "has_dag", "i", "op1", "op2", "op3", "op4", "False", "False", "True", "True"], ["op1", "set_downstream", "op3", "op4"]], "op4": [["_", "op4", "create_dummy_dag", "task_id"], ["i", "has_dag", "i", "op1", "op2", "op3", "op4", "False", "False", "True", "True"], ["op1", "set_downstream", "op4"], ["op1", "set_downstream", "op3", "op4"]]}, "name": "test_infer_dag", "params": {"create_dummy_dag": "", "self": ""}, "params_descr": {"create_dummy_dag": "", "self": ""}, "params_occur": {"create_dummy_dag": [["dag", "op3", "create_dummy_dag", "task_id"], ["_", "op4", "create_dummy_dag", "task_id"]], "self": []}, "params_p": {"args": [], "create_dummy_dag": [["int", 0.6078330882479637], ["str", 0.10111278166470133]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_infer_dag", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "dag": "", "op1": "", "op2": "", "op3": "", "op4": ""}, "variables_p": {"_": [["List[str]", 0.2980808906195982], ["int", 0.2867194528627455], ["Optional[Match[str]]", 0.11345450661794734], ["Pattern[str]", 0.07133622318664094], ["Dict[int, str]", 0.06775218846773301]], "dag": [["int", 0.8362636115556318], ["str", 0.08352772346270201]], "op1": [["int", 0.323279580784748], ["Dict[str, Any]", 0.10756701531363824], ["Pattern[Any]", 0.100763891423531], ["Optional[str]", 0.09184105281595796], ["List[str]", 0.08519415114134754]], "op2": [["int", 0.323279580784748], ["Dict[str, Any]", 0.10756701531363824], ["Pattern[Any]", 0.100763891423531], ["Optional[str]", 0.09184105281595796], ["List[str]", 0.08519415114134754]], "op3": [["int", 0.42656091241786165], ["str", 0.09701002482719095], ["golem.task.taskrequestorstats.FinishedTasksStats", 0.09275693986453531], ["bytes", 0.09130715640433533], ["Pattern[Any]", 0.08407123259105967]], "op4": [["int", 0.29708010252977735], ["str", 0.2771961294890628], ["Dict[int, bytes]", 0.11670958257678472]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[247, 4], [257, 41]], "fn_var_ln": {"op1": [[249, 12], [249, 15]], "op2": [[250, 12], [250, 15]], "op3": [[251, 12], [251, 15]]}, "fn_var_occur": {"op1": [["op1", "EmptyOperator", "task_id"], ["op1", "op2", "op3"], ["op2", "op1", "downstream_list"]], "op2": [["op2", "EmptyOperator", "task_id"], ["op1", "op2", "op3"], ["op2", "op1", "downstream_list"], ["op2", "op3", "downstream_list"]], "op3": [["op3", "EmptyOperator", "task_id"], ["op1", "op2", "op3"], ["op2", "op3", "downstream_list"]]}, "name": "test_bitshift_compose_operators", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_bitshift_compose_operators", "ret_exprs": [], "ret_type": "", "variables": {"op1": "", "op2": "", "op3": ""}, "variables_p": {"op1": [["Dict[str, Any]", 0.3184307105575639], ["Pattern[Any]", 0.12141314706498461], ["dict", 0.1040789618200076], ["int", 0.09870236364187308], ["Dict[str, Union[Any, Any]]", 0.09743418533265202], ["Dict[str, Literal]", 0.08232810887242714], ["str", 0.08161881364860067]], "op2": [["Dict[str, Any]", 0.2905882396781925], ["dict", 0.19200163689586294], ["Pattern[Any]", 0.11088878156846592], ["Dict[int, int]", 0.09153209092384626], ["Dict[str, Literal]", 0.09068506258808569]], "op3": [["Dict[str, Any]", 0.3184307105575639], ["Pattern[Any]", 0.12141314706498461], ["dict", 0.1040789618200076], ["int", 0.09870236364187308], ["Dict[str, Union[Any, Any]]", 0.09743418533265202], ["Dict[str, Literal]", 0.08232810887242714], ["str", 0.08161881364860067]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[259, 4], [263, 31]], "fn_var_ln": {"ti": [[260, 8], [260, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance"], ["ti", "log", "name"], ["ti", "test_mode"]]}, "name": "test_init_on_load", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_init_on_load", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["str", 0.5209955590716309], ["List[int]", 0.09715713323528194], ["bool", 0.09200452905683545]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[266, 4], [277, 37]], "fn_var_ln": {"return_value": [[267, 8], [267, 45]], "ti": [[269, 8], [269, 10]]}, "fn_var_occur": {"return_value": [["mock_concurrency_reached", "return_value", "True"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_runs", "max_active_tasks", "dagrun_state", "State", "QUEUED"], ["ti", "run"], ["ti", "state", "State", "NONE"]]}, "name": "test_requeue_over_dag_concurrency", "params": {"create_task_instance": "", "mock_concurrency_reached": "", "self": ""}, "params_descr": {"create_task_instance": "", "mock_concurrency_reached": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_runs", "max_active_tasks", "dagrun_state", "State", "QUEUED"]], "mock_concurrency_reached": [["mock_concurrency_reached", "return_value", "True"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["aiohttp.test_utils.TestServer", 0.0930813119618303], ["tests.async_mock.MagicMock", 0.09171845429252956]], "kwargs": [], "mock_concurrency_reached": [], "self": []}, "q_name": "TestTaskInstance.test_requeue_over_dag_concurrency", "ret_exprs": [], "ret_type": "", "variables": {"return_value": "", "ti": ""}, "variables_p": {"return_value": [["list", 0.16029958167037964], ["List[str]", 0.14553720445254295], ["Optional[bytes]", 0.12694362101953677], ["str", 0.11176311340731358], ["Tuple[int, int]", 0.09377314312562458], ["int", 0.07926586939411204], ["Dict[str, Dict[str, Any]]", 0.06948960229955532]], "ti": [["int", 0.431759855834935], ["str", 0.22497161571368468], ["Dict[str, str]", 0.08969472394279827]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[279, 4], [290, 37]], "fn_var_ln": {"ti": [[280, 8], [280, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_tis_per_dag", "max_active_runs", "max_active_tasks", "dagrun_state", "State", "QUEUED"], ["ti", "run"], ["ti", "state", "State", "NONE"]]}, "name": "test_requeue_over_max_active_tis_per_dag", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_tis_per_dag", "max_active_runs", "max_active_tasks", "dagrun_state", "State", "QUEUED"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_requeue_over_max_active_tis_per_dag", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["int", 0.4649595539797038], ["str", 0.269509237853695], ["Dict[str, str]", 0.0950604405104028]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[292, 4], [303, 37]], "fn_var_ln": {"ti": [[293, 8], [293, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_tis_per_dagrun", "max_active_runs", "max_active_tasks", "dagrun_state", "State", "QUEUED"], ["ti", "run"], ["ti", "state", "State", "NONE"]]}, "name": "test_requeue_over_max_active_tis_per_dagrun", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_tis_per_dagrun", "max_active_runs", "max_active_tasks", "dagrun_state", "State", "QUEUED"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_requeue_over_max_active_tis_per_dagrun", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["int", 0.4649595539797038], ["str", 0.269509237853695], ["Dict[str, str]", 0.0950604405104028]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[305, 4], [317, 41]], "fn_var_ln": {"slots": [[314, 12], [314, 27]], "ti": [[306, 8], [306, 10]]}, "fn_var_occur": {"slots": [["test_pool", "slots"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_tis_per_dag", "max_active_runs", "max_active_tasks"], ["ti", "run"], ["ti", "state", "State", "NONE"]]}, "name": "test_requeue_over_pool_concurrency", "params": {"create_task_instance": "", "self": "", "test_pool": ""}, "params_descr": {"create_task_instance": "", "self": "", "test_pool": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "max_active_tis_per_dag", "max_active_runs", "max_active_tasks"]], "self": [], "test_pool": [["test_pool", "slots"]]}, "params_p": {"args": [], "create_task_instance": [["deeplearning.ml4pl.models.logger.Logger", 0.09477698012186529], ["bool", 0.08976551463266363], ["models.characters.character_base.Character", 0.08397193106938117]], "kwargs": [], "self": [], "test_pool": [["tests.conftesWorker", 0.11987791090918909], ["tests.components.withings.common.ComponentFactory", 0.0957659432818854]]}, "q_name": "TestTaskInstance.test_requeue_over_pool_concurrency", "ret_exprs": [], "ret_type": "", "variables": {"slots": "", "ti": ""}, "variables_p": {"slots": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "ti": [["int", 0.4049498246167369], ["str", 0.34674746002547396]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[320, 4], [352, 28]], "fn_var_ln": {"all_deps": [[335, 8], [335, 16]], "all_non_requeueable_deps": [[336, 8], [336, 32]], "class_name": [[339, 12], [339, 22]], "dep_patch": [[340, 12], [340, 21]], "method_patch": [[341, 12], [341, 24]], "patch_dict": [[337, 8], [337, 18]], "return_value": [[349, 12], [349, 34]], "state": [[330, 8], [330, 16]], "task": [[329, 8], [329, 15]], "ti": [[328, 8], [328, 10]]}, "fn_var_occur": {"all_deps": [["all_deps", "RUNNING_DEPS", "task", "deps"], ["all_non_requeueable_deps", "all_deps", "REQUEUEABLE_DEPS"]], "all_non_requeueable_deps": [["all_non_requeueable_deps", "all_deps", "REQUEUEABLE_DEPS"]], "class_name": [["class_name", "dep", "__class__", "__name__"], ["dep_patch", "patch", "dep", "__module__", "class_name", "dep", "_get_dep_statuses", "__name__"], ["method_patch", "return_value", "iter", "TIDepStatus", "class_name", "True"], ["patch_dict", "class_name", "dep_patch", "method_patch"], ["method_patch", "return_value", "iter", "TIDepStatus", "class_name", "False"], ["dep_patch", "return_value", "TIDepStatus", "class_name", "True"]], "dep_patch": [["dep_patch", "patch", "dep", "__module__", "class_name", "dep", "_get_dep_statuses", "__name__"], ["method_patch", "dep_patch", "start"], ["patch_dict", "class_name", "dep_patch", "method_patch"], ["dep_patch", "return_value", "TIDepStatus", "class_name", "True"], ["dep_patch", "stop"]], "method_patch": [["method_patch", "dep_patch", "start"], ["method_patch", "return_value", "iter", "TIDepStatus", "class_name", "True"], ["patch_dict", "class_name", "dep_patch", "method_patch"], ["method_patch", "return_value", "iter", "TIDepStatus", "class_name", "False"]], "patch_dict": [["patch_dict", "class_name", "dep_patch", "method_patch"], ["patch_dict", "items"], ["patch_dict", "values"]], "return_value": [["method_patch", "return_value", "iter", "TIDepStatus", "class_name", "True"], ["method_patch", "return_value", "iter", "TIDepStatus", "class_name", "False"], ["dep_patch", "return_value", "TIDepStatus", "class_name", "True"]], "state": [["ti", "state", "State", "QUEUED"], ["ti", "state", "State", "QUEUED"]], "task": [["task", "BaseSensorOperator", "task_id", "pool"], ["ti", "task", "task"], ["all_deps", "RUNNING_DEPS", "task", "deps"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "state", "State", "QUEUED"], ["session", "add", "ti"], ["ti", "run"], ["ti", "state", "State", "QUEUED"]]}, "name": "test_not_requeue_non_requeueable_task_instance", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.09389231012900437]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_not_requeue_non_requeueable_task_instance", "ret_exprs": [], "ret_type": "", "variables": {"all_deps": "", "all_non_requeueable_deps": "", "class_name": "", "dep_patch": "", "method_patch": "", "patch_dict": "", "return_value": "", "state": "", "task": "", "ti": ""}, "variables_p": {"all_deps": [["Optional[str]", 0.19322933720325772], ["Dict[str, Any]", 0.19322933720325772], ["List[str]", 0.18564712775032444], ["Dict[int, List[int]]", 0.1163275210153227], ["Type[Dict[str, Any]]", 0.11556783922072526], ["list", 0.10104824436891365], ["dict", 0.09495059323819847]], "all_non_requeueable_deps": [["bool", 0.3028024594591783], ["Set[Pattern[str]]", 0.1290883308496536], ["List[Dict[str, Any]]", 0.09758158687768353], ["dict", 0.08020127530275035]], "class_name": [["str", 0.19789956303150139], ["Dict[str, str]", 0.1397157136922929], ["Tuple[str]", 0.08838679949266293]], "dep_patch": [["str", 0.10624096362633967]], "method_patch": [["str", 0.17939115905927377], ["src.pip_shims.models.ShimmedPathCollection", 0.10306300991419166], ["List[str]", 0.10007001180292792], ["Optional[str]", 0.0949743003114253], ["core.models.MemberModels.Member", 0.08948315093785235]], "patch_dict": [["dict", 0.5058103506654887], ["Dict[str, str]", 0.23644170491743854], ["Dict[str, Any]", 0.09315149835679305], ["Mapping[str, Mapping[str, Any]]", 0.08320345673683412], ["Dict[str, Dict[str, str]]", 0.08139298932344549]], "return_value": [["Dict[str, str]", 0.20704420427682899], ["str", 0.17808989377612816], ["Optional[str]", 0.16763580387671545], ["Dict[str, Dict[str, Any]]", 0.13849482902027596], ["Generator[str, None, None]", 0.10307099863462697], ["Union[Literal, Literal]", 0.0844245585150432]], "state": [["str", 0.7999999999999999], ["Dict[str, str]", 0.1]], "task": [["list", 0.10885957279471263], ["List[None]", 0.07773803102236064], ["Dict[str, Union[Any, Any]]", 0.07183816385693319], ["Dict[str, Any]", 0.07158222871607332]], "ti": [["str", 0.3250094175815419], ["datetime.date.time.timezone", 0.10155383176973334], ["List[Tuple[str, Any]]", 0.09915495897883445], ["List[Variable[_T]]", 0.09031549436298753], ["List[dict]", 0.09012946021748255], ["Optional[excars.models.profiles.Profile]", 0.08843030051409305]]}}, {"docstring": {"func": "test that running task with mark_success param update task state", "long_descr": "as SUCCESS without running task despite it fails dependency checks.", "ret": null}, "fn_lc": [[354, 4], [366, 40]], "fn_var_ln": {"non_runnable_state": [[359, 8], [359, 26]], "ti": [[360, 8], [360, 10]]}, "fn_var_occur": {"non_runnable_state": [["non_runnable_state", "set", "State", "task_states", "RUNNABLE_STATES", "set", "State", "SUCCESS", "pop"], ["ti", "create_task_instance", "dag_id", "task_id", "state", "non_runnable_state"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "state", "non_runnable_state"], ["ti", "run", "mark_success", "True"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_mark_non_runnable_task_as_success", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "state", "non_runnable_state"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mark_non_runnable_task_as_success", "ret_exprs": [], "ret_type": "", "variables": {"non_runnable_state": "", "ti": ""}, "variables_p": {"non_runnable_state": [["dict", 0.3149869075513725], ["int", 0.10376456925203859], ["Dict[Variable[_KT], Variable[_VT]]", 0.10106753881211888], ["Dict[str, int]", 0.09415036289845807], ["Generator[Dict[str, Any], None, None]", 0.0931093218077367], ["Union[dict, Dict[int, str]]", 0.09216117803012905], ["Dict[Any, bool]", 0.09210651030008547]], "ti": [["int", 0.39958211454750786], ["str", 0.11358548369835804], ["List[str]", 0.09759340815658547]]}}, {"docstring": {"func": "test that running a task in an existing pool update task state as SUCCESS.", "long_descr": null, "ret": null}, "fn_lc": [[369, 4], [381, 40]], "fn_var_ln": {"ti": [[373, 8], [373, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance", "dag_id", "task_id", "pool"], ["ti", "run"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_run_pooling_task", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "pool"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["tracim.models.User", 0.23635992779449025], ["str", 0.09910973074294747], ["raiden.utils.TokenNetworkID", 0.09579652058607231], ["bool", 0.09414496397735843]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_run_pooling_task", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["List[str]", 0.5034962763097657], ["int", 0.289414105841562], ["Optional[Match[str]]", 0.09216970888565398], ["list", 0.06332048591008499], ["Dict[Any, str]", 0.05159942305293323]]}}, {"docstring": {"func": "test that try to create a task with pool_slots less than 1", "long_descr": null, "ret": null}, "fn_lc": [[384, 4], [396, 13]], "fn_var_ln": {"dag": [[390, 12], [390, 15]]}, "fn_var_occur": {"dag": [["dag", "models", "DAG", "dag_id"], ["EmptyOperator", "task_id", "dag", "dag", "pool", "pool_slots"]]}, "name": "test_pool_slots_property", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_pool_slots_property", "ret_exprs": [], "ret_type": "", "variables": {"dag": ""}, "variables_p": {"dag": [["int", 0.2926657713788627], ["byceps.services.user.transfer.models.User", 0.12510795128899455], ["notifications.models.Notification", 0.11510537836219045], ["app.models.Journey", 0.10049655015672676], ["Dict[str, str]", 0.0949044047539362], ["urllib.requesOpenerDirector", 0.0913766827216904], ["List[Tuple[Any, Any]]", 0.09115474890491826], ["cnaas_nms.db.device.Device", 0.08918851243268067]]}}, {"docstring": {"func": "test that updating the executor_config propagates to the TaskInstance DB", "long_descr": null, "ret": null}, "fn_lc": [[399, 4], [429, 26]], "fn_var_ln": {"dag": [[408, 8], [408, 11]], "executor_config": [[426, 8], [426, 27]], "task2": [[413, 8], [413, 13]], "ti": [[403, 8], [403, 10]], "ti2": [[420, 8], [420, 11]], "tis": [[411, 8], [411, 11]]}, "fn_var_occur": {"dag": [["dag", "ti", "task", "dag"], ["tis", "dag", "get_task_instances"], ["task2", "EmptyOperator", "task_id", "executor_config", "start_date", "timezone", "datetime", "dag", "dag"]], "executor_config": [["ti", "create_task_instance", "dag_id", "task_id", "executor_config"], ["tis", "executor_config"], ["task2", "EmptyOperator", "task_id", "executor_config", "start_date", "timezone", "datetime", "dag", "dag"], ["ti2", "executor_config", "None"], ["ti2", "executor_config"]], "task2": [["task2", "EmptyOperator", "task_id", "executor_config", "start_date", "timezone", "datetime", "dag", "dag"], ["ti2", "TI", "task", "task2", "run_id", "ti", "run_id"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "executor_config"], ["dag", "ti", "task", "dag"], ["ti", "run", "session", "session"], ["ti2", "TI", "task", "task2", "run_id", "ti", "run_id"]], "ti2": [["ti2", "TI", "task", "task2", "run_id", "ti", "run_id"], ["session", "add", "ti2"], ["ti2", "run", "session", "session"], ["ti2", "executor_config", "None"], ["ti2", "refresh_from_db", "session"], ["ti2", "executor_config"]], "tis": [["tis", "dag", "get_task_instances"], ["tis", "executor_config"]]}, "name": "test_ti_updates_with_task", "params": {"create_task_instance": "", "self": "", "session": ""}, "params_descr": {"create_task_instance": "", "self": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "executor_config"]], "self": [], "session": [["ti", "run", "session", "session"], ["session", "add", "ti2"], ["session", "flush"], ["ti2", "run", "session", "session"], ["ti2", "refresh_from_db", "session"], ["session", "rollback"]]}, "params_p": {"args": [], "create_task_instance": [["Optional[str]", 0.22037221489940192], ["str", 0.18234105628285915], ["clients.models.Client", 0.09117052814142958]], "kwargs": [], "self": [], "session": [["models.WalletRequest", 0.09842648895862872], ["sqlalchemy.orm.session.Session", 0.0873284849001784], ["Union[zerver.models.UserProfile, zilencer.models.RemoteZulipServer]", 0.08521048213917458], ["grouper.models.service_accounServiceAccount", 0.08288717460624295]]}, "q_name": "TestTaskInstance.test_ti_updates_with_task", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "executor_config": "", "task2": "", "ti": "", "ti2": "", "tis": ""}, "variables_p": {"dag": [["apps.wasm.task.WasmTaskOptions", 0.19077516893805893], ["Optional[int]", 0.17409967034204082], ["apps.rendering.task.renderingtaskstate.RenderingTaskDefinition", 0.1644321119142948], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.10594129534410829], ["golem.task.taskstate.SubtaskState", 0.10532610737386013], ["apps.blender.task.blenderrendertask.BlenderRenderTask", 0.07241351830933077]], "executor_config": [["str", 0.18762152232852372], ["List[str]", 0.13152512796344598], ["Dict[str, str]", 0.10341124187580839], ["Dict[str, Type[Any]]", 0.1000769170274737], ["dict", 0.1000769170274737], ["click.decorators._IdentityFunction", 0.08733751610778558], ["Tuple[Literal, Literal]", 0.08611965643963311], ["Dict[str, Union[Any, Any]]", 0.0782660120136667]], "task2": [["legistar.models.MatterStatus", 0.11489970977016921], ["str", 0.11478873751051161], ["zero.domain.task.Task", 0.10707035073962057], ["dict", 0.10236117326081982], ["Dict[str, Any]", 0.10067825939648396], ["list", 0.09756928728647467], ["int", 0.09281446279936931], ["List[Tuple[Any, str]]", 0.09051482525584681], ["app.models.user.User", 0.08979626323464959], ["arxiv.canonical.domain.version.Event", 0.08950693074605431]], "ti": [["str", 0.431753764489712], ["Dict[str, List[Any]]", 0.09803257211645756], ["List[str]", 0.09571247751951406], ["int", 0.09504822576968192]], "ti2": [["golem.task.taskstate.SubtaskState", 0.15336790837345327], ["golem.task.taskcomputer.TaskComputation", 0.11994861612522817], ["grpy.core.models.Grouping", 0.10996096547219285], ["list", 0.09713156710444422], ["golem.task.taskmanager.TaskManager", 0.0965118209871261], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.09500811268431408], ["restful_functions.modules.task.TaskStoreSettings", 0.08993256830932501], ["Dict[str, str]", 0.07976155431078555], ["golem.task.taskkeeper.TaskHeaderKeeper", 0.07876113216935181]], "tis": [["List[str]", 0.47901703274683605], ["Optional[str]", 0.11054822426415316], ["list", 0.1004731944542846], ["User.uuid.UUID", 0.09748557464099478]]}}, {"docstring": {"func": "test that running task in an existing pool with mark_success param", "long_descr": "update task state as SUCCESS without running task\ndespite it fails dependency checks.", "ret": null}, "fn_lc": [[431, 4], [443, 40]], "fn_var_ln": {"ti": [[437, 8], [437, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance", "dag_id", "task_id"], ["ti", "run", "mark_success", "True"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_run_pooling_task_with_mark_success", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["str", 0.10221888692386358], ["asgard.models.accounAccount", 0.10107915026379884], ["asgard.backends.base.Interval", 0.10107915026379884], ["dict", 0.10092252564543223]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_run_pooling_task_with_mark_success", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["int", 0.404887910620633], ["str", 0.173766933683222], ["Tuple[str, str, str, str, str, str, str]", 0.11339002566271558], ["Optional[Match[str]]", 0.0925055054565428]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[451, 8], [452, 38]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "raise_skip_exception", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_run_pooling_task_with_skip.<locals>.raise_skip_exception", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "test that running task which returns AirflowSkipOperator will end", "long_descr": "up in a SKIPPED state.", "ret": null}, "fn_lc": [[445, 4], [464, 40]], "fn_var_ln": {"dr": [[460, 8], [460, 10]], "task": [[462, 8], [462, 15]], "ti": [[461, 8], [461, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow"], ["ti", "dr", "task_instances"]], "task": [["task", "PythonOperator", "task_id", "python_callable", "raise_skip_exception"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["State", "SKIPPED", "ti", "state"]]}, "name": "test_run_pooling_task_with_skip", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["dr", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow"]], "self": []}, "params_p": {"args": [], "dag_maker": [["base.Connection", 0.08990175412495047]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_run_pooling_task_with_skip", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "task": "", "ti": ""}, "variables_p": {"dr": [["int", 0.23952639612587062], ["raiden.utils.SecretHash", 0.16316730342990218], ["raiden.utils.FeeAmount", 0.15967352031259707], ["str", 0.14354672684248637], ["Optional[hpaction.models.HPActionDocuments]", 0.1299283081004178], ["datetime.datetime", 0.08257409347377485], ["raiden.utils.TargetAddress", 0.08158365171495109]], "task": [["apps.core.task.coretaskstate.TaskDefinition", 0.180050013604809], ["reminders.task.Task", 0.0959987637180834]], "ti": [["str", 0.5], ["int", 0.4], ["bool", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[471, 8], [472, 43]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "task_function", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["os", "kill", "ti", "pid", "signal", "SIGTERM"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["int", 0.2997438644057009], ["bool", 0.12995798997515798], ["bytes", 0.11867299340821098], ["str", 0.06899917958702577]]}, "q_name": "TestTaskInstance.test_task_sigterm_calls_on_failure_callback.<locals>.task_function", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that ensures that tasks call on_failure_callback when they receive sigterm", "long_descr": null, "ret": null}, "fn_lc": [[466, 4], [486, 58]], "fn_var_ln": {"dr": [[481, 8], [481, 10]], "task": [[483, 8], [483, 15]], "task_": [[475, 12], [475, 17]], "ti": [[482, 8], [482, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "task": [["ti", "task", "task_"]], "task_": [["task_", "PythonOperator", "task_id", "python_callable", "task_function", "on_failure_callback", "context", "context", "log", "info"], ["ti", "task", "task_"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task_"], ["ti", "run"]]}, "name": "test_task_sigterm_calls_on_failure_callback", "params": {"caplog": "", "dag_maker": "", "self": ""}, "params_descr": {"caplog": "", "dag_maker": "", "self": ""}, "params_occur": {"caplog": [["caplog", "text"]], "dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "caplog": [["str", 0.24931493184102993], ["int", 0.15942797801228395], ["Iterable[Any]", 0.07629855219780235], ["bool", 0.07509759958334344]], "dag_maker": [["str", 0.17076510685429197], ["pathlib.Path", 0.16084889902842647]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_task_sigterm_calls_on_failure_callback", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "task": "", "task_": "", "ti": ""}, "variables_p": {"dr": [["str", 0.19102769262823638], ["int", 0.17162166477055174], ["bytes", 0.13147271979782202], ["bool", 0.10824312554182834], ["dict", 0.10110987431707087], ["list", 0.0800386718608339]], "task": [["Dict[str, int]", 0.1886597764962033], ["Dict[str, Union[Any, Any]]", 0.11517890082284353], ["Dict[str, str]", 0.1080086805020957], ["Set[str]", 0.09878865092122546], ["List[None]", 0.09426762621127903], ["str", 0.09087841804768251], ["KeysView[str]", 0.08865312924708396]], "task_": [["list", 0.1342468226896785], ["annofabapi.dataclass.task.Task", 0.11549893827079176], ["List[str]", 0.10193516124086477], ["int", 0.07160188273818656], ["str", 0.07006876941063905], ["Dict[str, Any]", 0.06888073386381077]], "ti": [["str", 0.7321120393688458], ["Dict[str, List[Any]]", 0.08986410532634215], ["Union[Literal, str]", 0.0859451673673026]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[493, 8], [494, 43]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "task_function", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["os", "kill", "ti", "pid", "signal", "SIGTERM"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["int", 0.2997438644057009], ["bool", 0.12995798997515798], ["bytes", 0.11867299340821098], ["str", 0.06899917958702577]]}, "q_name": "TestTaskInstance.test_task_sigterm_works_with_retries.<locals>.task_function", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that ensures that tasks are retried when they receive sigterm", "long_descr": null, "ret": null}, "fn_lc": [[488, 4], [510, 45]], "fn_var_ln": {"dr": [[504, 8], [504, 10]], "task": [[506, 8], [506, 15]], "ti": [[505, 8], [505, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "task": [["task", "PythonOperator", "task_id", "python_callable", "task_function", "retries", "retry_delay", "datetime", "timedelta", "seconds"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["ti", "refresh_from_db"], ["ti", "state", "State", "UP_FOR_RETRY"]]}, "name": "test_task_sigterm_works_with_retries", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [["int", 0.19271988259573591], ["str", 0.11519887300925005], ["pathlib.Path", 0.09703570059438976]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_task_sigterm_works_with_retries", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.19102769262823638], ["int", 0.17162166477055174], ["bytes", 0.13147271979782202], ["bool", 0.10824312554182834], ["dict", 0.10110987431707087], ["list", 0.0800386718608339]], "task": [["dict", 0.2102767016205671], ["Dict[str, Union[float, str]]", 0.1778699540329568], ["Dict[str, Dict[str, int]]", 0.14076022717525646], ["list", 0.10388928612592886], ["legistar.models.MatterStatus", 0.09220681174439363], ["Dict[str, Union[int, str]]", 0.09195325483749617], ["Dict[str, Optional[str]]", 0.08705036538731611]], "ti": [["str", 0.5], ["int", 0.4], ["bool", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[516, 8], [520, 36]], "fn_var_ln": {"state": [[517, 12], [517, 20]]}, "fn_var_occur": {"state": [["ti", "state", "state"]]}, "name": "task_function", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["ti", "state", "state"], ["session", "merge", "ti"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["str", 0.39951588555743894], ["zerver.models.Recipient", 0.2134490199407069], ["state.ball.Ball", 0.09804786799518558], ["zerver.models.Realm", 0.0953079759151729]]}, "q_name": "TestTaskInstance.test_task_sigterm_doesnt_change_state_of_finished_tasks.<locals>.task_function", "ret_exprs": [], "ret_type": "", "variables": {"state": ""}, "variables_p": {"state": [["str", 0.7999999999999999], ["Dict[str, str]", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[513, 4], [534, 25]], "fn_var_ln": {"dr": [[528, 8], [528, 10]], "session": [[514, 8], [514, 15]], "task": [[530, 8], [530, 15]], "ti": [[529, 8], [529, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "session": [], "task": [["task", "PythonOperator", "task_id", "python_callable", "task_function"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["ti", "refresh_from_db"], ["ti", "state", "state"]]}, "name": "test_task_sigterm_doesnt_change_state_of_finished_tasks", "params": {"dag_maker": "", "self": "", "state": ""}, "params_descr": {"dag_maker": "", "self": "", "state": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": [], "state": [["ti", "state", "state"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.6158119288756708], ["raiden.utils.Dict[raiden.utils.Any, raiden.utils.Any]", 0.07556092480535825], ["raiden.utils.List[raiden.utils.Address]", 0.07538083885139148], ["int", 0.07495254905325811], ["Sequence[Sequence[str]]", 0.07273168074357761]], "kwargs": [], "self": [], "state": [["str", 0.43816840382537353], ["raiden.utils.TokenAmount", 0.22532398105627954], ["Hashable", 0.08251741332171421]]}, "q_name": "TestTaskInstance.test_task_sigterm_doesnt_change_state_of_finished_tasks", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "session": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.19102769262823638], ["int", 0.17162166477055174], ["bytes", 0.13147271979782202], ["bool", 0.10824312554182834], ["dict", 0.10110987431707087], ["list", 0.0800386718608339]], "session": [["int", 0.29999999999999993], ["session.HexpySession", 0.09999999999999998], ["str", 0.09999999999999998], ["float", 0.09999999999999998], ["sqlalchemy.orm.session.Session", 0.09999999999999998]], "task": [["Dict[Any, str]", 0.210750684378055], ["Dict[str, Dict[str, int]]", 0.12520115660612227], ["dict", 0.07025022812601833], ["Dict[str, Any]", 0.06971630381382203], ["Dict[str, str]", 0.059557171010363216]], "ti": [["str", 0.5], ["int", 0.4], ["bool", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[552, 8], [554, 31]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_raise_if_exception", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_task_wipes_next_fields.<locals>._raise_if_exception", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that ensures that tasks wipe their next_method and next_kwargs", "long_descr": "when the TI enters one of the configured states.", "ret": null}, "fn_lc": [[546, 4], [581, 32]], "fn_var_ln": {"dr": [[564, 8], [564, 10]], "next_kwargs": [[567, 8], [567, 22]], "next_method": [[566, 8], [566, 22]], "task": [[571, 8], [571, 15]], "ti": [[565, 8], [565, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "next_kwargs": [["ti", "next_kwargs"], ["ti", "next_kwargs", "None"]], "next_method": [["ti", "next_method"], ["ti", "next_method", "None"]], "task": [["task", "PythonOperator", "task_id", "python_callable", "_raise_if_exception", "retries", "retries", "retry_delay", "datetime", "timedelta", "seconds"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "next_method"], ["ti", "next_kwargs"], ["session", "merge", "ti"], ["ti", "task", "task"], ["ti", "run"], ["ti", "run"], ["ti", "refresh_from_db"], ["ti", "next_method", "None"], ["ti", "next_kwargs", "None"], ["ti", "state", "state"]]}, "name": "test_task_wipes_next_fields", "params": {"dag_maker": "", "exception": "", "retries": "", "self": "", "session": "", "state": ""}, "params_descr": {"dag_maker": "", "exception": "", "retries": "", "self": "", "session": "", "state": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "exception": [["pytest", "raises", "exception"]], "retries": [["task", "PythonOperator", "task_id", "python_callable", "_raise_if_exception", "retries", "retries", "retry_delay", "datetime", "timedelta", "seconds"]], "self": [], "session": [["session", "merge", "ti"], ["session", "commit"]], "state": [["state", "State", "FAILED", "State", "UP_FOR_RETRY"], ["ti", "state", "state"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.7073607494052243], ["models.PermissionLookup", 0.11435932671371722], ["tuple", 0.08998514306908699], ["Optional[str]", 0.08829478081197156]], "exception": [["int", 0.14736155024736539], ["bool", 0.09949208962085151], ["Optional[str]", 0.08433968118845932], ["Iterable[models.Course]", 0.0837540938446261], ["str", 0.07368077512368269]], "kwargs": [], "retries": [["zerver.models.UserProfile", 0.11851605339268619], ["bool", 0.1170650075950832], ["transfer.models.User", 0.10621716878324826], ["str", 0.10043404301271074], ["int", 0.09287530467159982], ["cmk.utils.type_defs.UserId", 0.08865310151632168]], "self": [], "session": [["bool", 0.21448452185824587], ["sqlalchemy.orm.session.Session", 0.09440610775093441], ["Optional[str]", 0.08336445415770503], ["Callable[[], T]", 0.08295819450916085]], "state": [["raiden.utils.TokenAddress", 0.27660853036454774], ["int", 0.20825818080789676], ["Optional[str]", 0.13266499356412448], ["bytes", 0.10172635228176227], ["str", 0.09750210655620786], ["uuid.UUID", 0.09248715439096457]]}, "q_name": "TestTaskInstance.test_task_wipes_next_fields", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "next_kwargs": "", "next_method": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.19102769262823638], ["int", 0.17162166477055174], ["bytes", 0.13147271979782202], ["bool", 0.10824312554182834], ["dict", 0.10110987431707087], ["list", 0.0800386718608339]], "next_kwargs": [["Dict[str, int]", 0.19715204355043703], ["Dict[str, Any]", 0.10472646716681096], ["Dict[int, Dict[int, Any]]", 0.09881546415267294], ["Dict[int, int]", 0.09442279394642063], ["bool", 0.09297709859032623], ["List[Dict[str, Any]]", 0.0928259577704068], ["Dict[str, bool]", 0.09165015192566298]], "next_method": [["str", 0.7999999999999999], ["Set[int]", 0.09999999999999999]], "task": [["Dict[str, Union[float, str]]", 0.19773677905282083], ["tests.components.withings.common.WebhookResponse", 0.195131968888353], ["Dict[str, Union[int, str]]", 0.10100708027543384], ["Dict[str, Any]", 0.0989216954667933]], "ti": [["str", 0.4795864729285338], ["float", 0.29089856018551635], ["Dict[str, str]", 0.09439717513044124]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[596, 8], [600, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "run_with_error", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["ti", "run"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["int", 0.29137003349007057], ["str", 0.1771671086688038], ["twisted.python.failure.Failure", 0.13813550951536024], ["Iterator", 0.11616923117483888], ["Dict[str, Any]", 0.09768189156054725]]}, "q_name": "TestTaskInstance.test_retry_delay.<locals>.run_with_error", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that retry delays are respected", "long_descr": null, "ret": null}, "fn_lc": [[583, 4], [619, 39]], "fn_var_ln": {"task": [[603, 8], [603, 15]], "ti": [[602, 8], [602, 10]]}, "fn_var_occur": {"task": [["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "try_number"], ["run_with_error", "ti"], ["ti", "state", "State", "UP_FOR_RETRY"], ["ti", "try_number"], ["run_with_error", "ti"], ["ti", "state", "State", "UP_FOR_RETRY"], ["run_with_error", "ti"], ["ti", "state", "State", "FAILED"]]}, "name": "test_retry_delay", "params": {"dag_maker": "", "self": "", "time_machine": ""}, "params_descr": {"dag_maker": "", "self": "", "time_machine": ""}, "params_occur": {"dag_maker": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": [], "time_machine": [["time_machine", "coordinates", "shift"], ["time_machine", "coordinates", "shift", "datetime", "datetime", "resolution"]]}, "params_p": {"args": [], "dag_maker": [["raiden.utils.TokenAmount", 0.22819513987584825], ["str", 0.22701951215330765], ["int", 0.19666654939138506], ["datetime.date.time", 0.09728293457200642]], "kwargs": [], "self": [], "time_machine": [["datetime.date.time", 0.19627627032801545], ["datetime.datetime", 0.1665638478702647], ["int", 0.105887386510344], ["datetime.timedelta", 0.10176294008476723], ["Optional[str]", 0.07796105504410548]]}, "q_name": "TestTaskInstance.test_retry_delay", "ret_exprs": [], "ret_type": "", "variables": {"task": "", "ti": ""}, "variables_p": {"task": [["Dict[str, int]", 0.1886597764962033], ["Dict[str, Union[Any, Any]]", 0.11517890082284353], ["Dict[str, str]", 0.1080086805020957], ["Set[str]", 0.09878865092122546], ["List[None]", 0.09426762621127903], ["str", 0.09087841804768251], ["KeysView[str]", 0.08865312924708396]], "ti": [["str", 0.6701834608474911], ["datetime.date.time.timezone", 0.08430917511135903]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[635, 8], [639, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "run_with_error", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["ti", "run"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["int", 0.29137003349007057], ["str", 0.1771671086688038], ["twisted.python.failure.Failure", 0.13813550951536024], ["Iterator", 0.11616923117483888], ["Dict[str, Any]", 0.09768189156054725]]}, "q_name": "TestTaskInstance.test_retry_handling.<locals>.run_with_error", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that task retries are handled properly", "long_descr": null, "ret": null}, "fn_lc": [[621, 4], [673, 97]], "fn_var_ln": {"expected_rendered_ti_fields": [[625, 8], [625, 35]], "task": [[642, 8], [642, 15]], "ti": [[641, 8], [641, 10]]}, "fn_var_occur": {"expected_rendered_ti_fields": [["RenderedTaskInstanceFields", "get_templated_fields", "ti", "expected_rendered_ti_fields"]], "task": [["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "try_number"], ["run_with_error", "ti"], ["ti", "state", "State", "UP_FOR_RETRY"], ["ti", "_try_number"], ["ti", "try_number"], ["run_with_error", "ti"], ["ti", "state", "State", "FAILED"], ["ti", "_try_number"], ["ti", "try_number"], ["run_with_error", "ti"], ["ti", "state", "State", "UP_FOR_RETRY"], ["ti", "_try_number"], ["ti", "try_number"], ["run_with_error", "ti"], ["ti", "refresh_from_db"], ["ti", "state", "State", "FAILED"], ["ti", "_try_number"], ["ti", "try_number"], ["RenderedTaskInstanceFields", "get_templated_fields", "ti", "expected_rendered_ti_fields"]]}, "name": "test_retry_handling", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["str", 0.20170590684890993], ["int", 0.19575535609590225], ["datetime.date.time", 0.10364104627962188], ["web3.types.LogReceipt", 0.07899928537584261], ["app.models.user.User.InDB", 0.07560977429927217]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_retry_handling", "ret_exprs": [], "ret_type": "", "variables": {"expected_rendered_ti_fields": "", "task": "", "ti": ""}, "variables_p": {"expected_rendered_ti_fields": [["str", 0.20122570565517472], ["dict", 0.12845194115606595], ["RuntimeError", 0.1224326042733744], ["Dict[str, str]", 0.09575208205973854]], "task": [["Dict[str, int]", 0.1886597764962033], ["Dict[str, Union[Any, Any]]", 0.11517890082284353], ["Dict[str, str]", 0.1080086805020957], ["Set[str]", 0.09878865092122546], ["List[None]", 0.09426762621127903], ["str", 0.09087841804768251], ["KeysView[str]", 0.08865312924708396]], "ti": [["str", 0.6701834608474911], ["datetime.date.time.timezone", 0.08430917511135903]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[675, 4], [715, 46]], "fn_var_ln": {"date": [[714, 8], [714, 12]], "delay": [[676, 8], [676, 13]], "end_date": [[690, 8], [690, 19]], "max_delay": [[677, 8], [677, 17]], "period": [[706, 8], [706, 14]], "task": [[689, 8], [689, 15]], "ti": [[688, 8], [688, 10]], "try_number": [[713, 8], [713, 21]]}, "fn_var_occur": {"date": [["date", "ti", "next_retry_datetime"], ["date", "period"], ["date", "ti", "next_retry_datetime"], ["date", "period"], ["date", "ti", "next_retry_datetime"], ["date", "period"], ["date", "ti", "next_retry_datetime"], ["date", "ti", "end_date", "max_delay"], ["date", "ti", "next_retry_datetime"], ["date", "ti", "end_date", "max_delay"]], "delay": [["delay", "datetime", "timedelta", "seconds"], ["task", "BashOperator", "task_id", "bash_command", "retries", "retry_delay", "delay", "retry_exponential_backoff", "True", "max_retry_delay", "max_delay"]], "end_date": [["ti", "end_date", "pendulum", "instance", "timezone", "utcnow"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["date", "ti", "end_date", "max_delay"], ["date", "ti", "end_date", "max_delay"]], "max_delay": [["max_delay", "datetime", "timedelta", "minutes"], ["task", "BashOperator", "task_id", "bash_command", "retries", "retry_delay", "delay", "retry_exponential_backoff", "True", "max_retry_delay", "max_delay"], ["date", "ti", "end_date", "max_delay"], ["date", "ti", "end_date", "max_delay"]], "period": [["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["date", "period"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["date", "period"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["date", "period"]], "task": [["task", "BashOperator", "task_id", "bash_command", "retries", "retry_delay", "delay", "retry_exponential_backoff", "True", "max_retry_delay", "max_delay"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "task_instances"], ["ti", "task", "task"], ["ti", "end_date", "pendulum", "instance", "timezone", "utcnow"], ["date", "ti", "next_retry_datetime"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["ti", "try_number"], ["date", "ti", "next_retry_datetime"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["ti", "try_number"], ["date", "ti", "next_retry_datetime"], ["period", "ti", "end_date", "add", "seconds", "ti", "end_date", "add", "seconds"], ["ti", "try_number"], ["date", "ti", "next_retry_datetime"], ["date", "ti", "end_date", "max_delay"], ["ti", "try_number"], ["date", "ti", "next_retry_datetime"], ["date", "ti", "end_date", "max_delay"]], "try_number": [["ti", "try_number"], ["ti", "try_number"], ["ti", "try_number"], ["ti", "try_number"]]}, "name": "test_next_retry_datetime", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["int", 0.1053659523962944], ["pathlib.Path", 0.08597169549124538]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_next_retry_datetime", "ret_exprs": [], "ret_type": "", "variables": {"date": "", "delay": "", "end_date": "", "max_delay": "", "period": "", "task": "", "ti": "", "try_number": ""}, "variables_p": {"date": [["datetime.datetime", 0.27458561992880326], ["Dict[Any, List[str]]", 0.10235279156409342], ["Pattern[bytes]", 0.09471450784814253], ["list", 0.09415510217219514], ["str", 0.08480008182497194], ["int", 0.08022775269980824]], "delay": [["int", 0.3327880120386083], ["datetime.timedelta", 0.2885789302866556], ["preacher.core.datetime.DatetimeWithFormat", 0.18054745623093785], ["datetime.datetime", 0.10909998843515527], ["datetime.datetime.datetime", 0.08898561300864309]], "end_date": [["datetime.datetime.datetime", 0.20378588684857782], ["datetime.datetime", 0.19682639400942847], ["datetime.date.time.date", 0.17144308297334368], ["datetime.date", 0.16736239044909862], ["str", 0.09899143245376922], ["Dict[Any, List[str]]", 0.08245640470197994]], "max_delay": [["datetime.timedelta", 0.4311857688006402], ["int", 0.27796842899707225], ["dict", 0.11887248305761478], ["str", 0.0897661787386086]], "period": [["List[int]", 0.15300798703284596], ["list", 0.15192215900118788], ["str", 0.09981215415175797], ["int", 0.08092586998383479], ["Tuple[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]", 0.07995043137669253], ["Type[leasing.models.invoice.InvoiceSet]", 0.07912841056179513]], "task": [["pytch.utils.Position", 0.24348284491079178], ["list", 0.10252734671803432], ["List[str]", 0.10106807587504738], ["int", 0.09952674112220154], ["bytes", 0.09666259824352968], ["range", 0.09147799037480588], ["DefaultDict[Any, List[Any]]", 0.08938826925880916], ["str", 0.08891121005079052], ["List[Tuple[Any, Any, Any]]", 0.08695492344598962]], "ti": [["int", 0.3174386860386044], ["str", 0.181931951241586], ["byceps.services.user.transfer.models.User", 0.12269854359195573], ["Dict[str, Any]", 0.11039561115200383], ["datetime.datetime", 0.0916032225499572], ["buza.models.Subject", 0.08672974475990627]], "try_number": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[718, 4], [736, 66]], "fn_var_ln": {"date": [[735, 8], [735, 12]], "delay": [[719, 8], [719, 13]], "end_date": [[733, 8], [733, 19]], "max_delay": [[720, 8], [720, 17]], "task": [[732, 8], [732, 15]], "ti": [[731, 8], [731, 10]]}, "fn_var_occur": {"date": [["date", "ti", "next_retry_datetime"], ["date", "ti", "end_date", "datetime", "timedelta", "seconds"]], "delay": [["delay", "datetime", "timedelta", "seconds", "seconds"], ["task", "BashOperator", "task_id", "bash_command", "retries", "retry_delay", "delay", "retry_exponential_backoff", "True", "max_retry_delay", "max_delay"]], "end_date": [["ti", "end_date", "pendulum", "instance", "timezone", "utcnow"], ["date", "ti", "end_date", "datetime", "timedelta", "seconds"]], "max_delay": [["max_delay", "datetime", "timedelta", "minutes"], ["task", "BashOperator", "task_id", "bash_command", "retries", "retry_delay", "delay", "retry_exponential_backoff", "True", "max_retry_delay", "max_delay"]], "task": [["task", "BashOperator", "task_id", "bash_command", "retries", "retry_delay", "delay", "retry_exponential_backoff", "True", "max_retry_delay", "max_delay"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "task_instances"], ["ti", "task", "task"], ["ti", "end_date", "pendulum", "instance", "timezone", "utcnow"], ["date", "ti", "next_retry_datetime"], ["date", "ti", "end_date", "datetime", "timedelta", "seconds"]]}, "name": "test_next_retry_datetime_short_or_zero_intervals", "params": {"dag_maker": "", "seconds": "", "self": ""}, "params_descr": {"dag_maker": "", "seconds": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "task_instances"]], "seconds": [["delay", "datetime", "timedelta", "seconds", "seconds"], ["date", "ti", "end_date", "datetime", "timedelta", "seconds"]], "self": []}, "params_p": {"args": [], "dag_maker": [["int", 0.1053659523962944], ["pathlib.Path", 0.08597169549124538]], "kwargs": [], "seconds": [["datetime.date.time", 0.2767440658886643], ["int", 0.17982690663061032], ["datetime.datetime", 0.08158094381599747], ["datetime.timedelta", 0.08087187902936814]], "self": []}, "q_name": "TestTaskInstance.test_next_retry_datetime_short_or_zero_intervals", "ret_exprs": [], "ret_type": "", "variables": {"date": "", "delay": "", "end_date": "", "max_delay": "", "task": "", "ti": ""}, "variables_p": {"date": [["datetime.datetime", 0.23658472045263873], ["Pattern[bytes]", 0.12957817264993765], ["datetime.date", 0.09106563970416551], ["Dict[Any, List[str]]", 0.08370994354551232], ["int", 0.08127833350259075], ["list", 0.07777154978192692]], "delay": [["datetime.timedelta", 1.0]], "end_date": [["datetime.datetime", 0.6440574859156281], ["datetime.date", 0.23896542014413635], ["datetime.date.time.date", 0.11697709394023553]], "max_delay": [["datetime.timedelta", 0.4311857688006402], ["int", 0.27796842899707225], ["dict", 0.11887248305761478], ["str", 0.0897661787386086]], "task": [["pytch.utils.Position", 0.24348284491079178], ["list", 0.10252734671803432], ["List[str]", 0.10106807587504738], ["int", 0.09952674112220154], ["bytes", 0.09666259824352968], ["range", 0.09147799037480588], ["DefaultDict[Any, List[Any]]", 0.08938826925880916], ["str", 0.08891121005079052], ["List[Tuple[Any, Any, Any]]", 0.08695492344598962]], "ti": [["int", 0.3174386860386044], ["str", 0.181931951241586], ["byceps.services.user.transfer.models.User", 0.12269854359195573], ["Dict[str, Any]", 0.11039561115200383], ["datetime.datetime", 0.0916032225499572], ["buza.models.Subject", 0.08672974475990627]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[746, 8], [749, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "func", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_reschedule_handling.<locals>.func", "ret_exprs": ["return done"], "ret_type": "", "ret_type_p": [["str", 0.22265530946840476], ["Dict[str, Any]", 0.09803576831439141], ["bool", 0.09036871614200068], ["Callable", 0.08856978505360913], ["float", 0.08392872460494338]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[766, 8], [789, 61]], "fn_var_ln": {"trs": [[788, 12], [788, 15]]}, "fn_var_occur": {"trs": [["trs", "TaskReschedule", "find_for_task_instance", "ti"], ["len", "trs", "expected_task_reschedule_count"]]}, "name": "run_ti_and_assert", "params": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_descr": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_occur": {"expected_duration": [["ti", "duration", "expected_duration"]], "expected_end_date": [["ti", "end_date", "expected_end_date"]], "expected_start_date": [["ti", "start_date", "expected_start_date"]], "expected_state": [["ti", "state", "expected_state"]], "expected_task_reschedule_count": [["len", "trs", "expected_task_reschedule_count"]], "expected_try_number": [["ti", "_try_number", "expected_try_number"], ["ti", "try_number", "expected_try_number"]], "run_date": [["time_machine", "travel", "run_date", "tick", "False"]]}, "params_p": {"args": [], "expected_duration": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_end_date": [["str", 0.7314343492766513], ["List[List[Any]]", 0.08987407833320435], ["datetime.datetime.datetime", 0.08890820367917489]], "expected_start_date": [["datetime.datetime", 0.26558939789275515], ["List[str]", 0.22708481712645287], ["datetime.timedelta", 0.11710537704981129], ["Optional[datetime.date]", 0.0917384849091394], ["str", 0.08024663225802303]], "expected_state": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_task_reschedule_count": [["str", 0.29553176994517555], ["bytes", 0.11288184401956997], ["Optional[str]", 0.1086574220056923], ["MutableMapping[domain.Identifier, datetime.date]", 0.1022277345733352], ["core.models.Subtask.SubtaskState", 0.09741120822327005], ["models.Model", 0.09667915797130203], ["list", 0.09381338766876707], ["Tuple[int, str]", 0.09279747559288791]], "expected_try_number": [["str", 0.5043002545867625], ["int", 0.2178153736069272], ["dict", 0.09590656799299264], ["bool", 0.09423852530604587], ["List[str]", 0.08773927850727171]], "kwargs": [], "run_date": [["str", 0.4657785433258618], ["Optional[str]", 0.26165084829167234], ["int", 0.1788607691203008], ["datetime.datetime", 0.09370983926216496]], "self": []}, "q_name": "TestTaskInstance.test_reschedule_handling.<locals>.run_ti_and_assert", "ret_exprs": [], "ret_type": "", "variables": {"trs": ""}, "variables_p": {"trs": [["datetime.datetime.datetime", 0.18923878845524805], ["int", 0.18488550703356665], ["dict", 0.11035739052402001], ["alerta.models.alerAlert", 0.10237250533563769], ["mock.MagicMock", 0.09974948535182564], ["Type[str]", 0.09798417528941457], ["Dict[int, Any]", 0.09623558630393296]]}}, {"docstring": {"func": "Test that task reschedules are handled properly", "long_descr": null, "ret": null}, "fn_lc": [[738, 4], [834, 71]], "fn_var_ln": {"date1": [[791, 8], [791, 13]], "date2": [[792, 8], [792, 13]], "date3": [[793, 8], [793, 13]], "date4": [[794, 8], [794, 13]], "done": [[833, 8], [833, 12]], "fail": [[833, 14], [833, 18]], "task": [[762, 8], [762, 15]], "ti": [[761, 8], [761, 10]]}, "fn_var_occur": {"date1": [["date1", "timezone", "utcnow"], ["date2", "date1", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date1", "date1", "date1", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date3", "date1", "date3", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date4", "date1", "date4", "State", "SUCCESS"], ["run_ti_and_assert", "date1", "date1", "date1", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RETRY"]], "date2": [["date2", "date1", "datetime", "timedelta", "minutes"], ["date3", "date2", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RETRY"]], "date3": [["date3", "date2", "datetime", "timedelta", "minutes"], ["date4", "date3", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date3", "date1", "date3", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date3", "date3", "date3", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date4", "date3", "date4", "State", "SUCCESS"]], "date4": [["date4", "date3", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date4", "date1", "date4", "State", "SUCCESS"], ["run_ti_and_assert", "date4", "date3", "date4", "State", "SUCCESS"]], "done": [["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "True"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"]], "fail": [["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "True"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"]], "task": [], "ti": [["ti", "refresh_from_db"], ["ti", "state", "State", "NONE"], ["ti", "_try_number"]]}, "name": "test_reschedule_handling", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [], "self": []}, "params_p": {"args": [], "dag_maker": [["tests.basilisp.helpers.CompileFn", 0.2], ["str", 0.2], ["tests.async_mock.MagicMock", 0.1], ["tests.async_mock.Mock", 0.1], ["Mapping[str, Any]", 0.1]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_reschedule_handling", "ret_exprs": [], "ret_type": "", "variables": {"date1": "", "date2": "", "date3": "", "date4": "", "done": "", "fail": "", "task": "", "ti": ""}, "variables_p": {"date1": [["datetime.datetime.timedelta", 0.3915403096108644], ["datetime.datetime.datetime", 0.19048640309466286], ["datetime.datetime.date", 0.17152544758613683], ["datetime.datetime", 0.15654214838719765], ["datetime.date", 0.08990569132113821]], "date2": [["datetime.date", 0.4599662545005035], ["datetime.datetime.date", 0.19327502100038432], ["datetime.datetime", 0.1808567218598546], ["datetime.datetime.datetime", 0.09023584677770906], ["datetime.datetime.timedelta", 0.07566615586154862]], "date3": [["datetime.date", 0.4599662545005035], ["datetime.datetime.date", 0.19327502100038432], ["datetime.datetime", 0.1808567218598546], ["datetime.datetime.datetime", 0.09023584677770906], ["datetime.datetime.timedelta", 0.07566615586154862]], "date4": [["datetime.date", 0.5647430579433504], ["datetime.datetime", 0.17721127282483534], ["datetime.datetime.date", 0.1761687462999201], ["datetime.datetime.datetime", 0.08187692293189412]], "done": [["str", 0.3042611328479235], ["float", 0.19729868270879317], ["property", 0.10224896966006315], ["bool", 0.09977191395382985], ["Union[Literal, str]", 0.09860796438969036], ["pathlib.Path", 0.09789334570720688]], "fail": [["Dict[str, Tuple[Any]]", 0.31255173559263544], ["Union[Literal, str]", 0.3117548236003622], ["Dict[str, Tuple[Any, Any]]", 0.18151747263841553], ["str", 0.10019414587365444], ["Dict[str, Tuple[Any, str]]", 0.09398182229493243]], "task": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "ti": [["str", 0.9999999998577316], ["float", 3.8049232572898083e-11], ["List[str]", 3.8049232572898083e-11], ["int", 8.991313542636674e-12]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[844, 8], [847, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "func", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mapped_reschedule_handling.<locals>.func", "ret_exprs": ["return done"], "ret_type": "", "ret_type_p": [["str", 0.22265530946840476], ["Dict[str, Any]", 0.09803576831439141], ["bool", 0.09036871614200068], ["Callable", 0.08856978505360913], ["float", 0.08392872460494338]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[864, 8], [888, 61]], "fn_var_ln": {"trs": [[887, 12], [887, 15]]}, "fn_var_occur": {"trs": [["trs", "TaskReschedule", "find_for_task_instance", "ti"], ["len", "trs", "expected_task_reschedule_count"]]}, "name": "run_ti_and_assert", "params": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_descr": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_occur": {"expected_duration": [["ti", "duration", "expected_duration"]], "expected_end_date": [["ti", "end_date", "expected_end_date"]], "expected_start_date": [["ti", "start_date", "expected_start_date"]], "expected_state": [["ti", "state", "expected_state"]], "expected_task_reschedule_count": [["len", "trs", "expected_task_reschedule_count"]], "expected_try_number": [["ti", "_try_number", "expected_try_number"], ["ti", "try_number", "expected_try_number"]], "run_date": [["time_machine", "travel", "run_date", "tick", "False"]]}, "params_p": {"args": [], "expected_duration": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_end_date": [["str", 0.7314343492766513], ["List[List[Any]]", 0.08987407833320435], ["datetime.datetime.datetime", 0.08890820367917489]], "expected_start_date": [["datetime.datetime", 0.26558939789275515], ["List[str]", 0.22708481712645287], ["datetime.timedelta", 0.11710537704981129], ["Optional[datetime.date]", 0.0917384849091394], ["str", 0.08024663225802303]], "expected_state": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_task_reschedule_count": [["str", 0.29553176994517555], ["bytes", 0.11288184401956997], ["Optional[str]", 0.1086574220056923], ["MutableMapping[domain.Identifier, datetime.date]", 0.1022277345733352], ["core.models.Subtask.SubtaskState", 0.09741120822327005], ["models.Model", 0.09667915797130203], ["list", 0.09381338766876707], ["Tuple[int, str]", 0.09279747559288791]], "expected_try_number": [["str", 0.5043002545867625], ["int", 0.2178153736069272], ["dict", 0.09590656799299264], ["bool", 0.09423852530604587], ["List[str]", 0.08773927850727171]], "kwargs": [], "run_date": [["str", 0.4657785433258618], ["Optional[str]", 0.26165084829167234], ["int", 0.1788607691203008], ["datetime.datetime", 0.09370983926216496]], "self": []}, "q_name": "TestTaskInstance.test_mapped_reschedule_handling.<locals>.run_ti_and_assert", "ret_exprs": [], "ret_type": "", "variables": {"trs": ""}, "variables_p": {"trs": [["datetime.datetime.datetime", 0.18923878845524805], ["int", 0.18488550703356665], ["dict", 0.11035739052402001], ["alerta.models.alerAlert", 0.10237250533563769], ["mock.MagicMock", 0.09974948535182564], ["Type[str]", 0.09798417528941457], ["Dict[int, Any]", 0.09623558630393296]]}}, {"docstring": {"func": "Test that mapped task reschedules are handled properly", "long_descr": null, "ret": null}, "fn_lc": [[836, 4], [933, 71]], "fn_var_ln": {"date1": [[890, 8], [890, 13]], "date2": [[891, 8], [891, 13]], "date3": [[892, 8], [892, 13]], "date4": [[893, 8], [893, 13]], "done": [[932, 8], [932, 12]], "fail": [[932, 14], [932, 18]], "task": [[860, 8], [860, 15]], "ti": [[858, 8], [858, 10]]}, "fn_var_occur": {"date1": [["date1", "timezone", "utcnow"], ["date2", "date1", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date1", "date1", "date1", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date3", "date1", "date3", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date4", "date1", "date4", "State", "SUCCESS"], ["run_ti_and_assert", "date1", "date1", "date1", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RETRY"]], "date2": [["date2", "date1", "datetime", "timedelta", "minutes"], ["date3", "date2", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date2", "date1", "date2", "State", "UP_FOR_RETRY"]], "date3": [["date3", "date2", "datetime", "timedelta", "minutes"], ["date4", "date3", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date3", "date1", "date3", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date3", "date3", "date3", "State", "UP_FOR_RESCHEDULE"], ["run_ti_and_assert", "date4", "date3", "date4", "State", "SUCCESS"]], "date4": [["date4", "date3", "datetime", "timedelta", "minutes"], ["run_ti_and_assert", "date4", "date1", "date4", "State", "SUCCESS"], ["run_ti_and_assert", "date4", "date3", "date4", "State", "SUCCESS"]], "done": [["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "True"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"]], "fail": [["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"], ["done", "fail", "False", "False"], ["done", "fail", "False", "True"], ["done", "fail", "False", "False"], ["done", "fail", "True", "False"]], "task": [], "ti": [["ti", "refresh_from_db"], ["ti", "state", "State", "NONE"], ["ti", "_try_number"]]}, "name": "test_mapped_reschedule_handling", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [], "self": []}, "params_p": {"args": [], "dag_maker": [["tests.basilisp.helpers.CompileFn", 0.2], ["str", 0.2], ["tests.async_mock.MagicMock", 0.1], ["tests.async_mock.Mock", 0.1], ["Mapping[str, Any]", 0.1]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mapped_reschedule_handling", "ret_exprs": [], "ret_type": "", "variables": {"date1": "", "date2": "", "date3": "", "date4": "", "done": "", "fail": "", "task": "", "ti": ""}, "variables_p": {"date1": [["datetime.datetime.timedelta", 0.3915403096108644], ["datetime.datetime.datetime", 0.19048640309466286], ["datetime.datetime.date", 0.17152544758613683], ["datetime.datetime", 0.15654214838719765], ["datetime.date", 0.08990569132113821]], "date2": [["datetime.date", 0.4599662545005035], ["datetime.datetime.date", 0.19327502100038432], ["datetime.datetime", 0.1808567218598546], ["datetime.datetime.datetime", 0.09023584677770906], ["datetime.datetime.timedelta", 0.07566615586154862]], "date3": [["datetime.date", 0.4599662545005035], ["datetime.datetime.date", 0.19327502100038432], ["datetime.datetime", 0.1808567218598546], ["datetime.datetime.datetime", 0.09023584677770906], ["datetime.datetime.timedelta", 0.07566615586154862]], "date4": [["datetime.date", 0.5647430579433504], ["datetime.datetime", 0.17721127282483534], ["datetime.datetime.date", 0.1761687462999201], ["datetime.datetime.datetime", 0.08187692293189412]], "done": [["str", 0.3042611328479235], ["float", 0.19729868270879317], ["property", 0.10224896966006315], ["bool", 0.09977191395382985], ["Union[Literal, str]", 0.09860796438969036], ["pathlib.Path", 0.09789334570720688]], "fail": [["Dict[str, Tuple[Any]]", 0.31255173559263544], ["Union[Literal, str]", 0.3117548236003622], ["Dict[str, Tuple[Any, Any]]", 0.18151747263841553], ["str", 0.10019414587365444], ["Dict[str, Tuple[Any, str]]", 0.09398182229493243]], "task": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "ti": [["str", 0.9999999998577316], ["float", 3.8049232572898083e-11], ["List[str]", 3.8049232572898083e-11], ["int", 8.991313542636674e-12]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[944, 8], [947, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "func", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mapped_task_reschedule_handling_clear_reschedules.<locals>.func", "ret_exprs": ["return done"], "ret_type": "", "ret_type_p": [["str", 0.22265530946840476], ["Dict[str, Any]", 0.09803576831439141], ["bool", 0.09036871614200068], ["Callable", 0.08856978505360913], ["float", 0.08392872460494338]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[963, 8], [987, 61]], "fn_var_ln": {"trs": [[986, 12], [986, 15]]}, "fn_var_occur": {"trs": [["trs", "TaskReschedule", "find_for_task_instance", "ti"], ["len", "trs", "expected_task_reschedule_count"]]}, "name": "run_ti_and_assert", "params": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_descr": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_occur": {"expected_duration": [["ti", "duration", "expected_duration"]], "expected_end_date": [["ti", "end_date", "expected_end_date"]], "expected_start_date": [["ti", "start_date", "expected_start_date"]], "expected_state": [["ti", "state", "expected_state"]], "expected_task_reschedule_count": [["len", "trs", "expected_task_reschedule_count"]], "expected_try_number": [["ti", "_try_number", "expected_try_number"], ["ti", "try_number", "expected_try_number"]], "run_date": [["time_machine", "travel", "run_date", "tick", "False"]]}, "params_p": {"args": [], "expected_duration": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_end_date": [["str", 0.7314343492766513], ["List[List[Any]]", 0.08987407833320435], ["datetime.datetime.datetime", 0.08890820367917489]], "expected_start_date": [["datetime.datetime", 0.26558939789275515], ["List[str]", 0.22708481712645287], ["datetime.timedelta", 0.11710537704981129], ["Optional[datetime.date]", 0.0917384849091394], ["str", 0.08024663225802303]], "expected_state": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_task_reschedule_count": [["str", 0.29553176994517555], ["bytes", 0.11288184401956997], ["Optional[str]", 0.1086574220056923], ["MutableMapping[domain.Identifier, datetime.date]", 0.1022277345733352], ["core.models.Subtask.SubtaskState", 0.09741120822327005], ["models.Model", 0.09667915797130203], ["list", 0.09381338766876707], ["Tuple[int, str]", 0.09279747559288791]], "expected_try_number": [["str", 0.5043002545867625], ["int", 0.2178153736069272], ["dict", 0.09590656799299264], ["bool", 0.09423852530604587], ["List[str]", 0.08773927850727171]], "kwargs": [], "run_date": [["str", 0.4657785433258618], ["Optional[str]", 0.26165084829167234], ["int", 0.1788607691203008], ["datetime.datetime", 0.09370983926216496]], "self": []}, "q_name": "TestTaskInstance.test_mapped_task_reschedule_handling_clear_reschedules.<locals>.run_ti_and_assert", "ret_exprs": [], "ret_type": "", "variables": {"trs": ""}, "variables_p": {"trs": [["datetime.datetime.datetime", 0.18923878845524805], ["int", 0.18488550703356665], ["dict", 0.11035739052402001], ["alerta.models.alerAlert", 0.10237250533563769], ["mock.MagicMock", 0.09974948535182564], ["Type[str]", 0.09798417528941457], ["Dict[int, Any]", 0.09623558630393296]]}}, {"docstring": {"func": "Test that mapped task reschedules clearing are handled properly", "long_descr": null, "ret": null}, "fn_lc": [[936, 4], [1001, 22]], "fn_var_ln": {"date1": [[989, 8], [989, 13]], "done": [[991, 8], [991, 12]], "fail": [[991, 14], [991, 18]], "task": [[959, 8], [959, 15]], "ti": [[958, 8], [958, 10]], "trs": [[1000, 8], [1000, 11]]}, "fn_var_occur": {"date1": [["date1", "timezone", "utcnow"], ["run_ti_and_assert", "date1", "date1", "date1", "State", "UP_FOR_RESCHEDULE"]], "done": [["done", "fail", "False", "False"]], "fail": [["done", "fail", "False", "False"]], "task": [], "ti": [["ti", "refresh_from_db"], ["ti", "state", "State", "NONE"], ["ti", "_try_number"], ["trs", "TaskReschedule", "find_for_task_instance", "ti"]], "trs": [["trs", "TaskReschedule", "find_for_task_instance", "ti"]]}, "name": "test_mapped_task_reschedule_handling_clear_reschedules", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [], "self": []}, "params_p": {"args": [], "dag_maker": [["str", 0.6054891517526587], ["tests.basilisp.helpers.CompileFn", 0.19725542412367064], ["tests.async_mock.MagicMock", 0.09862771206183532]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mapped_task_reschedule_handling_clear_reschedules", "ret_exprs": [], "ret_type": "", "variables": {"date1": "", "done": "", "fail": "", "task": "", "ti": "", "trs": ""}, "variables_p": {"date1": [["list", 0.20180540985930379], ["datetime.datetime.datetime", 0.09124847388341828], ["datetime.date", 0.09091979791853493], ["Pattern[bytes]", 0.08644369801352621]], "done": [["bool", 0.5632954205276993], ["str", 0.14675069934868962], ["myia.utils.misc.HasDefaults", 0.09546668291688246], ["int", 0.0945405978221815]], "fail": [["List[bool]", 0.3215149016794832], ["int", 0.23062483978753198], ["Optional[str]", 0.12011449602947313], ["list", 0.11531241989376599], ["str", 0.06682489461365555]], "task": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "ti": [["abilian.services.base.Service", 0.09781739027852632]], "trs": [["golem.task.resulresultpackage.EncryptingTaskResultPackager", 0.17008832373989236], ["List[bool]", 0.11543994031811447], ["str", 0.1107354228768211], ["golem.task.taskproviderstats.ProviderStats", 0.08974197758200517], ["dict", 0.08568199268331005]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1012, 8], [1015, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "func", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_reschedule_handling_clear_reschedules.<locals>.func", "ret_exprs": ["return done"], "ret_type": "", "ret_type_p": [["str", 0.22265530946840476], ["Dict[str, Any]", 0.09803576831439141], ["bool", 0.09036871614200068], ["Callable", 0.08856978505360913], ["float", 0.08392872460494338]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1032, 8], [1055, 61]], "fn_var_ln": {"trs": [[1054, 12], [1054, 15]]}, "fn_var_occur": {"trs": [["trs", "TaskReschedule", "find_for_task_instance", "ti"], ["len", "trs", "expected_task_reschedule_count"]]}, "name": "run_ti_and_assert", "params": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_descr": {"expected_duration": "", "expected_end_date": "", "expected_start_date": "", "expected_state": "", "expected_task_reschedule_count": "", "expected_try_number": "", "run_date": ""}, "params_occur": {"expected_duration": [["ti", "duration", "expected_duration"]], "expected_end_date": [["ti", "end_date", "expected_end_date"]], "expected_start_date": [["ti", "start_date", "expected_start_date"]], "expected_state": [["ti", "state", "expected_state"]], "expected_task_reschedule_count": [["len", "trs", "expected_task_reschedule_count"]], "expected_try_number": [["ti", "_try_number", "expected_try_number"], ["ti", "try_number", "expected_try_number"]], "run_date": [["time_machine", "travel", "run_date", "tick", "False"]]}, "params_p": {"args": [], "expected_duration": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_end_date": [["str", 0.7314343492766513], ["List[List[Any]]", 0.08987407833320435], ["datetime.datetime.datetime", 0.08890820367917489]], "expected_start_date": [["datetime.datetime", 0.26558939789275515], ["List[str]", 0.22708481712645287], ["datetime.timedelta", 0.11710537704981129], ["Optional[datetime.date]", 0.0917384849091394], ["str", 0.08024663225802303]], "expected_state": [["bool", 0.49594222210455297], ["int", 0.1574866101557119], ["Optional[str]", 0.14248976358935647], ["str", 0.11984517191259894], ["List[Dict[str, Any]]", 0.08423623223777975]], "expected_task_reschedule_count": [["str", 0.29553176994517555], ["bytes", 0.11288184401956997], ["Optional[str]", 0.1086574220056923], ["MutableMapping[domain.Identifier, datetime.date]", 0.1022277345733352], ["core.models.Subtask.SubtaskState", 0.09741120822327005], ["models.Model", 0.09667915797130203], ["list", 0.09381338766876707], ["Tuple[int, str]", 0.09279747559288791]], "expected_try_number": [["str", 0.5043002545867625], ["int", 0.2178153736069272], ["dict", 0.09590656799299264], ["bool", 0.09423852530604587], ["List[str]", 0.08773927850727171]], "kwargs": [], "run_date": [["str", 0.4657785433258618], ["Optional[str]", 0.26165084829167234], ["int", 0.1788607691203008], ["datetime.datetime", 0.09370983926216496]], "self": []}, "q_name": "TestTaskInstance.test_reschedule_handling_clear_reschedules.<locals>.run_ti_and_assert", "ret_exprs": [], "ret_type": "", "variables": {"trs": ""}, "variables_p": {"trs": [["datetime.datetime.datetime", 0.18923878845524805], ["int", 0.18488550703356665], ["dict", 0.11035739052402001], ["alerta.models.alerAlert", 0.10237250533563769], ["mock.MagicMock", 0.09974948535182564], ["Type[str]", 0.09798417528941457], ["Dict[int, Any]", 0.09623558630393296]]}}, {"docstring": {"func": "Test that task reschedules clearing are handled properly", "long_descr": null, "ret": null}, "fn_lc": [[1004, 4], [1069, 22]], "fn_var_ln": {"date1": [[1057, 8], [1057, 13]], "done": [[1059, 8], [1059, 12]], "fail": [[1059, 14], [1059, 18]], "task": [[1028, 8], [1028, 15]], "ti": [[1027, 8], [1027, 10]], "trs": [[1068, 8], [1068, 11]]}, "fn_var_occur": {"date1": [["date1", "timezone", "utcnow"], ["run_ti_and_assert", "date1", "date1", "date1", "State", "UP_FOR_RESCHEDULE"]], "done": [["done", "fail", "False", "False"]], "fail": [["done", "fail", "False", "False"]], "task": [], "ti": [["ti", "refresh_from_db"], ["ti", "state", "State", "NONE"], ["ti", "_try_number"], ["trs", "TaskReschedule", "find_for_task_instance", "ti"]], "trs": [["trs", "TaskReschedule", "find_for_task_instance", "ti"]]}, "name": "test_reschedule_handling_clear_reschedules", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [], "self": []}, "params_p": {"args": [], "dag_maker": [["tests.basilisp.helpers.CompileFn", 0.2], ["str", 0.2], ["tests.async_mock.MagicMock", 0.1], ["tests.async_mock.Mock", 0.1], ["Mapping[str, Any]", 0.1]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_reschedule_handling_clear_reschedules", "ret_exprs": [], "ret_type": "", "variables": {"date1": "", "done": "", "fail": "", "task": "", "ti": "", "trs": ""}, "variables_p": {"date1": [["list", 0.20180540985930379], ["datetime.datetime.datetime", 0.09124847388341828], ["datetime.date", 0.09091979791853493], ["Pattern[bytes]", 0.08644369801352621]], "done": [["bool", 0.5632954205276993], ["str", 0.14675069934868962], ["myia.utils.misc.HasDefaults", 0.09546668291688246], ["int", 0.0945405978221815]], "fail": [["List[bool]", 0.3215149016794832], ["int", 0.23062483978753198], ["Optional[str]", 0.12011449602947313], ["list", 0.11531241989376599], ["str", 0.06682489461365555]], "task": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "ti": [["abilian.services.base.Service", 0.09781739027852632]], "trs": [["golem.task.resulresultpackage.EncryptingTaskResultPackager", 0.17008832373989236], ["List[bool]", 0.11543994031811447], ["str", 0.1107354228768211], ["golem.task.taskproviderstats.ProviderStats", 0.08974197758200517], ["dict", 0.08568199268331005]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1071, 4], [1100, 40]], "fn_var_ln": {"dr": [[1084, 8], [1084, 10]], "run_date": [[1082, 8], [1082, 16]], "task": [[1090, 8], [1090, 15]], "ti": [[1089, 8], [1089, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "execution_date", "run_date", "run_type", "DagRunType", "SCHEDULED"], ["ti", "dr", "task_instances"]], "run_date": [["run_date", "task", "start_date", "datetime", "timedelta", "days"], ["dr", "dag_maker", "create_dagrun", "execution_date", "run_date", "run_type", "DagRunType", "SCHEDULED"], ["task", "run", "start_date", "run_date", "end_date", "run_date", "ignore_first_depends_on_past", "False"], ["task", "run", "start_date", "run_date", "end_date", "run_date", "ignore_first_depends_on_past", "True"]], "task": [["task", "EmptyOperator", "task_id", "depends_on_past", "True"], ["run_date", "task", "start_date", "datetime", "timedelta", "days"], ["ti", "task", "task"], ["task", "run", "start_date", "run_date", "end_date", "run_date", "ignore_first_depends_on_past", "False"], ["task", "run", "start_date", "run_date", "end_date", "run_date", "ignore_first_depends_on_past", "True"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["ti", "refresh_from_db"], ["ti", "state", "None"], ["ti", "refresh_from_db"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_depends_on_past", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["dag_maker", "create_dagrun", "state", "State", "FAILED", "run_type", "DagRunType", "SCHEDULED"], ["dr", "dag_maker", "create_dagrun", "execution_date", "run_date", "run_type", "DagRunType", "SCHEDULED"]], "self": []}, "params_p": {"args": [], "dag_maker": [["lms.lmsdb.models.Comment", 0.2887146000084429]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_depends_on_past", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "run_date": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.6679856133062712], ["int", 0.21504436467721827], ["List[Tuple[str, Any]]", 0.11697002201651042]], "run_date": [["datetime.date", 0.5027973549550406], ["datetime.datetime", 0.30086453143053127], ["datetime.timedelta", 0.10792905330749851], ["float", 0.08840906030692978]], "task": [["Dict[str, Dict[str, int]]", 0.1005842261081952], ["reminders.task.Task", 0.09848037217646172], ["golem.task.task_api.EnvironmentTaskApiService", 0.09283863546679932], ["app.models.user.User", 0.0916486956376349]], "ti": [["str", 0.4458319294798718], ["List[int]", 0.10263604607183398], ["Tuple[int, int, int, int]", 0.07815167826868077]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1282, 4], [1323, 39]], "fn_var_ln": {"completed": [[1320, 8], [1320, 17]], "dep_results": [[1315, 8], [1315, 19]], "downstream": [[1302, 12], [1302, 22]], "run_date": [[1310, 12], [1310, 20]], "s": [[1296, 8], [1296, 9]], "task": [[1313, 8], [1313, 15]], "ti": [[1312, 8], [1312, 10]]}, "fn_var_occur": {"completed": [["completed", "all", "dep", "passed", "dep", "dep_results"], ["completed", "expect_passed"]], "dep_results": [["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "dag_maker", "session"], ["completed", "all", "dep", "passed", "dep", "dep_results"]], "downstream": [["downstream", "EmptyOperator", "task_id", "trigger_rule", "trigger_rule"], ["task", "set_downstream", "downstream"], ["task", "set_downstream", "downstream"], ["ti", "dag_maker", "create_dagrun", "execution_date", "run_date", "get_task_instance", "downstream", "task_id"], ["ti", "task", "downstream"]], "run_date": [["run_date", "task", "start_date", "datetime", "timedelta", "days"], ["ti", "dag_maker", "create_dagrun", "execution_date", "run_date", "get_task_instance", "downstream", "task_id"]], "s": [["s", "upstream_states"], ["s", "skipped", "s", "skipped_setup"], ["s", "success", "s", "success_setup"], ["s", "done", "s", "failed", "s", "success", "s", "removed", "s", "upstream_failed", "s", "skipped"]], "task": [["task", "EmptyOperator", "task_id", "i", "dag", "dag"], ["task", "set_downstream", "downstream"], ["task", "EmptyOperator", "task_id", "i", "dag", "dag", "as_setup"], ["task", "set_downstream", "downstream"], ["task", "start_date", "None"], ["run_date", "task", "start_date", "datetime", "timedelta", "days"], ["ti", "task", "downstream"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "run_date", "get_task_instance", "downstream", "task_id"], ["ti", "task", "downstream"], ["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "dag_maker", "session"], ["ti", "state", "expect_state"]]}, "name": "test_check_task_dependencies", "params": {"dag_maker": "", "expect_passed": "builtins.bool", "expect_state": "airflow.utils.state.State", "flag_upstream_failed": "builtins.bool", "monkeypatch": "", "self": "", "trigger_rule": "builtins.str", "upstream_setups": "builtins.int", "upstream_states": "airflow.ti_deps.deps.trigger_rule_dep._UpstreamTIStates"}, "params_descr": {"dag_maker": "", "expect_passed": "", "expect_state": "", "flag_upstream_failed": "", "monkeypatch": "", "self": "", "trigger_rule": "", "upstream_setups": "", "upstream_states": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag"], ["ti", "dag_maker", "create_dagrun", "execution_date", "run_date", "get_task_instance", "downstream", "task_id"], ["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "dag_maker", "session"]], "expect_passed": [["completed", "expect_passed"]], "expect_state": [["ti", "state", "expect_state"]], "flag_upstream_failed": [["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "dag_maker", "session"]], "monkeypatch": [["monkeypatch", "setattr", "_UpstreamTIStates", "_", "upstream_states"]], "self": [], "trigger_rule": [["downstream", "EmptyOperator", "task_id", "trigger_rule", "trigger_rule"]], "upstream_setups": [["range", "upstream_setups"]], "upstream_states": [["monkeypatch", "setattr", "_UpstreamTIStates", "_", "upstream_states"], ["s", "upstream_states"]]}, "params_p": {"args": [], "dag_maker": [["int", 0.1511268050723564], ["bool", 0.08295539090693828], ["Callable", 0.07766795156088421], ["str", 0.0773554280508199]], "expect_passed": [["bool", 0.2656366460131003], ["Type[Exception]", 0.15626169980065716], ["int", 0.12220564431944203], ["Union[int, slice]", 0.09697921963550171]], "expect_state": [["str", 0.21579600734907436], ["Type[Exception]", 0.15161886829191218], ["Union[int, slice]", 0.1027332200342441], ["int", 0.08745092047510462], ["bool", 0.08491694095385519]], "flag_upstream_failed": [["bool", 0.20389250686986832], ["str", 0.10040417345426371], ["bytes", 0.09959939482611581]], "kwargs": [], "monkeypatch": [["bool", 0.3120626975570276], ["float", 0.09558220820049255]], "self": [], "trigger_rule": [["int", 0.21670074294830283], ["raiden.utils.Address", 0.20068265858925938], ["dict", 0.10474484154035439], ["zerver.models.Attachment", 0.09071270145502125]], "upstream_setups": [["str", 0.11677847243423294], ["boggle.models.board.Board", 0.11677847243423294], ["int", 0.09689494935304967], ["Union[str, float]", 0.08819446514738181]], "upstream_states": [["float", 0.21324042929467263], ["int", 0.11195408824280599], ["raiden.utils.BlockNumber", 0.10699846192203669], ["List[float]", 0.09670758491882019]]}, "q_name": "TestTaskInstance.test_check_task_dependencies", "ret_exprs": [], "ret_type": "", "variables": {"completed": "", "dep_results": "", "downstream": "", "run_date": "", "s": "", "task": "", "ti": ""}, "variables_p": {"completed": [["str", 0.6067467396521163], ["Set[int]", 0.11225735140745241], ["List[str]", 0.10489357572670951], ["List[Union[int, Any, Any]]", 0.08805116660686087], ["int", 0.08805116660686087]], "dep_results": [["str", 0.18993671148148975]], "downstream": [["dict", 0.4926166040485022], ["Dict[str, str]", 0.11229425043634629], ["str", 0.08940006377301933], ["List[str]", 0.089198368499813], ["list", 0.08874978244007557]], "run_date": [["datetime.datetime", 0.6635101798653338], ["datetime.date", 0.12090756880942048], ["datetime.timedelta", 0.11613143333421999], ["float", 0.09945081799102591]], "s": [["float", 0.1370044572576798], ["int", 0.12513030571646688], ["List[int]", 0.11257082252399683]], "task": [["str", 0.18255182939668887], ["nufb.task.Task", 0.12479278146564719], ["List[str]", 0.11111332102509303], ["Dict[str, Union[Any, Any]]", 0.10526232327286979], ["Dict[str, str]", 0.09178238832284716], ["Dict[str, Any]", 0.08434172485764929], ["annofabapi.dataclass.task.Task", 0.08424569861737953]], "ti": [["geode.models.common.Address", 0.1575647398146712], ["float", 0.11618893235498659], ["datetime.timedelta", 0.08693079838770813], ["tuple", 0.07174980763795503], ["List[str]", 0.0693941897389671], ["dict", 0.06719022796827762], ["Dict[str, str]", 0.06620510550918408]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1408, 8], [1409, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "do_something", "params": {"i": ""}, "params_descr": {"i": ""}, "params_occur": {"i": []}, "params_p": {"args": [], "i": [["int", 0.49999999999999994], ["slice", 0.19999999999999998], ["T", 0.09999999999999999], ["Optional[bool]", 0.09999999999999999], ["bool", 0.09999999999999999]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_check_task_dependencies_for_mapped.<locals>.do_something", "ret_exprs": ["return 1"], "ret_type": "", "ret_type_p": [["float", 0.16666666655918003], ["str", 0.16666666655918003], ["int", 6.449196832279655e-10]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1412, 8], [1413, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "do_something_else", "params": {"i": ""}, "params_descr": {"i": ""}, "params_occur": {"i": []}, "params_p": {"args": [], "i": [["int", 0.49999999999999994], ["slice", 0.19999999999999998], ["T", 0.09999999999999999], ["Optional[bool]", 0.09999999999999999], ["bool", 0.09999999999999999]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_check_task_dependencies_for_mapped.<locals>.do_something_else", "ret_exprs": ["return 1"], "ret_type": "", "ret_type_p": [["float", 0.16666666655918003], ["str", 0.16666666655918003], ["int", 6.449196832279655e-10]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1394, 4], [1440, 39]], "fn_var_ln": {"completed": [[1437, 8], [1437, 17]], "dag_run": [[1426, 12], [1426, 22]], "dep_results": [[1432, 8], [1432, 19]], "downstream": [[1429, 8], [1429, 18]], "dr": [[1419, 8], [1419, 10]], "map_index": [[1423, 8], [1423, 20]], "nums": [[1416, 12], [1416, 16]], "task": [[1431, 8], [1431, 15]], "ti": [[1430, 8], [1430, 10]]}, "fn_var_occur": {"completed": [["completed", "all", "dep", "passed", "dep", "dep_results"], ["completed", "expect_completed"]], "dag_run": [["ti", "dag_run", "dr"]], "dep_results": [["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "session"], ["completed", "all", "dep", "passed", "dep", "dep_results"]], "downstream": [["downstream", "ti", "task"], ["ti", "task", "downstream"]], "dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "get_task_instance", "session", "session"], ["ti", "TaskInstance", "ti", "task", "run_id", "dr", "run_id", "map_index", "map_index"], ["ti", "dag_run", "dr"], ["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"]], "map_index": [["ti", "map_index"], ["ti", "TaskInstance", "ti", "task", "run_id", "dr", "run_id", "map_index", "map_index"], ["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"]], "nums": [["nums", "do_something", "expand", "i", "i", "i", "range"], ["do_something_else", "expand", "i", "nums"]], "task": [["ti", "TaskInstance", "ti", "task", "run_id", "dr", "run_id", "map_index", "map_index"], ["downstream", "ti", "task"], ["ti", "task", "downstream"]], "ti": [["ti", "dr", "get_task_instance", "session", "session"], ["ti", "map_index"], ["ti", "TaskInstance", "ti", "task", "run_id", "dr", "run_id", "map_index", "map_index"], ["ti", "dag_run", "dr"], ["session", "add", "ti"], ["downstream", "ti", "task"], ["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"], ["ti", "task", "downstream"], ["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "session"], ["ti", "state", "expect_state"]]}, "name": "test_check_task_dependencies_for_mapped", "params": {"dag_maker": "", "expect_completed": "builtins.bool", "expect_state": "airflow.utils.state.State", "flag_upstream_failed": "builtins.bool", "monkeypatch": "", "self": "", "session": "", "trigger_rule": "builtins.str", "upstream_states": "airflow.ti_deps.deps.trigger_rule_dep._UpstreamTIStates"}, "params_descr": {"dag_maker": "", "expect_completed": "", "expect_state": "", "flag_upstream_failed": "", "monkeypatch": "", "self": "", "session": "", "trigger_rule": "", "upstream_states": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "session", "session"], ["dr", "dag_maker", "create_dagrun"]], "expect_completed": [["completed", "expect_completed"]], "expect_state": [["ti", "state", "expect_state"]], "flag_upstream_failed": [["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "session"]], "monkeypatch": [["monkeypatch", "setattr", "_UpstreamTIStates", "_", "upstream_states"]], "self": [], "session": [["dag_maker", "dag_id", "session", "session"], ["ti", "dr", "get_task_instance", "session", "session"], ["session", "add", "ti"], ["session", "flush"], ["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"], ["dep_results", "TriggerRuleDep", "_evaluate_trigger_rule", "ti", "ti", "dep_context", "DepContext", "flag_upstream_failed", "flag_upstream_failed", "session", "session"]], "trigger_rule": [], "upstream_states": [["monkeypatch", "setattr", "_UpstreamTIStates", "_", "upstream_states"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.4017269536334426], ["int", 0.30115795632528053], ["topicdb.core.models.collaborationmode.CollaborationMode", 0.10300633830902388], ["app.models.user.User.InDB", 0.09896347202502023]], "expect_completed": [["str", 0.4366309070915268]], "expect_state": [["str", 0.27879225146200204], ["Type[Exception]", 0.08710493462722811], ["Union[keanu.vertex.base.Vertex, keanu.vartypes.numpy_types, float]", 0.07623668494831515]], "flag_upstream_failed": [["bool", 0.10050554326383768]], "kwargs": [], "monkeypatch": [["Callable", 0.09546734784877949]], "self": [], "session": [["Optional[str]", 0.28327231167910366], ["zam_repondeur.models.Dossier", 0.11774708406138722]], "trigger_rule": [["raiden.utils.List[raiden.utils.Address]", 0.10737648130449279], ["str", 0.10737648130449279], ["List[Tuple[str, str]]", 0.09828690929932461]], "upstream_states": [["Callable", 0.09546734784877949]]}, "q_name": "TestTaskInstance.test_check_task_dependencies_for_mapped", "ret_exprs": [], "ret_type": "", "variables": {"completed": "", "dag_run": "", "dep_results": "", "downstream": "", "dr": "", "map_index": "", "nums": "", "task": "", "ti": ""}, "variables_p": {"completed": [["str", 0.6067467396521163], ["Set[int]", 0.11225735140745241], ["List[str]", 0.10489357572670951], ["List[Union[int, Any, Any]]", 0.08805116660686087], ["int", 0.08805116660686087]], "dag_run": [["str", 0.9999999999999999]], "dep_results": [["str", 0.18993671148148975]], "downstream": [["list", 0.2871150315754947], ["List[tuple]", 0.09242006747743488], ["datetime.datetime.datetime", 0.09131957933257488], ["golem.task.taskproviderstats.ProviderStats", 0.08617184301335395]], "dr": [["str", 0.312654867587313], ["geode.models.common.Address", 0.10411222466116697], ["float", 0.10095136941682575], ["bool", 0.09622908869436254]], "map_index": [["str", 0.4638265804494319], ["raiden.utils.PaymentID", 0.17863787578483], ["o2a.converter.task.Task", 0.09881361548107719], ["zerver.models.Realm", 0.09818194445679722], ["geode.models.common.Address", 0.08367536960004832], ["int", 0.07686461422781518]], "nums": [["int", 0.39501945166324104], ["Tuple[Literal, Literal, Literal]", 0.30972111278118236], ["dict", 0.1040439850256244], ["List[int]", 0.09644751734496437], ["str", 0.09476793318498776]], "task": [["o2a.converter.task_group.TaskGroup", 0.4522376053112609], ["bytes", 0.10839419525899288], ["golem.task.taskbase.Task", 0.09631241034515896], ["python.entities.Entity", 0.08391794813183222]], "ti": [["str", 0.48901445319039905], ["bytes", 0.20057966859703358], ["golem.rpc.session.WebSocketAddress", 0.1082653509391798], ["Optional[Dict[str, str]]", 0.10347789713389363]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1442, 4], [1453, 44]], "fn_var_ln": {"failing_status": [[1444, 8], [1444, 22]], "passing_status": [[1445, 8], [1445, 22]], "ti": [[1443, 8], [1443, 10]]}, "fn_var_occur": {"failing_status": [["failing_status", "TIDepStatus", "False"], ["patch", "return_value", "failing_status"]], "passing_status": [["passing_status", "TIDepStatus", "True"], ["patch", "return_value", "passing_status"]], "ti": [["ti", "create_task_instance"], ["ti", "are_dependencies_met"], ["ti", "are_dependencies_met"]]}, "name": "test_respects_prev_dagrun_dep", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_respects_prev_dagrun_dep", "ret_exprs": [], "ret_type": "", "variables": {"failing_status": "", "passing_status": "", "ti": ""}, "variables_p": {"failing_status": [["str", 0.1798660040527666], ["int", 0.11205179036797862], ["DefaultDict[Any, List[Any]]", 0.1100376511755176], ["List[str]", 0.10896084066820791], ["list", 0.10864155772180563], ["Dict[int, Any]", 0.09934832156678285], ["DefaultDict[Any, int]", 0.08975329987612364], ["Dict[str, Union[float, str]]", 0.08711765714806624]], "passing_status": [["int", 0.38195084725257306], ["Dict[str, Union[float, str]]", 0.2235452254361482], ["set", 0.2006445755888459], ["Optional[Callable[..., Any]]", 0.09720422016595336], ["Dict[str, Union[int, str]]", 0.09665513155647946]], "ti": [["int", 0.1833621481712634], ["str", 0.09103950366057965]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1466, 4], [1478, 78]], "fn_var_ln": {"dag": [[1470, 8], [1470, 11]], "downstream_task": [[1471, 8], [1471, 23]], "downstream_ti": [[1474, 8], [1474, 21]], "ti": [[1469, 8], [1469, 10]]}, "fn_var_occur": {"dag": [["dag", "ti", "task", "dag"], ["downstream_task", "EmptyOperator", "task_id", "dag", "dag"]], "downstream_task": [["downstream_task", "EmptyOperator", "task_id", "dag", "dag"], ["ti", "task", "downstream_task"], ["downstream_ti", "TI", "downstream_task", "run_id", "ti", "run_id"]], "downstream_ti": [["downstream_ti", "TI", "downstream_task", "run_id", "ti", "run_id"], ["downstream_ti", "set_state", "downstream_ti_state", "session"]], "ti": [["ti", "create_task_instance", "session", "session"], ["dag", "ti", "task", "dag"], ["ti", "task", "downstream_task"], ["downstream_ti", "TI", "downstream_task", "run_id", "ti", "run_id"], ["ti", "are_dependents_done", "session", "expected_are_dependents_done"]]}, "name": "test_are_dependents_done", "params": {"create_task_instance": "", "downstream_ti_state": "", "expected_are_dependents_done": "", "self": "", "session": ""}, "params_descr": {"create_task_instance": "", "downstream_ti_state": "", "expected_are_dependents_done": "", "self": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "session", "session"]], "downstream_ti_state": [["downstream_ti", "set_state", "downstream_ti_state", "session"]], "expected_are_dependents_done": [["ti", "are_dependents_done", "session", "expected_are_dependents_done"]], "self": [], "session": [["ti", "create_task_instance", "session", "session"], ["downstream_ti", "set_state", "downstream_ti_state", "session"], ["session", "flush"], ["ti", "are_dependents_done", "session", "expected_are_dependents_done"]]}, "params_p": {"args": [], "create_task_instance": [["users.models.JustfixUser", 0.09880026051097614], ["zerver.models.UserProfile", 0.09754356114532961], ["raiden_libs.types.Address", 0.09721067709860895], ["zam_repondeur.models.Dossier", 0.096668268062992]], "downstream_ti_state": [["Callable", 0.3156372530929617], ["int", 0.09784636600738926], ["Union[raiden.transfer.state.BalanceProofSignedState, raiden.transfer.state.BalanceProofUnsignedState]", 0.09462998529024488], ["raiden.transfer.state.NettingChannelState", 0.09421363876175047]], "expected_are_dependents_done": [["app.models.Game", 0.09632393219896299], ["Callable", 0.09027505555352307]], "kwargs": [], "self": [], "session": [["raiden_libs.types.Address", 0.1245154409093864], ["raiden.transfer.state.BalanceProofSignedState", 0.12214078095713836], ["app.models.models.User", 0.08609162641564706], ["Union[raiden.transfer.state.BalanceProofSignedState, raiden.transfer.state.BalanceProofUnsignedState]", 0.08530726669160056], ["raiden.utils.TokenNetworkAddress", 0.08101084430445422]]}, "q_name": "TestTaskInstance.test_are_dependents_done", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "downstream_task": "", "downstream_ti": "", "ti": ""}, "variables_p": {"dag": [["golem.task.taskstate.SubtaskState", 0.20407334516854], ["restful_functions.modules.task.TaskStoreSettings", 0.10953475807633246], ["zerver.models.Realm", 0.09647552637282486], ["int", 0.08887223241274819], ["golem.task.taskbase.AcceptClientVerdict", 0.08082425652611999]], "downstream_task": [["List[str]", 0.10290563886449337], ["golem.task.task_api.EnvironmentTaskApiService", 0.09942817969759672], ["golem.task.taskbase.Task", 0.09408962589345984]], "downstream_ti": [["bool", 0.10840208425821043], ["byceps.util.image.models.Dimensions", 0.10461115742552779], ["list", 0.10396932052980777], ["buza.models.Subject", 0.08287917366195773]], "ti": [["list", 0.3412631390824967], ["str", 0.1520997596869913], ["raiden.utils.SecretHash", 0.08602440586810826], ["urllib.requesOpenerDirector", 0.08277480591123913], ["Union[Literal, int]", 0.07902858233312271]]}}, {"docstring": {"func": "Test xcom_pull, using different filtering methods.", "long_descr": null, "ret": null}, "fn_lc": [[1480, 4], [1515, 39]], "fn_var_ln": {"dagrun": [[1486, 8], [1486, 14]], "result": [[1514, 8], [1514, 14]], "task_1": [[1483, 12], [1483, 18]], "task_2": [[1484, 12], [1484, 18]], "ti1": [[1487, 8], [1487, 11]]}, "fn_var_occur": {"dagrun": [["dagrun", "dag_maker", "create_dagrun", "start_date", "timezone", "datetime"], ["ti1", "dagrun", "get_task_instance", "task_1", "task_id"], ["XCom", "set", "key", "value", "task_id", "task_2", "task_id", "dag_id", "dag", "dag_id", "execution_date", "dagrun", "execution_date"]], "result": [["result", "ti1", "xcom_pull"], ["result", "None"], ["result", "ti1", "xcom_pull", "key"], ["result", "ti1", "xcom_pull", "task_ids", "key"], ["result", "ti1", "xcom_pull", "task_ids", "key"], ["result", "ti1", "xcom_pull", "task_ids", "key"]], "task_1": [["task_1", "EmptyOperator", "task_id"], ["ti1", "dagrun", "get_task_instance", "task_1", "task_id"]], "task_2": [["task_2", "EmptyOperator", "task_id"], ["XCom", "set", "key", "value", "task_id", "task_2", "task_id", "dag_id", "dag", "dag_id", "execution_date", "dagrun", "execution_date"]], "ti1": [["ti1", "dagrun", "get_task_instance", "task_1", "task_id"], ["ti1", "xcom_push", "key", "value"], ["result", "ti1", "xcom_pull"], ["result", "ti1", "xcom_pull", "key"], ["result", "ti1", "xcom_pull", "task_ids", "key"], ["result", "ti1", "xcom_pull", "task_ids", "key"], ["result", "ti1", "xcom_pull", "task_ids", "key"]]}, "name": "test_xcom_pull", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "dag"], ["dagrun", "dag_maker", "create_dagrun", "start_date", "timezone", "datetime"]], "self": []}, "params_p": {"args": [], "dag_maker": [["base.Connection", 0.19960306431557667]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_xcom_pull", "ret_exprs": [], "ret_type": "", "variables": {"dagrun": "", "result": "", "task_1": "", "task_2": "", "ti1": ""}, "variables_p": {"dagrun": [["datetime.datetime.datetime", 0.1868732371535377], ["Type[hypha.apply.projects.models.Report]", 0.16299588453147354], ["datetime.datetime", 0.16020263651538993], ["datetime.timedelta", 0.1078340537641254], ["str", 0.09770799926686304]], "result": [["Generator[Any, None, None]", 0.3098795765217207], ["Tuple[Any, Any]", 0.2328164739055727], ["Tuple[Any, None]", 0.0963265596810427], ["List[Hashable]", 0.08928753681335397], ["dict", 0.08884689543723462]], "task_1": [["golem.task.task_api.EnvironmentTaskApiService", 0.1672565845605864], ["golem.task.taskbase.Task", 0.1272297220660488], ["list", 0.10305540671430367], ["taskiapplication.models.task.Task", 0.08925452087567366], ["List[str]", 0.08067383254030348], ["golem.task.taskcomputer.TaskComputer", 0.07659019128552155]], "task_2": [["apps.core.task.coretaskstate.TaskDefinition", 0.26928964234737146], ["golem.task.task_api.EnvironmentTaskApiService", 0.14731288901877068], ["List[str]", 0.10080014861763498], ["Dict[str, Dict[str, int]]", 0.0857790526520593]], "ti1": [["str", 0.27842240208088154], ["List[int]", 0.09101392934086393], ["raiden.utils.PaymentID", 0.08645833301108416], ["Tuple[int, int, int, int]", 0.08296440929277488]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1517, 4], [1544, 76]], "fn_var_ln": {"dagrun": [[1524, 8], [1524, 14]], "map_index": [[1527, 8], [1527, 24]], "task_1": [[1521, 12], [1521, 18]], "ti_1_0": [[1526, 8], [1526, 14]], "ti_1_1": [[1528, 8], [1528, 14]], "ti_2": [[1534, 8], [1534, 12]]}, "fn_var_occur": {"dagrun": [["dagrun", "dag_maker", "create_dagrun", "start_date", "timezone", "datetime"], ["ti_1_0", "dagrun", "get_task_instance", "session", "session"], ["ti_1_1", "session", "merge", "TI", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["ti_2", "dagrun", "get_task_instance", "session", "session"]], "map_index": [["ti_1_0", "map_index"], ["ti_1_1", "session", "merge", "TI", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"]], "task_1": [["task_1", "EmptyOperator", "partial", "task_id", "_expand", "EXPAND_INPUT_EMPTY", "strict", "False"], ["ti_1_1", "session", "merge", "TI", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"]], "ti_1_0": [["ti_1_0", "dagrun", "get_task_instance", "session", "session"], ["ti_1_0", "map_index"], ["ti_1_1", "session", "merge", "TI", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["ti_1_0", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"]], "ti_1_1": [["ti_1_1", "session", "merge", "TI", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["ti_1_1", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"]], "ti_2": [["ti_2", "dagrun", "get_task_instance", "session", "session"], ["set", "ti_2", "xcom_pull", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["list", "ti_2", "xcom_pull", "session", "session"]]}, "name": "test_xcom_pull_mapped", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "session", "session"], ["dagrun", "dag_maker", "create_dagrun", "start_date", "timezone", "datetime"]], "self": [], "session": [["dag_maker", "dag_id", "session", "session"], ["ti_1_0", "dagrun", "get_task_instance", "session", "session"], ["ti_1_1", "session", "merge", "TI", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["session", "flush"], ["ti_1_0", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"], ["ti_1_1", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"], ["ti_2", "dagrun", "get_task_instance", "session", "session"], ["set", "ti_2", "xcom_pull", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["ti_2", "xcom_pull", "map_indexes", "session", "session"], ["list", "ti_2", "xcom_pull", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["zerver.models.UserProfile", 0.19749566281267306], ["str", 0.19620764466778903], ["Optional[core.models.User]", 0.10732390470902833], ["app.models.user.User.InDB", 0.1024302648133843], ["zerver.models.Stream", 0.09286004278452031]], "kwargs": [], "self": [], "session": [["core.models.Recipe", 0.1117246678078925], ["django.conf.settings.AUTH_USER_MODEL", 0.09588138933433121]]}, "q_name": "TestTaskInstance.test_xcom_pull_mapped", "ret_exprs": [], "ret_type": "", "variables": {"dagrun": "", "map_index": "", "task_1": "", "ti_1_0": "", "ti_1_1": "", "ti_2": ""}, "variables_p": {"dagrun": [["datetime.datetime", 0.37257367475328673], ["str", 0.17002692771578223], ["datetime.datetime.datetime", 0.14120423028227927], ["Dict[str, str]", 0.14110773163261506], ["List[str]", 0.09337193286751908], ["datetime.date", 0.08171550274851759]], "map_index": [["str", 0.4084014115052669], ["bool", 0.12731949265582274], ["geode.models.common.Address", 0.0877006850728373]], "task_1": [["golem.task.taskserver.TaskServer", 0.18626141221488476], ["golem.task.task_api.EnvironmentTaskApiService", 0.10266316390099425], ["golem.task.taskbase.Task", 0.09846126037145841], ["taskiapplication.models.task.Task", 0.09353196823130402]], "ti_1_0": [["str", 0.5939072985748254], ["golem.rpc.session.WebSocketAddress", 0.1225077491414885]], "ti_1_1": [["str", 0.2967593981312857], ["List[Tuple[str, int]]", 0.1603796364546529], ["List[str]", 0.10888581669267608], ["golem.task.taskbase.AcceptClientVerdict", 0.0963301124200865], ["List[Dict[str, Any]]", 0.0859302964537206]], "ti_2": [["str", 0.2032792038517105], ["dict", 0.17234744075293648], ["Optional[str]", 0.16194589207876947], ["golem.rpc.session.WebSocketAddress", 0.11478516527792829], ["golem.rpc.session.Publisher", 0.07810090278660077], ["Dict[str, Any]", 0.07684808650639172]]}}, {"docstring": {"func": "tests xcom set/clear relative to a task in a 'success' rerun scenario", "long_descr": null, "ret": null}, "fn_lc": [[1546, 4], [1574, 66]], "fn_var_ln": {"key": [[1550, 8], [1550, 11]], "ti": [[1553, 8], [1553, 10]], "value": [[1551, 8], [1551, 13]]}, "fn_var_occur": {"key": [["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "None"]], "ti": [["ti", "create_task_instance", "dag_id", "schedule", "task_id", "pool"], ["ti", "run", "mark_success", "True"], ["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "run"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "run", "ignore_all_deps", "True", "mark_success", "True"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "run", "ignore_all_deps", "True"], ["ti", "xcom_pull", "task_ids", "key", "key", "None"]], "value": [["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"]]}, "name": "test_xcom_pull_after_success", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "schedule", "task_id", "pool"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["base.Connection", 0.09624372998437071], ["str", 0.08027685302858452]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_xcom_pull_after_success", "ret_exprs": [], "ret_type": "", "variables": {"key": "", "ti": "", "value": ""}, "variables_p": {"key": [["bytes", 0.3845092881702459], ["str", 0.26107646567063447], ["int", 0.15732740240984042]], "ti": [["int", 0.4164143476626022], ["Union[Literal[False], Literal[True]]", 0.0939388382145951], ["List[int]", 0.08938274017410684], ["DefaultDict[Any, DefaultDict[Any, Any]]", 0.08476677001470544], ["str", 0.08194401150120394]], "value": [["str", 0.28995090337561413], ["Dict[str, bool]", 0.2225087607469481], ["float", 0.12665905923746099], ["dict", 0.09485258641939]]}}, {"docstring": {"func": "tests xcom will not clear before a task runs its next method after deferral.", "long_descr": null, "ret": null}, "fn_lc": [[1576, 4], [1599, 67]], "fn_var_ln": {"key": [[1581, 8], [1581, 11]], "next_method": [[1594, 8], [1594, 22]], "ti": [[1584, 8], [1584, 10]], "value": [[1582, 8], [1582, 13]]}, "fn_var_occur": {"key": [["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"]], "next_method": [["ti", "next_method"]], "ti": [["ti", "create_task_instance", "dag_id", "schedule", "task_id", "pool"], ["ti", "run", "mark_success", "True"], ["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "next_method"], ["session", "merge", "ti"], ["ti", "run", "ignore_all_deps", "True"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"]], "value": [["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"]]}, "name": "test_xcom_pull_after_deferral", "params": {"create_task_instance": "", "self": "", "session": ""}, "params_descr": {"create_task_instance": "", "self": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "schedule", "task_id", "pool"]], "self": [], "session": [["session", "merge", "ti"], ["session", "commit"]]}, "params_p": {"args": [], "create_task_instance": [["models.characters.character_base.Character", 0.12591815464337616], ["int", 0.09728660786841863]], "kwargs": [], "self": [], "session": [["models.UserAuth", 0.09485100148109307], ["str", 0.07542647490432601], ["zerver.models.UserProfile", 0.06930783158550051]]}, "q_name": "TestTaskInstance.test_xcom_pull_after_deferral", "ret_exprs": [], "ret_type": "", "variables": {"key": "", "next_method": "", "ti": "", "value": ""}, "variables_p": {"key": [["str", 0.2865660100039448], ["int", 0.20125804623245552], ["Dict[Tuple[str, int], Tuple[Any, Any]]", 0.09827104241829594], ["dict", 0.08355260924639596], ["bytes", 0.07375010767889177]], "next_method": [["str", 0.39999999999999997], ["List[str]", 0.19999999999999998], ["Tuple[Literal, Literal, Literal]", 0.09999999999999999], ["Dict[str, Union[Any, Any]]", 0.09999999999999999], ["Set[str]", 0.09999999999999999], ["list", 0.09999999999999999]], "ti": [["int", 0.4164143476626022], ["Union[Literal[False], Literal[True]]", 0.0939388382145951], ["List[int]", 0.08938274017410684], ["DefaultDict[Any, DefaultDict[Any, Any]]", 0.08476677001470544], ["str", 0.08194401150120394]], "value": [["str", 0.20832189942274393], ["Dict[str, bool]", 0.2041826518852229], ["Dict[str, Union[Any, Any]]", 0.18748377254496248], ["float", 0.1283186140253056], ["dict", 0.098280166885072]]}}, {"docstring": {"func": "tests xcom fetch behavior with different execution dates, using", "long_descr": "both xcom_pull with \"include_prior_dates\" and without", "ret": null}, "fn_lc": [[1601, 4], [1630, 93]], "fn_var_ln": {"dr": [[1622, 8], [1622, 10]], "exec_date": [[1615, 8], [1615, 17]], "key": [[1606, 8], [1606, 11]], "ti": [[1623, 8], [1623, 10]], "value": [[1607, 8], [1607, 13]]}, "fn_var_occur": {"dr": [["dr", "ti", "task", "dag", "create_dagrun", "run_id", "execution_date", "exec_date", "state", "None"], ["ti", "TI", "task", "ti", "task", "run_id", "dr", "run_id"]], "exec_date": [["exec_date", "ti", "dag_run", "execution_date"], ["exec_date", "datetime", "timedelta", "days"], ["dr", "ti", "task", "dag", "create_dagrun", "run_id", "execution_date", "exec_date", "state", "None"]], "key": [["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "None"], ["ti", "xcom_pull", "task_ids", "key", "key", "include_prior_dates", "True", "value"]], "ti": [["ti", "create_task_instance", "dag_id", "schedule", "task_id", "pool"], ["exec_date", "ti", "dag_run", "execution_date"], ["ti", "run", "mark_success", "True"], ["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "run"], ["dr", "ti", "task", "dag", "create_dagrun", "run_id", "execution_date", "exec_date", "state", "None"], ["ti", "TI", "task", "ti", "task", "run_id", "dr", "run_id"], ["ti", "run"], ["ti", "xcom_pull", "task_ids", "key", "key", "None"], ["ti", "xcom_pull", "task_ids", "key", "key", "include_prior_dates", "True", "value"]], "value": [["ti", "xcom_push", "key", "key", "value", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "value"], ["ti", "xcom_pull", "task_ids", "key", "key", "include_prior_dates", "True", "value"]]}, "name": "test_xcom_pull_different_execution_date", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "schedule", "task_id", "pool"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["base.Connection", 0.09961966119053074], ["str", 0.09312132546742952]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_xcom_pull_different_execution_date", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "exec_date": "", "key": "", "ti": "", "value": ""}, "variables_p": {"dr": [["grpy.core.models.Grouping", 0.11249721228821763], ["tuple", 0.11024916623133134], ["dict", 0.10184289974741491], ["cg_broker.models.Runner", 0.09913527527522223], ["DefaultDict[Any, None]", 0.09871354176037245], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.0894073936084195], ["list", 0.08756448695589149]], "exec_date": [["datetime.datetime", 0.2513269714396703], ["datetime.date", 0.18680610060419478], ["datetime.datetime.datetime", 0.1640303490676281], ["Dict[Any, List[str]]", 0.11743400027997614], ["list", 0.10138060989735322]], "key": [["bytes", 0.3845092881702459], ["str", 0.26107646567063447], ["int", 0.15732740240984042]], "ti": [["List[str]", 0.27711149547983494], ["Optional[magic.models.deck.Deck]", 0.22368471740631118], ["int", 0.22127989064410775], ["Union[Literal, int]", 0.08696005608357173]], "value": [["str", 0.28995090337561413], ["Dict[str, bool]", 0.2225087607469481], ["float", 0.12665905923746099], ["dict", 0.09485258641939]]}}, {"docstring": {"func": "Tests the option for Operators to push XComs", "long_descr": null, "ret": null}, "fn_lc": [[1632, 4], [1649, 74]], "fn_var_ln": {"task": [[1647, 8], [1647, 15]], "task_id": [[1637, 8], [1637, 15]], "ti": [[1646, 8], [1646, 10]], "value": [[1636, 8], [1636, 13]]}, "fn_var_occur": {"task": [["task", "PythonOperator", "task_id", "task_id", "python_callable", "value", "do_xcom_push", "False"], ["ti", "task", "task"]], "task_id": [["task", "PythonOperator", "task_id", "task_id", "python_callable", "value", "do_xcom_push", "False"], ["ti", "xcom_pull", "task_ids", "task_id", "key", "XCOM_RETURN_KEY", "None"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["ti", "xcom_pull", "task_ids", "task_id", "key", "XCOM_RETURN_KEY", "None"]], "value": [["task", "PythonOperator", "task_id", "task_id", "python_callable", "value", "do_xcom_push", "False"]]}, "name": "test_xcom_push_flag", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.10005859230396628]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_xcom_push_flag", "ret_exprs": [], "ret_type": "", "variables": {"task": "", "task_id": "", "ti": "", "value": ""}, "variables_p": {"task": [["Dict[str, Union[Any, bool, str]]", 0.17419061863687954], ["golem.task.taskcomputer.TaskComputer", 0.11894457029635826], ["str", 0.1137424543986146], ["golem.task.taskbase.Task", 0.10368262661635934], ["Dict[str, Dict[str, int]]", 0.10165989384911643], ["restful_functions.modules.task.TaskStore", 0.08933887325948864], ["Dict[str, Any]", 0.08672499481497825]], "task_id": [["str", 0.30087675297734257], ["int", 0.2064749414822954], ["Dict[str, int]", 0.11250102712920623]], "ti": [["str", 0.4991333535950677], ["uuid.UUID", 0.2714070259565241]], "value": [["str", 0.6460354972386252], ["Dict[str, str]", 0.1558173256510456]]}}, {"docstring": {"func": "Test that post_execute hook is called with the Operator's result.", "long_descr": "The result ('error') will cause an error to be raised and trapped.", "ret": null}, "fn_lc": [[1651, 4], [1673, 20]], "fn_var_ln": {"task": [[1671, 8], [1671, 15]], "ti": [[1670, 8], [1670, 10]]}, "fn_var_occur": {"task": [["task", "TestOperator", "task_id", "python_callable"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "DEFAULT_DATE", "task_instances"], ["ti", "task", "task"], ["ti", "run"]]}, "name": "test_post_execute_hook", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "DEFAULT_DATE", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["base.Connection", 0.4141829300035], ["raiden.utils.Address", 0.2044070282254693], ["core.models.Grouping", 0.19052674904426325], ["raiden.utils.TokenNetworkAddress", 0.09363543344954281]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_post_execute_hook", "ret_exprs": [], "ret_type": "", "variables": {"task": "", "ti": ""}, "variables_p": {"task": [["str", 0.3999596697467026], ["List[str]", 0.21115649087162952], ["Dict[str, str]", 0.10641924371602679], ["KeysView[str]", 0.09893321232629074], ["Dict[str, int]", 0.09215973608240385], ["Dict[Any, str]", 0.09137164725694649]], "ti": [["str", 0.21728834720475837], ["List[Tuple[str, Any]]", 0.11072278232110133], ["List[Variable[_T]]", 0.10054592020131357], ["List[str]", 0.0960909887228434], ["datetime.datetime.datetime", 0.08108248619437516], ["Optional[excars.models.profiles.Profile]", 0.07856710567444329]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1675, 4], [1686, 57]], "fn_var_ln": {"serialized_dag": [[1679, 8], [1679, 22]], "ti": [[1676, 8], [1676, 10]], "ti_from_deserialized_task": [[1680, 8], [1680, 33]]}, "fn_var_occur": {"serialized_dag": [["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"]], "ti": [["ti", "create_task_instance", "dag_id"], ["SerializedDagModel", "write_dag", "ti", "task", "dag"], ["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"]], "ti_from_deserialized_task": [["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"], ["ti_from_deserialized_task", "_try_number"], ["ti_from_deserialized_task", "check_and_change_state_before_execution"], ["ti_from_deserialized_task", "state", "State", "RUNNING"], ["ti_from_deserialized_task", "_try_number"]]}, "name": "test_check_and_change_state_before_execution", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["str", 0.30825304682592164], ["pathlib.Path", 0.09512725996448397], ["restful_functions.modules.task.TaskStoreSettings", 0.09436910544036452], ["pybuses.types.Subscribable", 0.09389192262335003]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_check_and_change_state_before_execution", "ret_exprs": [], "ret_type": "", "variables": {"serialized_dag": "", "ti": "", "ti_from_deserialized_task": ""}, "variables_p": {"serialized_dag": [["str", 0.4768821033223014], ["List[str]", 0.11020324443551335], ["bool", 0.08621189089696606]], "ti": [["str", 0.4182855287964284], ["int", 0.2816772511293199]], "ti_from_deserialized_task": [["kippo.tasks.models.KippoTask", 0.2129157156398138], ["models.userData", 0.2003733643348956], ["kippo.tasks.models.KippoTaskStatus", 0.1075303060990735], ["golem.task.taskbase.Task", 0.10268071280555963], ["khetha.models.Task", 0.0868533484254273]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1688, 4], [1696, 64]], "fn_var_ln": {"serialized_dag": [[1694, 8], [1694, 22]], "task2": [[1690, 8], [1690, 13]], "ti": [[1689, 8], [1689, 10]], "ti2": [[1695, 8], [1695, 11]]}, "fn_var_occur": {"serialized_dag": [["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti2", "TI", "task", "serialized_dag", "get_task", "task2", "task_id", "run_id", "ti", "run_id"]], "task2": [["task2", "EmptyOperator", "task_id", "dag", "ti", "task", "dag", "start_date", "DEFAULT_DATE"], ["ti", "task", "task2"], ["ti2", "TI", "task", "serialized_dag", "get_task", "task2", "task_id", "run_id", "ti", "run_id"]], "ti": [["ti", "create_task_instance", "dag_id"], ["task2", "EmptyOperator", "task_id", "dag", "ti", "task", "dag", "start_date", "DEFAULT_DATE"], ["ti", "task", "task2"], ["SerializedDagModel", "write_dag", "ti", "task", "dag"], ["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti2", "TI", "task", "serialized_dag", "get_task", "task2", "task_id", "run_id", "ti", "run_id"]], "ti2": [["ti2", "TI", "task", "serialized_dag", "get_task", "task2", "task_id", "run_id", "ti", "run_id"], ["ti2", "check_and_change_state_before_execution"]]}, "name": "test_check_and_change_state_before_execution_dep_not_met", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["str", 0.30825304682592164], ["pathlib.Path", 0.09512725996448397], ["restful_functions.modules.task.TaskStoreSettings", 0.09436910544036452], ["pybuses.types.Subscribable", 0.09389192262335003]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_check_and_change_state_before_execution_dep_not_met", "ret_exprs": [], "ret_type": "", "variables": {"serialized_dag": "", "task2": "", "ti": "", "ti2": ""}, "variables_p": {"serialized_dag": [["bool", 0.4687546882198317], ["datetime.timedelta", 0.0991798998450709], ["int", 0.09454620242946746], ["float", 0.09375093764396633]], "task2": [["reminders.task.Task", 0.24651381328226996], ["Dict[str, Any]", 0.1813976813884978], ["set", 0.11881241191095052], ["golem.task.taskbase.Task", 0.10199872456255174], ["dict", 0.08330047237667439], ["List[app.models.User]", 0.08263589840018423]], "ti": [["int", 0.30939815106976487], ["list", 0.20958448102785643], ["List[Dict[str, Any]]", 0.09665607111707918], ["str", 0.09214360405062606], ["Dict[int, str]", 0.0918419107353217]], "ti2": [["golem.task.taskstate.SubtaskState", 0.20796682621838403], ["golem.task.taskcomputer.TaskComputation", 0.15191742699004376], ["restful_functions.modules.task.TaskStoreSettings", 0.11447653851456072], ["zerver.models.Realm", 0.0875505134970291], ["list", 0.08347026086428329], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.07725138836879639], ["golem.task.taskmanager.TaskManager", 0.07063082007713185]]}}, {"docstring": {"func": "return False if the task instance state is running", "long_descr": null, "ret": null}, "fn_lc": [[1698, 4], [1710, 63]], "fn_var_ln": {"serialized_dag": [[1706, 8], [1706, 22]], "state": [[1702, 12], [1702, 20]], "ti": [[1700, 8], [1700, 10]], "ti_from_deserialized_task": [[1707, 8], [1707, 33]]}, "fn_var_occur": {"serialized_dag": [["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"]], "state": [["ti", "state", "State", "RUNNING"], ["ti_from_deserialized_task", "state", "State", "RUNNING"]], "ti": [["ti", "create_task_instance", "dag_id"], ["ti", "state", "State", "RUNNING"], ["SerializedDagModel", "write_dag", "ti", "task", "dag"], ["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"]], "ti_from_deserialized_task": [["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"], ["ti_from_deserialized_task", "check_and_change_state_before_execution"], ["ti_from_deserialized_task", "state", "State", "RUNNING"]]}, "name": "test_check_and_change_state_before_execution_dep_not_met_already_running", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["str", 0.30825304682592164], ["pathlib.Path", 0.09512725996448397], ["restful_functions.modules.task.TaskStoreSettings", 0.09436910544036452], ["pybuses.types.Subscribable", 0.09389192262335003]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_check_and_change_state_before_execution_dep_not_met_already_running", "ret_exprs": [], "ret_type": "", "variables": {"serialized_dag": "", "state": "", "ti": "", "ti_from_deserialized_task": ""}, "variables_p": {"serialized_dag": [["str", 0.4768821033223014], ["List[str]", 0.11020324443551335], ["bool", 0.08621189089696606]], "state": [["int", 0.1803355954337379], ["Tuple[str]", 0.1113854680590813], ["raiden.transfer.state.ChainState", 0.09374486197514466]], "ti": [["int", 0.22306201383062751], ["List[int]", 0.09944205465834938], ["bool", 0.0952406372451317], ["dict", 0.08656228745724331], ["str", 0.0864409909551244]], "ti_from_deserialized_task": [["kippo.tasks.models.KippoTask", 0.24268686952979387], ["kippo.tasks.models.KippoTaskStatus", 0.1013516803097155], ["khetha.models.Task", 0.09797454469471649], ["golem.task.taskbase.Task", 0.09778272033633985], ["models.userData", 0.09419013466256845], ["taskiapplication.models.task.Task", 0.08518579385023387]]}}, {"docstring": {"func": "return False if the task instance state is failed", "long_descr": null, "ret": null}, "fn_lc": [[1712, 4], [1726, 62]], "fn_var_ln": {"serialized_dag": [[1722, 8], [1722, 22]], "state": [[1718, 12], [1718, 20]], "ti": [[1716, 8], [1716, 10]], "ti_from_deserialized_task": [[1723, 8], [1723, 33]]}, "fn_var_occur": {"serialized_dag": [["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"]], "state": [["ti", "state", "State", "FAILED"], ["ti_from_deserialized_task", "state", "State", "FAILED"]], "ti": [["ti", "create_task_instance", "dag_id"], ["ti", "state", "State", "FAILED"], ["SerializedDagModel", "write_dag", "ti", "task", "dag"], ["serialized_dag", "SerializedDagModel", "get", "ti", "task", "dag", "dag_id", "dag"], ["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"]], "ti_from_deserialized_task": [["ti_from_deserialized_task", "TI", "task", "serialized_dag", "get_task", "ti", "task_id", "run_id", "ti", "run_id"], ["ti_from_deserialized_task", "check_and_change_state_before_execution"], ["ti_from_deserialized_task", "state", "State", "FAILED"]]}, "name": "test_check_and_change_state_before_execution_dep_not_met_not_runnable_state", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["str", 0.30825304682592164], ["pathlib.Path", 0.09512725996448397], ["restful_functions.modules.task.TaskStoreSettings", 0.09436910544036452], ["pybuses.types.Subscribable", 0.09389192262335003]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_check_and_change_state_before_execution_dep_not_met_not_runnable_state", "ret_exprs": [], "ret_type": "", "variables": {"serialized_dag": "", "state": "", "ti": "", "ti_from_deserialized_task": ""}, "variables_p": {"serialized_dag": [["str", 0.4768821033223014], ["List[str]", 0.11020324443551335], ["bool", 0.08621189089696606]], "state": [["Dict[str, faaspact_verifier.types.ProviderStateFixture]", 0.11242303230629426], ["src.scrape.models.Product", 0.10328600750529891], ["str", 0.0737755642689313]], "ti": [["str", 0.4258379526281111], ["int", 0.19577989843728177]], "ti_from_deserialized_task": [["kippo.tasks.models.KippoTask", 0.24268686952979387], ["kippo.tasks.models.KippoTaskStatus", 0.1013516803097155], ["khetha.models.Task", 0.09797454469471649], ["golem.task.taskbase.Task", 0.09778272033633985], ["models.userData", 0.09419013466256845], ["taskiapplication.models.task.Task", 0.08518579385023387]]}}, {"docstring": {"func": "Test the try_number accessor behaves in various running states", "long_descr": null, "ret": null}, "fn_lc": [[1728, 4], [1738, 33]], "fn_var_ln": {"state": [[1737, 8], [1737, 16]], "ti": [[1732, 8], [1732, 10]], "try_number": [[1734, 8], [1734, 21]]}, "fn_var_occur": {"state": [["ti", "state", "State", "RUNNING"], ["ti", "state", "State", "SUCCESS"]], "ti": [["ti", "create_task_instance", "dag_id"], ["ti", "try_number"], ["ti", "try_number"], ["ti", "state", "State", "RUNNING"], ["ti", "try_number"], ["ti", "state", "State", "SUCCESS"], ["ti", "try_number"]], "try_number": [["ti", "try_number"], ["ti", "try_number"], ["ti", "try_number"], ["ti", "try_number"]]}, "name": "test_try_number", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.353404241375434], ["str", 0.27971725777479817], ["restful_functions.modules.task.TaskStoreSettings", 0.09614982442075469], ["pybuses.types.Subscribable", 0.08675258816006799]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_try_number", "ret_exprs": [], "ret_type": "", "variables": {"state": "", "ti": "", "try_number": ""}, "variables_p": {"state": [["str", 0.16614022144833834], ["Generator[Any, None, None]", 0.10565626038259482], ["Type[Dict[str, Any]]", 0.08394029931145731], ["int", 0.08127642996032079], ["Iterator[str]", 0.08016514786122955]], "ti": [["int", 0.4861498663678206], ["str", 0.30705909765400324], ["Tuple[str, int]", 0.11705509824951434], ["Dict[str, str]", 0.08973593772866173]], "try_number": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1740, 4], [1771, 71]], "fn_var_ln": {"dr": [[1747, 8], [1747, 10]], "session": [[1741, 8], [1741, 15]], "state": [[1765, 8], [1765, 17]], "task": [[1755, 8], [1755, 16]], "ti1": [[1743, 8], [1743, 11]], "ti2": [[1754, 8], [1754, 11]], "ti3": [[1757, 8], [1757, 11]]}, "fn_var_occur": {"dr": [["dr", "ti1", "task", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "state", "None", "run_id", "session", "session"], ["ti2", "dr", "task_instances"]], "session": [["session", "settings", "Session"], ["ti1", "create_task_instance", "dag_id", "task_id", "session", "session"], ["dr", "ti1", "task", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "state", "None", "run_id", "session", "session"], ["ti1", "session"], ["ti3", "create_task_instance", "dag_id", "task_id", "session", "session"], ["ti3", "session"], ["ti1", "session"], ["ti3", "session"], ["session", "commit"], ["ti1", "get_num_running_task_instances", "session", "session"], ["ti2", "get_num_running_task_instances", "session", "session"], ["ti3", "get_num_running_task_instances", "session", "session"]], "state": [["dr", "ti1", "task", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "state", "None", "run_id", "session", "session"], ["ti1", "state", "State", "RUNNING"], ["ti2", "state", "State", "QUEUED"], ["ti3", "state", "State", "RUNNING"]], "task": [["dr", "ti1", "task", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "state", "None", "run_id", "session", "session"], ["ti2", "task", "ti1", "task"]], "ti1": [["ti1", "create_task_instance", "dag_id", "task_id", "session", "session"], ["dr", "ti1", "task", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "state", "None", "run_id", "session", "session"], ["ti1", "session"], ["ti2", "task", "ti1", "task"], ["ti1", "session"], ["ti1", "state", "State", "RUNNING"], ["ti1", "get_num_running_task_instances", "session", "session"]], "ti2": [["ti2", "dr", "task_instances"], ["ti2", "task", "ti1", "task"], ["ti2", "state", "State", "QUEUED"], ["ti2", "get_num_running_task_instances", "session", "session"]], "ti3": [["ti3", "create_task_instance", "dag_id", "task_id", "session", "session"], ["ti3", "session"], ["ti3", "state", "State", "RUNNING"], ["ti3", "session"], ["ti3", "get_num_running_task_instances", "session", "session"]]}, "name": "test_get_num_running_task_instances", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti1", "create_task_instance", "dag_id", "task_id", "session", "session"], ["ti3", "create_task_instance", "dag_id", "task_id", "session", "session"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["aiohttp.test_utils.TestClient", 0.5517655263067343]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_get_num_running_task_instances", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "session": "", "state": "", "task": "", "ti1": "", "ti2": "", "ti3": ""}, "variables_p": {"dr": [["grpy.core.models.Grouping", 0.2750452112991305], ["gardnr.models.Metric", 0.17915701380475696], ["Dict[str, Any]", 0.09767658560001799], ["ofxtools.models.signon.SONRS", 0.09511495755291059], ["float", 0.09001078291582522]], "session": [["kedro.framework.session.session.KedroSession", 0.08063238076511058]], "state": [["golem.task.taskstate.TaskState", 0.2727945609300845], ["byceps.services.board.models.posting.Posting", 0.19965074521047457], ["grpy.core.models.User", 0.11243788944097725], ["Optional[zam_repondeur.models.Amendement]", 0.10211461423676893], ["Optional[raiden.transfer.state.TokenNetworkState]", 0.09825163849711936]], "task": [["tkinter.Variable", 0.09360727345463603], ["Dict[str, Any]", 0.0934954434528498], ["list", 0.09032452367086258], ["dict", 0.08566167580119531]], "ti1": [["int", 0.567630171020572], ["Dict[str, str]", 0.11134419165701893], ["tuple", 0.10982306786852451], ["Dict[int, str]", 0.10738043963070397]], "ti2": [["str", 0.5863849131815717], ["Tuple[int, int, int, int]", 0.10829121614551285], ["bool", 0.0948362446813912], ["bytes", 0.08746735648471157]], "ti3": [["int", 0.5573523166667687], ["golem.task.taskbase.AcceptClientVerdict", 0.091942169134151], ["pydynasync.models.Changes", 0.08601018983651218]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1773, 4], [1820, 105]], "fn_var_ln": {"dr1": [[1781, 8], [1781, 11]], "dr2": [[1787, 8], [1787, 11]], "session": [[1774, 8], [1774, 15]], "tis1": [[1784, 8], [1784, 12]], "tis2": [[1790, 8], [1790, 12]]}, "fn_var_occur": {"dr1": [["dr1", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "state", "DagRunState", "RUNNING", "run_id", "session", "session"], ["tis1", "ti", "task_id", "ti", "map_index", "ti", "ti", "dr1", "task_instances"]], "dr2": [["dr2", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "state", "DagRunState", "RUNNING", "run_id", "session", "session"], ["tis2", "ti", "task_id", "ti", "map_index", "ti", "ti", "dr2", "task_instances"]], "session": [["session", "settings", "Session"], ["dr1", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "state", "DagRunState", "RUNNING", "run_id", "session", "session"], ["dr2", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "state", "DagRunState", "RUNNING", "run_id", "session", "session"], ["tis1", "session"], ["tis1", "session"], ["tis1", "session"], ["tis1", "session"], ["tis2", "session"], ["tis2", "session"], ["tis2", "session"], ["tis2", "session"], ["session", "commit"], ["tis1", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis1", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis1", "get_num_running_task_instances", "session", "session"], ["tis1", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis2", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis2", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis2", "get_num_running_task_instances", "session", "session"], ["tis2", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"]], "tis1": [["tis1", "ti", "task_id", "ti", "map_index", "ti", "ti", "dr1", "task_instances"], ["print", "tis1"], ["tis1", "session"], ["tis1", "session"], ["tis1", "session"], ["tis1", "session"], ["tis1", "state", "State", "RUNNING"], ["tis1", "state", "State", "QUEUED"], ["tis1", "state", "State", "RUNNING"], ["tis1", "state", "State", "RUNNING"], ["tis1", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis1", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis1", "get_num_running_task_instances", "session", "session"], ["tis1", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"]], "tis2": [["tis2", "ti", "task_id", "ti", "map_index", "ti", "ti", "dr2", "task_instances"], ["tis2", "session"], ["tis2", "session"], ["tis2", "session"], ["tis2", "session"], ["tis2", "state", "State", "RUNNING"], ["tis2", "state", "State", "QUEUED"], ["tis2", "state", "State", "RUNNING"], ["tis2", "state", "State", "RUNNING"], ["tis2", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis2", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"], ["tis2", "get_num_running_task_instances", "session", "session"], ["tis2", "get_num_running_task_instances", "session", "session", "same_dagrun", "True"]]}, "name": "test_get_num_running_task_instances_per_dagrun", "params": {"create_task_instance": "", "dag_maker": "", "self": ""}, "params_descr": {"create_task_instance": "", "dag_maker": "", "self": ""}, "params_occur": {"create_task_instance": [], "dag_maker": [["dag_maker", "dag_id"], ["dr1", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "state", "DagRunState", "RUNNING", "run_id", "session", "session"], ["dr2", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "state", "DagRunState", "RUNNING", "run_id", "session", "session"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["app.models.user.UserInDB", 0.10492125784391347], ["ultron8.api.models.user.UserInDB", 0.10492125784391347], ["bool", 0.1005552888422306]], "dag_maker": [["core.models.Grouping", 0.41679596998370727]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_get_num_running_task_instances_per_dagrun", "ret_exprs": [], "ret_type": "", "variables": {"dr1": "", "dr2": "", "session": "", "tis1": "", "tis2": ""}, "variables_p": {"dr1": [["bool", 0.2672859799160643], ["str", 0.1916956933996468], ["float", 0.13942422398762], ["Optional[dict]", 0.11614884566504056], ["libsoundtouch.tests.test_libsoundtouch.MockDevice", 0.09976999964780735], ["list", 0.08872315249241991]], "dr2": [["bool", 0.2672859799160643], ["str", 0.1916956933996468], ["float", 0.13942422398762], ["Optional[dict]", 0.11614884566504056], ["libsoundtouch.tests.test_libsoundtouch.MockDevice", 0.09976999964780735], ["list", 0.08872315249241991]], "session": [["grpy.core.models.User", 0.42316835022268884], ["sqlalchemy.orm.session.Session", 0.10252490349653832], ["app.models.User", 0.09655461054548535]], "tis1": [["dict", 0.4216360334145991], ["pydynasync.models.Changes", 0.19378128017984952], ["uuid.UUID", 0.09885098627874461], ["Dict[str, str]", 0.09185998581718396], ["list", 0.09185477084645517]], "tis2": [["dict", 1.0000000000000002]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1822, 4], [1832, 41]], "fn_var_ln": {"expected_url": [[1825, 8], [1825, 20]], "ti": [[1823, 8], [1823, 10]]}, "fn_var_occur": {"expected_url": [["ti", "log_url", "expected_url"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "execution_date", "timezone", "datetime"], ["ti", "log_url", "expected_url"]]}, "name": "test_log_url", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "execution_date", "timezone", "datetime"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["mock.MagicMock", 0.09190988908617023], ["zerver.models.UserProfile", 0.0855095141179642]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_log_url", "ret_exprs": [], "ret_type": "", "variables": {"expected_url": "", "ti": ""}, "variables_p": {"expected_url": [["str", 0.8905643552528376], ["urllib.parse.SplitResult", 0.10943564474716265]], "ti": [["int", 0.4010723285836448], ["str", 0.21778591404597733], ["list", 0.13112360572192602], ["List[str]", 0.08664021125415368], ["Union[Literal, Literal]", 0.0780144057737766]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1834, 4], [1843, 39]], "fn_var_ln": {"now": [[1835, 8], [1835, 11]], "query": [[1837, 8], [1837, 13]], "ti": [[1836, 8], [1836, 10]]}, "fn_var_occur": {"now": [["now", "pendulum", "now"], ["ti", "create_task_instance", "dag_id", "task_id", "execution_date", "now"], ["ti", "execution_date", "now"]], "query": [["query", "urllib", "parse", "parse_qs", "urllib", "parse", "urlsplit", "ti", "mark_success_url", "query", "keep_blank_values", "True", "strict_parsing", "True"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "execution_date", "now"], ["query", "urllib", "parse", "parse_qs", "urllib", "parse", "urlsplit", "ti", "mark_success_url", "query", "keep_blank_values", "True", "strict_parsing", "True"], ["ti", "execution_date", "now"]]}, "name": "test_mark_success_url", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "execution_date", "now"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["mock.MagicMock", 0.1019076406287468], ["lunch_buddies.types.GroupsToNotifyMessage", 0.08538749332457674]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mark_success_url", "ret_exprs": [], "ret_type": "", "variables": {"now": "", "query": "", "ti": ""}, "variables_p": {"now": [["int", 0.20643655240121533], ["float", 0.19685650713237984], ["List[str]", 0.10985763996719326], ["datetime.datetime", 0.10440201221782534], ["List[int]", 0.10344192050851297], ["str", 0.08722850871487375]], "query": [["urllib.parse.ParseResult", 0.8190477032086103], ["urllib.parse.SplitResult", 0.09535348113208847], ["str", 0.0855988156593013]], "ti": [["str", 0.2523784786516531], ["int", 0.1716918232413784], ["Dict[int, str]", 0.09370810909416803], ["Dict[Any, str]", 0.09055455690934545], ["List[Variable[_T]]", 0.0829286551577336]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1845, 4], [1852, 41]], "fn_var_ln": {"conf": [[1848, 8], [1848, 20]], "dag_run": [[1847, 8], [1847, 15]], "params": [[1851, 8], [1851, 14]], "ti": [[1846, 8], [1846, 10]]}, "fn_var_occur": {"conf": [["dag_run", "conf", "True"]], "dag_run": [["dag_run", "ti", "dag_run"], ["dag_run", "conf", "True"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "dag_run", "suppress_exception", "False"]], "params": [["ti", "task", "params", "False"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "dag_run", "suppress_exception", "False"], ["params", "True"]], "ti": [["ti", "create_task_instance"], ["dag_run", "ti", "dag_run"], ["ti", "task", "params", "False"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "dag_run", "suppress_exception", "False"]]}, "name": "test_overwrite_params_with_dag_run_conf", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_overwrite_params_with_dag_run_conf", "ret_exprs": [], "ret_type": "", "variables": {"conf": "", "dag_run": "", "params": "", "ti": ""}, "variables_p": {"conf": [["str", 0.8999999999999999], ["bool", 0.09999999999999999]], "dag_run": [["bool", 0.11497704683252952], ["DefaultDict[str, int]", 0.11169501720620195], ["raiden.utils.Any", 0.09884691937594878]], "params": [["str", 0.27073670116281356], ["Dict[str, Union[Any, Any]]", 0.14734852288036637], ["int", 0.09999543149340043], ["Dict[str, Optional[str]]", 0.09831621956722271], ["TextIO", 0.08851599187144911]], "ti": [["str", 0.20546027545272685], ["pstats.Stats", 0.1126828266740733], ["int", 0.10646209136020085], ["quantumflow.states.State", 0.10239761205072222]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1854, 4], [1859, 42]], "fn_var_ln": {"params": [[1858, 8], [1858, 14]], "ti": [[1855, 8], [1855, 10]]}, "fn_var_occur": {"params": [["ti", "task", "params", "False"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "None", "suppress_exception", "False"], ["params", "False"]], "ti": [["ti", "create_task_instance"], ["ti", "task", "params", "False"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "None", "suppress_exception", "False"]]}, "name": "test_overwrite_params_with_dag_run_none", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_overwrite_params_with_dag_run_none", "ret_exprs": [], "ret_type": "", "variables": {"params": "", "ti": ""}, "variables_p": {"params": [["Dict[str, Union[Any, Any]]", 0.2055687874465079], ["str", 0.20207676969437216], ["Dict[str, Optional[str]]", 0.13749249433573585], ["TextIO", 0.08478012986333018]], "ti": [["Dict[str, Any]", 0.10694287043912791], ["int", 0.09298110414628456], ["str", 0.08714981483780604], ["Dict[str, str]", 0.07701234107979804]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1861, 4], [1867, 42]], "fn_var_ln": {"dag_run": [[1863, 8], [1863, 15]], "params": [[1866, 8], [1866, 14]], "ti": [[1862, 8], [1862, 10]]}, "fn_var_occur": {"dag_run": [["dag_run", "ti", "dag_run"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "dag_run", "suppress_exception", "False"]], "params": [["ti", "task", "params", "False"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "dag_run", "suppress_exception", "False"], ["params", "False"]], "ti": [["ti", "create_task_instance"], ["dag_run", "ti", "dag_run"], ["ti", "task", "params", "False"], ["params", "process_params", "ti", "task", "dag", "ti", "task", "dag_run", "suppress_exception", "False"]]}, "name": "test_overwrite_params_with_dag_run_conf_none", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_overwrite_params_with_dag_run_conf_none", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "params": "", "ti": ""}, "variables_p": {"dag_run": [["str", 0.7410576262579623], ["List[str]", 0.08880139054249751], ["list", 0.08461692886509177]], "params": [["str", 0.2676071475043843], ["Dict[str, Union[Any, Any]]", 0.15431926163436122], ["int", 0.09946964516321127], ["Dict[str, Optional[str]]", 0.09745975258831671], ["TextIO", 0.0869559659739314]], "ti": [["str", 0.20546027545272685], ["pstats.Stats", 0.1126828266740733], ["int", 0.10646209136020085], ["quantumflow.states.State", 0.10239761205072222]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1871, 4], [1886, 30]], "fn_var_ln": {"_": [[1882, 30], [1882, 31]], "body": [[1882, 23], [1882, 27]], "email": [[1882, 9], [1882, 14]], "task": [[1875, 8], [1875, 15]], "ti": [[1874, 8], [1874, 10]], "title": [[1882, 16], [1882, 21]]}, "fn_var_occur": {"_": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "body": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "email": [["task", "BashOperator", "task_id", "bash_command", "email"], ["email", "title", "body", "_", "mock_send_email", "call_args"]], "task": [["task", "BashOperator", "task_id", "bash_command", "email"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"]], "title": [["email", "title", "body", "_", "mock_send_email", "call_args"]]}, "name": "test_email_alert", "params": {"dag_maker": "", "mock_send_email": "", "self": "", "use_native_obj": ""}, "params_descr": {"dag_maker": "", "mock_send_email": "", "self": "", "use_native_obj": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "render_template_as_native_obj", "use_native_obj"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "mock_send_email": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "self": [], "use_native_obj": [["dag_maker", "dag_id", "render_template_as_native_obj", "use_native_obj"]]}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "mock_send_email": [["aiohttp.test_utils.TestServer", 0.09201068563895513]], "self": [], "use_native_obj": [["tests.async_mock.Mock", 0.1475767952768067]]}, "q_name": "TestTaskInstance.test_email_alert", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "body": "", "email": "", "task": "", "ti": "", "title": ""}, "variables_p": {"_": [["int", 0.6725540161335323], ["str", 0.1660986750627458], ["Dict[str, str]", 0.16134730880372175]], "body": [["Dict[str, str]", 0.21915526789878323], ["int", 0.18328516168167278], ["Dict[bool, str]", 0.15120352514899144], ["list", 0.09177963737421678], ["uuid.UUID", 0.09137861244858966]], "email": [["str", 0.34528473720685193], ["list", 0.19129339775690318], ["List[str]", 0.16692925142448428], ["Pattern[str]", 0.11245773461036218], ["int", 0.10177816480788747], ["dict", 0.08225671419351084]], "task": [["reminders.task.Task", 0.16744050214057932], ["Dict[str, Any]", 0.09688896484740311], ["list", 0.08641665984334546], ["List[None]", 0.07808699399923397], ["Dict[str, str]", 0.07587993940079829]], "ti": [["str", 0.5517901295128026], ["List[str]", 0.08935943781749334], ["datetime.date.time.timezone", 0.07972416014534958]], "title": [["int", 0.6725540161335323], ["str", 0.1660986750627458], ["Dict[str, str]", 0.16134730880372175]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1895, 4], [1915, 63]], "fn_var_ln": {"_": [[1912, 30], [1912, 31]], "body": [[1912, 23], [1912, 27]], "email": [[1912, 9], [1912, 14]], "opener": [[1905, 8], [1905, 14]], "task": [[1903, 8], [1903, 15]], "ti": [[1902, 8], [1902, 10]], "title": [[1912, 16], [1912, 21]]}, "fn_var_occur": {"_": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "body": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "email": [["task", "BashOperator", "task_id", "bash_command", "email"], ["email", "title", "body", "_", "mock_send_email", "call_args"]], "opener": [["opener", "mock_open", "read_data"], ["patch", "opener", "create", "True"]], "task": [["task", "BashOperator", "task_id", "bash_command", "email"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"]], "title": [["email", "title", "body", "_", "mock_send_email", "call_args"]]}, "name": "test_email_alert_with_config", "params": {"dag_maker": "", "mock_send_email": "", "self": ""}, "params_descr": {"dag_maker": "", "mock_send_email": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "mock_send_email": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "mock_send_email": [["aiohttp.test_utils.TestServer", 0.1153639058187157]], "self": []}, "q_name": "TestTaskInstance.test_email_alert_with_config", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "body": "", "email": "", "opener": "", "task": "", "ti": "", "title": ""}, "variables_p": {"_": [["int", 0.6725540161335323], ["str", 0.1660986750627458], ["Dict[str, str]", 0.16134730880372175]], "body": [["Dict[str, str]", 0.21915526789878323], ["int", 0.18328516168167278], ["Dict[bool, str]", 0.15120352514899144], ["list", 0.09177963737421678], ["uuid.UUID", 0.09137861244858966]], "email": [["str", 0.34528473720685193], ["list", 0.19129339775690318], ["List[str]", 0.16692925142448428], ["Pattern[str]", 0.11245773461036218], ["int", 0.10177816480788747], ["dict", 0.08225671419351084]], "opener": [["str", 0.9999999999999998]], "task": [["reminders.task.Task", 0.16744050214057932], ["Dict[str, Any]", 0.09688896484740311], ["list", 0.08641665984334546], ["List[None]", 0.07808699399923397], ["Dict[str, str]", 0.07587993940079829]], "ti": [["str", 0.5517901295128026], ["List[str]", 0.08935943781749334], ["datetime.date.time.timezone", 0.07972416014534958]], "title": [["int", 0.6725540161335323], ["str", 0.1660986750627458], ["Dict[str, str]", 0.16134730880372175]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1918, 4], [1949, 41]], "fn_var_ln": {"_": [[1945, 54], [1945, 55]], "body_default": [[1945, 39], [1945, 51]], "body_error": [[1937, 35], [1937, 45]], "email_default": [[1945, 9], [1945, 22]], "email_error": [[1937, 9], [1937, 20]], "opener": [[1929, 8], [1929, 14]], "side_effect": [[1930, 8], [1930, 26]], "task": [[1926, 8], [1926, 15]], "ti": [[1925, 8], [1925, 10]], "title_default": [[1945, 24], [1945, 37]], "title_error": [[1937, 22], [1937, 33]]}, "fn_var_occur": {"_": [["email_error", "title_error", "body_error", "_", "mock_send_email", "call_args"], ["email_default", "title_default", "body_default", "_", "mock_send_email", "call_args"]], "body_default": [["email_default", "title_default", "body_default", "_", "mock_send_email", "call_args"], ["body_default", "body_error"]], "body_error": [["email_error", "title_error", "body_error", "_", "mock_send_email", "call_args"], ["body_default", "body_error"]], "email_default": [["email_default", "title_default", "body_default", "_", "mock_send_email", "call_args"], ["email_error", "email_default"]], "email_error": [["email_error", "title_error", "body_error", "_", "mock_send_email", "call_args"], ["email_error", "email_default"]], "opener": [["opener", "mock_open", "read_data"], ["opener", "side_effect", "FileNotFoundError"], ["patch", "opener", "create", "True"]], "side_effect": [["opener", "side_effect", "FileNotFoundError"]], "task": [["task", "BashOperator", "task_id", "bash_command", "email"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["ti", "run"]], "title_default": [["email_default", "title_default", "body_default", "_", "mock_send_email", "call_args"], ["title_default", "title_error"]], "title_error": [["email_error", "title_error", "body_error", "_", "mock_send_email", "call_args"], ["title_default", "title_error"]]}, "name": "test_email_alert_with_filenotfound_config", "params": {"dag_maker": "", "mock_send_email": "", "self": ""}, "params_descr": {"dag_maker": "", "mock_send_email": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "mock_send_email": [["email_error", "title_error", "body_error", "_", "mock_send_email", "call_args"], ["email_default", "title_default", "body_default", "_", "mock_send_email", "call_args"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "mock_send_email": [], "self": []}, "q_name": "TestTaskInstance.test_email_alert_with_filenotfound_config", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "body_default": "", "body_error": "", "email_default": "", "email_error": "", "opener": "", "side_effect": "", "task": "", "ti": "", "title_default": "", "title_error": ""}, "variables_p": {"_": [["int", 0.4161945848334504], ["str", 0.20508122309424653]], "body_default": [["int", 0.1993707420532525], ["raiden_contracts.tests.test_channel_update_transfer.test_update_invalid_balance_proof_arguments.balance_proof", 0.11147544324685185], ["myia.utils.misc.Named", 0.1042501933224813], ["Generator[Union[cmk.base.api.agent_based.checking_classes.Metric, cmk.base.api.agent_based.checking_classes.Result], None, None]", 0.09375416922139924], ["Dict[str, str]", 0.09245852573320877], ["dict", 0.09058613355841996]], "body_error": [["str", 0.49851703140993364], ["Set[str]", 0.2054265139101965], ["Dict[str, str]", 0.17531433812885128], ["list", 0.12074211655101874]], "email_default": [["str", 0.20379228009836559], ["Dict[str, str]", 0.1365913093478428], ["int", 0.12303317814374876], ["raiden_contracts.tests.test_channel_update_transfer.test_update_invalid_balance_proof_arguments.balance_proof", 0.09592558045286731], ["list", 0.09292442218792034], ["List[str]", 0.08589740046467582], ["List[Tuple[str, str]]", 0.08589740046467582], ["Dict[str, Union[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]]", 0.08536881208369469]], "email_error": [["str", 0.3811093561983631], ["List[str]", 0.19576041186160925], ["Dict[str, str]", 0.13958909962166346], ["frozenset[bytes]", 0.10695822663817156], ["List[Tuple[str, Any]]", 0.08879900531909649], ["Tuple[str, str, str]", 0.08778390036109607]], "opener": [["str", 1.0]], "side_effect": [["Pattern[str]", 0.09294937952386695], ["str", 0.08745538136677503]], "task": [["reminders.task.Task", 0.16744050214057932], ["Dict[str, Any]", 0.09688896484740311], ["list", 0.08641665984334546], ["List[None]", 0.07808699399923397], ["Dict[str, str]", 0.07587993940079829]], "ti": [["str", 0.6575327753836312], ["List[str]", 0.08643098241940217]], "title_default": [["int", 0.10028146808127193], ["Dict[str, Union[int, str]]", 0.09881412281553072]], "title_error": [["str", 0.18421665590745417], ["Dict[str, Dict[str, Any]]", 0.127273072741265], ["int", 0.12367598681402232], ["List[List[Any]]", 0.09933624483313098], ["pathlib.Path", 0.09896331240834284], ["bytes", 0.0829939048452305]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1957, 12], [1958, 49]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_email_alert", "params": {"x": ""}, "params_descr": {"x": ""}, "params_occur": {"x": []}, "params_p": {"args": [], "kwargs": [], "self": [], "x": [["bool", 0.5044525622319543], ["int", 0.10291956403140631], ["List[str]", 0.10291956403140631], ["str", 0.09555301296160293]]}, "q_name": "TestTaskInstance.test_failure_mapped_taskflow.<locals>.test_email_alert", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1953, 4], [1983, 42]], "fn_var_ln": {"_": [[1972, 30], [1972, 31]], "body": [[1972, 23], [1972, 27]], "dr": [[1963, 8], [1963, 10]], "email": [[1972, 9], [1972, 14]], "tf": [[1978, 8], [1978, 10]], "ti": [[1965, 8], [1965, 10]], "title": [[1972, 16], [1972, 21]]}, "fn_var_occur": {"_": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "body": [["email", "title", "body", "_", "mock_send_email", "call_args"], ["body", "startswith"]], "dr": [["dr", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow"], ["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"]], "email": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "tf": [["tf", "session", "query", "TaskFail", "filter_by", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index", "one_or_none"]], "ti": [["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"], ["ti", "None"], ["ti", "run", "session", "session"], ["tf", "session", "query", "TaskFail", "filter_by", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index", "one_or_none"]], "title": [["email", "title", "body", "_", "mock_send_email", "call_args"], ["title", "task_id"]]}, "name": "test_failure_mapped_taskflow", "params": {"dag_maker": "", "mock_send_email": "", "self": "", "session": "", "task_id": ""}, "params_descr": {"dag_maker": "", "mock_send_email": "", "self": "", "session": "", "task_id": ""}, "params_occur": {"dag_maker": [["dr", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow"]], "mock_send_email": [["email", "title", "body", "_", "mock_send_email", "call_args"]], "self": [], "session": [["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"], ["ti", "run", "session", "session"], ["tf", "session", "query", "TaskFail", "filter_by", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index", "one_or_none"]], "task_id": [["ti", "dr", "get_task_instance", "task_id", "map_index", "session", "session"], ["title", "task_id"], ["tf", "session", "query", "TaskFail", "filter_by", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index", "one_or_none"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.10731590924352791], ["List[str]", 0.10100035006305665], ["Callable", 0.09987796714292602], ["Union[str, datetime.datetime, None]", 0.09985057218348008], ["Dict[uuid.UUID, mtg_ssm.scryfall.models.ScryCard]", 0.0988377545785804], ["zerver.models.UserProfile", 0.09714719316525346], ["raiden.utils.FeeAmount", 0.09564236300720035]], "kwargs": [], "mock_send_email": [["int", 0.5911731747271814], ["transfer.models.ShopID", 0.09937796186831446], ["str", 0.09436413101616566]], "self": [], "session": [["str", 0.1997080393586685], ["models.characters.character_base.Character", 0.11918188339218606], ["grouper.models.user.User", 0.10161563540274583], ["asgard.models.accounAccount", 0.09628282315327474], ["asgard.backends.base.Orchestrator", 0.09628282315327474], ["asgard.models.user.User", 0.09628282315327474]], "task_id": [["str", 0.20396865804974657], ["tracim.models.User", 0.20160287261140108], ["models.characters.character_base.Character", 0.11757007252631996], ["Optional[List[int]]", 0.09330641686887675], ["Dict[str, Any]", 0.0862793792505581], ["int", 0.08472395921815946]]}, "q_name": "TestTaskInstance.test_failure_mapped_taskflow", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "body": "", "dr": "airflow.models.dagrun.DagRun", "email": "", "tf": "", "ti": "", "title": ""}, "variables_p": {"_": [["int", 0.6725540161335323], ["str", 0.1660986750627458], ["Dict[str, str]", 0.16134730880372175]], "body": [["str", 0.24832491657737132], ["int", 0.182848043905605], ["Type[django.applications.catmaid.models.ChangeRequest]", 0.1279156933394867], ["List[str]", 0.11765999489637377], ["cmk.utils.type_defs.UserId", 0.11462854509597345]], "dr": [["salon.models.Stylist", 0.3711394712758663], ["salon.models.StylistService", 0.3290089213399353], ["pili.models.User", 0.17586989269484032]], "email": [["str", 0.35922783551486875], ["int", 0.08396813708234242], ["transfer.models.TopicID", 0.08351987979482568]], "tf": [["int", 0.23007797806720956], ["urllib.requesOpenerDirector", 0.10393374958554866], ["dict", 0.09762138727002122]], "ti": [["str", 0.1143720204263422], ["golem.rpc.session.WebSocketAddress", 0.09430729107480397]], "title": [["int", 0.44056615733706855], ["List[str]", 0.12342248140530027], ["str", 0.11727762991346513], ["float", 0.0713905416034246]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1985, 4], [1991, 34]], "fn_var_ln": {"end_date": [[1989, 8], [1989, 19]], "start_date": [[1988, 8], [1988, 21]], "task": [[1986, 8], [1986, 12]], "ti": [[1987, 8], [1987, 10]]}, "fn_var_occur": {"end_date": [["ti", "end_date", "datetime", "datetime"]], "start_date": [["ti", "start_date", "datetime", "datetime"]], "task": [["task", "EmptyOperator", "task_id", "email"], ["ti", "TI", "task", "task"]], "ti": [["ti", "TI", "task", "task"], ["ti", "start_date", "datetime", "datetime"], ["ti", "end_date", "datetime", "datetime"], ["ti", "set_duration"], ["ti", "duration"]]}, "name": "test_set_duration", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_set_duration", "ret_exprs": [], "ret_type": "", "variables": {"end_date": "", "start_date": "", "task": "", "ti": ""}, "variables_p": {"end_date": [["datetime.datetime", 0.5193529889482928], ["datetime.date", 0.1951909339494477], ["datetime.datetime.date", 0.18759962702384417], ["datetime.date.time.date", 0.09785645007841526]], "start_date": [["datetime.datetime", 0.6504111938839927], ["datetime.date", 0.20754436604136836], ["str", 0.07307510799030568], ["datetime.datetime.timedelta", 0.06896933208433342]], "task": [["Dict[int, Any]", 0.29791462696309573], ["reminders.task.Task", 0.12959275165237494], ["task_processing.plugins.mesos.task_config.MesosTaskConfig", 0.10246323535680658], ["DefaultDict[Any, int]", 0.0852768550370624], ["dict", 0.08299653435825634]], "ti": [["int", 0.4437752048188539], ["datetime.datetime.timedelta", 0.1009313711421474], ["datetime.timedelta", 0.09285857149968083], ["List[str]", 0.0920012999997932], ["List[Optional[str]]", 0.0920012999997932]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1993, 4], [1997, 34]], "fn_var_ln": {"task": [[1994, 8], [1994, 12]], "ti": [[1995, 8], [1995, 10]]}, "fn_var_occur": {"task": [["task", "EmptyOperator", "task_id", "email"], ["ti", "TI", "task", "task"]], "ti": [["ti", "TI", "task", "task"], ["ti", "set_duration"], ["ti", "duration", "None"]]}, "name": "test_set_duration_empty_dates", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_set_duration_empty_dates", "ret_exprs": [], "ret_type": "", "variables": {"task": "", "ti": ""}, "variables_p": {"task": [["Dict[int, Any]", 0.29791462696309573], ["reminders.task.Task", 0.12959275165237494], ["task_processing.plugins.mesos.task_config.MesosTaskConfig", 0.10246323535680658], ["DefaultDict[Any, int]", 0.0852768550370624], ["dict", 0.08299653435825634]], "ti": [["Dict[str, dict]", 0.11311363415401059], ["list", 0.10539904375801594]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[1999, 4], [2017, 40]], "fn_var_ln": {"callback_wrapper": [[2000, 8], [2000, 24]], "session": [[2008, 8], [2008, 15]], "ti": [[2001, 8], [2001, 10]]}, "fn_var_occur": {"callback_wrapper": [["callback_wrapper", "CallbackWrapper"], ["ti", "create_task_instance", "on_success_callback", "callback_wrapper", "success_handler", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "execution_date", "timezone", "utcnow", "state", "State", "RUNNING"], ["callback_wrapper", "wrap_task_instance", "ti"], ["callback_wrapper", "callback_ran"], ["callback_wrapper", "task_state_in_callback", "State", "SUCCESS"]], "session": [["session", "settings", "Session"], ["session", "merge", "ti"], ["session", "commit"]], "ti": [["ti", "create_task_instance", "on_success_callback", "callback_wrapper", "success_handler", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "execution_date", "timezone", "utcnow", "state", "State", "RUNNING"], ["session", "merge", "ti"], ["callback_wrapper", "wrap_task_instance", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_success_callback_no_race_condition", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "on_success_callback", "callback_wrapper", "success_handler", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "execution_date", "timezone", "utcnow", "state", "State", "RUNNING"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_success_callback_no_race_condition", "ret_exprs": [], "ret_type": "", "variables": {"callback_wrapper": "", "session": "", "ti": ""}, "variables_p": {"callback_wrapper": [["bytes", 0.21461319974655813], ["float", 0.09270618430983973]], "session": [["sqlalchemy.orm.session.Session", 0.3462481853668743], ["Optional[str]", 0.33357160475027725], ["kedro.framework.session.session.KedroSession", 0.10215055226126576], ["SMSShell.models.session.Session", 0.07127006790595576]], "ti": [["Type[List[Any]]", 0.09463936543933209]]}}, {"docstring": {"func": "Verify that when we have an outlet dataset on a task, and the task", "long_descr": "completes successfully, a DatasetDagRunQueue is logged.", "ret": null}, "fn_lc": [[2019, 4], [2071, 95]], "fn_var_ln": {"bash_command": [[2035, 8], [2035, 25]], "dagbag": [[2028, 8], [2028, 14]], "ddrq_timestamps": [[2068, 8], [2068, 23]], "dr": [[2032, 8], [2032, 10]], "event": [[2044, 8], [2044, 13]], "run_id": [[2031, 8], [2031, 14]], "session": [[2027, 8], [2027, 15]], "task": [[2034, 8], [2034, 12]], "ti": [[2036, 8], [2036, 10]]}, "fn_var_occur": {"bash_command": [["task", "bash_command"]], "dagbag": [["dagbag", "DagBag", "dag_folder", "example_datasets", "__file__"], ["dagbag", "collect_dags", "only_if_updated", "False", "safe_mode", "False"], ["dagbag", "sync_to_db", "session", "session"]], "ddrq_timestamps": [["ddrq_timestamps", "session", "query", "DatasetDagRunQueue", "created_at", "filter_by", "dataset_id", "event", "dataset", "id", "all"], ["all", "event", "timestamp", "ddrq_timestamp", "ddrq_timestamp", "ddrq_timestamps"]], "dr": [["dr", "DagRun", "dag1", "dag_id", "run_id", "run_id", "run_type"], ["session", "merge", "dr"]], "event": [["event", "session", "query", "DatasetEvent", "join", "DatasetEvent", "dataset", "filter", "DatasetEvent", "source_task_instance", "ti", "one"], ["event", "dataset"], ["session", "query", "DatasetDagRunQueue", "target_dag_id", "filter_by", "dataset_id", "event", "dataset", "id", "order_by", "DatasetDagRunQueue", "target_dag_id", "all"], ["ddrq_timestamps", "session", "query", "DatasetDagRunQueue", "created_at", "filter_by", "dataset_id", "event", "dataset", "id", "all"], ["all", "event", "timestamp", "ddrq_timestamp", "ddrq_timestamp", "ddrq_timestamps"]], "run_id": [["run_id", "str", "uuid4"], ["dr", "DagRun", "dag1", "dag_id", "run_id", "run_id", "run_type"], ["ti", "TaskInstance", "task", "run_id", "run_id"]], "session": [["session", "settings", "Session"], ["dagbag", "sync_to_db", "session", "session"], ["session", "merge", "dr"], ["session", "merge", "ti"], ["session", "commit"], ["event", "session", "query", "DatasetEvent", "join", "DatasetEvent", "dataset", "filter", "DatasetEvent", "source_task_instance", "ti", "one"], ["session", "query", "DatasetDagRunQueue", "target_dag_id", "filter_by", "dataset_id", "event", "dataset", "id", "order_by", "DatasetDagRunQueue", "target_dag_id", "all"], ["session", "query", "DatasetModel", "uri", "join", "DatasetEvent", "dataset", "filter", "DatasetEvent", "source_task_instance", "ti", "one"], ["ddrq_timestamps", "session", "query", "DatasetDagRunQueue", "created_at", "filter_by", "dataset_id", "event", "dataset", "id", "all"]], "task": [["task", "dag1", "get_task"], ["task", "bash_command"], ["ti", "TaskInstance", "task", "run_id", "run_id"]], "ti": [["ti", "TaskInstance", "task", "run_id", "run_id"], ["session", "merge", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["ti", "state", "TaskInstanceState", "SUCCESS"], ["event", "session", "query", "DatasetEvent", "join", "DatasetEvent", "dataset", "filter", "DatasetEvent", "source_task_instance", "ti", "one"], ["session", "query", "DatasetModel", "uri", "join", "DatasetEvent", "dataset", "filter", "DatasetEvent", "source_task_instance", "ti", "one"]]}, "name": "test_outlet_datasets", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [], "self": []}, "params_p": {"args": [], "create_task_instance": [["pathlib.Path", 0.18674293395902847], ["pybuses.types.Subscribable", 0.1434880008277427], ["bool", 0.1092277654908871], ["tests.async_mock.MagicMock", 0.1003463831702604]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_outlet_datasets", "ret_exprs": [], "ret_type": "", "variables": {"bash_command": "", "dagbag": "", "ddrq_timestamps": "", "dr": "", "event": "", "run_id": "", "session": "", "task": "", "ti": ""}, "variables_p": {"bash_command": [["str", 0.645910676648947], ["List[Tuple[int, Any]]", 0.105747077316717], ["List[Tuple[Any, Any]]", 0.06959586410052471], ["list", 0.057717548771978926], ["bytearray", 0.04047920803254235], ["bytes", 0.04047920803254235], ["float", 0.040070417096747885]], "dagbag": [["asyncpg.pool.Pool", 0.08493141009196267]], "ddrq_timestamps": [["Dict[str, str]", 0.17819407655672095], ["Optional[\"Lecture\"]", 0.12160886850243621], ["dict", 0.11606441232946063], ["list", 0.10908375783045053], ["geode.models.common.Address", 0.0794819515366201], ["str", 0.07494253674194754]], "dr": [["str", 0.18021768080900588], ["List[str]", 0.08688691237668321], ["Dict[str, str]", 0.08415061038802177], ["int", 0.0820567194167308]], "event": [["aw_core.models.Event", 0.19470326329868953], ["Set[str]", 0.14321173863979544], ["golem.task.taskcomputer.TaskComputer", 0.1042275747950321], ["Dict[str, Type[Any]]", 0.0975716698421628], ["list", 0.09680825529355779], ["Dict[str, Any]", 0.09243246601103831]], "run_id": [["str", 0.9143837985312947], ["int", 0.08561620146870547]], "session": [["sqlalchemy.orm.session.Session", 0.44872425933846666], ["SMSShell.models.session.Session", 0.15368892172088017], ["Optional[str]", 0.09184185658565354]], "task": [["golem.task.taskbase.Task", 0.42033184907646515], ["apps.core.task.coretaskstate.TaskDefinition", 0.17357317423429636], ["taskiapplication.models.task.Task", 0.1242653353622484], ["reminders.task.Task", 0.09505256384401715], ["apps.blender.task.blenderrendertask.BlenderRenderTask", 0.0875098364614601]], "ti": [["str", 0.20294185344424415], ["List[str]", 0.12280530208186219], ["Dict[str, Any]", 0.09915161215619486], ["Dict[str, str]", 0.08446173724101744], ["List[Dict[str, Any]]", 0.08435859390465499]]}}, {"docstring": {"func": "Verify that when we have an outlet dataset on a task, and the task", "long_descr": "failed, a DatasetDagRunQueue is not logged, and a DatasetEvent is\nnot generated", "ret": null}, "fn_lc": [[2073, 4], [2102, 55]], "fn_var_ln": {"dagbag": [[2083, 8], [2083, 14]], "dr": [[2087, 8], [2087, 10]], "run_id": [[2086, 8], [2086, 14]], "session": [[2082, 8], [2082, 15]], "task": [[2089, 8], [2089, 12]], "ti": [[2090, 8], [2090, 10]]}, "fn_var_occur": {"dagbag": [["dagbag", "DagBag", "dag_folder", "test_datasets", "__file__"], ["dagbag", "collect_dags", "only_if_updated", "False", "safe_mode", "False"], ["dagbag", "sync_to_db", "session", "session"]], "dr": [["dr", "DagRun", "dag_with_fail_task", "dag_id", "run_id", "run_id", "run_type"], ["session", "merge", "dr"]], "run_id": [["run_id", "str", "uuid4"], ["dr", "DagRun", "dag_with_fail_task", "dag_id", "run_id", "run_id", "run_type"], ["ti", "TaskInstance", "task", "run_id", "run_id"]], "session": [["session", "settings", "Session"], ["dagbag", "sync_to_db", "session", "session"], ["session", "merge", "dr"], ["session", "merge", "ti"], ["session", "commit"], ["session", "query", "DatasetDagRunQueue", "count"], ["session", "query", "DatasetEvent", "count"]], "task": [["task", "dag_with_fail_task", "get_task"], ["ti", "TaskInstance", "task", "run_id", "run_id"]], "ti": [["ti", "TaskInstance", "task", "run_id", "run_id"], ["session", "merge", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_outlet_datasets_failed", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [], "self": []}, "params_p": {"args": [], "create_task_instance": [["pathlib.Path", 0.18674293395902847], ["pybuses.types.Subscribable", 0.1434880008277427], ["bool", 0.1092277654908871], ["tests.async_mock.MagicMock", 0.1003463831702604]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_outlet_datasets_failed", "ret_exprs": [], "ret_type": "", "variables": {"dagbag": "", "dr": "", "run_id": "", "session": "", "task": "", "ti": ""}, "variables_p": {"dagbag": [["List[Tuple[int, int]]", 0.08605155650013364]], "dr": [["str", 0.1258553667715788]], "run_id": [["str", 0.8972428149007192], ["int", 0.10275718509928072]], "session": [["sqlalchemy.orm.session.Session", 0.41260547637599393], ["kedro.framework.session.session.KedroSession", 0.08730153100923857], ["Optional[str]", 0.08339506222412119]], "task": [["khetha.models.Task", 0.1679190708595274], ["taskiapplication.models.task.Task", 0.13465205101698452], ["restful_functions.modules.task.TaskStore", 0.10719713718967146], ["golem.task.taskbase.Task", 0.10545399294397108], ["golem.task.taskcomputer.TaskComputer", 0.08460860119084947], ["zero.domain.task.Task", 0.08154770970156656]], "ti": [["str", 0.20294185344424415], ["List[str]", 0.12280530208186219], ["Dict[str, Any]", 0.09915161215619486], ["Dict[str, str]", 0.08446173724101744], ["List[Dict[str, Any]]", 0.08435859390465499]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2109, 12], [2113, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "raise_an_exception", "params": {"placeholder": "builtins.int"}, "params_descr": {"placeholder": ""}, "params_occur": {"placeholder": []}, "params_p": {"args": [], "kwargs": [], "placeholder": [["int", 0.28550008023537377], ["str", 0.1376450160056445], ["django.db.backends.postgresql_psycopg2.schema.DatabaseSchemaEditor", 0.10792546983518136], ["Optional", 0.09232163031282031]], "self": []}, "q_name": "TestTaskInstance.test_mapped_current_state.<locals>.raise_an_exception", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2104, 4], [2125, 81]], "fn_var_ln": {"_": [[2115, 12], [2115, 13]], "tis": [[2117, 8], [2117, 11]]}, "fn_var_occur": {"_": [["_", "raise_an_exception", "expand", "placeholder"]], "tis": [["tis", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]]}, "name": "test_mapped_current_state", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["tis", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["Callable", 0.10579098243672597], ["base.Connection", 0.10288796870866561], ["str", 0.09467936234595332], ["models.User", 0.09456060307990967], ["models.RepoInterface", 0.09456060307990967]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_mapped_current_state", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "tis": ""}, "variables_p": {"_": [["Dict[str, Any]", 0.1024029839337828], ["dict", 0.09722169569228226], ["list", 0.0963026324699286], ["int", 0.08710880437109135]], "tis": [["int", 0.5818462759582602], ["str", 0.3394415210575934], ["list", 0.07871220298414641]]}}, {"docstring": {"func": "Verify that when we have an outlet dataset on a task, and the task", "long_descr": "is skipped, a DatasetDagRunQueue is not logged, and a DatasetEvent is\nnot generated", "ret": null}, "fn_lc": [[2127, 4], [2155, 55]], "fn_var_ln": {"dagbag": [[2137, 8], [2137, 14]], "dr": [[2141, 8], [2141, 10]], "run_id": [[2140, 8], [2140, 14]], "session": [[2136, 8], [2136, 15]], "task": [[2143, 8], [2143, 12]], "ti": [[2144, 8], [2144, 10]]}, "fn_var_occur": {"dagbag": [["dagbag", "DagBag", "dag_folder", "test_datasets", "__file__"], ["dagbag", "collect_dags", "only_if_updated", "False", "safe_mode", "False"], ["dagbag", "sync_to_db", "session", "session"]], "dr": [["dr", "DagRun", "dag_with_skip_task", "dag_id", "run_id", "run_id", "run_type"], ["session", "merge", "dr"]], "run_id": [["run_id", "str", "uuid4"], ["dr", "DagRun", "dag_with_skip_task", "dag_id", "run_id", "run_id", "run_type"], ["ti", "TaskInstance", "task", "run_id", "run_id"]], "session": [["session", "settings", "Session"], ["dagbag", "sync_to_db", "session", "session"], ["session", "merge", "dr"], ["session", "merge", "ti"], ["session", "commit"], ["session", "query", "DatasetDagRunQueue", "count"], ["session", "query", "DatasetEvent", "count"]], "task": [["task", "dag_with_skip_task", "get_task"], ["ti", "TaskInstance", "task", "run_id", "run_id"]], "ti": [["ti", "TaskInstance", "task", "run_id", "run_id"], ["session", "merge", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["ti", "state", "TaskInstanceState", "SKIPPED"]]}, "name": "test_outlet_datasets_skipped", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [], "self": []}, "params_p": {"args": [], "create_task_instance": [["pathlib.Path", 0.18674293395902847], ["pybuses.types.Subscribable", 0.1434880008277427], ["bool", 0.1092277654908871], ["tests.async_mock.MagicMock", 0.1003463831702604]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_outlet_datasets_skipped", "ret_exprs": [], "ret_type": "", "variables": {"dagbag": "", "dr": "", "run_id": "", "session": "", "task": "", "ti": ""}, "variables_p": {"dagbag": [["List[Tuple[int, int]]", 0.08605155650013364]], "dr": [["str", 0.1258553667715788]], "run_id": [["str", 0.8972428149007192], ["int", 0.10275718509928072]], "session": [["sqlalchemy.orm.session.Session", 0.41260547637599393], ["kedro.framework.session.session.KedroSession", 0.08730153100923857], ["Optional[str]", 0.08339506222412119]], "task": [["khetha.models.Task", 0.1679190708595274], ["taskiapplication.models.task.Task", 0.13465205101698452], ["restful_functions.modules.task.TaskStore", 0.10719713718967146], ["golem.task.taskbase.Task", 0.10545399294397108], ["golem.task.taskcomputer.TaskComputer", 0.08460860119084947], ["zero.domain.task.Task", 0.08154770970156656]], "ti": [["str", 0.20294185344424415], ["List[str]", 0.12280530208186219], ["Dict[str, Any]", 0.09915161215619486], ["Dict[str, str]", 0.08446173724101744], ["List[Dict[str, Any]]", 0.08435859390465499]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2167, 12], [2168, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_task1", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_changing_of_dataset_when_ddrq_is_already_populated.<locals>.test_task1", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2178, 12], [2179, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_task2", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_changing_of_dataset_when_ddrq_is_already_populated.<locals>.test_task2", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2189, 12], [2190, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "test_task2", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_changing_of_dataset_when_ddrq_is_already_populated.<locals>.test_task2", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that when a task that produces dataset has ran, that changing the consumer", "long_descr": "dag dataset will not cause primary key blank-out", "ret": null}, "fn_lc": [[2157, 4], [2192, 24]], "fn_var_ln": {"dr1": [[2172, 8], [2172, 11]], "test_task1": [[2173, 8], [2173, 18]], "ti": [[2183, 8], [2183, 10]]}, "fn_var_occur": {"dr1": [], "test_task1": [], "ti": []}, "name": "test_changing_of_dataset_when_ddrq_is_already_populated", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [], "self": [], "session": []}, "params_p": {"args": [], "dag_maker": [["bool", 0.22694314998379958], ["str", 0.09175172647920359]], "kwargs": [], "self": [], "session": [["bool", 0.22694314998379958], ["str", 0.09175172647920359]]}, "q_name": "TestTaskInstance.test_changing_of_dataset_when_ddrq_is_already_populated", "ret_exprs": [], "ret_type": "", "variables": {"dr1": "", "test_task1": "", "ti": ""}, "variables_p": {"dr1": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "test_task1": [["str", 0.5817286213290718], ["Tuple[pathlib.Path]", 0.14058533519298907], ["Dict[str, Type[Any]]", 0.10434114725035479], ["bytes", 0.09085939420258077]], "ti": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2205, 8], [2216, 21]], "fn_var_ln": {"dr": [[2206, 12], [2206, 14]], "task": [[2214, 12], [2214, 19]], "ti": [[2213, 12], [2213, 14]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "run_id", "execution_date", "isoformat", "run_type", "DagRunType", "SCHEDULED", "state", "state", "execution_date", "execution_date", "start_date", "pendulum", "now"], ["ti", "dr", "task_instances"]], "task": [["task", "EmptyOperator", "task_id"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["ti", "set_state", "state", "State", "SUCCESS", "session", "dag_maker", "session"]]}, "name": "get_test_ti", "params": {"execution_date": "pendulum.DateTime", "state": "builtins.str"}, "params_descr": {"execution_date": "", "state": ""}, "params_occur": {"execution_date": [["dr", "dag_maker", "create_dagrun", "run_id", "execution_date", "isoformat", "run_type", "DagRunType", "SCHEDULED", "state", "state", "execution_date", "execution_date", "start_date", "pendulum", "now"]], "state": [["dr", "dag_maker", "create_dagrun", "run_id", "execution_date", "isoformat", "run_type", "DagRunType", "SCHEDULED", "state", "state", "execution_date", "execution_date", "start_date", "pendulum", "now"], ["ti", "set_state", "state", "State", "SUCCESS", "session", "dag_maker", "session"]]}, "params_p": {"args": [], "execution_date": [["str", 1.0]], "kwargs": [], "self": [], "state": [["str", 1.0]]}, "q_name": "TestTaskInstance._test_previous_dates_setup.<locals>.get_test_ti", "ret_exprs": ["return ti"], "ret_type": "airflow.models.taskinstance.TaskInstance", "ret_type_p": [["str", 0.30495621089523267], ["asyncpg.connection.Connection", 0.12240329682116122], ["asyncpg.pool", 0.12240329682116122], ["Callable", 0.07840420000852515], ["List[List[int]]", 0.023156004949463762]], "variables": {"dr": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.32378445018186236], ["Optional[hpaction.models.HPActionDocuments]", 0.10440419125488837], ["geode.models.common.Address", 0.10205699320863976], ["int", 0.10069089952649463], ["byceps.services.user.transfer.models.User", 0.09695920382418827], ["decksite.data.models.person.Person", 0.09267665274489885], ["Union[Literal, Literal]", 0.09052984599202012], ["list", 0.08889776326700752]], "task": [["list", 0.09813288475552608], ["int", 0.09287542913510362], ["dict", 0.08263093166651966]], "ti": [["List[str]", 0.187188161919448], ["geode.models.common.Address", 0.09372115704249058], ["str", 0.09247445540860318], ["List[int]", 0.09216538726863564]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2195, 4], [2227, 18]], "fn_var_ln": {"dag_id": [[2201, 8], [2201, 14]], "date": [[2218, 8], [2218, 12]], "new_date": [[2223, 12], [2223, 20]], "ret": [[2220, 8], [2220, 11]], "task": [[2203, 12], [2203, 16]], "ti": [[2224, 12], [2224, 14]]}, "fn_var_occur": {"dag_id": [], "date": [["date", "cast", "pendulum", "DateTime", "pendulum", "parse"], ["new_date", "date", "add", "days", "idx"]], "new_date": [["new_date", "date", "add", "days", "idx"], ["ti", "get_test_ti", "new_date", "state"]], "ret": [["ret", "append", "ti"]], "task": [], "ti": [["ti", "get_test_ti", "new_date", "state"], ["ret", "append", "ti"]]}, "name": "_test_previous_dates_setup", "params": {"catchup": "builtins.bool", "dag_maker": "", "scenario": "builtins.list[airflow.utils.state.TaskInstanceState]", "schedule_interval": "str | datetime.timedelta | None"}, "params_descr": {"catchup": "", "dag_maker": "", "scenario": "", "schedule_interval": ""}, "params_occur": {"catchup": [], "dag_maker": [], "scenario": [["enumerate", "scenario"]], "schedule_interval": []}, "params_p": {"args": [], "catchup": [["jsonlog.tests.capture.Capture", 0.18512903972871195], ["tests.basilisp.helpers.CompileFn", 0.1299621758541549], ["Callable[..., None]", 0.109024760376347], ["tests.async_mock.MagicMock", 0.10020797261767951]], "dag_maker": [["jsonlog.tests.capture.Capture", 0.18512903972871195], ["tests.basilisp.helpers.CompileFn", 0.1299621758541549], ["Callable[..., None]", 0.109024760376347], ["tests.async_mock.MagicMock", 0.10020797261767951]], "kwargs": [], "scenario": [["tests.basilisp.helpers.CompileFn", 0.23770965675887157], ["dict", 0.09094708247319279]], "schedule_interval": [["jsonlog.tests.capture.Capture", 0.18512903972871195], ["tests.basilisp.helpers.CompileFn", 0.1299621758541549], ["Callable[..., None]", 0.109024760376347], ["tests.async_mock.MagicMock", 0.10020797261767951]], "self": []}, "q_name": "TestTaskInstance._test_previous_dates_setup", "ret_exprs": ["return ret"], "ret_type": "builtins.list", "ret_type_p": [["int", 0.19806542274442576]], "variables": {"dag_id": "", "date": "", "new_date": "", "ret": "", "task": "", "ti": ""}, "variables_p": {"dag_id": [["Optional[str]", 0.09999999999999999], ["int", 0.09999999999999999], ["List[int]", 0.09999999999999999], ["services.ticketing.transfer.models.TicketID", 0.09999999999999999], ["Type[models.User]", 0.09999999999999999], ["shop.transfer.models.ShopID", 0.09999999999999999], ["Type[pipeline.netfile.models.AbstractSchedule]", 0.09999999999999999], ["shortcuts.actions.base.GroupIDField", 0.09999999999999999]], "date": [["datetime.date", 0.5858346758746916], ["datetime.datetime", 0.31541992703719823], ["str", 0.0987453970881103]], "new_date": [["datetime.datetime", 0.22712212021841477], ["datetime.datetime.date", 0.18355670081565467], ["str", 0.18056032702296748], ["list", 0.12640997634226442], ["Pattern[str]", 0.1158160047944025]], "ret": [["str", 0.3626482849893551], ["list", 0.21929374960092896], ["List[str]", 0.1349091150656917], ["Dict[str, Union[Any, Any, Any, Any]]", 0.11890675467938207], ["List[List]", 0.08263820328931033]], "task": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "ti": [["int", 0.28019692951074227], ["str", 0.14783132557419626], ["list", 0.11693651213908784], ["deque[str]", 0.09443107038016912], ["float", 0.07751012762994701]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2239, 4], [2248, 71]], "fn_var_ln": {"scenario": [[2240, 8], [2240, 16]], "ti_list": [[2242, 8], [2242, 15]]}, "fn_var_occur": {"scenario": [["scenario", "State", "SUCCESS", "State", "FAILED", "State", "SUCCESS"], ["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "ti_list": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"], ["ti_list", "get_previous_ti", "None"], ["ti_list", "get_previous_ti", "run_id", "ti_list", "run_id"], ["ti_list", "get_previous_ti", "run_id", "ti_list", "run_id"]]}, "name": "test_previous_ti", "params": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_descr": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_occur": {"catchup": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "dag_maker": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "schedule_interval": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "self": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]]}, "params_p": {"args": [], "catchup": [["augury.types.YearRange", 0.0923580745984483], ["core.models.Recipe", 0.0911608098496709]], "dag_maker": [["augury.types.YearRange", 0.0923580745984483], ["core.models.Recipe", 0.0911608098496709]], "kwargs": [], "schedule_interval": [["augury.types.YearRange", 0.0923580745984483], ["core.models.Recipe", 0.0911608098496709]], "self": []}, "q_name": "TestTaskInstance.test_previous_ti", "ret_exprs": [], "ret_type": "None", "variables": {"scenario": "", "ti_list": ""}, "variables_p": {"scenario": [["Dict[str, Any]", 0.10563262819529963]], "ti_list": [["list", 0.6932413255867764], ["List[Union[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]]", 0.10987424066725918], ["raiden.utils.List[raiden.utils.Any]", 0.1056621224307696], ["List[complex]", 0.09122231131519475]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2251, 4], [2261, 90]], "fn_var_ln": {"scenario": [[2252, 8], [2252, 16]], "ti_list": [[2254, 8], [2254, 15]]}, "fn_var_occur": {"scenario": [["scenario", "State", "FAILED", "State", "SUCCESS", "State", "FAILED", "State", "SUCCESS"], ["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "ti_list": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"], ["ti_list", "get_previous_ti", "state", "State", "SUCCESS", "None"], ["ti_list", "get_previous_ti", "state", "State", "SUCCESS", "None"], ["ti_list", "get_previous_ti", "state", "State", "SUCCESS", "run_id", "ti_list", "run_id"], ["ti_list", "get_previous_ti", "state", "State", "SUCCESS", "run_id", "ti_list", "run_id"]]}, "name": "test_previous_ti_success", "params": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_descr": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_occur": {"catchup": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "dag_maker": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "schedule_interval": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "self": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]]}, "params_p": {"args": [], "catchup": [["augury.types.YearRange", 0.0923580745984483], ["core.models.Recipe", 0.0911608098496709]], "dag_maker": [["augury.types.YearRange", 0.0923580745984483], ["core.models.Recipe", 0.0911608098496709]], "kwargs": [], "schedule_interval": [["augury.types.YearRange", 0.0923580745984483], ["core.models.Recipe", 0.0911608098496709]], "self": []}, "q_name": "TestTaskInstance.test_previous_ti_success", "ret_exprs": [], "ret_type": "None", "variables": {"scenario": "", "ti_list": ""}, "variables_p": {"scenario": [["str", 0.28925638709186063], ["dict", 0.0925314725540822], ["cmk.base.plugins.agent_based.mem_used.MemBytes", 0.09002304150239152]], "ti_list": [["list", 0.5396390215732851], ["float", 0.16231881580755167], ["List[Union[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]]", 0.12806947593143125], ["raiden.utils.List[raiden.utils.Any]", 0.09474511903009726], ["types.solution_T", 0.07522756765763458]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2264, 4], [2275, 103]], "fn_var_ln": {"scenario": [[2265, 8], [2265, 16]], "ti_list": [[2267, 8], [2267, 15]]}, "fn_var_occur": {"scenario": [["scenario", "State", "FAILED", "State", "SUCCESS", "State", "FAILED", "State", "SUCCESS"], ["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "ti_list": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"], ["ti_list", "get_previous_execution_date", "state", "State", "SUCCESS", "None"], ["ti_list", "get_previous_execution_date", "state", "State", "SUCCESS", "None"], ["ti_list", "get_previous_execution_date", "state", "State", "SUCCESS", "ti_list", "execution_date"], ["ti_list", "get_previous_execution_date", "state", "State", "SUCCESS", "ti_list", "execution_date"]]}, "name": "test_previous_execution_date_success", "params": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_descr": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_occur": {"catchup": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "dag_maker": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "schedule_interval": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "self": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]]}, "params_p": {"args": [], "catchup": [["core.models.Recipe", 0.10611825833513193], ["Callable", 0.08878970201675321]], "dag_maker": [["core.models.Recipe", 0.10611825833513193], ["Callable", 0.08878970201675321]], "kwargs": [], "schedule_interval": [["core.models.Recipe", 0.10611825833513193], ["Callable", 0.08878970201675321]], "self": []}, "q_name": "TestTaskInstance.test_previous_execution_date_success", "ret_exprs": [], "ret_type": "None", "variables": {"scenario": "", "ti_list": ""}, "variables_p": {"scenario": [["str", 0.28925638709186063], ["dict", 0.0925314725540822], ["cmk.base.plugins.agent_based.mem_used.MemBytes", 0.09002304150239152]], "ti_list": [["list", 0.513904718980929], ["float", 0.1674662139809746], ["List[Union[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]]", 0.12907259254563036], ["raiden.utils.List[raiden.utils.Any]", 0.10684685317104735], ["List[complex]", 0.08270962132141875]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2278, 4], [2286, 95]], "fn_var_ln": {"scenario": [[2279, 8], [2279, 16]], "ti_list": [[2281, 8], [2281, 15]]}, "fn_var_occur": {"scenario": [["scenario", "State", "FAILED", "State", "SUCCESS", "State", "FAILED", "State", "SUCCESS"], ["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "ti_list": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"], ["ti_list", "get_previous_start_date", "state", "State", "SUCCESS", "None"], ["ti_list", "get_previous_start_date", "state", "State", "SUCCESS", "None"], ["ti_list", "get_previous_start_date", "state", "State", "SUCCESS", "ti_list", "start_date"], ["ti_list", "get_previous_start_date", "state", "State", "SUCCESS", "ti_list", "start_date"]]}, "name": "test_previous_start_date_success", "params": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_descr": {"catchup": "", "dag_maker": "", "schedule_interval": "", "self": ""}, "params_occur": {"catchup": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "dag_maker": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "schedule_interval": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]], "self": [["ti_list", "self", "_test_previous_dates_setup", "schedule_interval", "catchup", "scenario", "dag_maker"]]}, "params_p": {"args": [], "catchup": [["augury.types.YearRange", 0.10333793827845354], ["core.models.Recipe", 0.09916436384870755], ["int", 0.08793758236071421]], "dag_maker": [["augury.types.YearRange", 0.10333793827845354], ["core.models.Recipe", 0.09916436384870755], ["int", 0.08793758236071421]], "kwargs": [], "schedule_interval": [["augury.types.YearRange", 0.10333793827845354], ["core.models.Recipe", 0.09916436384870755], ["int", 0.08793758236071421]], "self": []}, "q_name": "TestTaskInstance.test_previous_start_date_success", "ret_exprs": [], "ret_type": "None", "variables": {"scenario": "", "ti_list": ""}, "variables_p": {"scenario": [["str", 0.28925638709186063], ["dict", 0.0925314725540822], ["cmk.base.plugins.agent_based.mem_used.MemBytes", 0.09002304150239152]], "ti_list": [["list", 0.5107067421308833], ["float", 0.17474409465067134], ["List[Union[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]]", 0.11937782751624233], ["raiden.utils.List[raiden.utils.Any]", 0.10520023717910847], ["List[complex]", 0.08997109852309464]]}}, {"docstring": {"func": "Test that get_previous_start_date() can handle TaskInstance with no start_date.", "long_descr": null, "ret": null}, "fn_lc": [[2288, 4], [2319, 38]], "fn_var_ln": {"dagrun_1": [[2301, 8], [2301, 16]], "dagrun_2": [[2307, 8], [2307, 16]], "day_1": [[2295, 8], [2295, 13]], "day_2": [[2296, 8], [2296, 13]], "task": [[2316, 8], [2316, 17]], "ti_1": [[2313, 8], [2313, 12]], "ti_2": [[2314, 8], [2314, 12]]}, "fn_var_occur": {"dagrun_1": [["dagrun_1", "dag_maker", "create_dagrun", "execution_date", "day_1", "state", "State", "RUNNING", "run_type", "DagRunType", "MANUAL"], ["ti_1", "dagrun_1", "get_task_instance", "task", "task_id"]], "dagrun_2": [["dagrun_2", "dag", "create_dagrun", "execution_date", "day_2", "state", "State", "RUNNING", "run_type", "DagRunType", "MANUAL"], ["ti_2", "dagrun_2", "get_task_instance", "task", "task_id"]], "day_1": [["day_1", "DEFAULT_DATE"], ["dagrun_1", "dag_maker", "create_dagrun", "execution_date", "day_1", "state", "State", "RUNNING", "run_type", "DagRunType", "MANUAL"]], "day_2": [["day_2", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["dagrun_2", "dag", "create_dagrun", "execution_date", "day_2", "state", "State", "RUNNING", "run_type", "DagRunType", "MANUAL"]], "task": [["task", "EmptyOperator", "task_id"], ["ti_1", "dagrun_1", "get_task_instance", "task", "task_id"], ["ti_2", "dagrun_2", "get_task_instance", "task", "task_id"], ["ti_1", "task", "task"], ["ti_2", "task", "task"]], "ti_1": [["ti_1", "dagrun_1", "get_task_instance", "task", "task_id"], ["ti_1", "task", "task"], ["ti_2", "get_previous_start_date", "ti_1", "start_date"], ["ti_1", "start_date", "None"]], "ti_2": [["ti_2", "dagrun_2", "get_task_instance", "task", "task_id"], ["ti_2", "task", "task"], ["ti_2", "get_previous_start_date", "ti_1", "start_date"]]}, "name": "test_get_previous_start_date_none", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "None", "dag"], ["dagrun_1", "dag_maker", "create_dagrun", "execution_date", "day_1", "state", "State", "RUNNING", "run_type", "DagRunType", "MANUAL"]], "self": []}, "params_p": {"args": [], "dag_maker": [["base.Connection", 0.3953834955376938]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_get_previous_start_date_none", "ret_exprs": [], "ret_type": "", "variables": {"dagrun_1": "", "dagrun_2": "", "day_1": "", "day_2": "", "task": "", "ti_1": "", "ti_2": ""}, "variables_p": {"dagrun_1": [["str", 0.35557372769773793], ["datetime.date.time.timezone", 0.16159758493945328], ["datetime.datetime.datetime", 0.10373092531835217], ["list", 0.10075633297137189], ["List[str]", 0.09371759199717822], ["Dict[str, str]", 0.09297762683188508], ["Optional[excars.models.profiles.Profile]", 0.09164621024402135]], "dagrun_2": [["str", 0.5041777068998844], ["datetime.datetime.datetime", 0.17881292795413595], ["datetime.date.time.timezone", 0.0952648821968724], ["List[Tuple[str, Any]]", 0.0751722799098141], ["datetime.datetime.timedelta", 0.07377751762955571], ["int", 0.07279468540973777]], "day_1": [["list", 0.19697721007991614], ["defaultdict", 0.15094308965535905], ["datetime.datetime", 0.10164405654337258], ["str", 0.09199324460960133], ["int", 0.09186254230464404], ["Dict[str, Any]", 0.09042313471488717], ["Dict[str, List[str]]", 0.08929533108090962]], "day_2": [["datetime.timedelta", 0.5853840024300948], ["datetime.datetime", 0.21507954595378015]], "task": [["khetha.models.Task", 0.1932905159847807], ["Dict[str, Dict[str, int]]", 0.11127090678601985], ["golem.task.task_api.EnvironmentTaskApiService", 0.10065156540413202], ["List[str]", 0.08834855781522406], ["annofabapi.dataclass.task.Task", 0.08369218202547526]], "ti_1": [["str", 0.400803774383375], ["List[Tuple[str, Any]]", 0.1070325128108802], ["List[Variable[_T]]", 0.10629295370627243], ["List[dict]", 0.09646642069532817], ["dict", 0.09550509432783194]], "ti_2": [["str", 0.6281347016178077], ["List[Variable[_T]]", 0.10383446749985785], ["List[Tuple[str, Any]]", 0.09305413529388286]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2321, 4], [2328, 66]], "fn_var_ln": {"template_context": [[2323, 8], [2323, 24]], "ti": [[2322, 8], [2322, 10]]}, "fn_var_occur": {"template_context": [["template_context", "ti", "get_template_context"]], "ti": [["ti", "create_task_instance"], ["template_context", "ti", "get_template_context"], ["ti", "session"]]}, "name": "test_context_triggering_dataset_events_none", "params": {"create_task_instance": "", "self": "", "session": ""}, "params_descr": {"create_task_instance": "", "self": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": [], "session": [["ti", "session"], ["session", "expunge_all"]]}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": [], "session": [["Iterator[Tuple[hermes.types.UserType, hermes.types.EmailAddressType]]", 0.11269193178039856], ["lms.lmsdb.models.User", 0.09233998038371917], ["zerver.models.UserProfile", 0.0871511945270876], ["django.conf.settings.AUTH_USER_MODEL", 0.08639931398542765], ["Optional[core.models.User]", 0.07692999359470609]]}, "q_name": "TestTaskInstance.test_context_triggering_dataset_events_none", "ret_exprs": [], "ret_type": "", "variables": {"template_context": "", "ti": ""}, "variables_p": {"template_context": [["Dict[str, Dict[str, Any]]", 0.20993244857296342], ["Tuple[List[str], List[str]]", 0.09260118035954461], ["Dict[str, str]", 0.08537201751605096], ["list", 0.0833532918289892], ["str", 0.08206180741295638]], "ti": [["List[str]", 0.2860282186909372], ["list", 0.1608903816537227], ["int", 0.16023757713099598], ["float", 0.11832244497413665], ["Dict[str, Union[Any, Any, Any]]", 0.09851833008200027], ["str", 0.09714367379671401]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2330, 4], [2373, 9]], "fn_var_ln": {"dag": [[2337, 8], [2337, 11]], "dr": [[2345, 8], [2345, 10]], "ds1": [[2331, 8], [2331, 11]], "ds1_event": [[2352, 8], [2352, 17]], "ds2": [[2332, 8], [2332, 11]], "ds2_event_1": [[2353, 8], [2353, 19]], "ds2_event_2": [[2354, 8], [2354, 19]], "task1": [[2337, 13], [2337, 18]], "template_context": [[2368, 8], [2368, 24]], "ti": [[2360, 8], [2360, 10]]}, "fn_var_occur": {"dag": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "DEFAULT_DATE", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session"], ["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "DATASET_TRIGGERED", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"]], "dr": [["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "DATASET_TRIGGERED", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["dr", "consumed_dataset_events", "append", "ds1_event"], ["dr", "consumed_dataset_events", "append", "ds2_event_1"], ["dr", "consumed_dataset_events", "append", "ds2_event_2"], ["ti", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["session", "expunge", "dr"]], "ds1": [["ds1", "DatasetModel", "id", "uri"], ["session", "add_all", "ds1", "ds2"]], "ds1_event": [["ds1_event", "DatasetEvent", "dataset_id"], ["dr", "consumed_dataset_events", "append", "ds1_event"], ["template_context", "ds1_event", "ds2_event_1", "ds2_event_2"]], "ds2": [["ds2", "DatasetModel", "id", "uri"], ["session", "add_all", "ds1", "ds2"]], "ds2_event_1": [["ds2_event_1", "DatasetEvent", "dataset_id"], ["dr", "consumed_dataset_events", "append", "ds2_event_1"], ["template_context", "ds1_event", "ds2_event_1", "ds2_event_2"]], "ds2_event_2": [["ds2_event_2", "DatasetEvent", "dataset_id"], ["dr", "consumed_dataset_events", "append", "ds2_event_2"], ["template_context", "ds1_event", "ds2_event_1", "ds2_event_2"]], "task1": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "DEFAULT_DATE", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session"], ["ti", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti", "refresh_from_task", "task1"]], "template_context": [["template_context", "ti", "get_template_context"], ["template_context", "ds1_event", "ds2_event_1", "ds2_event_2"]], "ti": [["ti", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti", "refresh_from_task", "task1"], ["ti", "session"], ["session", "expunge", "ti"], ["template_context", "ti", "get_template_context"]]}, "name": "test_context_triggering_dataset_events", "params": {"create_dummy_dag": "", "self": "", "session": ""}, "params_descr": {"create_dummy_dag": "", "self": "", "session": ""}, "params_occur": {"create_dummy_dag": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "DEFAULT_DATE", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session"]], "self": [], "session": [["session", "add_all", "ds1", "ds2"], ["session", "commit"], ["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "DEFAULT_DATE", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session"], ["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "DATASET_TRIGGERED", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["session", "commit"], ["ti", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti", "session"], ["session", "expunge", "ti"], ["session", "expunge", "dr"]]}, "params_p": {"args": [], "create_dummy_dag": [["List[Optional[str]]", 0.22150648312868132], ["Optional[int]", 0.20782615077713135], ["str", 0.09520852272705521], ["Optional[Dict]", 0.09520852272705521], ["bool", 0.09520852272705521], ["dict", 0.09443225392342593]], "kwargs": [], "self": [], "session": [["int", 0.7068111111383254], ["Optional[int]", 0.11118471246298747], ["str", 0.0863365432065546]]}, "q_name": "TestTaskInstance.test_context_triggering_dataset_events", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "ds1": "", "ds1_event": "", "ds2": "", "ds2_event_1": "", "ds2_event_2": "", "task1": "", "template_context": "", "ti": ""}, "variables_p": {"dag": [["str", 0.3590025349266048], ["dict", 0.18686359462735874], ["Type[ddionrails.workspace.models.baskeBasket]", 0.10724415582629639], ["Optional[Callable[..., Any]]", 0.090279295922932], ["Dict[Any, str]", 0.08801940224710912], ["list", 0.08176735505017751]], "dr": [["Optional[magic.models.deck.Deck]", 0.20177840735447822], ["Dict[str, str]", 0.1331838559872233], ["list", 0.11144789584055759], ["byceps.services.user.transfer.models.User", 0.10743507955098322], ["datetime.datetime", 0.09424833853604041], ["Optional[\"Lecture\"]", 0.08964893852255874], ["List[dict]", 0.08584136563076844], ["float", 0.08326670358327445]], "ds1": [["str", 0.1805310223412233], ["Dict[str, Union[Any, Any, Any, Any]]", 0.1382168454232302], ["List[str]", 0.11877697958893384], ["Dict[int, str]", 0.10051277680416111], ["Pattern[str]", 0.10051058651929638], ["golem.task.taskstate.TaskState", 0.08935458946013036], ["Callable(id)[[object], int]", 0.08685015040435998]], "ds1_event": [["str", 0.31994076111254954], ["Set[str]", 0.08684967799348726], ["Dict[str, Any]", 0.07930695173456241]], "ds2": [["str", 0.1805310223412233], ["Dict[str, Union[Any, Any, Any, Any]]", 0.1382168454232302], ["List[str]", 0.11877697958893384], ["Dict[int, str]", 0.10051277680416111], ["Pattern[str]", 0.10051058651929638], ["golem.task.taskstate.TaskState", 0.08935458946013036], ["Callable(id)[[object], int]", 0.08685015040435998]], "ds2_event_1": [["str", 0.31994076111254954], ["Set[str]", 0.08684967799348726], ["Dict[str, Any]", 0.07930695173456241]], "ds2_event_2": [["str", 0.31994076111254954], ["Set[str]", 0.08684967799348726], ["Dict[str, Any]", 0.07930695173456241]], "task1": [["dict", 0.18670509925695616], ["Dict[str, Any]", 0.18640542876736027], ["set", 0.10930966118941875], ["List[Dict[str, Any]]", 0.09304420861144852], ["reminders.task.Task", 0.08531025404853462]], "template_context": [["str", 0.42682780354277994], ["tracim.models.data.Content", 0.19169665629851806], ["List[tracim.models.data.Content]", 0.11046918629303003], ["dict", 0.09456262632439301], ["List[List[Any]]", 0.08915006093026871], ["Tuple[str, str]", 0.08729366661101026]], "ti": [["str", 0.19408007373718827], ["int", 0.17072501675447926], ["pydynasync.models.Changes", 0.11256271213916949], ["golem.rpc.session.WebSocketAddress", 0.09728686381678], ["golem.task.taskbase.AcceptClientVerdict", 0.08804475082536069]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2375, 4], [2385, 83]], "fn_var_ln": {"template_context": [[2382, 8], [2382, 24]], "ti": [[2376, 8], [2376, 10]]}, "fn_var_occur": {"template_context": [["template_context", "ti", "get_template_context"], ["isinstance", "template_context", "pendulum", "DateTime"], ["isinstance", "template_context", "pendulum", "DateTime"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "schedule"], ["template_context", "ti", "get_template_context"]]}, "name": "test_pendulum_template_dates", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "schedule"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["mock.MagicMock", 0.08483775968066576]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_pendulum_template_dates", "ret_exprs": [], "ret_type": "", "variables": {"template_context": "", "ti": ""}, "variables_p": {"template_context": [["bytes", 0.2178338864546151], ["Dict[str, Any]", 0.10382670912307004], ["zerver.models.UserProfile", 0.10348800544982113], ["nativecards.models.Settings", 0.09226488257753557]], "ti": [["int", 0.42511000676967603], ["str", 0.12477414212552618], ["List[str]", 0.0902052012497478], ["list", 0.07975344995480388], ["Pattern[str]", 0.0696831682715419]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2387, 4], [2395, 82]], "fn_var_ln": {"result": [[2394, 8], [2394, 14]], "template_context": [[2393, 8], [2393, 24]], "ti": [[2388, 8], [2388, 10]]}, "fn_var_occur": {"result": [["result", "ti", "task", "render_template", "template_context"]], "template_context": [["template_context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "template_context"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "schedule"], ["template_context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "template_context"]]}, "name": "test_template_render", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "schedule"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["tracim.models.User", 0.16694265815310658], ["raiden.utils.TokenNetworkID", 0.09267262804679405]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_render", "ret_exprs": [], "ret_type": "", "variables": {"result": "", "template_context": "", "ti": ""}, "variables_p": {"result": [["str", 0.3722086228293845], ["Dict[str, Union[Any, str]]", 0.10020551388125579], ["Dict[str, set]", 0.09357929635389]], "template_context": [["str", 0.31639815244092295], ["List[List[Any]]", 0.11105825357888804], ["List[tracim.models.data.Content]", 0.10931314851154772], ["Dict[str, dict]", 0.09499866114505265], ["Tuple[str, str]", 0.09283041666597915], ["dict", 0.09014327710636816]], "ti": [["int", 0.4464776062903099], ["str", 0.4068971264684095], ["Dict[int, str]", 0.1466252672412807]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2397, 4], [2406, 52]], "fn_var_ln": {"result": [[2405, 12], [2405, 18]], "template_context": [[2403, 8], [2403, 24]], "ti": [[2398, 8], [2398, 10]]}, "fn_var_occur": {"result": [["result", "ti", "task", "render_template", "template_context"], ["result", "startswith"]], "template_context": [["template_context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "template_context"]], "ti": [["ti", "create_task_instance", "dag_id", "task_id", "schedule"], ["template_context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "template_context"]]}, "name": "test_template_render_deprecated", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "task_id", "schedule"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["tracim.models.User", 0.16694265815310658], ["raiden.utils.TokenNetworkID", 0.09267262804679405]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_render_deprecated", "ret_exprs": [], "ret_type": "", "variables": {"result": "", "template_context": "", "ti": ""}, "variables_p": {"result": [["str", 0.48581356842804724], ["Dict[str, Dict[str, Any]]", 0.21756712208412707]], "template_context": [["str", 0.31639815244092295], ["List[List[Any]]", 0.11105825357888804], ["List[tracim.models.data.Content]", 0.10931314851154772], ["Dict[str, dict]", 0.09499866114505265], ["Tuple[str, str]", 0.09283041666597915], ["dict", 0.09014327710636816]], "ti": [["int", 0.4464776062903099], ["str", 0.4068971264684095], ["Dict[int, str]", 0.1466252672412807]]}}, {"docstring": {"func": "Test the availability of variables in templates", "long_descr": null, "ret": null}, "fn_lc": [[2421, 4], [2447, 40]], "fn_var_ln": {"context": [[2445, 8], [2445, 15]], "result": [[2446, 8], [2446, 14]], "ti": [[2443, 8], [2443, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "content", "context"]], "result": [["result", "ti", "task", "render_template", "content", "context"], ["result", "expected_output"]], "ti": [["ti", "create_task_instance"], ["context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "content", "context"]]}, "name": "test_template_with_connection", "params": {"content": "", "create_task_instance": "", "expected_output": "", "self": ""}, "params_descr": {"content": "", "create_task_instance": "", "expected_output": "", "self": ""}, "params_occur": {"content": [["result", "ti", "task", "render_template", "content", "context"]], "create_task_instance": [["ti", "create_task_instance"]], "expected_output": [["result", "expected_output"]], "self": []}, "params_p": {"args": [], "content": [["Mapping[str, Any]", 0.21567307293111912], ["dict", 0.17684382330672904], ["List[str]", 0.12152106226319022], ["app.models.dto.ClientInfo", 0.10249300555862027], ["core.models.Recipe", 0.09745112373162779], ["List[Tuple[bool, Any]]", 0.09080843566516286]], "create_task_instance": [], "expected_output": [["bool", 0.09499750954706773]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_with_connection", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "result": "", "ti": ""}, "variables_p": {"context": [["dict", 0.19736743816971847], ["bytes", 0.1313361038294154], ["str", 0.11649083917707573], ["datetime.timedelta", 0.09959817003378088], ["int", 0.09500747542442024], ["viewer.models.Gallery", 0.09474240856918618]], "result": [["list", 0.21828237018690178], ["Dict[str, str]", 0.1296633605661402], ["Dict[str, Any]", 0.10307152231516424], ["Dict[bytes, Optional[bytes]]", 0.10095050144417872], ["tkinter.Variable", 0.10065372008137832], ["List[Union[Any, Any, Any, Any]]", 0.090035365804182], ["httpmeter.stats.BenchmarkResults", 0.08361155877300637]], "ti": [["str", 0.20688807194986947], ["dict", 0.1434257266212217], ["bytes", 0.08640161625766106]]}}, {"docstring": {"func": "Test the availability of variables in templates", "long_descr": null, "ret": null}, "fn_lc": [[2458, 4], [2467, 40]], "fn_var_ln": {"context": [[2465, 8], [2465, 15]], "result": [[2466, 8], [2466, 14]], "ti": [[2464, 8], [2464, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "content", "context"]], "result": [["result", "ti", "task", "render_template", "content", "context"], ["result", "expected_output"]], "ti": [["ti", "create_task_instance"], ["context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "content", "context"]]}, "name": "test_template_with_variable", "params": {"content": "", "create_task_instance": "", "expected_output": "", "self": ""}, "params_descr": {"content": "", "create_task_instance": "", "expected_output": "", "self": ""}, "params_occur": {"content": [["result", "ti", "task", "render_template", "content", "context"]], "create_task_instance": [["ti", "create_task_instance"]], "expected_output": [["result", "expected_output"]], "self": []}, "params_p": {"args": [], "content": [], "create_task_instance": [["aiohttp.test_utils.TestServer", 0.08468639147006006]], "expected_output": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_with_variable", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "result": "", "ti": ""}, "variables_p": {"context": [["dict", 0.19736743816971847], ["bytes", 0.1313361038294154], ["str", 0.11649083917707573], ["datetime.timedelta", 0.09959817003378088], ["int", 0.09500747542442024], ["viewer.models.Gallery", 0.09474240856918618]], "result": [["list", 0.21828237018690178], ["Dict[str, str]", 0.1296633605661402], ["Dict[str, Any]", 0.10307152231516424], ["Dict[bytes, Optional[bytes]]", 0.10095050144417872], ["tkinter.Variable", 0.10065372008137832], ["List[Union[Any, Any, Any, Any]]", 0.090035365804182], ["httpmeter.stats.BenchmarkResults", 0.08361155877300637]], "ti": [["str", 0.20688807194986947], ["dict", 0.1434257266212217], ["bytes", 0.08640161625766106]]}}, {"docstring": {"func": "Test the availability of variables in templates", "long_descr": null, "ret": null}, "fn_lc": [[2469, 4], [2476, 87]], "fn_var_ln": {"context": [[2474, 8], [2474, 15]], "ti": [[2473, 8], [2473, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["ti", "task", "render_template", "context"]], "ti": [["ti", "create_task_instance"], ["context", "ti", "get_template_context"], ["ti", "task", "render_template", "context"]]}, "name": "test_template_with_variable_missing", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["dict", 0.09012905833303718], ["str", 0.09012905833303718]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_with_variable_missing", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "ti": ""}, "variables_p": {"context": [["str", 0.5370985890484126], ["List[str]", 0.10024007405192951], ["int", 0.08453915363433634], ["Tuple[str, str, str, str, str, str, str]", 0.07981922222734324]], "ti": [["str", 0.4806464396927321], ["dict", 0.2585752381037697], ["list", 0.17930758026885135], ["int", 0.08147074193464686]]}}, {"docstring": {"func": "Test the availability of variables in templates", "long_descr": null, "ret": null}, "fn_lc": [[2488, 4], [2497, 40]], "fn_var_ln": {"context": [[2495, 8], [2495, 15]], "result": [[2496, 8], [2496, 14]], "ti": [[2494, 8], [2494, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "content", "context"]], "result": [["result", "ti", "task", "render_template", "content", "context"], ["result", "expected_output"]], "ti": [["ti", "create_task_instance"], ["context", "ti", "get_template_context"], ["result", "ti", "task", "render_template", "content", "context"]]}, "name": "test_template_with_json_variable", "params": {"content": "", "create_task_instance": "", "expected_output": "", "self": ""}, "params_descr": {"content": "", "create_task_instance": "", "expected_output": "", "self": ""}, "params_occur": {"content": [["result", "ti", "task", "render_template", "content", "context"]], "create_task_instance": [["ti", "create_task_instance"]], "expected_output": [["result", "expected_output"]], "self": []}, "params_p": {"args": [], "content": [], "create_task_instance": [["aiohttp.test_utils.TestServer", 0.08266841100670785]], "expected_output": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_with_json_variable", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "result": "", "ti": ""}, "variables_p": {"context": [["dict", 0.19736743816971847], ["bytes", 0.1313361038294154], ["str", 0.11649083917707573], ["datetime.timedelta", 0.09959817003378088], ["int", 0.09500747542442024], ["viewer.models.Gallery", 0.09474240856918618]], "result": [["list", 0.21828237018690178], ["Dict[str, str]", 0.1296633605661402], ["Dict[str, Any]", 0.10307152231516424], ["Dict[bytes, Optional[bytes]]", 0.10095050144417872], ["tkinter.Variable", 0.10065372008137832], ["List[Union[Any, Any, Any, Any]]", 0.090035365804182], ["httpmeter.stats.BenchmarkResults", 0.08361155877300637]], "ti": [["str", 0.20688807194986947], ["dict", 0.1434257266212217], ["bytes", 0.08640161625766106]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2499, 4], [2503, 86]], "fn_var_ln": {"context": [[2501, 8], [2501, 15]], "ti": [[2500, 8], [2500, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["ti", "task", "render_template", "context"]], "ti": [["ti", "create_task_instance"], ["context", "ti", "get_template_context"], ["ti", "task", "render_template", "context"]]}, "name": "test_template_with_json_variable_missing", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_with_json_variable_missing", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "ti": ""}, "variables_p": {"context": [["str", 0.5370985890484126], ["List[str]", 0.10024007405192951], ["int", 0.08453915363433634], ["Tuple[str, str, str, str, str, str, str]", 0.07981922222734324]], "ti": [["str", 0.4806464396927321], ["dict", 0.2585752381037697], ["list", 0.17930758026885135], ["int", 0.08147074193464686]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2518, 4], [2530, 64]], "fn_var_ln": {"context": [[2520, 8], [2520, 15]], "message_beginning": [[2523, 8], [2523, 25]], "recorded_message": [[2528, 8], [2528, 24]], "ti": [[2519, 8], [2519, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["context", "field", "expected"]], "message_beginning": [["message_beginning", "field"], ["recorded_message", "startswith", "message_beginning"]], "recorded_message": [["recorded_message", "str", "m", "message", "m", "recorder"], ["len", "recorded_message"], ["recorded_message", "startswith", "message_beginning"]], "ti": [["ti", "create_task_instance", "execution_date", "DEFAULT_DATE"], ["context", "ti", "get_template_context"]]}, "name": "test_deprecated_context", "params": {"create_task_instance": "", "expected": "", "field": "", "self": ""}, "params_descr": {"create_task_instance": "", "expected": "", "field": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "execution_date", "DEFAULT_DATE"]], "expected": [["context", "field", "expected"]], "field": [["context", "field", "expected"], ["message_beginning", "field"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["str", 0.18866523275846234], ["zam_repondeur.models.Dossier", 0.11279895420610694], ["app.models.models.User", 0.10507998242451493], ["server.models.User", 0.10429665630376217], ["raiden.utils.FeeAmount", 0.09160799395347737], ["zerver.models.UserGroup", 0.09114170783140202], ["zerver.models.UserProfile", 0.09114170783140202]], "expected": [["Callable", 0.19254134975994072], ["cmk.utils.type_defs.EventRule", 0.12109672698931788], ["dict", 0.08870612448900499]], "field": [["Dict[str, Any]", 0.18478869953255947], ["str", 0.12267099884789903], ["taskiapplication.models.task.Task", 0.11077759327324832], ["Optional[\"permissions_doc\"]", 0.09522263254932889], ["float", 0.09468733049949546]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_deprecated_context", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "message_beginning": "", "recorded_message": "", "ti": ""}, "variables_p": {"context": [["str", 0.23511663827866133], ["int", 0.10649144301461227], ["types.ValueType", 0.10070061911746639], ["Dict[str, Any]", 0.08495249328545254]], "message_beginning": [["cincoconfig.config.Schema", 0.14615033783493034], ["Dict[str, list]", 0.09561555962872782], ["List[str]", 0.08791114353844402], ["List[Union[int, Any, Any]]", 0.08771162441594342], ["Dict[str, Dict[str, Any]]", 0.08652651970400714], ["Dict[str, str]", 0.08622082498905768], ["DefaultDict[Any, int]", 0.0806428815803843], ["Dict[str, Tuple[str, str, str]]", 0.07995188283001962]], "recorded_message": [["str", 0.9054847321068548], ["List[str]", 0.09451526789314511]], "ti": [["Optional[hpaction.models.HPActionDocuments]", 0.30315853995403075], ["str", 0.1255924973164884], ["Optional[cmk.gui.plugins.userdb.utils.UserConnector]", 0.11186306986241377], ["byceps.services.user.transfer.models.User", 0.09826937280061446], ["datetime.datetime", 0.0950559105521384], ["list", 0.09193380808462165], ["int", 0.08563358474876459]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2532, 4], [2554, 101]], "fn_var_ln": {"context": [[2540, 8], [2540, 15]], "ti": [[2533, 8], [2533, 10]]}, "fn_var_occur": {"context": [["context", "ti", "get_template_context"], ["context", "pendulum", "DateTime", "tzinfo", "TIMEZONE"], ["context", "pendulum", "DateTime", "tzinfo", "TIMEZONE"], ["context", "None"], ["context", "None"], ["context", "None"]], "ti": [["ti", "create_task_instance", "start_date", "DEFAULT_DATE", "timetable", "AfterWorkdayTimetable", "run_type", "DagRunType", "SCHEDULED", "execution_date", "timezone", "datetime", "data_interval", "timezone", "datetime", "timezone", "datetime"], ["context", "ti", "get_template_context"]]}, "name": "test_template_with_custom_timetable_deprecated_context", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "start_date", "DEFAULT_DATE", "timetable", "AfterWorkdayTimetable", "run_type", "DagRunType", "SCHEDULED", "execution_date", "timezone", "datetime", "data_interval", "timezone", "datetime", "timezone", "datetime"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["cmk.utils.type_defs.ServiceName", 0.4019002460335256], ["cmk.utils.type_defs.HostName", 0.4019002460335256], ["zam_repondeur.models.Dossier", 0.09763577300910262]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_template_with_custom_timetable_deprecated_context", "ret_exprs": [], "ret_type": "", "variables": {"context": "", "ti": ""}, "variables_p": {"context": [["dict", 0.19339751088899168], ["datetime.datetime", 0.11543462771406074], ["byceps.services.user.transfer.models.User", 0.09842500735744587], ["Optional[persons.models.PersonModel]", 0.07841035322691046]], "ti": [["str", 0.3882228205433268], ["List[str]", 0.1203471598884364], ["Dict[str, Union[int, str]]", 0.1183951875344991], ["Dict[str, str]", 0.11203245029119922], ["datetime.date.time.timezone", 0.08903406570580281], ["datetime.datetime.datetime", 0.08843183820958941], ["byceps.services.user.models.detail.UserDetail", 0.08353647782714613]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2559, 8], [2562, 78]], "fn_var_ln": {"called": [[2561, 12], [2561, 18]]}, "fn_var_occur": {"called": [["called", "False"], ["called", "True"]]}, "name": "on_execute_callable", "params": {"context": ""}, "params_descr": {"context": ""}, "params_occur": {"context": [["context", "dag_id"]]}, "params_p": {"args": [], "context": [["str", 0.3918655740229524], ["bool", 0.0713009445220967], ["BaseException", 0.06785409884777197]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_execute_callback.<locals>.on_execute_callable", "ret_exprs": [], "ret_type": "", "variables": {"called": ""}, "variables_p": {"called": [["str", 0.271458934892006], ["int", 0.20459857742014398], ["List[bool]", 0.1297359969822776], ["list", 0.11160868971359905], ["Set[str]", 0.09216427923543379], ["Dict[str, bool]", 0.08994530026110123]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2556, 4], [2579, 44]], "fn_var_ln": {"called": [[2557, 8], [2557, 14]], "session": [[2571, 12], [2571, 19]], "ti": [[2565, 12], [2565, 14]]}, "fn_var_occur": {"called": [], "session": [["session", "settings", "Session"], ["session", "merge", "ti"], ["session", "commit"]], "ti": [["ti", "create_task_instance", "dag_id", "i", "on_execute_callback", "callback_input", "state", "State", "RUNNING"], ["session", "merge", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_execute_callback", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "i", "on_execute_callback", "callback_input", "state", "State", "RUNNING"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.35434170447093616], ["restful_functions.modules.task.TaskStoreSettings", 0.07686284931204566]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_execute_callback", "ret_exprs": [], "ret_type": "", "variables": {"called": "", "session": "", "ti": ""}, "variables_p": {"called": [["list", 0.49999999999999994], ["float", 0.3], ["List[int]", 0.09999999999999999], ["dict", 0.09999999999999999]], "session": [["sqlalchemy.orm.session.Session", 0.3462481853668743], ["Optional[str]", 0.33357160475027725], ["kedro.framework.session.session.KedroSession", 0.10215055226126576], ["SMSShell.models.session.Session", 0.07127006790595576]], "ti": [["int", 0.382109367204843], ["str", 0.13705169123622257], ["Final", 0.11809103637248483], ["Tuple[str, str, str, str, str, str, str]", 0.07570829675465068]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2594, 8], [2598, 28]], "fn_var_ln": {"called": [[2596, 12], [2596, 18]], "completed": [[2598, 12], [2598, 21]]}, "fn_var_occur": {"called": [["called", "completed", "False"], ["called", "completed"], ["called", "True"]], "completed": [["called", "completed", "False"], ["called", "completed"], ["completed", "True"]]}, "name": "on_finish_callable", "params": {"context": ""}, "params_descr": {"context": ""}, "params_occur": {"context": []}, "params_p": {"args": [], "context": [["int", 0.19999999999999998], ["str", 0.19999999999999998], ["Iterable['Context']", 0.09999999999999999], ["dict", 0.09999999999999999], ["bool", 0.09999999999999999]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_finished_callbacks_handle_and_log_exception.<locals>.on_finish_callable", "ret_exprs": [], "ret_type": "", "variables": {"called": "", "completed": ""}, "variables_p": {"called": [["str", 0.7755320896952265], ["list", 0.2244679103047735]], "completed": [["str", 1.0]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2589, 4], [2617, 70]], "fn_var_ln": {"_log": [[2609, 12], [2609, 19]], "callback_name": [[2615, 12], [2615, 25]], "called": [[2592, 8], [2592, 14]], "completed": [[2592, 17], [2592, 26]], "expected_message": [[2616, 12], [2616, 28]], "ti": [[2601, 12], [2601, 14]]}, "fn_var_occur": {"_log": [["ti", "_log", "mock", "Mock"]], "callback_name": [["callback_name", "callback_input", "isinstance", "callback_input", "list", "callback_input"], ["callback_name", "qualname", "callback_name", "split"], ["expected_message", "callback_name"]], "called": [], "completed": [], "expected_message": [["expected_message", "callback_name"], ["ti", "log", "exception", "assert_called_once_with", "expected_message"]], "ti": [["ti", "create_task_instance", "dag_id", "i", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "on_success_callback", "callback_input", "on_retry_callback", "callback_input", "on_failure_callback", "callback_input", "state", "finished_state"], ["ti", "_log", "mock", "Mock"], ["ti", "_run_finished_callback", "callback_input", "callback_type"], ["ti", "log", "exception", "assert_called_once_with", "expected_message"]]}, "name": "test_finished_callbacks_handle_and_log_exception", "params": {"callback_type": "", "create_task_instance": "", "finished_state": "", "self": ""}, "params_descr": {"callback_type": "", "create_task_instance": "", "finished_state": "", "self": ""}, "params_occur": {"callback_type": [["ti", "_run_finished_callback", "callback_input", "callback_type"]], "create_task_instance": [["ti", "create_task_instance", "dag_id", "i", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "on_success_callback", "callback_input", "on_retry_callback", "callback_input", "on_failure_callback", "callback_input", "state", "finished_state"]], "finished_state": [["ti", "create_task_instance", "dag_id", "i", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "on_success_callback", "callback_input", "on_retry_callback", "callback_input", "on_failure_callback", "callback_input", "state", "finished_state"]], "self": []}, "params_p": {"args": [], "callback_type": [["tests.e2e.Helper", 0.7988181692756129], ["bool", 0.10510285807714893]], "create_task_instance": [["raiden.utils.Address", 0.12470116368301351], ["List[str]", 0.10056215411656243], ["raiden.utils.BlockNumber", 0.10021248607169113], ["int", 0.09760643531769422], ["models.User", 0.0932629706587455]], "finished_state": [["raiden.utils.Address", 0.12470116368301351], ["List[str]", 0.10056215411656243], ["raiden.utils.BlockNumber", 0.10021248607169113], ["int", 0.09760643531769422], ["models.User", 0.0932629706587455]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_finished_callbacks_handle_and_log_exception", "ret_exprs": [], "ret_type": "", "variables": {"_log": "", "callback_name": "", "called": "", "completed": "", "expected_message": "", "ti": ""}, "variables_p": {"_log": [["Dict[str, Union[Any, Any, Any]]", 0.08658602296782261], ["qcodes.tests.data_mocks.MatchIO", 0.0818493279145452], ["mock.Mock", 0.08098564129402716], ["list", 0.0804287372597453]], "callback_name": [["str", 0.5845723060593608], ["Pattern[str]", 0.21333077137680884], ["Dict[str, str]", 0.09542170350180619]], "called": [["list", 0.49999999999999994], ["float", 0.3], ["List[int]", 0.09999999999999999], ["dict", 0.09999999999999999]], "completed": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "expected_message": [["dict", 0.2005708953918525], ["OrderedDict", 0.13128903626275207], ["Dict[str, Any]", 0.10273130966363272], ["Tuple[int, int, int, int, int, int]", 0.09953045161728828], ["KeysView[str]", 0.0928258495449472], ["golem.task.resulresultmanager.EncryptedResultPackageManager", 0.09036804914657232], ["List[Union[Any, Any]]", 0.08815105009980034]], "ti": [["Type[backend.server.models.match.Match]", 0.17053729625160444], ["Type[hypha.apply.projects.models.Report]", 0.1688775235419344], ["Tuple[int, int]", 0.16483906665520714], ["datetime.datetime", 0.09163189882522421], ["dict", 0.08877227048530688]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2620, 4], [2691, 43]], "fn_var_ln": {"context_arg_1": [[2649, 8], [2649, 21]], "context_arg_2": [[2670, 8], [2670, 21]], "context_arg_3": [[2689, 8], [2689, 21]], "dag": [[2626, 8], [2626, 11]], "dr": [[2636, 8], [2636, 10]], "mock_on_failure_1": [[2624, 8], [2624, 25]], "mock_on_failure_2": [[2653, 8], [2653, 25]], "mock_on_failure_3": [[2674, 8], [2674, 25]], "mock_on_retry_1": [[2625, 8], [2625, 23]], "mock_on_retry_2": [[2654, 8], [2654, 23]], "mock_on_retry_3": [[2675, 8], [2675, 23]], "start_date": [[2621, 8], [2621, 18]], "state": [[2686, 8], [2686, 17]], "task": [[2645, 8], [2645, 16]], "task1": [[2626, 13], [2626, 18]], "task2": [[2655, 8], [2655, 13]], "task3": [[2676, 8], [2676, 13]], "ti1": [[2644, 8], [2644, 11]], "ti2": [[2662, 8], [2662, 11]], "ti3": [[2683, 8], [2683, 11]]}, "fn_var_occur": {"context_arg_1": [["context_arg_1", "mock_on_failure_1", "call_args", "args"], ["context_arg_1", "context_arg_1"]], "context_arg_2": [["context_arg_2", "mock_on_retry_2", "call_args", "args"], ["context_arg_2", "context_arg_2"]], "context_arg_3": [["context_arg_3", "mock_on_failure_3", "call_args", "args"], ["context_arg_3", "context_arg_3"]], "dag": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"], ["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["task2", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_2", "on_retry_callback", "mock_on_retry_2", "retries", "dag", "dag"], ["task3", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_3", "on_retry_callback", "mock_on_retry_3", "retries", "dag", "dag"]], "dr": [["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti2", "TI", "task", "task2", "run_id", "dr", "run_id"], ["ti3", "TI", "task", "task3", "run_id", "dr", "run_id"]], "mock_on_failure_1": [["mock_on_failure_1", "mock", "MagicMock"], ["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"], ["context_arg_1", "mock_on_failure_1", "call_args", "args"]], "mock_on_failure_2": [["mock_on_failure_2", "mock", "MagicMock"], ["task2", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_2", "on_retry_callback", "mock_on_retry_2", "retries", "dag", "dag"], ["mock_on_failure_2", "assert_not_called"]], "mock_on_failure_3": [["mock_on_failure_3", "mock", "MagicMock"], ["task3", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_3", "on_retry_callback", "mock_on_retry_3", "retries", "dag", "dag"], ["context_arg_3", "mock_on_failure_3", "call_args", "args"]], "mock_on_retry_1": [["mock_on_retry_1", "mock", "MagicMock"], ["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"], ["mock_on_retry_1", "assert_not_called"]], "mock_on_retry_2": [["mock_on_retry_2", "mock", "MagicMock"], ["task2", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_2", "on_retry_callback", "mock_on_retry_2", "retries", "dag", "dag"], ["context_arg_2", "mock_on_retry_2", "call_args", "args"]], "mock_on_retry_3": [["mock_on_retry_3", "mock", "MagicMock"], ["task3", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_3", "on_retry_callback", "mock_on_retry_3", "retries", "dag", "dag"], ["mock_on_retry_3", "assert_not_called"]], "start_date": [["start_date", "timezone", "datetime"], ["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"]], "state": [["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["ti1", "state", "State", "FAILED"], ["ti2", "state", "State", "FAILED"], ["ti3", "state", "State", "FAILED"]], "task": [["ti1", "task", "task1"], ["ti2", "TI", "task", "task2", "run_id", "dr", "run_id"], ["ti3", "TI", "task", "task3", "run_id", "dr", "run_id"]], "task1": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"], ["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti1", "task", "task1"]], "task2": [["task2", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_2", "on_retry_callback", "mock_on_retry_2", "retries", "dag", "dag"], ["ti2", "TI", "task", "task2", "run_id", "dr", "run_id"]], "task3": [["task3", "EmptyOperator", "task_id", "on_failure_callback", "mock_on_failure_3", "on_retry_callback", "mock_on_retry_3", "retries", "dag", "dag"], ["ti3", "TI", "task", "task3", "run_id", "dr", "run_id"]], "ti1": [["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti1", "task", "task1"], ["ti1", "state", "State", "FAILED"], ["ti1", "handle_failure"]], "ti2": [["ti2", "TI", "task", "task2", "run_id", "dr", "run_id"], ["ti2", "state", "State", "FAILED"], ["session", "add", "ti2"], ["ti2", "handle_failure"]], "ti3": [["ti3", "TI", "task", "task3", "run_id", "dr", "run_id"], ["session", "add", "ti3"], ["ti3", "state", "State", "FAILED"], ["ti3", "handle_failure", "force_fail", "True"]]}, "name": "test_handle_failure", "params": {"create_dummy_dag": "", "self": "", "session": ""}, "params_descr": {"create_dummy_dag": "", "self": "", "session": ""}, "params_occur": {"create_dummy_dag": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"]], "self": [], "session": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "with_dagrun_type", "DagRunType", "MANUAL", "on_failure_callback", "mock_on_failure_1", "on_retry_callback", "mock_on_retry_1", "session", "session"], ["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["session", "add", "ti2"], ["session", "flush"], ["session", "add", "ti3"], ["session", "flush"]]}, "params_p": {"args": [], "create_dummy_dag": [["int", 0.4885101675227385], ["List[Optional[str]]", 0.20505228287543387], ["str", 0.10967698697349446], ["dict", 0.10916953153427017], ["Optional[str]", 0.0875910310940628]], "kwargs": [], "self": [], "session": [["int", 0.4885101675227385], ["List[Optional[str]]", 0.20505228287543387], ["str", 0.10967698697349446], ["dict", 0.10916953153427017], ["Optional[str]", 0.0875910310940628]]}, "q_name": "TestTaskInstance.test_handle_failure", "ret_exprs": [], "ret_type": "", "variables": {"context_arg_1": "", "context_arg_2": "", "context_arg_3": "", "dag": "", "dr": "", "mock_on_failure_1": "", "mock_on_failure_2": "", "mock_on_failure_3": "", "mock_on_retry_1": "", "mock_on_retry_2": "", "mock_on_retry_3": "", "start_date": "", "state": "", "task": "", "task1": "", "task2": "", "task3": "", "ti1": "", "ti2": "", "ti3": ""}, "variables_p": {"context_arg_1": [["tests.common.Point", 0.12809122459253522], ["Dict[str, Tuple[Any, Any]]", 0.12805230907640605], ["str", 0.07831341619031412], ["tests.wpweb-platform-tests.tools.manifesmanifesManifest", 0.07332191111980749], ["List[str]", 0.07215925656605371]], "context_arg_2": [["tests.common.Point", 0.12809122459253522], ["Dict[str, Tuple[Any, Any]]", 0.12805230907640605], ["str", 0.07831341619031412], ["tests.wpweb-platform-tests.tools.manifesmanifesManifest", 0.07332191111980749], ["List[str]", 0.07215925656605371]], "context_arg_3": [["tests.common.Point", 0.12809122459253522], ["Dict[str, Tuple[Any, Any]]", 0.12805230907640605], ["str", 0.07831341619031412], ["tests.wpweb-platform-tests.tools.manifesmanifesManifest", 0.07332191111980749], ["List[str]", 0.07215925656605371]], "dag": [["str", 0.2806612722066115], ["dict", 0.2673695534428765], ["Type[ddionrails.workspace.models.baskeBasket]", 0.0983018831521259], ["Dict[Any, str]", 0.09404197335473716], ["Optional[Callable[..., Any]]", 0.08700363289895631]], "dr": [["int", 0.1802601165411651], ["Optional[hpaction.models.HPActionDocuments]", 0.13373300415752107], ["List[dict]", 0.1159370528463839], ["Union[Literal, Literal]", 0.10684466042066014], ["dict", 0.10376393252444437], ["str", 0.09912114213093016], ["datetime.datetime", 0.09054074670538755]], "mock_on_failure_1": [["mock.MagicMock", 0.9999999999999999]], "mock_on_failure_2": [["mock.MagicMock", 0.4960873255813544], ["mock.Mock", 0.20788772030537894]], "mock_on_failure_3": [["mock.MagicMock", 0.4960873255813544], ["mock.Mock", 0.20788772030537894]], "mock_on_retry_1": [["mock.MagicMock", 0.9999999999999999]], "mock_on_retry_2": [["mock.MagicMock", 0.4960873255813544], ["mock.Mock", 0.20788772030537894]], "mock_on_retry_3": [["mock.MagicMock", 0.4960873255813544], ["mock.Mock", 0.20788772030537894]], "start_date": [["datetime.datetime.datetime", 0.38256015879313815], ["datetime.timedelta", 0.3254037228529211], ["datetime.datetime", 0.20049383963052902], ["datetime.date", 0.09154227872341174]], "state": [["types.Optional[types.UUID]", 0.29332583841018084], ["dict", 0.21463196093077885], ["types.Optional[int]", 0.19555055894012055], ["src.scrape.models.Product", 0.10046088289714133], ["Optional[grouper.models.user_metadata.UserMetadata]", 0.09825547935171824], ["types.Optional[types.Timestamp]", 0.09777527947006028]], "task": [["golem.task.taskbase.Task", 0.6855820537800702], ["reminders.task.Task", 0.09275949250755347]], "task1": [["dict", 0.1929917249480072], ["Dict[str, Any]", 0.18073996210067703], ["set", 0.0973883793420511], ["List[Dict[str, Any]]", 0.09444446981021506], ["reminders.task.Task", 0.08072927531413832]], "task2": [["Dict[str, Any]", 0.19714058241320032], ["Dict[str, Type[Any]]", 0.1111354195556807], ["List[str]", 0.1045649899145707], ["golem.task.taskcomputer.TaskComputer", 0.09434343305305917], ["Dict[str, str]", 0.08729995020242404]], "task3": [["Dict[str, Any]", 0.19714058241320032], ["Dict[str, Type[Any]]", 0.1111354195556807], ["List[str]", 0.1045649899145707], ["golem.task.taskcomputer.TaskComputer", 0.09434343305305917], ["Dict[str, str]", 0.08729995020242404]], "ti1": [["int", 0.5844704979445722], ["pydynasync.models.Changes", 0.09899700244995503]], "ti2": [["golem.task.taskstate.SubtaskState", 0.1681832440157589], ["list", 0.13475760012047266], ["Dict[str, str]", 0.10203190716154609], ["restful_functions.modules.task.TaskStoreSettings", 0.09843474461302221], ["zerver.models.Realm", 0.08957928492075282], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.08029344028337564], ["grpy.core.models.Grouping", 0.07867036928143077], ["cg_broker.models.Runner", 0.07815156879606446]], "ti3": [["list", 0.1539724560193623], ["golem.task.taskstate.SubtaskState", 0.1356313147116196], ["Dict[str, str]", 0.10801876734298521], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.0904672507811843], ["restful_functions.modules.task.TaskStoreSettings", 0.08928144742828245], ["grpy.core.models.Grouping", 0.08416071414908435], ["cg_broker.models.Runner", 0.07933177827822317]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2693, 4], [2709, 33]], "fn_var_ln": {"dr": [[2697, 8], [2697, 10]], "session": [[2694, 8], [2694, 15]], "state": [[2699, 8], [2699, 16]], "task": [[2696, 12], [2696, 16]], "ti": [[2698, 8], [2698, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "TI", "task", "task", "run_id", "dr", "run_id"]], "session": [["session", "settings", "Session"], ["session", "merge", "ti"], ["session", "flush"]], "state": [["ti", "state", "State", "QUEUED"], ["ti", "state", "State", "QUEUED"], ["ti", "state", "State", "UP_FOR_RETRY"]], "task": [["task", "EmptyOperator", "task_id", "retries"], ["ti", "TI", "task", "task", "run_id", "dr", "run_id"]], "ti": [["ti", "TI", "task", "task", "run_id", "dr", "run_id"], ["ti", "state", "State", "QUEUED"], ["session", "merge", "ti"], ["ti", "state", "State", "QUEUED"], ["ti", "try_number"], ["ti", "handle_failure", "test_mode", "True"], ["ti", "state", "State", "UP_FOR_RETRY"], ["ti", "_try_number"], ["ti", "try_number"]]}, "name": "test_handle_failure_updates_queued_task_try_number", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [["str", 0.05111721420097083]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_handle_failure_updates_queued_task_try_number", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "session": "", "state": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.4242635243866405], ["Dict[str, str]", 0.10657472794579685], ["cmk.base.api.agent_based.type_defs.InventoryPlugin", 0.09933067967664665], ["Optional[List[Any]]", 0.09383175160384075], ["Dict[str, pathlib.Path]", 0.0919997721290251], ["int", 0.0919997721290251]], "session": [["sqlalchemy.orm.session.Session", 0.3462481853668743], ["Optional[str]", 0.33357160475027725], ["kedro.framework.session.session.KedroSession", 0.10215055226126576], ["SMSShell.models.session.Session", 0.07127006790595576]], "state": [["str", 0.7999999999999999], ["Dict[str, str]", 0.1]], "task": [["Dict[str, Dict[str, int]]", 0.16128294212935224], ["str", 0.08633338424066066], ["Dict[str, Any]", 0.08602476094566279]], "ti": [["golem.task.taskstate.SubtaskState", 0.153261975127901], ["list", 0.14107556326831136], ["Dict[str, str]", 0.11154257316579133], ["zerver.models.Realm", 0.09945479074961568], ["restful_functions.modules.task.TaskStoreSettings", 0.09388875363385897], ["golem.task.taskcomputer.TaskComputation", 0.0825827879748276], ["cg_broker.models.Runner", 0.08164334704225212]]}}, {"docstring": {"func": "When a zombie is detected for a DAG with a parse error, we need to be able to run handle_failure", "long_descr": "_without_ ti.task being set", "ret": null}, "fn_lc": [[2712, 4], [2744, 9]], "fn_var_ln": {"dr": [[2720, 8], [2720, 10]], "expected_stats_tags": [[2726, 8], [2726, 27]], "session": [[2717, 8], [2717, 15]], "state": [[2724, 8], [2724, 16]], "task": [[2723, 8], [2723, 15]], "ti": [[2722, 8], [2722, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "TI", "task", "task", "run_id", "dr", "run_id"]], "expected_stats_tags": [["expected_stats_tags", "ti", "dag_id", "ti", "task_id"], ["Stats_incr", "assert_any_call", "tags", "expected_stats_tags"], ["Stats_incr", "assert_any_call", "tags", "expected_stats_tags"], ["Stats_incr", "assert_any_call", "tags", "expected_stats_tags"]], "session": [["session", "settings", "Session"], ["ti", "session", "merge", "ti"], ["session", "flush"]], "state": [["ti", "state", "State", "QUEUED"], ["ti", "state", "State", "QUEUED"], ["ti", "state", "State", "UP_FOR_RETRY"]], "task": [["task", "EmptyOperator", "task_id", "retries"], ["ti", "TI", "task", "task", "run_id", "dr", "run_id"], ["ti", "task", "None"], ["ti", "task", "None"]], "ti": [["ti", "TI", "task", "task", "run_id", "dr", "run_id"], ["ti", "session", "merge", "ti"], ["ti", "task", "None"], ["ti", "state", "State", "QUEUED"], ["expected_stats_tags", "ti", "dag_id", "ti", "task_id"], ["ti", "task", "None"], ["ti", "state", "State", "QUEUED"], ["ti", "try_number"], ["ti", "handle_failure", "test_mode", "False"], ["ti", "state", "State", "UP_FOR_RETRY"], ["ti", "_try_number"], ["ti", "try_number"]]}, "name": "test_handle_failure_no_task", "params": {"Stats_incr": "", "dag_maker": "", "self": ""}, "params_descr": {"Stats_incr": "", "dag_maker": "", "self": ""}, "params_occur": {"Stats_incr": [["Stats_incr", "assert_any_call", "tags", "expected_stats_tags"], ["Stats_incr", "assert_any_call", "tags", "expected_stats_tags"], ["Stats_incr", "assert_any_call", "tags", "expected_stats_tags"]], "dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"Stats_incr": [["pathlib.Path", 0.5045870394889582], ["tests.basilisp.helpers.CompileFn", 0.10401522431018642], ["dict", 0.09301251660761199]], "args": [], "dag_maker": [["str", 0.04900940186511529]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_handle_failure_no_task", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "expected_stats_tags": "", "session": "", "state": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.4242635243866405], ["Dict[str, str]", 0.10657472794579685], ["cmk.base.api.agent_based.type_defs.InventoryPlugin", 0.09933067967664665], ["Optional[List[Any]]", 0.09383175160384075], ["Dict[str, pathlib.Path]", 0.0919997721290251], ["int", 0.0919997721290251]], "expected_stats_tags": [["str", 0.7923549213479527], ["Set[str]", 0.11836750833693266], ["Type[List[Any]]", 0.08927757031511466]], "session": [["Optional[str]", 0.4887892555717015], ["sqlalchemy.orm.session.Session", 0.1735222826598098], ["grpy.core.models.User", 0.06817981499995968], ["Optional[homeassistancore.State]", 0.06386354239827793], ["Set[str]", 0.06206220332288088]], "state": [["str", 0.7999999999999999], ["Dict[str, str]", 0.1]], "task": [["Dict[str, Dict[str, int]]", 0.11559611952746962], ["annofabapi.dataclass.task.Task", 0.08312057217445133], ["List[str]", 0.07732467767938409]], "ti": [["list", 0.12302607213370541], ["golem.task.taskstate.SubtaskState", 0.12092418441652794], ["Dict[str, str]", 0.11617646281174414], ["grpy.core.models.Grouping", 0.10941344427520709], ["bool", 0.08881842302812129], ["dict", 0.08641858937179471], ["cg_broker.models.Runner", 0.08294560714007644]]}}, {"docstring": {"func": "When the loaded taskinstance does not use refresh_from_task, the task may be undefined.", "long_descr": "For example:\n    the DAG file has been deleted before executing _execute_task_callbacks", "ret": null}, "fn_lc": [[2746, 4], [2754, 51]], "fn_var_ln": {"ti": [[2752, 8], [2752, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance"], ["ti", "task"], ["ti", "handle_failure"]]}, "name": "test_handle_failure_task_undefined", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_handle_failure_task_undefined", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["str", 0.2865387890273863], ["Pattern[str]", 0.1108038244449961], ["bytes", 0.10255853425998214], ["int", 0.08647464393007735], ["list", 0.08320630299189857]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2757, 4], [2809, 50]], "fn_var_ln": {"dag": [[2761, 8], [2761, 11]], "dr": [[2771, 8], [2771, 10]], "exp_states": [[2807, 8], [2807, 18]], "fail_task": [[2795, 8], [2795, 17]], "op": [[2786, 12], [2786, 14]], "start_date": [[2758, 8], [2758, 18]], "state": [[2800, 8], [2800, 19]], "states": [[2783, 8], [2783, 14]], "task": [[2780, 8], [2780, 16]], "task1": [[2761, 13], [2761, 18]], "tasks": [[2784, 8], [2784, 13]], "ti": [[2790, 12], [2790, 14]], "ti1": [[2779, 8], [2779, 11]], "ti_ff": [[2799, 8], [2799, 13]]}, "fn_var_occur": {"dag": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "trigger_rule", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session", "fail_stop", "True"], ["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["op", "EmptyOperator", "task_id", "i", "dag", "dag"], ["fail_task", "EmptyOperator", "task_id", "dag", "dag"]], "dr": [["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti", "TI", "task", "op", "run_id", "dr", "run_id"], ["ti_ff", "TI", "task", "fail_task", "run_id", "dr", "run_id"]], "exp_states": [["exp_states", "State", "FAILED", "State", "FAILED", "State", "SKIPPED", "State", "SKIPPED", "State", "SKIPPED"], ["tasks", "i", "state", "exp_states", "i"]], "fail_task": [["fail_task", "EmptyOperator", "task_id", "dag", "dag"], ["ti_ff", "TI", "task", "fail_task", "run_id", "dr", "run_id"]], "op": [["op", "EmptyOperator", "task_id", "i", "dag", "dag"], ["ti", "TI", "task", "op", "run_id", "dr", "run_id"]], "start_date": [["start_date", "timezone", "datetime"], ["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "trigger_rule", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session", "fail_stop", "True"]], "state": [["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["ti1", "state", "State", "SUCCESS"], ["ti", "state", "states", "i"], ["ti_ff", "state", "State", "FAILED"], ["ti1", "state", "State", "SUCCESS"], ["ti_ff", "state", "State", "FAILED"], ["tasks", "i", "state", "exp_states", "i"]], "states": [["states", "State", "RUNNING", "State", "FAILED", "State", "QUEUED", "State", "SCHEDULED", "State", "DEFERRED"], ["range", "len", "states"], ["ti", "state", "states", "i"], ["range", "len", "states"]], "task": [["ti1", "task", "task1"], ["ti", "TI", "task", "op", "run_id", "dr", "run_id"], ["ti_ff", "TI", "task", "fail_task", "run_id", "dr", "run_id"]], "task1": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "trigger_rule", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session", "fail_stop", "True"], ["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti1", "task", "task1"]], "tasks": [["tasks", "append", "ti"], ["tasks", "i", "state", "exp_states", "i"]], "ti": [["ti", "TI", "task", "op", "run_id", "dr", "run_id"], ["ti", "state", "states", "i"], ["session", "add", "ti"], ["tasks", "append", "ti"]], "ti1": [["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["ti1", "task", "task1"], ["ti1", "state", "State", "SUCCESS"], ["ti1", "state", "State", "SUCCESS"]], "ti_ff": [["ti_ff", "TI", "task", "fail_task", "run_id", "dr", "run_id"], ["ti_ff", "state", "State", "FAILED"], ["session", "add", "ti_ff"], ["ti_ff", "handle_failure"], ["ti_ff", "state", "State", "FAILED"]]}, "name": "test_handle_failure_fail_stop", "params": {"create_dummy_dag": "", "self": "", "session": ""}, "params_descr": {"create_dummy_dag": "", "self": "", "session": ""}, "params_occur": {"create_dummy_dag": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "trigger_rule", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session", "fail_stop", "True"]], "self": [], "session": [["dag", "task1", "create_dummy_dag", "dag_id", "schedule", "None", "start_date", "start_date", "task_id", "trigger_rule", "with_dagrun_type", "DagRunType", "MANUAL", "session", "session", "fail_stop", "True"], ["dr", "dag", "create_dagrun", "run_id", "run_type", "DagRunType", "MANUAL", "execution_date", "timezone", "utcnow", "state", "None", "session", "session"], ["ti1", "dr", "get_task_instance", "task1", "task_id", "session", "session"], ["session", "add", "ti"], ["session", "add", "ti_ff"], ["session", "flush"]]}, "params_p": {"args": [], "create_dummy_dag": [["Dict[str, Any]", 0.350122683956976], ["str", 0.23226079598181493], ["Dict[str, str]", 0.11739130471884707], ["zilencer.models.RemoteZulipServer", 0.08955691240462589]], "kwargs": [], "self": [], "session": [["Dict[str, Any]", 0.350122683956976], ["str", 0.23226079598181493], ["Dict[str, str]", 0.11739130471884707], ["zilencer.models.RemoteZulipServer", 0.08955691240462589]]}, "q_name": "TestTaskInstance.test_handle_failure_fail_stop", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "exp_states": "", "fail_task": "", "op": "", "start_date": "", "state": "", "states": "", "task": "", "task1": "", "tasks": "", "ti": "", "ti1": "", "ti_ff": ""}, "variables_p": {"dag": [["str", 0.23498633984644823], ["int", 0.17474684786427436], ["Type[bootcamp.qa.models.Question]", 0.119541463813129], ["Dict[Any, str]", 0.10476736440435906], ["list", 0.08987995423351973]], "dr": [["int", 0.1802601165411651], ["Optional[hpaction.models.HPActionDocuments]", 0.13373300415752107], ["List[dict]", 0.1159370528463839], ["Union[Literal, Literal]", 0.10684466042066014], ["dict", 0.10376393252444437], ["str", 0.09912114213093016], ["datetime.datetime", 0.09054074670538755]], "exp_states": [["int", 0.3205486037906843], ["List[int]", 0.30894443380173137], ["str", 0.15920683040414138], ["raiden.utils.Any", 0.11204047008232638]], "fail_task": [["bytes", 0.11171848583973859], ["List[str]", 0.08843612065491531], ["dict", 0.08808866967728347], ["golem.task.taskcomputer.TaskComputer", 0.08692947794996186], ["golem.task.taskbase.Task", 0.08627834625913804]], "op": [["str", 0.13481883300844744], ["Dict[str, Union[Any, Any]]", 0.126088456910352], ["nufb.task.Task", 0.11022868990840841], ["dict", 0.09674313184927066], ["restful_functions.modules.task.TaskStore", 0.09258620502412906], ["bytes", 0.0886537566022111], ["Dict[str, Any]", 0.08496445242792112], ["Dict[str, str]", 0.08418339826734188]], "start_date": [["datetime.timedelta", 0.5506262759373369], ["datetime.datetime", 0.36198908140043173], ["str", 0.08738464266223143]], "state": [["types.Optional[types.UUID]", 0.29332583841018084], ["dict", 0.21463196093077885], ["types.Optional[int]", 0.19555055894012055], ["src.scrape.models.Product", 0.10046088289714133], ["Optional[grouper.models.user_metadata.UserMetadata]", 0.09825547935171824], ["types.Optional[types.Timestamp]", 0.09777527947006028]], "states": [["int", 0.11699186476650006], ["dict", 0.087805367703946]], "task": [["apps.core.task.coretaskstate.TaskDefinition", 0.2811240915790697], ["golem.task.task_api.EnvironmentTaskApiService", 0.21732984579696688], ["task_processing.plugins.mesos.task_config.MesosTaskConfig", 0.1864064667499651], ["taskiapplication.models.task.Task", 0.08965923755708691], ["apps.dummy.task.dummytask.DummyTask", 0.08641325702512208]], "task1": [["Dict[str, Any]", 0.16932165101521177], ["set", 0.16044455879033237], ["dict", 0.10895512525281267], ["List[Dict[str, Any]]", 0.09336130899070057], ["List[Dict]", 0.078658547088168], ["reminders.task.Task", 0.0778998763478826], ["task_processing.plugins.mesos.task_config.MesosTaskConfig", 0.0771918329009674]], "tasks": [["list", 0.9111570303404636]], "ti": [["Dict[str, str]", 0.1573034161740553], ["golem.task.taskbase.AcceptClientVerdict", 0.11659553270784223], ["golem.task.taskstate.SubtaskState", 0.10166594164766074], ["zerver.models.Realm", 0.09812010273785235], ["list", 0.09134712430101083], ["restful_functions.modules.task.TaskStoreSettings", 0.07540739476457001]], "ti1": [["int", 0.5539202895569221], ["str", 0.10339458631873318], ["pydynasync.models.Changes", 0.09147781571175585]], "ti_ff": [["golem.task.taskrequestorstats.AggregateTaskStats", 0.1525355479740218], ["golem.task.taskcomputer.TaskComputation", 0.13594030896363982], ["restful_functions.modules.task.TaskStoreSettings", 0.10790563414245123], ["apps.wasm.task.VbrSubtask", 0.1017436659669183], ["golem.task.taskstate.SubtaskState", 0.10083185434807042], ["list", 0.09515338878105903], ["apps.core.task.coretaskstate.TaskDefinition", 0.090078458645017], ["golem.task.taskmanager.TaskManager", 0.07602355220936367], ["apps.wasm.task.WasmTaskOptions", 0.07301806632511784], ["golem.task.task_api.EnvironmentTaskApiService", 0.06676952264434101]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2812, 8], [2813, 50]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fail", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_does_not_retry_on_airflow_fail_exception.<locals>.fail", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2811, 4], [2827, 39]], "fn_var_ln": {"task": [[2822, 8], [2822, 15]], "ti": [[2821, 8], [2821, 10]]}, "fn_var_occur": {"task": [["task", "PythonOperator", "task_id", "python_callable", "fail", "retries"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["State", "FAILED", "ti", "state"]]}, "name": "test_does_not_retry_on_airflow_fail_exception", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.24685856320008093], ["base.Connection", 0.18965179794687298]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_does_not_retry_on_airflow_fail_exception", "ret_exprs": [], "ret_type": "", "variables": {"task": "", "ti": ""}, "variables_p": {"task": [["Dict[str, Dict[str, int]]", 0.13195259896555875], ["Dict[str, str]", 0.10793100946559799], ["Dict[str, Any]", 0.10207546477705963], ["Dict[str, int]", 0.09628096388176742], ["Dict[int, Any]", 0.09471695591013192], ["Type[Dict[str, Any]]", 0.09209956990451677], ["bool", 0.09025620162880227], ["pytch.utils.Position", 0.08872940686169521]], "ti": [["str", 0.6468735030701275], ["List[str]", 0.08747039714039165]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2830, 8], [2831, 59]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fail", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_retries_on_other_exceptions.<locals>.fail", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2829, 4], [2845, 45]], "fn_var_ln": {"task": [[2840, 8], [2840, 15]], "ti": [[2839, 8], [2839, 10]]}, "fn_var_occur": {"task": [["task", "PythonOperator", "task_id", "python_callable", "fail", "retries"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"], ["State", "UP_FOR_RETRY", "ti", "state"]]}, "name": "test_retries_on_other_exceptions", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.10879289606116356]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_retries_on_other_exceptions", "ret_exprs": [], "ret_type": "", "variables": {"task": "", "ti": ""}, "variables_p": {"task": [["Dict[str, Dict[str, int]]", 0.13195259896555875], ["Dict[str, str]", 0.10793100946559799], ["Dict[str, Any]", 0.10207546477705963], ["Dict[str, int]", 0.09628096388176742], ["Dict[int, Any]", 0.09471695591013192], ["Type[Dict[str, Any]]", 0.09209956990451677], ["bool", 0.09025620162880227], ["pytch.utils.Position", 0.08872940686169521]], "ti": [["str", 0.6575327753836312], ["List[str]", 0.08643098241940217]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2848, 8], [2849, 59]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "fail", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_stacktrace_on_failure_starts_with_task_execute_method.<locals>.fail", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2847, 4], [2866, 98]], "fn_var_ln": {"exc_info": [[2863, 8], [2863, 16]], "filename": [[2864, 8], [2864, 16]], "formatted_exc": [[2865, 8], [2865, 21]], "task": [[2858, 8], [2858, 15]], "ti": [[2857, 8], [2857, 10]]}, "fn_var_occur": {"exc_info": [["exc_info", "log", "error", "call_args", "kwargs"], ["filename", "exc_info", "tb_frame", "f_code", "co_filename"], ["formatted_exc", "format_exception", "exc_info"]], "filename": [["filename", "exc_info", "tb_frame", "f_code", "co_filename"], ["sys", "modules", "PythonOperator", "__module__", "__file__", "filename", "join", "formatted_exc"]], "formatted_exc": [["formatted_exc", "format_exception", "exc_info"], ["sys", "modules", "PythonOperator", "__module__", "__file__", "filename", "join", "formatted_exc"]], "task": [["task", "PythonOperator", "task_id", "python_callable", "fail", "retries"], ["ti", "task", "task"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "task", "task"], ["ti", "run"]]}, "name": "test_stacktrace_on_failure_starts_with_task_execute_method", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_stacktrace_on_failure_starts_with_task_execute_method", "ret_exprs": [], "ret_type": "", "variables": {"exc_info": "", "filename": "", "formatted_exc": "", "task": "", "ti": ""}, "variables_p": {"exc_info": [["str", 0.13091713342956435], ["raiden.settings.BlockBatchSizeConfig", 0.10112584718118034], ["Type[Sequence[Any]]", 0.08823665349642161], ["cmk.base.config.HostConfig", 0.0873359313320607], ["PyLibs.tensorflow.python.debug.cli.debugger_cli_common.RichTextLines", 0.08498893885778673]], "filename": [["str", 0.30693186137377093], ["List[str]", 0.2806706406759409], ["list", 0.11786167111934376], ["dict", 0.09957561664178588], ["Dict[Any, str]", 0.09935329807273269], ["src.pip_shims.models.ShimmedPathCollection", 0.09560691211642594]], "formatted_exc": [["str", 0.21293539045251628], ["Type[Dict[str, Any]]", 0.10197415219098013], ["List[str]", 0.09296851327912192], ["list", 0.08721242776390903]], "task": [["Dict[str, Dict[str, int]]", 0.13195259896555875], ["Dict[str, str]", 0.10793100946559799], ["Dict[str, Any]", 0.10207546477705963], ["Dict[str, int]", 0.09628096388176742], ["Dict[int, Any]", 0.09471695591013192], ["Type[Dict[str, Any]]", 0.09209956990451677], ["bool", 0.09025620162880227], ["pytch.utils.Position", 0.08872940686169521]], "ti": [["str", 0.5517901295128026], ["List[str]", 0.08935943781749334], ["datetime.date.time.timezone", 0.07972416014534958]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2868, 4], [2872, 110]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_env_var_check_callback", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance._env_var_check_callback", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2874, 4], [2892, 40]], "fn_var_ln": {"dr": [[2881, 8], [2881, 10]], "op": [[2880, 12], [2880, 14]], "session": [[2887, 8], [2887, 15]], "state": [[2886, 8], [2886, 16]], "ti": [[2885, 8], [2885, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "run_type", "DagRunType", "MANUAL", "external_trigger", "False"], ["ti", "TI", "task", "op", "run_id", "dr", "run_id"]], "op": [["op", "PythonOperator", "task_id", "python_callable", "self", "_env_var_check_callback"], ["ti", "TI", "task", "op", "run_id", "dr", "run_id"]], "session": [["session", "settings", "Session"], ["session", "merge", "ti"], ["session", "commit"]], "state": [["ti", "state", "State", "RUNNING"], ["ti", "state", "State", "SUCCESS"]], "ti": [["ti", "TI", "task", "op", "run_id", "dr", "run_id"], ["ti", "state", "State", "RUNNING"], ["session", "merge", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_echo_env_variables", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["dr", "dag_maker", "create_dagrun", "run_type", "DagRunType", "MANUAL", "external_trigger", "False"]], "self": [["op", "PythonOperator", "task_id", "python_callable", "self", "_env_var_check_callback"]]}, "params_p": {"args": [], "dag_maker": [["bool", 0.2831585359936578], ["int", 0.10185726571372235], ["str", 0.09447247105434596]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_echo_env_variables", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "op": "", "session": "", "state": "", "ti": ""}, "variables_p": {"dr": [["str", 0.405115732422375], ["Set[str]", 0.1351688649172215], ["Dict[str, Any]", 0.10465345446686583], ["Dict[str, Union[int, str]]", 0.09891817284160495], ["Tuple[int, int]", 0.08916808676081854], ["list", 0.08752189240033477]], "op": [["int", 0.17554144978499603], ["Pattern[Any]", 0.13036827108924828], ["str", 0.10966640511974036], ["List[str]", 0.09724024416372991], ["restful_functions.modules.task.TaskStore", 0.0907728682129726], ["dict", 0.07899665612747554], ["Dict[Any, int]", 0.0784169550527692]], "session": [["sqlalchemy.orm.session.Session", 0.3462481853668743], ["Optional[str]", 0.33357160475027725], ["kedro.framework.session.session.KedroSession", 0.10215055226126576], ["SMSShell.models.session.Session", 0.07127006790595576]], "state": [["str", 0.16614022144833834], ["Generator[Any, None, None]", 0.10565626038259482], ["Type[Dict[str, Any]]", 0.08394029931145731], ["int", 0.08127642996032079], ["Iterator[str]", 0.08016514786122955]], "ti": [["Dict[str, str]", 0.12973674434319143], ["zerver.models.Realm", 0.1255351890055308], ["golem.task.taskbase.AcceptClientVerdict", 0.12092421096349623], ["golem.task.taskstate.SubtaskState", 0.11306766785464054], ["restful_functions.modules.task.TaskStoreSettings", 0.07392446472694619]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2895, 4], [2938, 72]], "fn_var_ln": {"session": [[2903, 8], [2903, 15]], "ti": [[2896, 8], [2896, 10]]}, "fn_var_occur": {"session": [["session", "settings", "Session"], ["session", "merge", "ti"], ["session", "commit"]], "ti": [["ti", "create_task_instance", "dag_id", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "state", "State", "RUNNING"], ["session", "merge", "ti"], ["ti", "_run_raw_task"], ["ti", "refresh_from_db"], ["stats_mock", "assert_any_call", "ti", "dag_id", "ti", "task_id", "ti", "state", "tags", "ti", "dag_id", "ti", "task_id"], ["stats_mock", "assert_any_call", "tags", "ti", "dag_id", "ti", "task_id", "ti", "state"], ["call", "ti", "dag_id", "ti", "task_id", "state", "count", "tags", "ti", "dag_id", "ti", "task_id", "stats_mock", "mock_calls"], ["call", "count", "tags", "ti", "dag_id", "ti", "task_id", "str", "state", "stats_mock", "mock_calls"], ["call", "ti", "dag_id", "ti", "task_id", "tags", "ti", "dag_id", "ti", "task_id", "stats_mock", "mock_calls"], ["call", "tags", "ti", "dag_id", "ti", "task_id", "stats_mock", "mock_calls"]]}, "name": "test_task_stats", "params": {"create_task_instance": "", "self": "", "stats_mock": ""}, "params_descr": {"create_task_instance": "", "self": "", "stats_mock": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "end_date", "timezone", "utcnow", "datetime", "timedelta", "days", "state", "State", "RUNNING"]], "self": [], "stats_mock": [["stats_mock", "reset_mock"], ["stats_mock", "assert_any_call", "ti", "dag_id", "ti", "task_id", "ti", "state", "tags", "ti", "dag_id", "ti", "task_id"], ["stats_mock", "assert_any_call", "tags", "ti", "dag_id", "ti", "task_id", "ti", "state"], ["call", "ti", "dag_id", "ti", "task_id", "state", "count", "tags", "ti", "dag_id", "ti", "task_id", "stats_mock", "mock_calls"], ["call", "count", "tags", "ti", "dag_id", "ti", "task_id", "str", "state", "stats_mock", "mock_calls"], ["call", "ti", "dag_id", "ti", "task_id", "tags", "ti", "dag_id", "ti", "task_id", "stats_mock", "mock_calls"], ["call", "tags", "ti", "dag_id", "ti", "task_id", "stats_mock", "mock_calls"], ["stats_mock", "call_count", "len", "State", "task_states"]]}, "params_p": {"args": [], "create_task_instance": [["Iterator[Tuple[hermes.types.UserType, hermes.types.EmailAddressType]]", 0.11098926692305494], ["str", 0.09931753250280018], ["server.models.bike.Bike", 0.09566937014337676], ["models.User", 0.08890808206472715]], "kwargs": [], "self": [], "stats_mock": []}, "q_name": "TestTaskInstance.test_task_stats", "ret_exprs": [], "ret_type": "", "variables": {"session": "", "ti": ""}, "variables_p": {"session": [["sqlalchemy.orm.session.Session", 0.3462481853668743], ["Optional[str]", 0.33357160475027725], ["kedro.framework.session.session.KedroSession", 0.10215055226126576], ["SMSShell.models.session.Session", 0.07127006790595576]], "ti": [["grpy.core.models.Grouping", 0.2558793656598486], ["str", 0.19198644239180435], ["Dict[str, Any]", 0.17112157730257516], ["Set[str]", 0.12153528351839939], ["byceps.services.user.models.detail.UserDetail", 0.09098675833575308], ["Optional[hpaction.models.HPActionDocuments]", 0.08465031911570733], ["byceps.services.party.transfer.models.Party", 0.08384025367591195]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2940, 4], [2952, 9]], "fn_var_ln": {"ti": [[2941, 8], [2941, 10]]}, "fn_var_occur": {"ti": [["ti", "create_task_instance"], ["ti", "task", "dag", "fileloc", "os", "path", "join", "TEST_DAGS_FOLDER"], ["ti", "command_as_list", "ti", "dag_id", "ti", "task_id", "ti", "run_id"]]}, "name": "test_command_as_list", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_command_as_list", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["str", 0.8922422854488506], ["pathlib.Path", 0.1077577145511495]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2954, 4], [2959, 49]], "fn_var_ln": {"assert_command": [[2957, 8], [2957, 22]], "dag_id": [[2955, 8], [2955, 14]], "generate_command": [[2958, 8], [2958, 24]], "task_id": [[2956, 8], [2956, 15]]}, "fn_var_occur": {"assert_command": [["assert_command", "dag_id", "task_id"], ["assert_command", "generate_command"]], "dag_id": [["assert_command", "dag_id", "task_id"], ["generate_command", "TI", "generate_command", "dag_id", "dag_id", "task_id", "task_id", "run_id"]], "generate_command": [["generate_command", "TI", "generate_command", "dag_id", "dag_id", "task_id", "task_id", "run_id"], ["assert_command", "generate_command"]], "task_id": [["assert_command", "dag_id", "task_id"], ["generate_command", "TI", "generate_command", "dag_id", "dag_id", "task_id", "task_id", "run_id"]]}, "name": "test_generate_command_default_param", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_generate_command_default_param", "ret_exprs": [], "ret_type": "", "variables": {"assert_command": "", "dag_id": "", "generate_command": "", "task_id": ""}, "variables_p": {"assert_command": [["list", 0.28924812183857584], ["Dict[str, str]", 0.10985948496173888], ["dict", 0.101847845997127], ["Dict[str, Union[Any, Any, Any, Any, Any, Any]]", 0.09514998183459802], ["str", 0.08172421059665912]], "dag_id": [["str", 0.44584028720091773], ["int", 0.17852382127606198], ["cmk.utils.type_defs.UserId", 0.09560692830458317], ["taxonomy.db.models.base.EnumField", 0.08198091765471525]], "generate_command": [["list", 0.2255871771212509], ["Dict[str, str]", 0.10222415765845787], ["dict", 0.10038444350868646], ["List[Tuple[Any, Any]]", 0.09935362335715395], ["pathlib.Path", 0.0957670040737767], ["Tuple[Any, Any, Any, Any]", 0.09549156722514382], ["Dict[str, Optional[str]]", 0.09319427228645684], ["Tuple[Any, Any]", 0.09251422917683792]], "task_id": [["str", 0.6321338282381967], ["taxonomy.db.models.base.EnumField", 0.09822669505148647], ["int", 0.08968487906837921]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2961, 4], [2978, 49]], "fn_var_ln": {"assert_command": [[2964, 8], [2964, 22]], "dag_id": [[2962, 8], [2962, 14]], "generate_command": [[2975, 8], [2975, 24]], "task_id": [[2963, 8], [2963, 15]]}, "fn_var_occur": {"assert_command": [["assert_command", "dag_id", "task_id"], ["assert_command", "generate_command"]], "dag_id": [["assert_command", "dag_id", "task_id"], ["generate_command", "TI", "generate_command", "dag_id", "dag_id", "task_id", "task_id", "run_id", "mark_success", "True", "map_index"]], "generate_command": [["generate_command", "TI", "generate_command", "dag_id", "dag_id", "task_id", "task_id", "run_id", "mark_success", "True", "map_index"], ["assert_command", "generate_command"]], "task_id": [["assert_command", "dag_id", "task_id"], ["generate_command", "TI", "generate_command", "dag_id", "dag_id", "task_id", "task_id", "run_id", "mark_success", "True", "map_index"]]}, "name": "test_generate_command_specific_param", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_generate_command_specific_param", "ret_exprs": [], "ret_type": "", "variables": {"assert_command": "", "dag_id": "", "generate_command": "", "task_id": ""}, "variables_p": {"assert_command": [["list", 0.28924812183857584], ["Dict[str, str]", 0.10985948496173888], ["dict", 0.101847845997127], ["Dict[str, Union[Any, Any, Any, Any, Any, Any]]", 0.09514998183459802], ["str", 0.08172421059665912]], "dag_id": [["str", 0.7290485384883777], ["int", 0.18591126116453618], ["bool", 0.08504020034708613]], "generate_command": [["str", 0.5276779684521584], ["pathlib.Path", 0.1113092743290329], ["Dict[str, Optional[str]]", 0.09209544741530432], ["TextIO", 0.08814464161384229], ["int", 0.0877530609257198]], "task_id": [["str", 0.8005998520606379], ["int", 0.11054524633247587], ["bool", 0.0888549016068862]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[2981, 4], [3001, 62]], "fn_var_ln": {"fileloc": [[2984, 8], [2984, 19]], "new_task": [[2992, 8], [2992, 16]], "new_ti": [[2994, 8], [2994, 14]], "task": [[2986, 8], [2986, 15]], "ti": [[2985, 8], [2985, 10]]}, "fn_var_occur": {"fileloc": [["dag", "fileloc", "TEST_DAGS_FOLDER"]], "new_task": [["new_task", "BashOperator", "task_id", "bash_command", "dag", "dag"], ["new_ti", "TI", "task", "new_task", "run_id", "ti", "run_id"]], "new_ti": [["new_ti", "TI", "task", "new_task", "run_id", "ti", "run_id"], ["new_ti", "get_rendered_template_fields", "session", "session"]], "task": [["task", "BashOperator", "task_id", "bash_command"], ["ti", "task", "task"], ["new_ti", "TI", "task", "new_task", "run_id", "ti", "run_id"], ["ti", "task", "bash_command"]], "ti": [["ti", "dag_maker", "create_dagrun", "task_instances"], ["ti", "task", "task"], ["session", "add", "RenderedTaskInstanceFields", "ti"], ["new_ti", "TI", "task", "new_task", "run_id", "ti", "run_id"], ["ti", "task", "bash_command"]]}, "name": "test_get_rendered_template_fields", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "session", "session", "dag"], ["ti", "dag_maker", "create_dagrun", "task_instances"]], "self": [], "session": [["dag_maker", "session", "session", "dag"], ["session", "add", "RenderedTaskInstanceFields", "ti"], ["session", "flush"], ["new_ti", "get_rendered_template_fields", "session", "session"], ["create_session", "session"], ["session", "query", "RenderedTaskInstanceFields", "delete"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.37600272010532426], ["app.models.user.User.InDB", 0.20896362588289885], ["Optional[core.models.User]", 0.10422054691756112], ["zerver.models.UserProfile", 0.07603792207995679], ["app.models.User", 0.0730333513021416]], "kwargs": [], "self": [], "session": [["sqlalchemy.orm.session.Session", 0.17869554538623478]]}, "q_name": "TestTaskInstance.test_get_rendered_template_fields", "ret_exprs": [], "ret_type": "", "variables": {"fileloc": "", "new_task": "", "new_ti": "", "task": "", "ti": ""}, "variables_p": {"fileloc": [["int", 0.9999999998136573], ["raiden.tests.utils.factories.MediatorTransfersPair", 9.933129497848184e-11], ["Tuple[List[str]]", 2.4658241689913823e-11], ["List[int]", 2.1243409504451462e-11], ["list", 2.1243409504451462e-11], ["tests.utils.fake_training_loop.FakeTraining", 1.9866258995696367e-11]], "new_task": [["apps.core.task.coretaskstate.TaskDefinition", 0.17165442020526459], ["reminders.task.Task", 0.1105445322329229], ["KeysView[str]", 0.09159473237990594]], "new_ti": [["khetha.models.Task", 0.22137706386038566], ["magic.models.card.Card", 0.10423532981757172], ["list", 0.10090288088035337], ["grpy.core.models.Grouping", 0.09602064055413514], ["str", 0.08461543300727663], ["ajapaik.ajapaik.models.Album", 0.08418894190417012]], "task": [["apps.rendering.task.renderingtaskstate.RenderingTaskDefinition", 0.24490044906982675], ["apps.core.task.coretaskstate.TaskDefinition", 0.19119491017178408], ["reminders.task.Task", 0.11571885731261815]], "ti": [["Tuple[Any, Any]", 0.10796491566688324], ["list", 0.10226474932931356]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3005, 4], [3054, 59]], "fn_var_ln": {"expected_pod_spec": [[3013, 8], [3013, 25]], "ti": [[3006, 8], [3006, 10]]}, "fn_var_occur": {"expected_pod_spec": [["expected_pod_spec", "version", "mock", "ANY", "__file__"], ["ti", "render_k8s_pod_yaml", "expected_pod_spec"]], "ti": [["ti", "create_task_instance", "dag_id", "run_id", "task_id", "execution_date", "DEFAULT_DATE"], ["ti", "render_k8s_pod_yaml", "expected_pod_spec"]]}, "name": "test_render_k8s_pod_yaml", "params": {"create_task_instance": "", "pod_mutation_hook": "", "self": ""}, "params_descr": {"create_task_instance": "", "pod_mutation_hook": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "dag_id", "run_id", "task_id", "execution_date", "DEFAULT_DATE"]], "pod_mutation_hook": [["pod_mutation_hook", "assert_called_once_with", "mock", "ANY"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "pod_mutation_hook": [], "self": []}, "q_name": "TestTaskInstance.test_render_k8s_pod_yaml", "ret_exprs": [], "ret_type": "", "variables": {"expected_pod_spec": "", "ti": ""}, "variables_p": {"expected_pod_spec": [["list", 0.20292982149633068], ["Dict[str, Any]", 0.10237336898145306], ["nevergrad.benchmark.utils.Selector", 0.08815153446525363], ["int", 0.08754723160591908], ["float", 0.08305588061561482]], "ti": [["Optional[magic.models.deck.Deck]", 0.2159111823294406], ["List[str]", 0.21376354389032615], ["str", 0.16716427542287904], ["notifications.models.Notification", 0.07764786149019602]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3058, 4], [3081, 52]], "fn_var_ln": {"fake_spec": [[3064, 8], [3064, 17]], "patcher": [[3062, 8], [3062, 15]], "return_value": [[3077, 12], [3077, 44]], "session": [[3066, 8], [3066, 15]], "ti": [[3060, 8], [3060, 10]]}, "fn_var_occur": {"fake_spec": [["rtif_get_k8s_pod_yaml", "return_value", "fake_spec"], ["ti", "get_rendered_k8s_spec", "session", "fake_spec"], ["render_k8s_pod_yaml", "return_value", "fake_spec"], ["ti", "get_rendered_k8s_spec", "session", "fake_spec"]], "patcher": [["patcher", "mock", "patch", "object", "ti", "autospec", "True"], ["patcher", "render_k8s_pod_yaml"]], "return_value": [["rtif_get_k8s_pod_yaml", "return_value", "fake_spec"], ["rtif_get_k8s_pod_yaml", "return_value", "None"], ["render_k8s_pod_yaml", "return_value", "fake_spec"]], "session": [["session", "mock", "Mock"], ["ti", "get_rendered_k8s_spec", "session", "fake_spec"], ["rtif_get_k8s_pod_yaml", "assert_called_once_with", "ti", "session", "session"], ["ti", "get_rendered_k8s_spec", "session", "fake_spec"]], "ti": [["ti", "create_task_instance"], ["patcher", "mock", "patch", "object", "ti", "autospec", "True"], ["ti", "get_rendered_k8s_spec", "session", "fake_spec"], ["rtif_get_k8s_pod_yaml", "assert_called_once_with", "ti", "session", "session"], ["ti", "get_rendered_k8s_spec", "session", "fake_spec"]]}, "name": "test_get_rendered_k8s_spec", "params": {"create_task_instance": "", "rtif_get_k8s_pod_yaml": "", "self": ""}, "params_descr": {"create_task_instance": "", "rtif_get_k8s_pod_yaml": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "rtif_get_k8s_pod_yaml": [["rtif_get_k8s_pod_yaml", "return_value", "fake_spec"], ["rtif_get_k8s_pod_yaml", "assert_called_once_with", "ti", "session", "session"], ["rtif_get_k8s_pod_yaml", "return_value", "None"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["models.Telegram_Chat", 0.14905623990304578], ["sqlalchemy.orm.session.Session", 0.10994067378385483], ["bool", 0.10509068132012495], ["raiden.utils.NetworkTimeout", 0.09284433013400477], ["server.models.User", 0.08988910102210505], ["server.models.bike.Bike", 0.08576094794080097]], "kwargs": [], "rtif_get_k8s_pod_yaml": [["Optional[tests.factories.granary.Account]", 0.11260927283848922], ["megatron.models.PlatformUser", 0.11152612308429924], ["zerver.models.UserProfile", 0.09791260673578675], ["salon.models.Stylist", 0.09656456495564697], ["cmk.gui.config.LoggedInUser", 0.0955206757678333], ["Optional[Dict[str, str]]", 0.08830692387467588]], "self": []}, "q_name": "TestTaskInstance.test_get_rendered_k8s_spec", "ret_exprs": [], "ret_type": "", "variables": {"fake_spec": "", "patcher": "", "return_value": "", "session": "", "ti": ""}, "variables_p": {"fake_spec": [["Optional[excars.models.profiles.Profile]", 0.12743964115229028], ["backend.api.models.group.Group", 0.08020312351065222], ["Optional[server.models.pickup_poinPickupPoint]", 0.07600805772414469], ["Optional[excars.models.rides.Ride]", 0.07280539792119943], ["grpy.core.models.Grouping", 0.07265858656306379]], "patcher": [["str", 0.2573197732623955], ["Dict[int, Dict[str, Any]]", 0.15193281416714188], ["List[bool]", 0.07449314406856249]], "return_value": [["Optional[alerta.models.user.User]", 0.36761644560258133], ["Optional[pxl.state.Album]", 0.09337274114686014]], "session": [["mock.Mock", 0.6727652304147226]], "ti": [["List[str]", 0.17805649639725246], ["str", 0.13069832585278646], ["Dict[str, List[str]]", 0.12889730682457082], ["list", 0.08882274722665426], ["int", 0.08189365637672544]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3083, 4], [3093, 30]], "fn_var_ln": {"start_date": [[3087, 8], [3087, 21]], "ti": [[3084, 8], [3084, 10]]}, "fn_var_occur": {"start_date": [["start_date", "timezone", "utcnow"], ["ti", "start_date", "start_date"], ["ti", "start_date", "start_date"], ["ti", "start_date", "ti", "end_date"]], "ti": [["ti", "create_task_instance", "state", "State", "RUNNING"], ["ti", "start_date", "start_date"], ["ti", "set_state", "State", "UP_FOR_RETRY"], ["ti", "state", "State", "UP_FOR_RETRY"], ["ti", "start_date", "start_date"], ["ti", "start_date", "ti", "end_date"], ["ti", "duration"]]}, "name": "test_set_state_up_for_retry", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "state", "State", "RUNNING"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["core.models.MyUser", 0.188070364436546], ["tests.setup.SetupTest", 0.0990976949824247], ["tests.test_util.aiohttp.AiohttpClientMocker", 0.09725077054529994]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_set_state_up_for_retry", "ret_exprs": [], "ret_type": "", "variables": {"start_date": "", "ti": ""}, "variables_p": {"start_date": [["datetime.date", 0.582241725204622], ["Type[leasing.models.vaVat]", 0.1619522129327907], ["datetime.datetime", 0.08799674208926324], ["datetime.date.time.date", 0.08416196007755919], ["int", 0.08364735969576499]], "ti": [["int", 0.21963642172502112], ["list", 0.15158884359936392], ["Optional[cmk.gui.plugins.userdb.utils.UserConnector]", 0.09081190297690765], ["byceps.services.party.transfer.models.Party", 0.08548440116227142], ["Type[List[Any]]", 0.08523617640251213]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3095, 4], [3153, 105]], "fn_var_ln": {"dag_id": [[3145, 8], [3145, 24]], "expected_keys": [[3130, 8], [3130, 21]], "expected_values": [[3098, 8], [3098, 23]], "mock_task": [[3143, 8], [3143, 17]], "run_date": [[3096, 8], [3096, 16]], "task_id": [[3144, 8], [3144, 25]], "ti": [[3147, 8], [3147, 10]]}, "fn_var_occur": {"dag_id": [["ti", "create_task_instance", "task_id", "expected_values", "dag_id", "expected_values"], ["mock_task", "dag_id", "expected_values"]], "expected_keys": [["expected_keys", "key", "lstrip", "key", "expected_values"], ["str", "c", "c", "TI", "__table__", "columns", "expected_keys"]], "expected_values": [["expected_values", "run_date", "datetime", "timedelta", "days", "run_date", "datetime", "timedelta", "days", "seconds", "milliseconds", "State", "SUCCESS", "run_date", "datetime", "timedelta", "hours", "None", "None", "None", "None", "None"], ["expected_keys", "key", "lstrip", "key", "expected_values"], ["ti", "create_task_instance", "task_id", "expected_values", "dag_id", "expected_values"], ["expected_values", "items"], ["mock_task", "task_id", "expected_values"], ["mock_task", "dag_id", "expected_values"], ["expected_values", "items"]], "mock_task": [["mock_task", "mock", "MagicMock"], ["mock_task", "task_id", "expected_values"], ["mock_task", "dag_id", "expected_values"], ["ti", "TI", "task", "mock_task", "run_id"]], "run_date": [["run_date", "timezone", "utcnow"], ["expected_values", "run_date", "datetime", "timedelta", "days", "run_date", "datetime", "timedelta", "days", "seconds", "milliseconds", "State", "SUCCESS", "run_date", "datetime", "timedelta", "hours", "None", "None", "None", "None", "None"]], "task_id": [["ti", "create_task_instance", "task_id", "expected_values", "dag_id", "expected_values"], ["mock_task", "task_id", "expected_values"]], "ti": [["ti", "create_task_instance", "task_id", "expected_values", "dag_id", "expected_values"], ["setattr", "ti", "key", "expected_value"], ["session", "merge", "ti"], ["ti", "TI", "task", "mock_task", "run_id"], ["ti", "refresh_from_db"], ["hasattr", "ti", "key", "key"], ["getattr", "ti", "key", "expected_value", "key"]]}, "name": "test_refresh_from_db", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance", "task_id", "expected_values", "dag_id", "expected_values"]], "self": []}, "params_p": {"args": [], "create_task_instance": [["mock.MagicMock", 0.07985590176381613]], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_refresh_from_db", "ret_exprs": [], "ret_type": "", "variables": {"dag_id": "", "expected_keys": "", "expected_values": "", "mock_task": "", "run_date": "", "task_id": "", "ti": ""}, "variables_p": {"dag_id": [["uuid.UUID", 0.32798214803597203], ["int", 0.16862425447175386], ["str", 0.11907139445869114]], "expected_keys": [["dict", 0.14565437020105837], ["set", 0.08620852844291642], ["Type[Tuple[str, Any]]", 0.07958313080612701], ["List[str]", 0.07806209462771871]], "expected_values": [["datetime.datetime", 0.4674889941999503], ["datetime.datetime.datetime", 0.29958935828012967], ["datetime.date.time.timedelta", 0.1394148736125055], ["datetime.datetime.timedelta", 0.09350677390741463]], "mock_task": [], "run_date": [["datetime.date", 0.542099636628062], ["datetime.datetime", 0.2013478484831403], ["datetime.date.time.date", 0.0901176458961649], ["datetime.datetime.timedelta", 0.07782794954432304]], "task_id": [["uuid.UUID", 0.25159362494924586], ["str", 0.1027567558079875], ["int", 0.0890168071199208]], "ti": [["golem.task.taskbase.AcceptClientVerdict", 0.1005303860109648], ["Dict[str, dict]", 0.09852306413841184], ["dict", 0.09242130240307805]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3155, 4], [3169, 59]], "fn_var_ln": {"deserialized_op": [[3164, 8], [3164, 23]], "ser_ti": [[3167, 8], [3167, 14]], "serialized_op": [[3163, 8], [3163, 21]], "ti": [[3156, 8], [3156, 10]]}, "fn_var_occur": {"deserialized_op": [["deserialized_op", "SerializedBaseOperator", "deserialize_operator", "serialized_op"], ["deserialized_op", "task_type"], ["ser_ti", "TI", "task", "deserialized_op", "run_id", "None"]], "ser_ti": [["ser_ti", "TI", "task", "deserialized_op", "run_id", "None"], ["ser_ti", "operator"], ["ser_ti", "task", "operator_name"]], "serialized_op": [["serialized_op", "SerializedBaseOperator", "serialize_operator", "ti", "task"], ["deserialized_op", "SerializedBaseOperator", "deserialize_operator", "serialized_op"]], "ti": [["ti", "create_task_instance"], ["ti", "task", "task_type"], ["ti", "task", "operator_name"], ["ti", "operator"], ["serialized_op", "SerializedBaseOperator", "serialize_operator", "ti", "task"]]}, "name": "test_operator_field_with_serialization", "params": {"create_task_instance": "", "self": ""}, "params_descr": {"create_task_instance": "", "self": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": []}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstance.test_operator_field_with_serialization", "ret_exprs": [], "ret_type": "", "variables": {"deserialized_op": "", "ser_ti": "", "serialized_op": "", "ti": ""}, "variables_p": {"deserialized_op": [["str", 0.3002561665591351], ["int", 0.2567079937111756], ["Dict[Union[Any, Any], str]", 0.1402652197661981], ["Tuple[str, str]", 0.1177607334245867], ["raiden.utils.Any", 0.10391883350471386], ["Pattern[str]", 0.08109105303419065]], "ser_ti": [["dict", 0.22355061974413032], ["golem.task.taskrequestorstats.AggregateTaskStats", 0.15117486541473554], ["Dict[str, Any]", 0.1033557056490229], ["list", 0.09611257552059622], ["Dict[str, str]", 0.09077127624184851], ["bool", 0.08086893965967829], ["Dict[str, Union[Any, Any, str]]", 0.07967735103535452]], "serialized_op": [["int", 0.3202578038810182], ["str", 0.22523896911818853], ["Dict[Union[Any, Any], str]", 0.0950786884720299], ["list", 0.09280225780765894], ["Dict[str, Dict[str, str]]", 0.0896124146411022]], "ti": [["str", 0.3224028348378075], ["zerver.models.Realm", 0.12130440684016562], ["geode.models.common.Address", 0.10818308278293771], ["Dict[int, str]", 0.09785313931945464], ["List[str]", 0.07831148743353275]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3171, 4], [3193, 95]], "fn_var_ln": {"filter_kwargs": [[3185, 8], [3185, 21]], "note": [[3174, 8], [3174, 15]], "tables": [[3172, 8], [3172, 14]], "ti": [[3173, 8], [3173, 10]], "ti_note": [[3186, 8], [3186, 15]]}, "fn_var_occur": {"filter_kwargs": [["filter_kwargs", "dict", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index"], ["ti_note", "session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one"], ["session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one_or_none", "None"]], "note": [["ti", "note"]], "tables": [["tables", "TaskFail", "RenderedTaskInstanceFields", "XCom"]], "ti": [["ti", "create_task_instance"], ["ti", "note"], ["session", "merge", "ti"], ["session", "add", "table", "ti"], ["XCom", "set", "key", "value", "task_id", "ti", "task_id", "dag_id", "ti", "dag_id", "run_id", "ti", "run_id"], ["filter_kwargs", "dict", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index"], ["ti", "clear_db_references", "session"]], "ti_note": [["ti_note", "session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one"], ["ti_note", "content"]]}, "name": "test_clear_db_references", "params": {"create_task_instance": "", "self": "", "session": ""}, "params_descr": {"create_task_instance": "", "self": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "create_task_instance"]], "self": [], "session": [["session", "merge", "ti"], ["session", "commit"], ["session", "add", "table", "ti"], ["session", "commit"], ["session", "query", "table", "count"], ["ti_note", "session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one"], ["ti", "clear_db_references", "session"], ["session", "query", "table", "count"], ["session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one_or_none", "None"]]}, "params_p": {"args": [], "create_task_instance": [], "kwargs": [], "self": [], "session": [["zerver.models.UserProfile", 0.10029767623517825], ["core.models.Recipe", 0.09998657539557164], ["abilian.core.models.subjects.User", 0.09612888521094852], ["app.models.User", 0.09476805393918913]]}, "q_name": "TestTaskInstance.test_clear_db_references", "ret_exprs": [], "ret_type": "", "variables": {"filter_kwargs": "", "note": "", "tables": "", "ti": "", "ti_note": ""}, "variables_p": {"filter_kwargs": [["Dict[str, str]", 0.25527904806055524], ["List[str]", 0.2161727362712108], ["Dict[int, str]", 0.17886560908124488], ["Optional[str]", 0.10206213314309859], ["str", 0.0849682715419194], ["Dict[str, Union[dict, Any]]", 0.08182118493362626], ["Dict[Any, str]", 0.08083101696834491]], "note": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "tables": [["str", 0.31751724040584], ["Dict[str, int]", 0.09452256315828861]], "ti": [["str", 0.39678221923399865], ["Dict[str, str]", 0.10586855288711104], ["Dict[str, Dict[str, int]]", 0.10203019163580158], ["Dict[str, Any]", 0.10172589244700739], ["List[Union[Any, Any, Any, Any]]", 0.10012900445435946]], "ti_note": [["zerver.models.Realm", 0.23084261046521512], ["golem.rpc.session.WebSocketAddress", 0.10426159669108137], ["grpy.core.models.Grouping", 0.09924152017153584], ["str", 0.08948678211543787], ["zerver.models.Stream", 0.08527696420326936]]}}], "name": "TestTaskInstance", "q_name": "TestTaskInstance", "variables": {"_prev_dates_param_list": ""}, "variables_p": {"_prev_dates_param_list": [["Optional[int]", 0.2795380330901688], ["int", 0.18225718258227508], ["Dict[int, int]", 0.12238574091515518], ["Type[Dict[Any, Any]]", 0.08248973167968605], ["str", 0.08180776186562083], ["Type[track.tests.factories.RecordFactory]", 0.07883750716178267], ["datetime.datetime", 0.07883750716178267]]}}, {"cls_lc": [[3232, 0], [3251, 21]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3239, 4], [3245, 30]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_clean", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestRunRawTaskQueriesCount._clean", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3247, 4], [3248, 21]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_clean"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestRunRawTaskQueriesCount.setup_method", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3250, 4], [3251, 21]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_clean"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestRunRawTaskQueriesCount.teardown_method", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}], "name": "TestRunRawTaskQueriesCount", "q_name": "TestRunRawTaskQueriesCount", "variables": {}, "variables_p": {}}, {"cls_lc": [[3598, 8], [3600, 45]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3599, 12], [3600, 45]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "execute", "params": {"context": "", "self": ""}, "params_descr": {"context": "", "self": ""}, "params_occur": {"context": [], "self": [["self", "arg1", "self", "arg2"]]}, "params_p": {"args": [], "context": [["int", 0.19999999999999998], ["str", 0.19999999999999998], ["Iterable['Context']", 0.09999999999999999], ["dict", 0.09999999999999999], ["bool", 0.09999999999999999]], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_override_partial.<locals>.ClassicOperator.execute", "ret_exprs": ["return (self.arg1, self.arg2)"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}], "name": "ClassicOperator", "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_override_partial.<locals>.ClassicOperator", "variables": {}, "variables_p": {}}, {"cls_lc": [[3331, 0], [3752, 47]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "Ensure we start fresh.", "long_descr": null, "ret": null}, "fn_lc": [[3334, 4], [3337, 43]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "setup_class", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.setup_class", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3345, 12], [3346, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_something", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_leaf.<locals>.push_something", "ret_exprs": ["return xcom_value"], "ret_type": "", "ret_type_p": [["str", 0.3809469648085811], ["int", 0.23059562124520283], ["Callable[[Mapping], T]", 0.09679852941586954], ["List[int]", 0.09430148677864111]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Return value should not be recorded if there are no downstreams.", "long_descr": null, "ret": null}, "fn_lc": [[3340, 4], [3353, 60]], "fn_var_ln": {"ti": [[3350, 8], [3350, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"]]}, "name": "test_not_recorded_if_leaf", "params": {"dag_maker": "", "self": "", "xcom_value": ""}, "params_descr": {"dag_maker": "", "self": "", "xcom_value": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "self": [], "xcom_value": []}, "params_p": {"args": [], "dag_maker": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.1151678155928419]], "kwargs": [], "self": [], "xcom_value": [["tests.async_mock.MagicMock", 0.10082746956892803]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_leaf", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3361, 12], [3362, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_something", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_not_used.<locals>.push_something", "ret_exprs": ["return xcom_value"], "ret_type": "", "ret_type_p": [["str", 0.3809469648085811], ["int", 0.23059562124520283], ["Callable[[Mapping], T]", 0.09679852941586954], ["List[int]", 0.09430148677864111]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3365, 12], [3366, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "completely_different", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_not_used.<locals>.completely_different", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Return value should not be recorded if no downstreams are mapped.", "long_descr": null, "ret": null}, "fn_lc": [[3356, 4], [3373, 60]], "fn_var_ln": {"ti": [[3370, 8], [3370, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"]]}, "name": "test_not_recorded_if_not_used", "params": {"dag_maker": "", "self": "", "xcom_value": ""}, "params_descr": {"dag_maker": "", "self": "", "xcom_value": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "self": [], "xcom_value": []}, "params_p": {"args": [], "dag_maker": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.12810038566274012], ["raiden.utils.PrivateKey", 0.09513492270334988]], "kwargs": [], "self": [], "xcom_value": [["tests.async_mock.MagicMock", 0.25677674913205834]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_not_used", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": []}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3382, 12], [3383, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_1", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant.<locals>.push_1", "ret_exprs": ["return xcom_1"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3386, 12], [3387, 31]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_2", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant.<locals>.push_2", "ret_exprs": ["return [-1, -2]"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3390, 12], [3391, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_3", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant.<locals>.push_3", "ret_exprs": ["return [\"x\", \"y\"]"], "ret_type": "", "ret_type_p": [["str", 0.20762776128935173], ["utils.Node", 0.08667559365590614]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3394, 12], [3395, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_4", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant.<locals>.push_4", "ret_exprs": ["return xcom_4"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3398, 12], [3399, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "show", "params": {"arg1": "", "arg2": ""}, "params_descr": {"arg1": "", "arg2": ""}, "params_occur": {"arg1": [["print", "arg1", "arg2"]], "arg2": [["print", "arg1", "arg2"]]}, "params_p": {"arg1": [["str", 0.6000192544545921], ["Optional[pathlib.Path]", 0.09997111831811167], ["pathlib.Path", 0.09997111831811167], ["int", 0.09997111831811167]], "arg2": [["str", 0.6000192544545921], ["Optional[pathlib.Path]", 0.09997111831811167], ["pathlib.Path", 0.09997111831811167], ["int", 0.09997111831811167]], "args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant.<locals>.show", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3402, 12], [3403, 43]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "tg", "params": {"arg": ""}, "params_descr": {"arg": ""}, "params_occur": {"arg": [["show", "arg1", "task_3", "arg2", "arg"]]}, "params_p": {"arg": [["int", 0.42924204049323533], ["List[float]", 0.1254776020764784], ["str", 0.09863356869747211]], "args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant.<locals>.tg", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Return value should only be recorded if a mapped downstream uses the it.", "long_descr": null, "ret": null}, "fn_lc": [[3377, 4], [3421, 60]], "fn_var_ln": {"task_3": [[3405, 12], [3405, 18]], "tis": [[3409, 8], [3409, 11]]}, "fn_var_occur": {"task_3": [["task_3", "push_3"]], "tis": [["tis", "ti", "task_id", "ti", "ti", "dag_maker", "create_dagrun", "task_instances"], ["tis", "run"], ["tis", "run"], ["tis", "run"], ["tis", "run"]]}, "name": "test_not_recorded_if_irrelevant", "params": {"dag_maker": "", "self": "", "xcom_1": "", "xcom_4": ""}, "params_descr": {"dag_maker": "", "self": "", "xcom_1": "", "xcom_4": ""}, "params_occur": {"dag_maker": [["tis", "ti", "task_id", "ti", "ti", "dag_maker", "create_dagrun", "task_instances"], ["dag_maker", "session", "query", "TaskMap", "count"], ["dag_maker", "session", "query", "TaskMap", "count"], ["dag_maker", "session", "query", "TaskMap", "count"], ["dag_maker", "session", "query", "TaskMap", "count"]], "self": [], "xcom_1": [], "xcom_4": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": [], "xcom_1": [["tests.basilisp.helpers.CompileFn", 0.2], ["str", 0.2], ["tests.async_mock.MagicMock", 0.1], ["tests.async_mock.Mock", 0.1], ["Mapping[str, Any]", 0.1]], "xcom_4": [["tests.basilisp.helpers.CompileFn", 0.2], ["str", 0.2], ["tests.async_mock.MagicMock", 0.1], ["tests.async_mock.Mock", 0.1], ["Mapping[str, Any]", 0.1]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_not_recorded_if_irrelevant", "ret_exprs": [], "ret_type": "", "variables": {"task_3": "", "tis": ""}, "variables_p": {"task_3": [["str", 0.49931840579826064], ["dict", 0.29440772649687985], ["bytes", 0.10722916660358038], ["List[str]", 0.09904470110127891]], "tis": [["dict", 0.23252261993999712], ["List[tuple]", 0.07704272487391789]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3435, 12], [3436, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_something", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_error_if_unmappable_type.<locals>.push_something", "ret_exprs": ["return return_value"], "ret_type": "", "ret_type_p": [["float", 0.5014281674021597], ["Optional[Callable[[str], bool]]", 0.1030664479276499], ["datetime.datetime", 0.09635527045384133]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3439, 12], [3440, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull_something", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["print", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "value": [["str", 0.5552156078218334], ["dict", 0.15579843122747983], ["float", 0.10723552956606389], ["int", 0.08129997011636016]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_error_if_unmappable_type.<locals>.pull_something", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "If an unmappable return value is used for expand(), fail the task that pushed the XCom.", "long_descr": null, "ret": null}, "fn_lc": [[3430, 4], [3450, 46]], "fn_var_ln": {"ti": [[3444, 8], [3444, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_expand_error_if_unmappable_type", "params": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_descr": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "error_message": [["str", "ctx", "value", "error_message"]], "exception_type": [["pytest", "raises", "exception_type", "ctx"]], "return_value": [], "self": []}, "params_p": {"args": [], "dag_maker": [], "error_message": [["Callable", 0.9999999999999998]], "exception_type": [["Callable", 0.27783971839842986], ["Type[Any]", 0.1074166240608322], ["type", 0.10236922195975726], ["Union[keanu.vertex.base.Vertex, keanu.vartypes.numpy_types, float]", 0.10177648605048494]], "kwargs": [], "return_value": [["Callable[[], None]", 0.1714319327974796], ["Callable", 0.15144799075149798], ["Exception", 0.09858440241901671], ["Iterable[str]", 0.09411781728888961], ["Callable[..., None]", 0.07575718345691758]], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_error_if_unmappable_type", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.12919648404520415], ["str", 0.09252134635204011]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3470, 12], [3471, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_error_if_unmappable_type.<locals>.push", "ret_exprs": ["return return_value"], "ret_type": "", "ret_type_p": [["float", 0.5014281674021597], ["Optional[Callable[[str], bool]]", 0.1030664479276499], ["datetime.datetime", 0.09635527045384133]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "If an unmappable return value is used for expand_kwargs(), fail the task that pushed the XCom.", "long_descr": null, "ret": null}, "fn_lc": [[3459, 4], [3481, 46]], "fn_var_ln": {"ti": [[3475, 8], [3475, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_expand_kwargs_error_if_unmappable_type", "params": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_descr": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "error_message": [["str", "ctx", "value", "error_message"]], "exception_type": [["pytest", "raises", "exception_type", "ctx"]], "return_value": [], "self": []}, "params_p": {"args": [], "dag_maker": [], "error_message": [["Callable", 0.9999999999999998]], "exception_type": [["Callable", 0.2757112910179361], ["Type[Any]", 0.10735943478103491], ["type", 0.10413696108887502], ["Union[keanu.vertex.base.Vertex, keanu.vartypes.numpy_types, float]", 0.10299256021743301]], "kwargs": [], "return_value": [["Callable[[], None]", 0.153342222037433], ["List[str]", 0.14992472766874515], ["Iterable[str]", 0.10154533611960814], ["Exception", 0.0984994564440423], ["bool", 0.07933696722285251], ["Callable", 0.07022536494128725]], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_error_if_unmappable_type", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.12919648404520415], ["str", 0.09252134635204011]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3501, 12], [3502, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_task_group_expand_error_if_unmappable_type.<locals>.push", "ret_exprs": ["return return_value"], "ret_type": "", "ret_type_p": [["float", 0.5014281674021597], ["Optional[Callable[[str], bool]]", 0.1030664479276499], ["datetime.datetime", 0.09635527045384133]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3505, 12], [3506, 54]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "tg", "params": {"arg": ""}, "params_descr": {"arg": ""}, "params_occur": {"arg": [["MockOperator", "task_id", "arg1", "arg"]]}, "params_p": {"arg": [["str", 0.29524138619219387], ["int", 0.11538031989962252], ["settings.Settings", 0.1033615029912985], ["Iterable", 0.0925450587085337], ["Dict[str, Any]", 0.09174344197804106]], "args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_task_group_expand_error_if_unmappable_type.<locals>.tg", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "If an unmappable return value is used , fail the task that pushed the XCom.", "long_descr": null, "ret": null}, "fn_lc": [[3490, 4], [3516, 46]], "fn_var_ln": {"ti": [[3510, 8], [3510, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_task_group_expand_error_if_unmappable_type", "params": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_descr": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "error_message": [["str", "ctx", "value", "error_message"]], "exception_type": [["pytest", "raises", "exception_type", "ctx"]], "return_value": [], "self": []}, "params_p": {"args": [], "dag_maker": [["bool", 0.2083299100348891], ["raiden.utils.NetworkTimeout", 0.1276490312029047], ["Callable", 0.08987788960016005], ["bytes", 0.08862496263300985]], "error_message": [["Callable", 0.8760037911392169], ["raiden.utils.BlockNumber", 0.12399620886078301]], "exception_type": [["Callable[[KT], VT]", 0.12113619738786914], ["Tuple[Type]", 0.10236876480924843], ["List[str]", 0.10129526282649216], ["Sequence", 0.09926683280162346], ["type", 0.09801882945535854], ["daylighdb.models.Photo", 0.09715791057898295], ["raiden.utils.List[raiden.utils.TokenAddress]", 0.094734792303892], ["Dict[str, Any]", 0.09455200535026156]], "kwargs": [], "return_value": [["List[str]", 0.17838695505797977], ["Iterable[str]", 0.12010015884877909], ["Literal", 0.1088484858338205], ["Exception", 0.09688556810773756], ["bool", 0.09681900122238767], ["str", 0.09681900122238767], ["List[Tuple[str, Any]]", 0.09393383100645372], ["Callable[[], None]", 0.09275761362878358]], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_task_group_expand_error_if_unmappable_type", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.12919648404520415], ["str", 0.09252134635204011]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3536, 12], [3537, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_task_group_expand_kwargs_error_if_unmappable_type.<locals>.push", "ret_exprs": ["return return_value"], "ret_type": "", "ret_type_p": [["float", 0.5014281674021597], ["Optional[Callable[[str], bool]]", 0.1030664479276499], ["datetime.datetime", 0.09635527045384133]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3540, 12], [3541, 54]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "tg", "params": {"arg": ""}, "params_descr": {"arg": ""}, "params_occur": {"arg": [["MockOperator", "task_id", "arg1", "arg"]]}, "params_p": {"arg": [["str", 0.29524138619219387], ["int", 0.11538031989962252], ["settings.Settings", 0.1033615029912985], ["Iterable", 0.0925450587085337], ["Dict[str, Any]", 0.09174344197804106]], "args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_task_group_expand_kwargs_error_if_unmappable_type.<locals>.tg", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "If an unmappable return value is used, fail the task that pushed the XCom.", "long_descr": null, "ret": null}, "fn_lc": [[3525, 4], [3551, 46]], "fn_var_ln": {"ti": [[3545, 8], [3545, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_task_group_expand_kwargs_error_if_unmappable_type", "params": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_descr": {"dag_maker": "", "error_message": "", "exception_type": "", "return_value": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "error_message": [["str", "ctx", "value", "error_message"]], "exception_type": [["pytest", "raises", "exception_type", "ctx"]], "return_value": [], "self": []}, "params_p": {"args": [], "dag_maker": [["bool", 0.301786258386883], ["raiden.utils.NetworkTimeout", 0.14027708174187403], ["Callable", 0.08974643031384738], ["raiden.utils.TokenAddress", 0.0851031569363457], ["bytes", 0.08385578317266683]], "error_message": [["Callable", 0.5939456446803666], ["raiden.utils.BlockNumber", 0.12300705196995225], ["int", 0.09958788391028726]], "exception_type": [["str", 0.22510652504766032], ["models.transaction.TXContext", 0.09495204038527037], ["models.Channel", 0.09495204038527037]], "kwargs": [], "return_value": [["bool", 0.2894092938788652], ["str", 0.1928558816277522], ["List[str]", 0.11164358260193395], ["int", 0.09784734714406544], ["List[Tuple[str, Any]]", 0.08995494474413723]], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_task_group_expand_kwargs_error_if_unmappable_type", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.12919648404520415], ["str", 0.09252134635204011]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3567, 12], [3568, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull", "params": {"v": ""}, "params_descr": {"v": ""}, "params_occur": {"v": [["print", "v"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "v": [["str", 0.7388553354316277], ["int", 0.08735435134944207], ["FrozenSet[int]", 0.07996620279732768]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_error_if_received_invalid.<locals>.pull", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3562, 4], [3586, 90]], "fn_var_ln": {"decision": [[3581, 8], [3581, 16]], "dr": [[3572, 8], [3572, 10]], "push_task": [[3564, 12], [3564, 21]]}, "fn_var_occur": {"decision": [["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["decision", "schedulable_tis"], ["decision", "schedulable_tis"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["decision", "schedulable_tis"], ["decision", "schedulable_tis"]], "dr": [["dr", "dag_maker", "create_dagrun"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"]], "push_task": [["pull", "expand_kwargs", "push_task"]]}, "name": "test_expand_kwargs_error_if_received_invalid", "params": {"create_upstream": "", "dag_maker": "", "self": "", "session": ""}, "params_descr": {"create_upstream": "", "dag_maker": "", "self": "", "session": ""}, "params_occur": {"create_upstream": [], "dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": [], "session": [["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"]]}, "params_p": {"args": [], "create_upstream": [["bool", 0.09092812384285348], ["Exception", 0.08969734524842275]], "dag_maker": [["str", 0.18430558852524137], ["Callable", 0.11473308505722611], ["Optional[str]", 0.10261870013727048], ["List[Dict[str, str]]", 0.09025808662592044]], "kwargs": [], "self": [], "session": [["app.models.User", 0.09887093307970796]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_error_if_received_invalid", "ret_exprs": [], "ret_type": "", "variables": {"decision": "", "dr": "", "push_task": ""}, "variables_p": {"decision": [["dict", 0.27217524626616874], ["grpy.core.models.Grouping", 0.1915589207900783], ["golem.rpc.session.WebSocketAddress", 0.08102527003759113], ["grouper.models.group.Group", 0.07521732579060614], ["Optional[str]", 0.0710618664475157]], "dr": [["str", 0.5791964425917764], ["Dict[int, Dict[str, Any]]", 0.21837569234653836]], "push_task": [["int", 0.23295159043857266], ["List[str]", 0.20753319858111532], ["bytes", 0.12481545748125789], ["Set[str]", 0.10376659929055766], ["List[int]", 0.09753987597657503], ["List[Tuple[float, float]]", 0.07779775941064047], ["List[Optional[str]]", 0.07779775941064047], ["list", 0.07779775941064047]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3605, 12], [3606, 66]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_override_partial.<locals>.push", "ret_exprs": ["return [{\"arg1\": \"a\"}, {\"arg1\": \"b\", \"arg2\": \"c\"}]"], "ret_type": "", "ret_type_p": [["Tuple[Any, Any, Any]", 0.1000451844359645], ["str", 0.09993742576455412], ["trezor.utils.Writer", 0.09104617924976637]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3613, 12], [3614, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull", "params": {"arg1": "", "arg2": ""}, "params_descr": {"arg1": "", "arg2": ""}, "params_occur": {"arg1": [["arg1", "arg2"]], "arg2": [["ClassicOperator", "partial", "task_id", "arg2", "expand_kwargs", "push_task", "strict", "strict"], ["arg1", "arg2"]]}, "params_p": {"arg1": [["float", 1.4929314645606026e-09], ["bool", 7.115516416064706e-10], ["hashdecoder.lib.types.hint_type", 3.662161985158254e-10], ["Callable[[None], bool]", 3.2330014715920556e-10]], "arg2": [["Callable", 0.10733741953989721], ["Dict[str, Any]", 0.10733741953989721], ["dict", 0.09967525516865933], ["mypy.types.Instance", 0.09825622714215869], ["Dict[Hashable, Any]", 0.09385099307731433], ["int", 0.09385099307731433]], "args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_override_partial.<locals>.pull", "ret_exprs": ["return (arg1, arg2)"], "ret_type": "", "ret_type_p": [["float", 1.4929314645606026e-09], ["bool", 7.115516416064706e-10], ["hashdecoder.lib.types.hint_type", 3.662161985158254e-10], ["Callable[[None], bool]", 3.2330014715920556e-10]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3597, 4], [3641, 91]], "fn_var_ln": {"decision": [[3621, 8], [3621, 16]], "dr": [[3618, 8], [3618, 10]], "push_task": [[3608, 12], [3608, 21]], "ti": [[3634, 8], [3634, 10]], "tis": [[3622, 8], [3622, 11]]}, "fn_var_occur": {"decision": [["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["tis", "ti", "task_id", "ti", "map_index", "ti", "state", "ti", "ti", "decision", "schedulable_tis"]], "dr": [["dr", "dag_maker", "create_dagrun"], ["next", "ti", "ti", "dr", "task_instances", "ti", "task_id", "run"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"]], "push_task": [["pull", "partial", "arg2", "expand_kwargs", "push_task", "strict", "strict"]], "ti": [["next", "ti", "ti", "dr", "task_instances", "ti", "task_id", "run"], ["tis", "ti", "task_id", "ti", "map_index", "ti", "state", "ti", "ti", "decision", "schedulable_tis"], ["ti", "tis", "downstream", "None"], ["ti", "run"], ["ti", "xcom_pull", "task_ids", "downstream", "map_indexes", "session", "session"], ["ti", "tis", "downstream", "None"], ["ti", "run"], ["ti", "run"], ["ti", "xcom_pull", "task_ids", "downstream", "map_indexes", "session", "session"]], "tis": [["tis", "ti", "task_id", "ti", "map_index", "ti", "state", "ti", "ti", "decision", "schedulable_tis"], ["sorted", "tis", "None", "None", "None", "None"], ["ti", "tis", "downstream", "None"], ["ti", "tis", "downstream", "None"]]}, "name": "test_expand_kwargs_override_partial", "params": {"dag_maker": "", "downstream": "", "error_message": "", "self": "", "session": "", "strict": ""}, "params_descr": {"dag_maker": "", "downstream": "", "error_message": "", "self": "", "session": "", "strict": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "downstream": [["ti", "tis", "downstream", "None"], ["ti", "xcom_pull", "task_ids", "downstream", "map_indexes", "session", "session"], ["ti", "tis", "downstream", "None"], ["ti", "xcom_pull", "task_ids", "downstream", "map_indexes", "session", "session"]], "error_message": [["str", "ctx", "value", "error_message"]], "self": [], "session": [["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["ti", "xcom_pull", "task_ids", "downstream", "map_indexes", "session", "session"], ["ti", "xcom_pull", "task_ids", "downstream", "map_indexes", "session", "session"]], "strict": [["pull", "partial", "arg2", "expand_kwargs", "push_task", "strict", "strict"]]}, "params_p": {"args": [], "dag_maker": [["raiden.utils.List[raiden.utils.Address]", 0.133323782569982], ["List[Dict[str, str]]", 0.1143314586696524], ["pathlib.Path", 0.08923516103674961]], "downstream": [["models.User", 0.11894663115472655], ["models.RepoInterface", 0.11894663115472655], ["lms.lmsdb.models.User", 0.09689056861808457], ["cmk.utils.type_defs.HostName", 0.09321516499490619], ["cmk.utils.type_defs.ServiceName", 0.09321516499490619]], "error_message": [["Callable", 0.607771946658839], ["List[str]", 0.10367551634317974], ["bool", 0.09618417899932712]], "kwargs": [], "self": [], "session": [["zerver.models.UserProfile", 0.2005088618960092], ["sqlalchemy.orm.session.Session", 0.09785060606802824], ["float", 0.09410855283189277], ["server.models.bike.Bike", 0.09410855283189277], ["server.models.Rental", 0.09410855283189277]], "strict": [["abilian.core.models.subjects.User", 0.10035573862121416], ["bool", 0.08226717781709889]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_expand_kwargs_override_partial", "ret_exprs": [], "ret_type": "", "variables": {"decision": "", "dr": "", "push_task": "", "ti": "", "tis": ""}, "variables_p": {"decision": [["int", 0.2630692704323446], ["str", 0.09865670622844441], ["app.models.Tweet", 0.09525876934602802], ["list", 0.09310818512961519], ["List[dict]", 0.09137315702622018], ["buza.models.Subject", 0.09019787706305675]], "dr": [["int", 0.5987613591039247], ["str", 0.2989814893592255]], "push_task": [["List[Dict[str, Any]]", 0.11501083154475432], ["str", 0.11240632191498637], ["int", 0.10889383522422738], ["list", 0.09669374509151422]], "ti": [["int", 0.5125181168831111], ["raiden.utils.PaymentID", 0.1941514028764108], ["str", 0.12144392113238767], ["o2a.converter.task.Task", 0.08948128743836543], ["List[str]", 0.08240527166972493]], "tis": [["dict", 1.0]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3648, 12], [3649, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_something", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_error_if_upstream_does_not_push.<locals>.push_something", "ret_exprs": ["return [1, 2]"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3652, 12], [3653, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull_something", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["print", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "value": [["str", 0.5552156078218334], ["dict", 0.15579843122747983], ["float", 0.10723552956606389], ["int", 0.08129997011636016]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_error_if_upstream_does_not_push.<locals>.pull_something", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Fail the upstream task if it fails to push the XCom used for task mapping.", "long_descr": null, "ret": null}, "fn_lc": [[3643, 4], [3663, 69]], "fn_var_ln": {"ti": [[3657, 8], [3657, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_error_if_upstream_does_not_push", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_error_if_upstream_does_not_push", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.12919648404520415], ["str", 0.09252134635204011]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3671, 12], [3672, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_something", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_error_if_unmappable_length.<locals>.push_something", "ret_exprs": ["return [1, 2]"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3675, 12], [3676, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull_something", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["print", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "value": [["str", 0.5552156078218334], ["dict", 0.15579843122747983], ["float", 0.10723552956606389], ["int", 0.08129997011636016]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_error_if_unmappable_length.<locals>.pull_something", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "If an unmappable return value is used to map, fail the task that pushed the XCom.", "long_descr": null, "ret": null}, "fn_lc": [[3666, 4], [3686, 72]], "fn_var_ln": {"ti": [[3680, 8], [3680, 10]]}, "fn_var_occur": {"ti": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "FAILED"]]}, "name": "test_error_if_unmappable_length", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["ti", "next", "ti", "ti", "dag_maker", "create_dagrun", "task_instances", "ti", "task_id"], ["dag_maker", "session", "query", "TaskMap", "count"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_error_if_unmappable_length", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["dict", 0.12919648404520415], ["str", 0.09252134635204011]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3700, 12], [3701, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "push_something", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_written_task_map.<locals>.push_something", "ret_exprs": ["return xcom_value"], "ret_type": "", "ret_type_p": [["str", 0.3809469648085811], ["int", 0.23059562124520283], ["Callable[[Mapping], T]", 0.09679852941586954], ["List[int]", 0.09430148677864111]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3704, 12], [3705, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull_something", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["print", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "value": [["str", 0.5552156078218334], ["dict", 0.15579843122747983], ["float", 0.10723552956606389], ["int", 0.08129997011636016]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_written_task_map.<locals>.pull_something", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Return value should be recorded in TaskMap if it's used by a downstream to map.", "long_descr": null, "ret": null}, "fn_lc": [[3695, 4], [3719, 45]], "fn_var_ln": {"dag_run": [[3709, 8], [3709, 15]], "task_map": [[3713, 8], [3713, 16]], "ti": [[3710, 8], [3710, 10]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["ti", "next", "ti", "ti", "dag_run", "task_instances", "ti", "task_id"], ["task_map", "run_id", "dag_run", "run_id"]], "task_map": [["task_map", "dag_maker", "session", "query", "TaskMap", "one"], ["task_map", "dag_id"], ["task_map", "task_id"], ["task_map", "run_id", "dag_run", "run_id"], ["task_map", "map_index"], ["task_map", "length", "expected_length"], ["task_map", "keys", "expected_keys"]], "ti": [["ti", "next", "ti", "ti", "dag_run", "task_instances", "ti", "task_id"], ["ti", "run"]]}, "name": "test_written_task_map", "params": {"dag_maker": "", "expected_keys": "", "expected_length": "", "self": "", "xcom_value": ""}, "params_descr": {"dag_maker": "", "expected_keys": "", "expected_length": "", "self": "", "xcom_value": ""}, "params_occur": {"dag_maker": [["dag_run", "dag_maker", "create_dagrun"], ["task_map", "dag_maker", "session", "query", "TaskMap", "one"]], "expected_keys": [["task_map", "keys", "expected_keys"]], "expected_length": [["task_map", "length", "expected_length"]], "self": [], "xcom_value": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.TokenAddress", 0.2647056017936601], ["raiden.utils.PaymentNetworkID", 0.17748636442009738], ["str", 0.14259976393934987], ["raiden_libs.types.Address", 0.11131280136846171], ["raiden.utils.List[raiden.utils.TokenAddress]", 0.07876306649255999]], "expected_keys": [["str", 0.7329015049682762], ["bytes", 0.16971100167528255], ["Optional[str]", 0.09738749335644128]], "expected_length": [["str", 0.17917278820772023], ["Callable", 0.1166212355126997], ["int", 0.10343962206508912], ["Hashable", 0.10343962206508912], ["bool", 0.09974181229646123], ["TextIO", 0.09974181229646123], ["Tuple[int, int]", 0.08908173502196416]], "kwargs": [], "self": [], "xcom_value": [["bytes", 0.19402020003691792], ["str", 0.12576504719689077], ["Sequence[Hashable]", 0.09726392375087754], ["List[Tuple[int, int]]", 0.09726392375087754], ["models.PermissionLookup", 0.09358506802649934], ["bool", 0.0930546923354379]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_written_task_map", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "task_map": "", "ti": ""}, "variables_p": {"dag_run": [["int", 0.5936758964448566], ["List[float]", 0.11089110064473028], ["Union[None, bool, str]", 0.09446288807704235], ["float", 0.09245157812591069]], "task_map": [["dict", 0.19504510572748412], ["List[str]", 0.14301990776542758], ["trakcore.config.TraktCredentials", 0.10099565999766323], ["raiden.transfer.state.HopState", 0.09796217592027831], ["List[float]", 0.09308383996980908], ["bytes", 0.09169469340826146], ["list", 0.08390421898154522]], "ti": [["str", 0.418500858056857], ["Dict[starfish.core.types._constants.Axes, int]", 0.10635934358667988]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3726, 12], [3727, 30]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "add_one", "params": {"x": ""}, "params_descr": {"x": ""}, "params_occur": {"x": []}, "params_p": {"args": [], "kwargs": [], "self": [], "x": [["int", 0.3333333328258782], ["str", 6.751157746379811e-10], ["bool", 2.752968205886354e-10], ["List[float]", 1.349327981317805e-10]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_no_error_on_changing_from_non_mapped_to_mapped.<locals>.add_one", "ret_exprs": ["return [x + 1]"], "ret_type": "", "ret_type_p": [["str", 0.2322548068461218], ["int", 0.08605762079031587]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3730, 12], [3731, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "add_two", "params": {"x": ""}, "params_descr": {"x": ""}, "params_occur": {"x": []}, "params_p": {"args": [], "kwargs": [], "self": [], "x": [["int", 0.3333333328258782], ["str", 6.751157746379811e-10], ["bool", 2.752968205886354e-10], ["List[float]", 1.349327981317805e-10]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_no_error_on_changing_from_non_mapped_to_mapped.<locals>.add_two", "ret_exprs": ["return x + 2"], "ret_type": "", "ret_type_p": [["str", 0.2322548068461218], ["int", 0.08605762079031587]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "If a task changes from non-mapped to mapped, don't fail on integrity error.", "long_descr": null, "ret": null}, "fn_lc": [[3721, 4], [3752, 47]], "fn_var_ln": {"dag": [[3745, 8], [3745, 14]], "dr": [[3736, 8], [3736, 10]], "serialized_dag": [[3743, 8], [3743, 22]], "task1": [[3742, 12], [3742, 17]], "ti": [[3747, 8], [3747, 10]]}, "fn_var_occur": {"dag": [["dag", "_remove_task"], ["serialized_dag", "SerializedDAG", "from_dict", "SerializedDAG", "to_dict", "dag"], ["dr", "dag", "serialized_dag"], ["dag", "clear"]], "dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "get_task_instance", "task_id"], ["dr", "dag", "serialized_dag"], ["dr", "verify_integrity", "session", "session"], ["ti", "dr", "get_task_instance", "task_id"], ["dr", "task_instance_scheduling_decisions"]], "serialized_dag": [["serialized_dag", "SerializedDAG", "from_dict", "SerializedDAG", "to_dict", "dag"], ["dr", "dag", "serialized_dag"]], "task1": [["task1", "add_one"], ["add_two", "expand", "x", "task1"], ["task1", "add_one", "expand", "x", "operator"], ["ti", "refresh_from_task", "task1"]], "ti": [["ti", "dr", "get_task_instance", "task_id"], ["ti", "run"], ["ti", "state", "TaskInstanceState", "SUCCESS"], ["ti", "dr", "get_task_instance", "task_id"], ["ti", "state", "TaskInstanceState", "REMOVED"], ["ti", "refresh_from_task", "task1"]]}, "name": "test_no_error_on_changing_from_non_mapped_to_mapped", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": [], "session": [["dr", "verify_integrity", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.11869814230934658], ["Callable", 0.108867304847525], ["dict", 0.10547180490619405], ["List[Dict[str, str]]", 0.08346274318494012]], "kwargs": [], "self": [], "session": [["Optional[str]", 0.06828997351566103]]}, "q_name": "TestTaskInstanceRecordTaskMapXComPush.test_no_error_on_changing_from_non_mapped_to_mapped", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "serialized_dag": "", "task1": "", "ti": ""}, "variables_p": {"dag": [["list", 0.4539434420410451], ["cincoconfig.config.Schema", 0.1749378534313974], ["Set[str]", 0.09125256066664965]], "dr": [["Dict[int, Dict[str, Any]]", 0.16499715957624983], ["str", 0.11690788808296886]], "serialized_dag": [["list", 0.1824086233742289], ["dict", 0.17978952759514333], ["float", 0.08876316840027043], ["Type[Callable[..., Any]]", 0.08427082094498844], ["tests.pathfinding.test_fee_schedule.TokenNetworkForTests", 0.08302611217905412]], "task1": [["dict", 0.19171059497121926], ["Dict[str, float]", 0.1246184749326097], ["List[int]", 0.09126586499881227], ["str", 0.09107585543622441]], "ti": [["Dict[str, dict]", 0.11652466126565561], ["Optional[str]", 0.11335303733592207], ["golem.task.taskstate.SubtaskState", 0.10194350736785932], ["owlmixin.TList[jumeaux.models.Request]", 0.09734364857769337], ["Dict[str, Union[Any, Any]]", 0.09398359548127685], ["golem.task.taskbase.AcceptClientVerdict", 0.09291461671371089]]}}], "name": "TestTaskInstanceRecordTaskMapXComPush", "q_name": "TestTaskInstanceRecordTaskMapXComPush", "variables": {}, "variables_p": {}}, {"cls_lc": [[3755, 0], [3971, 84]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3769, 12], [3770, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "show", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["outputs", "append", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "value": [["Dict[str, Any]", 0.11947148098484038], ["List[str]", 0.09992593120260596], ["List[float]", 0.09709790909628754], ["List[List[Any]]", 0.09611768847053258], ["int", 0.09490389114169641], ["str", 0.08794288793909734]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_literal.<locals>.show", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3763, 4], [3787, 42]], "fn_var_ln": {"dag_run": [[3774, 8], [3774, 15]], "mapped_tis": [[3776, 8], [3776, 18]], "outputs": [[3764, 8], [3764, 15]], "show_task": [[3775, 8], [3775, 17]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["mapped_tis", "session", "query", "TI", "filter_by", "task_id", "dag_id", "dag_run", "dag_id", "run_id", "dag_run", "run_id", "order_by", "TI", "map_index", "all"]], "mapped_tis": [["mapped_tis", "session", "query", "TI", "filter_by", "task_id", "dag_id", "dag_run", "dag_id", "run_id", "dag_run", "run_id", "order_by", "TI", "map_index", "all"], ["len", "mapped_tis", "len", "literal"], ["sorted", "mapped_tis", "key", "operator", "attrgetter"]], "outputs": [["outputs", "expected_outputs"]], "show_task": [["show_task", "dag", "get_task"], ["ti", "refresh_from_task", "show_task"]]}, "name": "test_map_literal", "params": {"dag_maker": "", "expected_outputs": "", "literal": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "expected_outputs": "", "literal": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "expected_outputs": [["outputs", "expected_outputs"]], "literal": [["show", "expand", "value", "literal"], ["len", "mapped_tis", "len", "literal"]], "self": [], "session": [["mapped_tis", "session", "query", "TI", "filter_by", "task_id", "dag_id", "dag_run", "dag_id", "run_id", "dag_run", "run_id", "order_by", "TI", "map_index", "all"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.1905585729968548], ["List[List[Any]]", 0.1813732188683729], ["list", 0.08378121534844003], ["busboy.util.Maybe[psycopg2.extensions.connection]", 0.08080544792572394]], "expected_outputs": [["str", 0.24916365189750322], ["int", 0.12760954247470052], ["Dict[str, Any]", 0.09191525464091468], ["List[recidiviz.persistence.database.schema.state.schema.StateIncarcerationPeriod]", 0.0874345825831252], ["tuple", 0.08661325499639563], ["Optional[float]", 0.08002067453757304]], "kwargs": [], "literal": [["int", 0.2326440891546917], ["List[Tuple[int, int]]", 0.18247605414907803], ["Tuple[int, int]", 0.18247605414907803], ["str", 0.10289804986938676], ["bytes", 0.08989325353074008]], "self": [], "session": [["List[int]", 0.31103424724436596], ["int", 0.19377634420686946], ["raiden.utils.ChainID", 0.18870021037381937], ["datetime.datetime", 0.10528632208219489], ["str", 0.10459830383514532], ["List[Dict[str, Any]]", 0.09660457225760512]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_literal", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "mapped_tis": "", "outputs": "", "show_task": ""}, "variables_p": {"dag_run": [["int", 0.4519199966976217], ["datetime.datetime", 0.09589002790322619], ["str", 0.09427830713418238]], "mapped_tis": [["int", 0.4054053956953757], ["str", 0.17523492231306176], ["Optional[Match[str]]", 0.07666895247704111]], "outputs": [["List[str]", 0.19437955367034074], ["int", 0.12268419030341603], ["Dict[str, Any]", 0.12268419030341603], ["str", 0.12268419030341603], ["List[Dict[str, Any]]", 0.10079079970306937], ["Dict[int, List[str]]", 0.10079079970306937], ["float", 0.10079079970306937], ["dict", 0.07104381527260248]], "show_task": [["raiden.transfer.state.HopState", 0.46484194715329374], ["list", 0.16313097923091893], ["List[str]", 0.09395624949445651], ["src.models.generic_task.GenericTask", 0.08776930953722831]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3802, 12], [3803, 38]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "emit", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_xcom.<locals>.emit", "ret_exprs": ["return upstream_return"], "ret_type": "", "ret_type_p": [["Dict[str, Any]", 0.11701841279172288], ["base.ConfigOptions", 0.11701841279172288], ["Union[tuple, list]", 0.11342579998692112], ["str", 0.09963883771398029], ["List[int]", 0.0876385039426606]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3806, 12], [3807, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "show", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["outputs", "append", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "value": [["Dict[str, Any]", 0.11947148098484038], ["List[str]", 0.09992593120260596], ["List[float]", 0.09709790909628754], ["List[List[Any]]", 0.09611768847053258], ["int", 0.09490389114169641], ["str", 0.08794288793909734]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_xcom.<locals>.show", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3796, 4], [3823, 42]], "fn_var_ln": {"dag_run": [[3811, 8], [3811, 15]], "emit_ti": [[3812, 8], [3812, 15]], "mapped_tis": [[3817, 8], [3817, 18]], "max_map_index": [[3817, 20], [3817, 33]], "outputs": [[3797, 8], [3797, 15]], "show_task": [[3816, 8], [3816, 17]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["emit_ti", "dag_run", "get_task_instance", "session", "session"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "emit_ti": [["emit_ti", "dag_run", "get_task_instance", "session", "session"], ["emit_ti", "refresh_from_task", "dag", "get_task"], ["emit_ti", "run"]], "mapped_tis": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["max_map_index", "len", "mapped_tis", "len", "upstream_return"], ["sorted", "mapped_tis", "key", "operator", "attrgetter"]], "max_map_index": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["max_map_index", "len", "mapped_tis", "len", "upstream_return"]], "outputs": [["outputs", "expected_outputs"]], "show_task": [["show_task", "dag", "get_task"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["ti", "refresh_from_task", "show_task"]]}, "name": "test_map_xcom", "params": {"dag_maker": "", "expected_outputs": "", "self": "", "session": "", "upstream_return": ""}, "params_descr": {"dag_maker": "", "expected_outputs": "", "self": "", "session": "", "upstream_return": ""}, "params_occur": {"dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "expected_outputs": [["outputs", "expected_outputs"]], "self": [], "session": [["emit_ti", "dag_run", "get_task_instance", "session", "session"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "upstream_return": [["max_map_index", "len", "mapped_tis", "len", "upstream_return"]]}, "params_p": {"args": [], "dag_maker": [["Optional[str]", 0.11439177898525964], ["bool", 0.0978475157668825], ["str", 0.09209262727590717], ["Callable", 0.08606344327323262]], "expected_outputs": [["str", 0.5115390429055919], ["Union[keanu.vertex.base.Vertex, keanu.vartypes.numpy_types, float]", 0.07384336419475193], ["keanu.vertex.base.Vertex", 0.07384336419475193], ["int", 0.07280328496426909], ["Type[Exception]", 0.06658489791891231]], "kwargs": [], "self": [], "session": [["dict", 0.1018707375976686], ["raiden.utils.BlockIdentifier", 0.0995698365422076], ["pathlib.Path", 0.09693060787757642], ["zerver.models.UserProfile", 0.09448689127927677]], "upstream_return": [["str", 0.3924107702612139], ["Iterable[str]", 0.09810269256530348], ["float", 0.09810269256530348], ["List[int]", 0.0904758104309237], ["Tuple[int]", 0.09040877028794558]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_xcom", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "emit_ti": "", "mapped_tis": "", "max_map_index": "", "outputs": "", "show_task": ""}, "variables_p": {"dag_run": [["int", 0.19529028159332745], ["str", 0.18594327662244925], ["bytes", 0.11295856194779179], ["List[str]", 0.10523097882206699], ["Dict[str, Union[Any, str]]", 0.10128060142559317], ["nevergrad.optimization.base.ConfiguredOptimizer", 0.09804498555059711], ["dict", 0.09297163831122462]], "emit_ti": [["Optional[str]", 0.12160141062791627], ["Dict[str, Any]", 0.11276436295553476], ["golem.rpc.session.WebSocketAddress", 0.08998784800686511]], "mapped_tis": [["int", 0.48518933625516214], ["float", 0.11512840303809509], ["geostream.base.GeoStreamReader", 0.10606653287636425], ["bool", 0.10541998804063236]], "max_map_index": [["int", 0.48518933625516214], ["float", 0.11512840303809509], ["geostream.base.GeoStreamReader", 0.10606653287636425], ["bool", 0.10541998804063236]], "outputs": [["List[str]", 0.19437955367034074], ["int", 0.12268419030341603], ["Dict[str, Any]", 0.12268419030341603], ["str", 0.12268419030341603], ["List[Dict[str, Any]]", 0.10079079970306937], ["Dict[int, List[str]]", 0.10079079970306937], ["float", 0.10079079970306937], ["dict", 0.07104381527260248]], "show_task": [["golem.task.taskstate.TaskState", 0.2730676748994706], ["buza.models.User", 0.1087701558698842], ["src.models.generic_task.GenericTask", 0.09663905734530386], ["o2a.converter.task.Task", 0.089657872696985]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3831, 12], [3832, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "emit_numbers", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product.<locals>.emit_numbers", "ret_exprs": ["return [1, 2]"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3835, 12], [3836, 53]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "emit_letters", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product.<locals>.emit_letters", "ret_exprs": ["return {\"a\": \"x\", \"b\": \"y\", \"c\": \"z\"}"], "ret_type": "", "ret_type_p": [["float", 0.1732068877124311], ["utils.Node", 0.11071695062058211], ["List[int]", 0.09304683401841443], ["int", 0.09304683401841443]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3839, 12], [3840, 48]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "show", "params": {"letter": "", "number": ""}, "params_descr": {"letter": "", "number": ""}, "params_occur": {"letter": [["outputs", "append", "number", "letter"]], "number": [["outputs", "append", "number", "letter"]]}, "params_p": {"args": [], "kwargs": [], "letter": [["mypy.types.Instance", 0.4], ["int", 0.1], ["str", 0.1], ["T", 0.1]], "number": [["mypy.types.Instance", 0.4], ["int", 0.1], ["str", 0.1], ["T", 0.1]], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product.<locals>.show", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3825, 4], [3864, 9]], "fn_var_ln": {"dag_run": [[3844, 8], [3844, 15]], "mapped_tis": [[3851, 8], [3851, 18]], "max_map_index": [[3851, 20], [3851, 33]], "outputs": [[3826, 8], [3826, 15]], "show_task": [[3850, 8], [3850, 17]], "ti": [[3846, 12], [3846, 14]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["ti", "dag_run", "get_task_instance", "task_id", "session", "session"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "mapped_tis": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["max_map_index", "len", "mapped_tis"], ["sorted", "mapped_tis", "key", "operator", "attrgetter"]], "max_map_index": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["max_map_index", "len", "mapped_tis"]], "outputs": [], "show_task": [["show_task", "dag", "get_task"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["ti", "refresh_from_task", "show_task"]], "ti": [["ti", "dag_run", "get_task_instance", "task_id", "session", "session"], ["ti", "refresh_from_task", "dag", "get_task", "task_id"], ["ti", "run"], ["ti", "refresh_from_task", "show_task"], ["ti", "run"]]}, "name": "test_map_product", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "self": [], "session": [["ti", "dag_run", "get_task_instance", "task_id", "session", "session"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": [], "session": [["str", 0.27606530402078344], ["django.conf.settings.AUTH_USER_MODEL", 0.25786084451845104], ["deeplearning.ml4pl.models.log_database.Database", 0.18847601982484452], ["dict", 0.08951473050619148]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "mapped_tis": "", "max_map_index": "", "outputs": "", "show_task": "", "ti": ""}, "variables_p": {"dag_run": [["int", 0.20359925153916245], ["List[str]", 0.10483409859245384], ["list", 0.09703070857287475]], "mapped_tis": [["int", 0.48518933625516214], ["float", 0.11512840303809509], ["geostream.base.GeoStreamReader", 0.10606653287636425], ["bool", 0.10541998804063236]], "max_map_index": [["int", 0.48518933625516214], ["float", 0.11512840303809509], ["geostream.base.GeoStreamReader", 0.10606653287636425], ["bool", 0.10541998804063236]], "outputs": [["bool", 0.09999999999999999], ["int", 0.09999999999999999], ["Optional[int]", 0.09999999999999999], ["list", 0.09999999999999999], ["dict", 0.09999999999999999], ["Tuple[str, str]", 0.09999999999999999]], "show_task": [["golem.task.taskstate.TaskState", 0.2730676748994706], ["buza.models.User", 0.1087701558698842], ["src.models.generic_task.GenericTask", 0.09663905734530386], ["o2a.converter.task.Task", 0.089657872696985]], "ti": [["Dict[str, Any]", 0.11113048149738308], ["pydynasync.models.Changes", 0.10668721781588573], ["str", 0.10437644185259341], ["golem.rpc.session.WebSocketAddress", 0.09693512037999251], ["int", 0.09415525803898839]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3873, 12], [3874, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "emit_numbers", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product_same.<locals>.emit_numbers", "ret_exprs": ["return [1, 2]"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3877, 12], [3878, 38]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "show", "params": {"a": "", "b": ""}, "params_descr": {"a": "", "b": ""}, "params_occur": {"a": [["outputs", "append", "a", "b"]], "b": [["outputs", "append", "a", "b"]]}, "params_p": {"a": [["mode.utils.Deque[T]", 0.22497184134435458], ["list", 0.10212807118924135], ["Sequence[T]", 0.09743670075885598], ["bytes", 0.09654578870535657], ["bytearray", 0.09654578870535657]], "args": [], "b": [["mode.utils.Deque[T]", 0.22497184134435458], ["list", 0.10212807118924135], ["Sequence[T]", 0.09743670075885598], ["bytes", 0.09654578870535657], ["bytearray", 0.09654578870535657]], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product_same.<locals>.show", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test a mapped task can refer to the same source multiple times.", "long_descr": null, "ret": null}, "fn_lc": [[3866, 4], [3897, 58]], "fn_var_ln": {"dag_run": [[3883, 8], [3883, 15]], "emit_task": [[3880, 12], [3880, 21]], "mapped_tis": [[3891, 8], [3891, 18]], "max_map_index": [[3891, 20], [3891, 33]], "outputs": [[3868, 8], [3868, 15]], "show_task": [[3888, 8], [3888, 17]], "ti": [[3884, 8], [3884, 10]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["ti", "dag_run", "get_task_instance", "session", "session"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "emit_task": [["emit_task", "emit_numbers"], ["show", "expand", "a", "emit_task", "b", "emit_task"]], "mapped_tis": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["max_map_index", "len", "mapped_tis"], ["sorted", "mapped_tis", "key", "operator", "attrgetter"]], "max_map_index": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["max_map_index", "len", "mapped_tis"]], "outputs": [], "show_task": [["show_task", "dag", "get_task"], ["show_task", "get_parse_time_mapped_ti_count"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["ti", "refresh_from_task", "show_task"]], "ti": [["ti", "dag_run", "get_task_instance", "session", "session"], ["ti", "refresh_from_task", "dag", "get_task"], ["ti", "run"], ["ti", "refresh_from_task", "show_task"], ["ti", "run"]]}, "name": "test_map_product_same", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "self": [], "session": [["ti", "dag_run", "get_task_instance", "session", "session"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": [], "session": [["django.conf.settings.AUTH_USER_MODEL", 0.18139645473605906], ["core.models.Recipe", 0.11138411164139429], ["str", 0.08284878202083747], ["Iterator[Tuple[hermes.types.UserType, hermes.types.EmailAddressType]]", 0.08138567017309975]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_product_same", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "emit_task": "", "mapped_tis": "", "max_map_index": "", "outputs": "", "show_task": "", "ti": ""}, "variables_p": {"dag_run": [["int", 0.17723742027992948]], "emit_task": [["str", 0.32028450159798005], ["int", 0.24249807859795317], ["bool", 0.18627808220920072], ["starfish.types.Number", 0.08591414834008787], ["Optional[float]", 0.0847199016588548]], "mapped_tis": [["int", 0.48518933625516214], ["float", 0.11512840303809509], ["geostream.base.GeoStreamReader", 0.10606653287636425], ["bool", 0.10541998804063236]], "max_map_index": [["int", 0.48518933625516214], ["float", 0.11512840303809509], ["geostream.base.GeoStreamReader", 0.10606653287636425], ["bool", 0.10541998804063236]], "outputs": [["bool", 0.09999999999999999], ["int", 0.09999999999999999], ["Optional[int]", 0.09999999999999999], ["list", 0.09999999999999999], ["dict", 0.09999999999999999], ["Tuple[str, str]", 0.09999999999999999]], "show_task": [["raiden.transfer.state.HopState", 0.37805341513282964], ["bytearray", 0.1309099818211287], ["list", 0.11109595104990178], ["List[Tuple[Any, Any, Any]]", 0.0916129254820421], ["int", 0.08542555526070864]], "ti": [["raiden.utils.Address", 0.1375082801499605], ["Optional[str]", 0.09653176719156224], ["Dict[str, Any]", 0.09006698378023902]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3906, 12], [3907, 38]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "show", "params": {"a": "", "b": ""}, "params_descr": {"a": "", "b": ""}, "params_occur": {"a": [["outputs", "append", "a", "b"]], "b": [["outputs", "append", "a", "b"]]}, "params_p": {"a": [["mode.utils.Deque[T]", 0.22497184134435458], ["list", 0.10212807118924135], ["Sequence[T]", 0.09743670075885598], ["bytes", 0.09654578870535657], ["bytearray", 0.09654578870535657]], "args": [], "b": [["mode.utils.Deque[T]", 0.22497184134435458], ["list", 0.10212807118924135], ["Sequence[T]", 0.09743670075885598], ["bytes", 0.09654578870535657], ["bytearray", 0.09654578870535657]], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_literal_cross_product.<locals>.show", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test a mapped task with literal cross product args expand properly.", "long_descr": null, "ret": null}, "fn_lc": [[3899, 4], [3932, 77]], "fn_var_ln": {"dag_run": [[3911, 8], [3911, 15]], "mapped_tis": [[3915, 8], [3915, 18]], "max_map_index": [[3915, 20], [3915, 33]], "outputs": [[3901, 8], [3901, 15]], "show_task": [[3913, 8], [3913, 17]], "tis": [[3919, 8], [3919, 11]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["tis", "session", "query", "TaskInstance", "filter", "TaskInstance", "dag_id", "dag", "dag_id", "TaskInstance", "task_id", "TaskInstance", "run_id", "dag_run", "run_id", "order_by", "TaskInstance", "map_index", "all"]], "mapped_tis": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["len", "mapped_tis"]], "max_map_index": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "outputs": [], "show_task": [["show_task", "dag", "get_task"], ["show_task", "get_parse_time_mapped_ti_count"], ["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["ti", "refresh_from_task", "show_task"]], "tis": [["tis", "session", "query", "TaskInstance", "filter", "TaskInstance", "dag_id", "dag", "dag_id", "TaskInstance", "task_id", "TaskInstance", "run_id", "dag_run", "run_id", "order_by", "TaskInstance", "map_index", "all"]]}, "name": "test_map_literal_cross_product", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "self": [], "session": [["mapped_tis", "max_map_index", "show_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["tis", "session", "query", "TaskInstance", "filter", "TaskInstance", "dag_id", "dag", "dag_id", "TaskInstance", "task_id", "TaskInstance", "run_id", "dag_run", "run_id", "order_by", "TaskInstance", "map_index", "all"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.08970020194599485]], "kwargs": [], "self": [], "session": [["int", 0.20141363438168397], ["raiden.utils.Address", 0.1279151816497565]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_literal_cross_product", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "mapped_tis": "", "max_map_index": "", "outputs": "", "show_task": "", "tis": ""}, "variables_p": {"dag_run": [["int", 0.19342925238523043]], "mapped_tis": [["int", 0.30720988518639386], ["float", 0.29521453512400214], ["Tuple[Literal, Literal, Literal]", 0.09927565393769344], ["bool", 0.0989331718756885], ["Dict[Tuple[str, str], int]", 0.09251468143377314]], "max_map_index": [["int", 0.6993974744700537], ["float", 0.2004710775587648], ["str", 0.10013144797118151]], "outputs": [["bool", 0.09999999999999999], ["int", 0.09999999999999999], ["Optional[int]", 0.09999999999999999], ["list", 0.09999999999999999], ["dict", 0.09999999999999999], ["Tuple[str, str]", 0.09999999999999999]], "show_task": [["raiden.transfer.state.HopState", 0.37805341513282964], ["bytearray", 0.1309099818211287], ["list", 0.11109595104990178], ["List[Tuple[Any, Any, Any]]", 0.0916129254820421], ["int", 0.08542555526070864]], "tis": [["int", 0.5501696561162075], ["float", 0.1782385806511533], ["app.models.Tweet", 0.08556244029030836]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3941, 12], [3942, 57]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "envs", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_in_group.<locals>.envs", "ret_exprs": ["return [{\"VAR1\": \"FOO\"}, {\"VAR1\": \"BAR\"}]"], "ret_type": "", "ret_type_p": [["bool", 0.10262099386575577], ["multinedb.models.workspace.Workspace", 0.09647572080507537], ["int", 0.09517038907002377], ["List[Tuple[str, str]]", 0.09000693306461051]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3945, 12], [3946, 89]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "cmds", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_in_group.<locals>.cmds", "ret_exprs": ["return [f'echo \"hello $VAR1\" >> {out}', f'echo \"goodbye $VAR1\" >> {out}']"], "ret_type": "", "ret_type_p": [["str", 0.5623601350245307], ["Tuple[Tuple[int, ...]]", 0.0800705529028643]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3934, 4], [3971, 84]], "fn_var_ln": {"bash_task": [[3962, 8], [3962, 17]], "dag_run": [[3954, 8], [3954, 15]], "mapped_bash_tis": [[3963, 8], [3963, 23]], "max_map_index": [[3963, 25], [3963, 38]], "original_tis": [[3955, 8], [3955, 20]], "out": [[3935, 8], [3935, 11]], "out_lines": [[3970, 12], [3970, 21]], "ti": [[3958, 12], [3958, 14]]}, "fn_var_occur": {"bash_task": [["bash_task", "dag", "get_task"], ["mapped_bash_tis", "max_map_index", "bash_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["ti", "refresh_from_task", "bash_task"]], "dag_run": [["dag_run", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun"], ["original_tis", "ti", "task_id", "ti", "ti", "dag_run", "get_task_instances", "session", "session"], ["mapped_bash_tis", "max_map_index", "bash_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "mapped_bash_tis": [["mapped_bash_tis", "max_map_index", "bash_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"], ["sorted", "mapped_bash_tis", "key", "operator", "attrgetter"]], "max_map_index": [["mapped_bash_tis", "max_map_index", "bash_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "original_tis": [["original_tis", "ti", "task_id", "ti", "ti", "dag_run", "get_task_instances", "session", "session"], ["ti", "original_tis", "task_id"]], "out": [["out", "open", "f"]], "out_lines": [["out_lines", "line", "strip", "line", "f"]], "ti": [["original_tis", "ti", "task_id", "ti", "ti", "dag_run", "get_task_instances", "session", "session"], ["ti", "original_tis", "task_id"], ["ti", "refresh_from_task", "dag", "get_task", "task_id"], ["ti", "run"], ["ti", "refresh_from_task", "bash_task"], ["ti", "run"]]}, "name": "test_map_in_group", "params": {"dag_maker": "", "self": "", "session": "", "tmp_path": "pathlib.Path"}, "params_descr": {"dag_maker": "", "self": "", "session": "", "tmp_path": ""}, "params_occur": {"dag_maker": [["dag_run", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun"]], "self": [], "session": [["original_tis", "ti", "task_id", "ti", "ti", "dag_run", "get_task_instances", "session", "session"], ["mapped_bash_tis", "max_map_index", "bash_task", "expand_mapped_task", "dag_run", "run_id", "session", "session"]], "tmp_path": []}, "params_p": {"args": [], "dag_maker": [["models.User", 0.20149659221077762], ["tests.setup.SetupTest", 0.20044427983579405], ["bool", 0.13347517781643772]], "kwargs": [], "self": [], "session": [["mock.MagicMock", 0.12530566981530575]], "tmp_path": [["sqlalchemy.orm.session.Session", 0.5584792234465915]]}, "q_name": "TestMappedTaskInstanceReceiveValue.test_map_in_group", "ret_exprs": [], "ret_type": "", "variables": {"bash_task": "", "dag_run": "airflow.models.dagrun.DagRun", "mapped_bash_tis": "", "max_map_index": "", "original_tis": "", "out": "", "out_lines": "", "ti": ""}, "variables_p": {"bash_task": [["golem.task.taskstate.TaskState", 0.483110281686675], ["list", 0.10622125406527005], ["src.models.generic_task.GenericTask", 0.09655866000404793]], "dag_run": [["buza.models.Answer", 0.20949374543010751], ["core.models.Team", 0.10554948785249037], ["finances.models.Order", 0.09635950142164185], ["tartare.core.models.Job", 0.09582745045147557], ["core.models.Recipe", 0.09172630490937185]], "mapped_bash_tis": [["int", 0.4969868638646454], ["float", 0.21517516165396403]], "max_map_index": [["int", 0.6140124528997319], ["float", 0.1076263626327841], ["datetime.timedelta", 0.09953994235756342], ["str", 0.09003881019311769]], "original_tis": [["golem.task.taskbase.AcceptClientVerdict", 0.09553861424910669], ["golem.task.taskstate.SubtaskState", 0.07214327119185829], ["Dict[str, str]", 0.07121648099005312], ["dict", 0.06814341110966936]], "out": [["pathlib.Path", 0.9999999998874894], ["str", 8.635687818188287e-11]], "out_lines": [["str", 0.6999401772972095], ["List[str]", 0.21246372163761085], ["bytes", 0.08759610106517955]], "ti": [["golem.task.taskbase.AcceptClientVerdict", 0.10144712072522209], ["Dict[str, str]", 0.08095521812751533], ["str", 0.07722592307417225], ["golem.task.taskstate.SubtaskState", 0.06919106470917379]]}}], "name": "TestMappedTaskInstanceReceiveValue", "q_name": "TestMappedTaskInstanceReceiveValue", "variables": {}, "variables_p": {}}, {"cls_lc": [[4135, 4], [4136, 28]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [], "name": "SimpleBashOperator", "q_name": "test_expand_non_templated_field.<locals>.SimpleBashOperator", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[98, 0], [104, 26]], "fn_var_ln": {"test_pool": [[100, 8], [100, 17]]}, "fn_var_occur": {"test_pool": [["test_pool", "Pool", "pool", "slots"], ["session", "add", "test_pool"]]}, "name": "test_pool", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_pool", "ret_exprs": [], "ret_type": "", "variables": {"test_pool": ""}, "variables_p": {"test_pool": [["dict", 0.3103996684078584], ["Dict[str, str]", 0.11654338181157052], ["list", 0.09967849336432484], ["List[Tuple[str, str, str, str]]", 0.09942798594426484], ["Dict[str, float]", 0.09875070107158551], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.09297176383798923], ["Dict[str, List[str]]", 0.0926559507199478], ["List[str]", 0.0895720548424588]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3197, 0], [3229, 45]], "fn_var_ln": {"expected_max_tries": [[3226, 4], [3226, 22]], "max_tries": [[3227, 4], [3227, 16]], "task": [[3198, 4], [3198, 8]], "ti": [[3208, 4], [3208, 6]]}, "fn_var_occur": {"expected_max_tries": [["expected_max_tries", "task", "retries"], ["ti", "max_tries", "expected_max_tries"], ["ti", "max_tries", "expected_max_tries"]], "max_tries": [["ti", "max_tries", "task", "retries"], ["ti", "max_tries", "expected_max_tries"], ["ti", "max_tries", "expected_max_tries"]], "task": [["task", "EmptyOperator", "task_id", "queue", "pool", "pool_slots", "priority_weight", "run_as_user", "retries", "executor_config"], ["ti", "TI", "task", "run_id", "None"], ["ti", "refresh_from_task", "task", "pool_override", "pool_override"], ["ti", "queue", "task", "queue"], ["ti", "pool", "task", "pool"], ["ti", "pool_slots", "task", "pool_slots"], ["ti", "priority_weight", "task", "priority_weight_total"], ["ti", "run_as_user", "task", "run_as_user"], ["ti", "max_tries", "task", "retries"], ["ti", "executor_config", "task", "executor_config"], ["expected_max_tries", "task", "retries"], ["ti", "refresh_from_task", "task"]], "ti": [["ti", "TI", "task", "run_id", "None"], ["ti", "refresh_from_task", "task", "pool_override", "pool_override"], ["ti", "queue", "task", "queue"], ["ti", "pool", "pool_override"], ["ti", "pool", "task", "pool"], ["ti", "pool_slots", "task", "pool_slots"], ["ti", "priority_weight", "task", "priority_weight_total"], ["ti", "run_as_user", "task", "run_as_user"], ["ti", "max_tries", "task", "retries"], ["ti", "executor_config", "task", "executor_config"], ["ti", "operator", "EmptyOperator", "__name__"], ["ti", "max_tries", "expected_max_tries"], ["ti", "refresh_from_task", "task"], ["ti", "max_tries", "expected_max_tries"]]}, "name": "test_refresh_from_task", "params": {"pool_override": ""}, "params_descr": {"pool_override": ""}, "params_occur": {"pool_override": [["ti", "refresh_from_task", "task", "pool_override", "pool_override"], ["ti", "pool", "pool_override"]]}, "params_p": {"args": [], "kwargs": [], "pool_override": []}, "q_name": "test_refresh_from_task", "ret_exprs": [], "ret_type": "", "variables": {"expected_max_tries": "", "max_tries": "", "task": "", "ti": ""}, "variables_p": {"expected_max_tries": [["Type[tuple]", 0.1483395586940506], ["List[int]", 0.10705561668557427], ["list", 0.08862931469415047], ["mock.MagicMock", 0.08038351482279038], ["List[float]", 0.07596511111000796]], "max_tries": [["Counter[Any]", 0.20826599230228757], ["int", 0.12224643667644158], ["str", 0.09976293336135178], ["dict", 0.09765106011377574], ["Tuple[Literal, Literal, Literal]", 0.08839810203099221]], "task": [["str", 0.18828042235150236], ["List[Dict[str, Any]]", 0.10329496566586915], ["Dict[str, str]", 0.0972427067371493], ["dict", 0.09466735966568914], ["Dict[str, Any]", 0.09435588040342667]], "ti": [["dict", 0.19771873598685802], ["list", 0.09873765154141385], ["Coroutine[Any, Any, None]", 0.09234678210921395], ["Optional[int]", 0.09162723233095305], ["str", 0.09162723233095305]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3261, 4], [3262, 34]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "timeout", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_sensor_timeout.<locals>.timeout", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that AirflowSensorTimeout does not cause sensor to retry.", "long_descr": null, "ret": null}, "fn_lc": [[3256, 0], [3279, 35]], "fn_var_ln": {"mock_on_failure": [[3264, 4], [3264, 19]], "ti": [[3273, 4], [3273, 6]]}, "fn_var_occur": {"mock_on_failure": [["mock_on_failure", "mock", "MagicMock"], ["PythonSensor", "task_id", "python_callable", "timeout", "on_failure_callback", "mock_on_failure", "retries", "retries", "mode", "mode"], ["mock_on_failure", "called"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "run"], ["ti", "state", "State", "FAILED"]]}, "name": "test_sensor_timeout", "params": {"dag_maker": "", "mode": "", "retries": ""}, "params_descr": {"dag_maker": "", "mode": "", "retries": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "mode", "retries"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "mode": [["dag_maker", "dag_id", "mode", "retries"], ["PythonSensor", "task_id", "python_callable", "timeout", "on_failure_callback", "mock_on_failure", "retries", "retries", "mode", "mode"]], "retries": [["dag_maker", "dag_id", "mode", "retries"], ["PythonSensor", "task_id", "python_callable", "timeout", "on_failure_callback", "mock_on_failure", "retries", "retries", "mode", "mode"]]}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.10659609810326787], ["raiden.utils.TokenNetworkAddress", 0.09997811366440765], ["str", 0.09830849374781506], ["Callable", 0.09330924195634965]], "kwargs": [], "mode": [["int", 0.21525393425285033], ["qcodes.datasesqlite.connection.ConnectionPlus", 0.21525393425285033], ["str", 0.18915431005588734], ["cmk.utils.type_defs.UserId", 0.09606712046516298]], "retries": [["int", 0.21525393425285033], ["qcodes.datasesqlite.connection.ConnectionPlus", 0.21525393425285033], ["str", 0.18915431005588734], ["cmk.utils.type_defs.UserId", 0.09606712046516298]]}, "q_name": "test_sensor_timeout", "ret_exprs": [], "ret_type": "", "variables": {"mock_on_failure": "", "ti": ""}, "variables_p": {"mock_on_failure": [], "ti": [["str", 0.605313646272036], ["List[str]", 0.0942111581272724]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3289, 4], [3290, 34]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "timeout", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_sensor_timeout.<locals>.timeout", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that AirflowSensorTimeout does not cause mapped sensor to retry.", "long_descr": null, "ret": null}, "fn_lc": [[3284, 0], [3306, 35]], "fn_var_ln": {"mock_on_failure": [[3292, 4], [3292, 19]], "ti": [[3300, 4], [3300, 6]]}, "fn_var_occur": {"mock_on_failure": [["mock_on_failure", "mock", "MagicMock"], ["PythonSensor", "partial", "task_id", "python_callable", "timeout", "on_failure_callback", "mock_on_failure", "retries", "retries", "expand", "mode", "mode"], ["mock_on_failure", "called"]], "ti": [["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"], ["ti", "run"], ["ti", "state", "State", "FAILED"]]}, "name": "test_mapped_sensor_timeout", "params": {"dag_maker": "", "mode": "", "retries": ""}, "params_descr": {"dag_maker": "", "mode": "", "retries": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "mode", "retries"], ["ti", "dag_maker", "create_dagrun", "execution_date", "timezone", "utcnow", "task_instances"]], "mode": [["dag_maker", "dag_id", "mode", "retries"], ["PythonSensor", "partial", "task_id", "python_callable", "timeout", "on_failure_callback", "mock_on_failure", "retries", "retries", "expand", "mode", "mode"]], "retries": [["dag_maker", "dag_id", "mode", "retries"], ["PythonSensor", "partial", "task_id", "python_callable", "timeout", "on_failure_callback", "mock_on_failure", "retries", "retries", "expand", "mode", "mode"]]}, "params_p": {"args": [], "dag_maker": [["raiden.utils.TokenAmount", 0.19550348933891135], ["Callable", 0.1900930265288716], ["raiden.utils.TokenNetworkAddress", 0.10689404730145538], ["raiden.utils.SecreHash", 0.10490869472501302], ["raiden.utils.BlockIdentifier", 0.09972235181677762], ["str", 0.09917196613693456]], "kwargs": [], "mode": [["int", 0.1182391282433482], ["qcodes.datasesqlite.connection.ConnectionPlus", 0.1182391282433482], ["cmk.utils.type_defs.UserId", 0.09437076507328147], ["megatron.models.MegatronChannel", 0.08935224921231827]], "retries": [["int", 0.1182391282433482], ["qcodes.datasesqlite.connection.ConnectionPlus", 0.1182391282433482], ["cmk.utils.type_defs.UserId", 0.09437076507328147], ["megatron.models.MegatronChannel", 0.08935224921231827]]}, "q_name": "test_mapped_sensor_timeout", "ret_exprs": [], "ret_type": "", "variables": {"mock_on_failure": "", "ti": ""}, "variables_p": {"mock_on_failure": [["mock.Mock", 0.2932938329784339]], "ti": [["str", 0.605313646272036], ["List[str]", 0.0942111581272724]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3316, 4], [3317, 16]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "timeout", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": []}, "params_p": {"args": [], "kwargs": [], "ti": [["Callable[[], T]", 0.9999999899680165], ["str", 1.9176237222215034e-09], ["bool", 1.030138833402637e-09], ["List[Dict[int, float]]", 9.807301028175449e-10]]}, "q_name": "test_mapped_sensor_works.<locals>.timeout", "ret_exprs": ["return 1"], "ret_type": "", "ret_type_p": [["int", 0.9999999952599057], ["str", 1.7562307955281442e-09], ["Union[str, int, float]", 6.132382898817616e-10]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that mapped sensors reaches success state.", "long_descr": null, "ret": null}, "fn_lc": [[3311, 0], [3328, 36]], "fn_var_ln": {"ti": [[3325, 4], [3325, 6]]}, "fn_var_occur": {"ti": [["ti", "dag_maker", "create_dagrun", "task_instances"], ["ti", "run"], ["ti", "state", "State", "SUCCESS"]]}, "name": "test_mapped_sensor_works", "params": {"dag_maker": "", "mode": "", "retries": ""}, "params_descr": {"dag_maker": "", "mode": "", "retries": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "mode", "retries"], ["ti", "dag_maker", "create_dagrun", "task_instances"]], "mode": [["dag_maker", "dag_id", "mode", "retries"], ["PythonSensor", "partial", "task_id", "python_callable", "timeout", "retries", "retries", "expand", "mode", "mode"]], "retries": [["dag_maker", "dag_id", "mode", "retries"], ["PythonSensor", "partial", "task_id", "python_callable", "timeout", "retries", "retries", "expand", "mode", "mode"]]}, "params_p": {"args": [], "dag_maker": [["int", 0.8143037137924485], ["raiden.utils.SecreHash", 0.09468356644680206]], "kwargs": [], "mode": [["int", 0.21518373889906928], ["str", 0.18022050814962004], ["qcodes.datasesqlite.connection.ConnectionPlus", 0.11577007804854837], ["megatron.models.MegatronChannel", 0.10545149713397596], ["cmk.utils.type_defs.UserId", 0.10025949414080924]], "retries": [["int", 0.21518373889906928], ["str", 0.18022050814962004], ["qcodes.datasesqlite.connection.ConnectionPlus", 0.11577007804854837], ["megatron.models.MegatronChannel", 0.10545149713397596], ["cmk.utils.type_defs.UserId", 0.10025949414080924]]}, "q_name": "test_mapped_sensor_works", "ret_exprs": [], "ret_type": "", "variables": {"ti": ""}, "variables_p": {"ti": [["str", 0.6245520543108742], ["float", 0.2847162110252595]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[3974, 0], [4005, 58]], "fn_var_ln": {"backend": [[3975, 4], [3975, 11]]}, "fn_var_occur": {"backend": [["backend", "os", "environ", "get"], ["RuntimeError", "backend"]]}, "name": "_get_lazy_xcom_access_expected_sql_lines", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "_get_lazy_xcom_access_expected_sql_lines", "ret_exprs": ["return [ \"SELECT xcom.value\", \"FROM xcom\", \"WHERE xcom.dag_id = 'test_dag' AND xcom.run_id = 'test' \" \"AND xcom.task_id = 't' AND xcom.map_index = -1 AND xcom.[key] = 'xxx'\",]", "return [ \"SELECT xcom.value\", \"FROM xcom\", \"WHERE xcom.dag_id = 'test_dag' AND xcom.run_id = 'test' \" \"AND xcom.task_id = 't' AND xcom.map_index = -1 AND xcom.`key` = 'xxx'\",]", "return [ \"SELECT xcom.value\", \"FROM xcom\", \"WHERE xcom.dag_id = 'test_dag' AND xcom.run_id = 'test' \" \"AND xcom.task_id = 't' AND xcom.map_index = -1 AND xcom.key = 'xxx'\",]", "return [ \"SELECT xcom.value\", \"FROM xcom\", \"WHERE xcom.dag_id = 'test_dag' AND xcom.run_id = 'test' \" \"AND xcom.task_id = 't' AND xcom.map_index = -1 AND xcom.\"key\" = 'xxx'\",]"], "ret_type": "builtins.list[builtins.str]", "ret_type_p": [["str", 0.22955536327944062], ["salon.models.Stylist", 0.11329279568782384], ["Union[fonduer.candidates.models.Candidate, fonduer.candidates.models.Mention, fonduer.candidates.models.span_mention.TemporarySpanMention]", 0.10413549428594666]], "variables": {"backend": ""}, "variables_p": {"backend": [["str", 0.5963840306533625], ["List[str]", 0.09504910499128734]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4008, 0], [4032, 35]], "fn_var_ln": {"original": [[4023, 4], [4023, 12]], "processed": [[4024, 4], [4024, 13]], "query": [[4015, 4], [4015, 9]], "run": [[4012, 4], [4012, 7]], "sql_lines": [[4028, 4], [4028, 13]]}, "fn_var_occur": {"original": [["original", "LazyXComAccess", "build_from_xcom_query", "query"], ["processed", "pickle", "loads", "pickle", "dumps", "original"]], "processed": [["processed", "pickle", "loads", "pickle", "dumps", "original"], ["sql_lines", "line", "strip", "line", "str", "processed", "_query", "statement", "compile", "None", "splitlines"], ["len", "processed"], ["list", "processed"]], "query": [["query", "session", "query", "XCom", "value", "filter_by", "dag_id", "run", "dag_id", "run_id", "run", "run_id", "task_id", "map_index", "key"], ["original", "LazyXComAccess", "build_from_xcom_query", "query"]], "run": [["run", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun"], ["run", "get_task_instance", "session", "session", "xcom_push", "session", "session"], ["query", "session", "query", "XCom", "value", "filter_by", "dag_id", "run", "dag_id", "run_id", "run", "run_id", "task_id", "map_index", "key"]], "sql_lines": [["sql_lines", "line", "strip", "line", "str", "processed", "_query", "statement", "compile", "None", "splitlines"], ["sql_lines", "_get_lazy_xcom_access_expected_sql_lines"]]}, "name": "test_lazy_xcom_access_does_not_pickle_session", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "session", "session"], ["run", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun"]], "session": [["dag_maker", "session", "session"], ["run", "get_task_instance", "session", "session", "xcom_push", "session", "session"], ["query", "session", "query", "XCom", "value", "filter_by", "dag_id", "run", "dag_id", "run_id", "run", "run_id", "task_id", "map_index", "key"]]}, "params_p": {"args": [], "dag_maker": [["authentication.session.models.current_user.CurrentUser", 0.12306326670767688], ["float", 0.10483082222847351], ["server.models.bike.Bike", 0.10483082222847351], ["server.models.Rental", 0.10483082222847351], ["zerver.models.UserProfile", 0.0943337580418965], ["zerver.models.UserGroup", 0.0936035356970639], ["List[zerver.models.UserProfile]", 0.0936035356970639], ["django.conf.settings.AUTH_USER_MODEL", 0.09197327733755516]], "kwargs": [], "session": [["Dict[str, Any]", 0.20450771907096302], ["str", 0.09832037337336734]]}, "q_name": "test_lazy_xcom_access_does_not_pickle_session", "ret_exprs": [], "ret_type": "", "variables": {"original": "", "processed": "", "query": "", "run": "airflow.models.dagrun.DagRun", "sql_lines": ""}, "variables_p": {"original": [["dict", 0.2058861329320983], ["List[bool]", 0.10971225379322208]], "processed": [["Tuple[int, int, int]", 0.4166849889418094], ["list", 0.1999164531239278], ["Tuple[Any, int]", 0.09277939605942062]], "query": [["str", 0.5288395171509743], ["cmk.base.api.agent_based.checking_classes.state", 0.11720002445465282], ["ClassVar[str]", 0.10474623160235944], ["taxonomy.db.models.base.EnumField", 0.08282495630024264], ["Set[str]", 0.08017362469293592]], "run": [["ultron8.api.models.packs.PacksCreate", 0.8976196459300174], ["cards.models.Deck", 0.10238035406998276]], "sql_lines": [["str", 0.37544528221783524], ["list", 0.3661583770029812], ["List[str]", 0.0880863267858195], ["Tuple[str, str, str, str, str]", 0.08520330015440729], ["List[Union[Any, str]]", 0.0851067138389568]]}}, {"docstring": {"func": "Ensure we access XCom lazily when pulling from a mapped operator.", "long_descr": null, "ret": null}, "fn_lc": [[4036, 0], [4068, 16]], "fn_var_ln": {"dagrun": [[4044, 4], [4044, 10]], "it": [[4062, 4], [4062, 6]], "joined": [[4057, 4], [4057, 10]], "map_index": [[4047, 4], [4047, 20]], "task_1": [[4041, 8], [4041, 14]], "ti_1_0": [[4046, 4], [4046, 10]], "ti_1_1": [[4048, 4], [4048, 10]], "ti_2": [[4054, 4], [4054, 8]]}, "fn_var_occur": {"dagrun": [["dagrun", "dag_maker", "create_dagrun"], ["ti_1_0", "dagrun", "get_task_instance", "session", "session"], ["ti_1_1", "session", "merge", "TaskInstance", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["ti_2", "dagrun", "get_task_instance", "session", "session"]], "it": [["it", "iter", "joined"], ["next", "it"], ["next", "it"], ["next", "it"]], "joined": [["joined", "ti_2", "xcom_pull", "session", "session"], ["isinstance", "joined", "LazyXComAccess"], ["it", "iter", "joined"]], "map_index": [["ti_1_0", "map_index"], ["ti_1_1", "session", "merge", "TaskInstance", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"]], "task_1": [["task_1", "EmptyOperator", "partial", "task_id", "_expand", "EXPAND_INPUT_EMPTY", "strict", "False"], ["ti_1_1", "session", "merge", "TaskInstance", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"]], "ti_1_0": [["ti_1_0", "dagrun", "get_task_instance", "session", "session"], ["ti_1_0", "map_index"], ["ti_1_1", "session", "merge", "TaskInstance", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["ti_1_0", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"]], "ti_1_1": [["ti_1_1", "session", "merge", "TaskInstance", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["ti_1_1", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"]], "ti_2": [["ti_2", "dagrun", "get_task_instance", "session", "session"], ["joined", "ti_2", "xcom_pull", "session", "session"]]}, "name": "test_ti_xcom_pull_on_mapped_operator_return_lazy_iterable", "params": {"dag_maker": "", "mock_deserialize_value": "", "session": ""}, "params_descr": {"dag_maker": "", "mock_deserialize_value": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "session", "session"], ["dagrun", "dag_maker", "create_dagrun"]], "mock_deserialize_value": [["mock_deserialize_value", "call_count"], ["mock_deserialize_value", "call_count"], ["mock_deserialize_value", "call_count"]], "session": [["dag_maker", "dag_id", "session", "session"], ["ti_1_0", "dagrun", "get_task_instance", "session", "session"], ["ti_1_1", "session", "merge", "TaskInstance", "task_1", "run_id", "dagrun", "run_id", "map_index", "state", "ti_1_0", "state"], ["session", "flush"], ["ti_1_0", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"], ["ti_1_1", "xcom_push", "key", "XCOM_RETURN_KEY", "value", "session", "session"], ["ti_2", "dagrun", "get_task_instance", "session", "session"], ["joined", "ti_2", "xcom_pull", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["asgard.backends.base.Interval", 0.17041714235706437], ["Iterator[Tuple[hermes.types.UserType, hermes.types.EmailAddressType]]", 0.1326111042198744], ["zerver.models.UserProfile", 0.1015369889357984], ["asgard.models.accounAccount", 0.08631556090915284]], "kwargs": [], "mock_deserialize_value": [], "session": [["aiohttp.test_utils.TestClient", 0.19131293763985152], ["core.models.Recipe", 0.09734682578412084]]}, "q_name": "test_ti_xcom_pull_on_mapped_operator_return_lazy_iterable", "ret_exprs": [], "ret_type": "", "variables": {"dagrun": "", "it": "", "joined": "", "map_index": "", "task_1": "", "ti_1_0": "", "ti_1_1": "", "ti_2": ""}, "variables_p": {"dagrun": [["str", 0.2989034470023246], ["Dict[str, int]", 0.10822541255428952], ["pydynasync.models.Changes", 0.10102379276742122], ["list", 0.1000230505825367], ["List[str]", 0.09963330088755402], ["bool", 0.09665878957899424], ["raiden.utils.Any", 0.09442828883168738]], "it": [["str", 0.5494678460620419], ["Pattern[str]", 0.2106276124556688], ["list", 0.12823445941963602], ["float", 0.11167008206265341]], "joined": [["float", 0.1815548448405142], ["golem.rpc.session.Publisher", 0.09226938456284232], ["List[str]", 0.08861577785430884], ["zam_repondeur.services.fetch.an.dossiers.models.DossierRefsByUID", 0.08306786943962867], ["lms.lmsdb.models.Solution", 0.08044937210516817]], "map_index": [["str", 0.421542983324397], ["geode.models.common.Address", 0.13000657943754057], ["int", 0.07324150598093185]], "task_1": [["apps.core.task.coretaskstate.TaskDefinition", 0.18164210745699866], ["golem.task.task_api.EnvironmentTaskApiService", 0.1361041911050138], ["List[str]", 0.08471640390221295]], "ti_1_0": [["str", 0.1924519497264107], ["golem.rpc.session.WebSocketAddress", 0.17190414761997252], ["float", 0.08610389090567493], ["dict", 0.08433393969281167]], "ti_1_1": [["str", 0.6818171633958061], ["Dict[str, List[Any]]", 0.08781004465863247], ["List[int]", 0.08749471718359289], ["Dict[str, str]", 0.07076467240112314]], "ti_2": [["List[Tuple[str, int]]", 0.19112981211596586], ["Optional[str]", 0.12492938630922064], ["golem.rpc.session.Publisher", 0.100827779334694], ["str", 0.09197584104576453], ["dss.config.Replica", 0.09046492030021373]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4075, 8], [4076, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "add_one", "params": {"x": ""}, "params_descr": {"x": ""}, "params_occur": {"x": []}, "params_p": {"args": [], "kwargs": [], "x": [["int", 0.3333333328258782], ["str", 6.751157746379811e-10], ["bool", 2.752968205886354e-10], ["List[float]", 1.349327981317805e-10]]}, "q_name": "test_ti_mapped_depends_on_mapped_xcom_arg.<locals>.add_one", "ret_exprs": ["return x + 1"], "ret_type": "", "ret_type_p": [["str", 0.2322548068461218], ["int", 0.08605762079031587]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4071, 0], [4093, 88]], "fn_var_ln": {"dagrun": [[4081, 4], [4081, 10]], "query": [[4092, 4], [4092, 9]], "task_345": [[4087, 4], [4087, 12]], "ti": [[4083, 8], [4083, 10]], "two_three_four": [[4078, 8], [4078, 22]]}, "fn_var_occur": {"dagrun": [["dagrun", "dag_maker", "create_dagrun"], ["ti", "dagrun", "get_task_instance", "map_index", "map_index", "session", "session"], ["task_345", "expand_mapped_task", "dagrun", "run_id", "session", "session"], ["query", "XCom", "get_many", "run_id", "dagrun", "run_id", "task_ids", "session", "session"]], "query": [["query", "XCom", "get_many", "run_id", "dagrun", "run_id", "task_ids", "session", "session"], ["x", "value", "x", "query", "order_by", "None", "order_by", "XCom", "map_index"]], "task_345": [["task_345", "dag", "get_task"], ["task_345", "expand_mapped_task", "dagrun", "run_id", "session", "session"], ["ti", "refresh_from_task", "task_345"]], "ti": [["ti", "dagrun", "get_task_instance", "map_index", "map_index", "session", "session"], ["ti", "refresh_from_task", "dag", "get_task"], ["ti", "run"], ["ti", "refresh_from_task", "task_345"], ["ti", "run"]], "two_three_four": [["two_three_four", "add_one", "expand", "x"], ["add_one", "expand", "x", "two_three_four"]]}, "name": "test_ti_mapped_depends_on_mapped_xcom_arg", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dagrun", "dag_maker", "create_dagrun"]], "session": [["ti", "dagrun", "get_task_instance", "map_index", "map_index", "session", "session"], ["task_345", "expand_mapped_task", "dagrun", "run_id", "session", "session"], ["query", "XCom", "get_many", "run_id", "dagrun", "run_id", "task_ids", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.2161085190582345], ["Callable", 0.12505192270684898], ["Optional[str]", 0.11675293415874614], ["List[Dict[str, str]]", 0.09560568682739677]], "kwargs": [], "session": [["django.conf.settings.AUTH_USER_MODEL", 0.09186966421401851], ["Iterator[Tuple[hermes.types.UserType, hermes.types.EmailAddressType]]", 0.08921668488900736]]}, "q_name": "test_ti_mapped_depends_on_mapped_xcom_arg", "ret_exprs": [], "ret_type": "", "variables": {"dagrun": "", "query": "", "task_345": "", "ti": "", "two_three_four": ""}, "variables_p": {"dagrun": [["dict", 0.122581439452886], ["float", 0.0861419460721262]], "query": [["str", 0.21191153012142014], ["List[str]", 0.10476666078789319], ["Dict[int, str]", 0.09993049747261988], ["dict", 0.0982665947944161], ["Dict[str, Union[Any, Any, Any, Any]]", 0.09544570157011606]], "task_345": [["golem.task.taskbase.Task", 0.3867645216832912], ["apps.core.task.coretaskstate.TaskDefinition", 0.17391794892377427]], "ti": [["golem.rpc.session.WebSocketAddress", 0.125047259320965], ["Optional[str]", 0.1105959024084304], ["golem.task.taskkeeper.TaskHeaderKeeper", 0.09315804644521695], ["golem.rpc.session.Publisher", 0.08893914672570187], ["str", 0.08716283724351201]], "two_three_four": [["myia.utils.unify.UnionVar", 0.09566118788538357]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4102, 8], [4105, 24]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "transform", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": []}, "params_p": {"args": [], "kwargs": [], "value": [["ics.types.ContextDict", 0.2], ["ics.types.ExtraParams", 0.2], ["ics.types.DatetimeLike", 0.1], ["int", 0.1], ["Tuple[str, int]", 0.1], ["complex", 0.1], ["list", 0.1]]}, "q_name": "test_mapped_upstream_return_none_should_skip.<locals>.transform", "ret_exprs": ["return None", "return value"], "ret_type": "", "ret_type_p": [["Optional[str]", 0.48061423911524004], ["bool", 0.22983493282887243], ["Optional[float]", 0.09884796722722393], ["str", 0.09507620493381937]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4108, 8], [4109, 30]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "pull", "params": {"value": ""}, "params_descr": {"value": ""}, "params_occur": {"value": [["results", "add", "value"]]}, "params_p": {"args": [], "kwargs": [], "value": [["str", 0.8963319413321209], ["Pattern[str]", 0.10366805866787905]]}, "q_name": "test_mapped_upstream_return_none_should_skip.<locals>.pull", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4096, 0], [4129, 32]], "fn_var_ln": {"decision": [[4123, 4], [4123, 12]], "dr": [[4115, 4], [4115, 6]], "original": [[4111, 8], [4111, 16]], "results": [[4097, 4], [4097, 11]], "tis": [[4124, 4], [4124, 7]], "transformed": [[4112, 8], [4112, 19]]}, "fn_var_occur": {"decision": [["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["tis", "ti", "task_id", "ti", "map_index", "ti", "ti", "decision", "schedulable_tis"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["tis", "ti", "task_id", "ti", "map_index", "ti", "ti", "decision", "schedulable_tis"]], "dr": [["dr", "dag_maker", "create_dagrun"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"]], "original": [["transformed", "transform", "expand", "value", "original"]], "results": [], "tis": [["tis", "ti", "task_id", "ti", "map_index", "ti", "ti", "decision", "schedulable_tis"], ["sorted", "tis"], ["tis", "values"], ["tis", "ti", "task_id", "ti", "map_index", "ti", "ti", "decision", "schedulable_tis"], ["sorted", "tis"], ["tis", "values"]], "transformed": [["transformed", "transform", "expand", "value", "original"], ["pull", "expand", "value", "transformed"]]}, "name": "test_mapped_upstream_return_none_should_skip", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "session": [["decision", "dr", "task_instance_scheduling_decisions", "session", "session"], ["decision", "dr", "task_instance_scheduling_decisions", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["Optional[str]", 0.19182410308103154], ["bool", 0.17630424777881812], ["str", 0.09500155106072246], ["Optional[pathlib.Path]", 0.0855708246336426]], "kwargs": [], "session": [["zerver.models.UserProfile", 0.3907072303525328], ["int", 0.08775805615408405]]}, "q_name": "test_mapped_upstream_return_none_should_skip", "ret_exprs": [], "ret_type": "", "variables": {"decision": "", "dr": "", "original": "", "results": "", "tis": "", "transformed": ""}, "variables_p": {"decision": [["int", 0.2630692704323446], ["str", 0.09865670622844441], ["app.models.Tweet", 0.09525876934602802], ["list", 0.09310818512961519], ["List[dict]", 0.09137315702622018], ["buza.models.Subject", 0.09019787706305675]], "dr": [["str", 0.5791964425917764], ["Dict[int, Dict[str, Any]]", 0.21837569234653836]], "original": [["Pattern[str]", 0.8999999999999999], ["Counter[str]", 0.09999999999999999]], "results": [["list", 0.19999999999999998], ["Generator[Any, None, None]", 0.09999999999999999], ["List[None]", 0.09999999999999999], ["int", 0.09999999999999999], ["Dict[str, str]", 0.09999999999999999], ["str", 0.09999999999999999]], "tis": [["dict", 0.5885784473974038], ["str", 0.11166686601909935], ["List[tuple]", 0.11130256654731951], ["Dict[int, object]", 0.10812280150847256], ["Dict[str, int]", 0.08032931852770472]], "transformed": [["int", 0.19011466842602276], ["Tuple[int, int]", 0.10172997405266168], ["dict", 0.10162454636937332]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4141, 8], [4142, 51]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "get_extra_env", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_expand_non_templated_field.<locals>.get_extra_env", "ret_exprs": ["return [{\"foo\": \"bar\"}, {\"foo\": \"biz\"}]"], "ret_type": "", "ret_type_p": [["str", 0.49795883293511756], ["int", 0.20987516746770934], ["List[str]", 0.09765021670594297], ["bool", 0.09725789144561504], ["pricemonitor.config.Coin", 0.09725789144561504]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test expand on non-templated fields sets upstream deps properly.", "long_descr": null, "ret": null}, "fn_lc": [[4132, 0], [4149, 57]], "fn_var_ln": {"echo_task": [[4148, 4], [4148, 13]], "template_fields": [[4136, 8], [4136, 23]]}, "fn_var_occur": {"echo_task": [["echo_task", "dag", "get_task"], ["echo_task", "upstream_task_ids"]], "template_fields": []}, "name": "test_expand_non_templated_field", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "create_dagrun"]], "session": []}, "params_p": {"args": [], "dag_maker": [["str", 0.23049289142766907], ["Optional[str]", 0.1346553650253384], ["raiden.utils.List[raiden.utils.Address]", 0.13359041608159491], ["dict", 0.10270738186361672], ["pathlib.Path", 0.08220839237470687]], "kwargs": [], "session": [["bool", 0.2798862133680773]]}, "q_name": "test_expand_non_templated_field", "ret_exprs": [], "ret_type": "", "variables": {"echo_task": "", "template_fields": ""}, "variables_p": {"echo_task": [["golem.task.taskbase.Task", 0.2088587093045265], ["list", 0.12505118092986334], ["dict", 0.10131156262285052], ["List[str]", 0.09091473181852781], ["Dict[str, Dict[str, int]]", 0.09068023208016662], ["Dict[str, Any]", 0.08767103116244046], ["str", 0.07738734295168585]], "template_fields": [["Tuple[str, str, str, str, str, str]", 0.2857142856828355], ["Tuple[str, str, str]", 0.2857142856828355], ["Tuple[str, str, str, str]", 0.2857142856828355], ["Tuple[str, str, str, str, str]", 0.14285714284141776], ["Dict[str, str]", 7.42502725571635e-11]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4161, 8], [4162, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "second_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_task_does_not_error_in_mini_scheduler_if_upstreams_are_not_done.<locals>.second_task", "ret_exprs": ["return [0, 1, 2]"], "ret_type": "", "ret_type_p": [["str", 0.3112861806675614], ["bytes", 0.11946070067861228], ["bool", 0.0924205507939282], ["int", 0.08850011574520827], ["pathlib.Path", 0.0858346973038517]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4165, 8], [4166, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "first_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_task_does_not_error_in_mini_scheduler_if_upstreams_are_not_done.<locals>.first_task", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4169, 8], [4170, 21]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "middle_task", "params": {"id": ""}, "params_descr": {"id": ""}, "params_occur": {"id": []}, "params_p": {"args": [], "id": [["str", 0.3806206742452449], ["utils.types.Id", 0.1881488413141019], ["bool", 0.08591503437613499], ["Optional[float]", 0.08591503437613499], ["float", 0.08591503437613499], ["Union[int, str]", 0.08591503437613499]], "kwargs": []}, "q_name": "test_mapped_task_does_not_error_in_mini_scheduler_if_upstreams_are_not_done.<locals>.middle_task", "ret_exprs": ["return id"], "ret_type": "", "ret_type_p": [["int", 0.34910100162290336], ["str", 0.23102297495394114], ["Union[str, int]", 0.07467305326009976]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4175, 8], [4176, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "last_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_task_does_not_error_in_mini_scheduler_if_upstreams_are_not_done.<locals>.last_task", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "This tests that when scheduling child tasks of a task and there's a mapped downstream task,", "long_descr": "if the mapped downstream task has upstreams that are not yet done, the mapped downstream task is\nnot marked as `upstream_failed'", "ret": null}, "fn_lc": [[4152, 0], [4191, 80]], "fn_var_ln": {"dag_run": [[4180, 4], [4180, 11]], "first_ti": [[4181, 4], [4181, 12]], "middle": [[4172, 8], [4172, 14]], "middle_ti": [[4189, 4], [4189, 13]], "second_ti": [[4182, 4], [4182, 13]], "state": [[4184, 4], [4184, 19]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["first_ti", "dag_run", "get_task_instance", "task_id"], ["second_ti", "dag_run", "get_task_instance", "task_id"], ["middle_ti", "dag_run", "get_task_instance", "task_id"]], "first_ti": [["first_ti", "dag_run", "get_task_instance", "task_id"], ["first_ti", "state", "State", "SUCCESS"], ["session", "merge", "first_ti"], ["first_ti", "schedule_downstream_tasks", "session", "session"]], "middle": [["first_task", "middle", "last_task"]], "middle_ti": [["middle_ti", "dag_run", "get_task_instance", "task_id"], ["middle_ti", "state", "State", "UPSTREAM_FAILED"]], "second_ti": [["second_ti", "dag_run", "get_task_instance", "task_id"], ["second_ti", "state", "State", "RUNNING"], ["session", "merge", "second_ti"]], "state": [["first_ti", "state", "State", "SUCCESS"], ["second_ti", "state", "State", "RUNNING"], ["middle_ti", "state", "State", "UPSTREAM_FAILED"]]}, "name": "test_mapped_task_does_not_error_in_mini_scheduler_if_upstreams_are_not_done", "params": {"caplog": "", "dag_maker": "", "session": ""}, "params_descr": {"caplog": "", "dag_maker": "", "session": ""}, "params_occur": {"caplog": [["caplog", "text"]], "dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "session": [["session", "merge", "first_ti"], ["session", "merge", "second_ti"], ["session", "commit"], ["first_ti", "schedule_downstream_tasks", "session", "session"]]}, "params_p": {"args": [], "caplog": [["str", 0.9107635263510843]], "dag_maker": [["List[List[Any]]", 0.1321324130911269], ["str", 0.09533218896702247], ["int", 0.09178215889343626]], "kwargs": [], "session": [["str", 0.19439832858056502], ["zerver.models.UserProfile", 0.19272063709726392], ["int", 0.11389879736705157], ["deeplearning.ml4pl.models.logger.Logger", 0.09457919957880348], ["dict", 0.09095574739144736]]}, "q_name": "test_mapped_task_does_not_error_in_mini_scheduler_if_upstreams_are_not_done", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "first_ti": "", "middle": "", "middle_ti": "", "second_ti": "", "state": ""}, "variables_p": {"dag_run": [["bytes", 0.20735146036953864], ["int", 0.19847444451267363], ["str", 0.19016767038951132], ["List[str]", 0.11356314276662197], ["dict", 0.09508383519475566], ["raiden_contracts.utils.type_aliases.TokenAmount", 0.08867647890194472]], "first_ti": [["zerver.models.Realm", 0.1511576165463662], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.11412006080867591], ["str", 0.09681448705764303], ["geode.models.common.Address", 0.09665432399854003], ["raiden.utils.TargetAddress", 0.0939923446623572]], "middle": [["str", 0.33650086762648723], ["int", 0.1901281440416237], ["float", 0.09996675490756284], ["list", 0.09727855764124098]], "middle_ti": [["str", 0.5871969160544229], ["Dict[str, str]", 0.12129501772145898], ["geode.models.common.Address", 0.10555023971229109], ["raiden.utils.PaymentID", 0.09989867517787931]], "second_ti": [["zerver.models.Realm", 0.16829542888987367], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.10064685512695297], ["geode.models.common.Address", 0.09954434075803062], ["str", 0.09751548758090156], ["raiden.utils.TargetAddress", 0.09369618921065388]], "state": [["List[str]", 0.19011901418006738], ["str", 0.07248773706127958]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4203, 8], [4204, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "first_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_empty_operator_is_not_considered_in_mini_scheduler.<locals>.first_task", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4207, 8], [4208, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "second_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_empty_operator_is_not_considered_in_mini_scheduler.<locals>.second_task", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "This tests verify that operators with inherits_from_empty_operator are not considered by mini scheduler.", "long_descr": "Such operators should not run on workers thus the mini scheduler optimization should skip them and not\nsubmit them directly to worker.", "ret": null}, "fn_lc": [[4194, 0], [4235, 84]], "fn_var_ln": {"dag_run": [[4214, 8], [4214, 15]], "first_ti": [[4215, 8], [4215, 16]], "forth_task": [[4231, 8], [4231, 18]], "forth_ti": [[4218, 8], [4218, 16]], "second_task": [[4229, 8], [4229, 19]], "second_ti": [[4216, 8], [4216, 17]], "state": [[4222, 8], [4222, 22]], "third_task": [[4230, 8], [4230, 18]], "third_ti": [[4217, 8], [4217, 16]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["first_ti", "dag_run", "get_task_instance", "task_id"], ["second_ti", "dag_run", "get_task_instance", "task_id"], ["third_ti", "dag_run", "get_task_instance", "task_id"], ["forth_ti", "dag_run", "get_task_instance", "task_id"], ["second_task", "dag_run", "get_task_instance", "task_id"], ["third_task", "dag_run", "get_task_instance", "task_id"], ["forth_task", "dag_run", "get_task_instance", "task_id"]], "first_ti": [["first_ti", "dag_run", "get_task_instance", "task_id"], ["first_ti", "state", "State", "SUCCESS"], ["session", "merge", "first_ti"], ["first_ti", "schedule_downstream_tasks", "session", "session"]], "forth_task": [["forth_task", "EmptyOperator", "task_id", "on_success_callback", "x", "print"], ["first_task", "second_task", "third_task", "forth_task"], ["forth_task", "dag_run", "get_task_instance", "task_id"], ["forth_task", "state", "State", "SCHEDULED"]], "forth_ti": [["forth_ti", "dag_run", "get_task_instance", "task_id"], ["forth_ti", "state", "State", "NONE"], ["session", "merge", "forth_ti"]], "second_task": [["first_task", "second_task", "third_task", "forth_task"], ["second_task", "dag_run", "get_task_instance", "task_id"], ["second_task", "state", "State", "SCHEDULED"]], "second_ti": [["second_ti", "dag_run", "get_task_instance", "task_id"], ["second_ti", "state", "State", "NONE"], ["session", "merge", "second_ti"]], "state": [["first_ti", "state", "State", "SUCCESS"], ["second_ti", "state", "State", "NONE"], ["third_ti", "state", "State", "NONE"], ["forth_ti", "state", "State", "NONE"], ["second_task", "state", "State", "SCHEDULED"], ["third_task", "state", "State", "NONE"], ["forth_task", "state", "State", "SCHEDULED"]], "third_task": [["third_task", "EmptyOperator", "task_id"], ["first_task", "second_task", "third_task", "forth_task"], ["third_task", "dag_run", "get_task_instance", "task_id"], ["third_task", "state", "State", "NONE"]], "third_ti": [["third_ti", "dag_run", "get_task_instance", "task_id"], ["third_ti", "state", "State", "NONE"], ["session", "merge", "third_ti"]]}, "name": "test_empty_operator_is_not_considered_in_mini_scheduler", "params": {"caplog": "", "dag_maker": "", "session": ""}, "params_descr": {"caplog": "", "dag_maker": "", "session": ""}, "params_occur": {"caplog": [["caplog", "text"]], "dag_maker": [["dag_run", "dag_maker", "create_dagrun"]], "session": [["session", "merge", "first_ti"], ["session", "merge", "second_ti"], ["session", "merge", "third_ti"], ["session", "merge", "forth_ti"], ["session", "commit"], ["first_ti", "schedule_downstream_tasks", "session", "session"]]}, "params_p": {"args": [], "caplog": [["str", 0.9021925710602869]], "dag_maker": [["List[List[Any]]", 0.12868168401896274], ["str", 0.09457776735736502], ["int", 0.09335288219016522]], "kwargs": [], "session": [["zerver.models.UserProfile", 0.2034304672246719], ["str", 0.19959802457994802], ["int", 0.10102841878912273], ["models.UserAuth", 0.09877621342171804], ["dict", 0.09453400696385471], ["deeplearning.ml4pl.models.logger.Logger", 0.09404565079072576]]}, "q_name": "test_empty_operator_is_not_considered_in_mini_scheduler", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "first_ti": "", "forth_task": "", "forth_ti": "", "second_task": "", "second_ti": "", "state": "", "third_task": "", "third_ti": ""}, "variables_p": {"dag_run": [["bytes", 0.20735146036953864], ["int", 0.19847444451267363], ["str", 0.19016767038951132], ["List[str]", 0.11356314276662197], ["dict", 0.09508383519475566], ["raiden_contracts.utils.type_aliases.TokenAmount", 0.08867647890194472]], "first_ti": [["zerver.models.Realm", 0.1511576165463662], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.11412006080867591], ["str", 0.09681448705764303], ["geode.models.common.Address", 0.09665432399854003], ["raiden.utils.TargetAddress", 0.0939923446623572]], "forth_task": [["Dict[str, Dict[str, int]]", 0.13492214399826577], ["reminders.task.Task", 0.10421328955440654], ["list", 0.08877084986884516], ["Dict[Any, str]", 0.07805903915154365]], "forth_ti": [["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.12605577978074162], ["float", 0.10546214018925631], ["str", 0.0913639712049705], ["Dict[str, Callable]", 0.08768874912881151]], "second_task": [["list", 0.20355681177814036], ["snorkel.classification.task.Task", 0.09375394302310794], ["dict", 0.08719191702561498]], "second_ti": [["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.12605577978074162], ["float", 0.10546214018925631], ["str", 0.0913639712049705], ["Dict[str, Callable]", 0.08768874912881151]], "state": [["list", 0.09719731144199646], ["float", 0.09446039992412107], ["FlexioFlow.State.State", 0.09365009954689064], ["Dict[str, Dict[str, Any]]", 0.08921979594965818]], "third_task": [["khetha.models.Task", 0.2188250744022477], ["golem.task.taskbase.Task", 0.14460810472115898], ["snorkel.classification.task.Task", 0.09722721049785489], ["Dict[str, Any]", 0.08451657322839273]], "third_ti": [["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.12605577978074162], ["float", 0.10546214018925631], ["str", 0.0913639712049705], ["Dict[str, Callable]", 0.08768874912881151]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4243, 8], [4244, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "second_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_task_expands_in_mini_scheduler_if_upstreams_are_done.<locals>.second_task", "ret_exprs": ["return [0, 1, 2]"], "ret_type": "", "ret_type_p": [["str", 0.3112861806675614], ["bytes", 0.11946070067861228], ["bool", 0.0924205507939282], ["int", 0.08850011574520827], ["pathlib.Path", 0.0858346973038517]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4247, 8], [4248, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "first_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_task_expands_in_mini_scheduler_if_upstreams_are_done.<locals>.first_task", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4251, 8], [4252, 21]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "middle_task", "params": {"id": ""}, "params_descr": {"id": ""}, "params_occur": {"id": []}, "params_p": {"args": [], "id": [["str", 0.3806206742452449], ["utils.types.Id", 0.1881488413141019], ["bool", 0.08591503437613499], ["Optional[float]", 0.08591503437613499], ["float", 0.08591503437613499], ["Union[int, str]", 0.08591503437613499]], "kwargs": []}, "q_name": "test_mapped_task_expands_in_mini_scheduler_if_upstreams_are_done.<locals>.middle_task", "ret_exprs": ["return id"], "ret_type": "", "ret_type_p": [["int", 0.34910100162290336], ["str", 0.23102297495394114], ["Union[str, int]", 0.07467305326009976]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4257, 8], [4258, 20]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "last_task", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mapped_task_expands_in_mini_scheduler_if_upstreams_are_done.<locals>.last_task", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that mini scheduler expands mapped task", "long_descr": null, "ret": null}, "fn_lc": [[4238, 0], [4276, 80]], "fn_var_ln": {"dr": [[4262, 4], [4262, 6]], "first_ti": [[4264, 4], [4264, 12]], "middle": [[4254, 8], [4254, 14]], "middle_ti": [[4274, 8], [4274, 17]], "second_task": [[4268, 4], [4268, 15]], "second_ti": [[4269, 4], [4269, 13]], "state": [[4265, 4], [4265, 18]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["first_ti", "dr", "get_task_instance", "task_id"], ["second_ti", "dr", "get_task_instance", "task_id"], ["middle_ti", "dr", "get_task_instance", "task_id", "map_index", "i"]], "first_ti": [["first_ti", "dr", "get_task_instance", "task_id"], ["first_ti", "state", "State", "SUCCESS"], ["session", "merge", "first_ti"]], "middle": [["first_task", "middle", "last_task"]], "middle_ti": [["middle_ti", "dr", "get_task_instance", "task_id", "map_index", "i"], ["middle_ti", "state", "State", "SCHEDULED"]], "second_task": [["second_task", "dag", "get_task"], ["second_ti", "refresh_from_task", "second_task"]], "second_ti": [["second_ti", "dr", "get_task_instance", "task_id"], ["second_ti", "refresh_from_task", "second_task"], ["second_ti", "run"], ["second_ti", "schedule_downstream_tasks", "session", "session"]], "state": [["first_ti", "state", "State", "SUCCESS"], ["middle_ti", "state", "State", "SCHEDULED"]]}, "name": "test_mapped_task_expands_in_mini_scheduler_if_upstreams_are_done", "params": {"caplog": "", "dag_maker": "", "session": ""}, "params_descr": {"caplog": "", "dag_maker": "", "session": ""}, "params_occur": {"caplog": [["caplog", "text"]], "dag_maker": [["dr", "dag_maker", "create_dagrun"]], "session": [["session", "merge", "first_ti"], ["session", "commit"], ["second_ti", "schedule_downstream_tasks", "session", "session"]]}, "params_p": {"args": [], "caplog": [["str", 0.9260245018734302], ["int", 0.07397549812656998]], "dag_maker": [["str", 0.7031790936880296], ["models.PermissionLookup", 0.1108024369206251], ["Optional[str]", 0.09302325112770682]], "kwargs": [], "session": [["models.UserAuth", 0.0998178397459357], ["zerver.models.UserProfile", 0.09729238142804286], ["django.db.models.Model", 0.09571981395069254], ["app.models.GameMember", 0.08936235274814205], ["app.models.course.Course", 0.08936235274814205]]}, "q_name": "test_mapped_task_expands_in_mini_scheduler_if_upstreams_are_done", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "first_ti": "", "middle": "", "middle_ti": "", "second_task": "", "second_ti": "", "state": ""}, "variables_p": {"dr": [["str", 0.48764823904195764], ["Dict[Any, str]", 0.10500876169549712], ["Callable", 0.09789386619713963], ["int", 0.09599134556628539]], "first_ti": [["str", 0.16591036259057862], ["restful_functions.modules.task.TaskStoreSettings", 0.1657329617921486], ["zerver.models.Realm", 0.1502946736279008], ["golem.task.taskstate.SubtaskState", 0.12016928411868477], ["tartare.core.models.Coverage", 0.07922204942050323]], "middle": [["str", 0.33650086762648723], ["int", 0.1901281440416237], ["float", 0.09996675490756284], ["list", 0.09727855764124098]], "middle_ti": [["str", 0.1776972312746112], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.13464818888846333], ["Optional[excars.models.profiles.Profile]", 0.09705068053602317], ["byceps.services.user.transfer.models.User", 0.09691573086252842], ["int", 0.09300941490308216], ["bool", 0.0900837938592879]], "second_task": [["raiden.transfer.state.HopState", 0.18699885123927973], ["kippo.tasks.models.KippoTask", 0.1803637829262584], ["list", 0.16523074175144667], ["src.models.generic_task.GenericTask", 0.10932222635501564], ["List[str]", 0.09436018293006189], ["golem.task.taskbase.Task", 0.08411162585576284]], "second_ti": [["str", 0.17453910499374], ["restful_functions.modules.task.TaskStoreSettings", 0.15870632362111647], ["zerver.models.Realm", 0.1344540724624736], ["golem.task.taskstate.SubtaskState", 0.12728010057424996], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.08321791072653106], ["list", 0.07579517698426153]], "state": [["str", 0.7999999999999999], ["Dict[str, str]", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4283, 8], [4284, 21]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "generate", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "test_mini_scheduler_not_skip_mapped_downstream_until_all_upstreams_finish.<locals>.generate", "ret_exprs": ["return []"], "ret_type": "builtins.list[builtins.list[builtins.int]]", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["models.Question", 0.1], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4287, 8], [4288, 31]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "a_sum", "params": {"numbers": "builtins.list[builtins.int]"}, "params_descr": {"numbers": ""}, "params_occur": {"numbers": [["sum", "numbers"]]}, "params_p": {"args": [], "kwargs": [], "numbers": [["int", 0.9999999974152998], ["types.UUIDType", 7.495324164117014e-10], ["float", 7.170887313852196e-10], ["str", 6.894270838457288e-10]]}, "q_name": "test_mini_scheduler_not_skip_mapped_downstream_until_all_upstreams_finish.<locals>.a_sum", "ret_exprs": ["return sum(numbers)"], "ret_type": "builtins.int", "ret_type_p": [["int", 0.9999999974152998], ["types.UUIDType", 7.495324164117014e-10], ["float", 7.170887313852196e-10], ["str", 6.894270838457288e-10]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4291, 8], [4292, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "b_double", "params": {"summed": "builtins.int"}, "params_descr": {"summed": ""}, "params_occur": {"summed": []}, "params_p": {"args": [], "kwargs": [], "summed": [["str", 0.2128106680412639], ["Iterable[Any]", 0.10640533402063194]]}, "q_name": "test_mini_scheduler_not_skip_mapped_downstream_until_all_upstreams_finish.<locals>.b_double", "ret_exprs": ["return summed * 2"], "ret_type": "builtins.int", "ret_type_p": [["str", 0.18399842287044674], ["float", 0.10364549561489532], ["int", 0.10254056823310022], ["Sequence[starfish.types.Axes]", 0.07912153848583897]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4295, 8], [4296, 16]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "c_gather", "params": {"result": ""}, "params_descr": {"result": ""}, "params_occur": {"result": []}, "params_p": {"args": [], "kwargs": [], "result": [["Callable", 0.20899100949032368], ["bool", 0.20458442479748556], ["str", 0.10299638459211477], ["int", 0.09571977914498538]]}, "q_name": "test_mini_scheduler_not_skip_mapped_downstream_until_all_upstreams_finish.<locals>.c_gather", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4279, 0], [4317, 78]], "fn_var_ln": {"doubled": [[4301, 8], [4301, 15]], "dr": [[4304, 4], [4304, 6]], "generate_ti": [[4313, 4], [4313, 15]], "static": [[4298, 8], [4298, 14]], "static_ti": [[4307, 4], [4307, 13]], "summed": [[4300, 8], [4300, 14]], "tis": [[4305, 4], [4305, 7]]}, "fn_var_occur": {"doubled": [["doubled", "b_double", "expand", "summed", "summed"], ["static", "c_gather", "doubled"]], "dr": [["dr", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun"], ["tis", "ti", "task_id", "ti", "map_index", "ti", "ti", "dr", "task_instances"], ["dr", "get_task_instances", "TaskInstanceState", "SKIPPED", "session", "session"], ["dr", "get_task_instances", "TaskInstanceState", "SKIPPED", "session", "session"]], "generate_ti": [["generate_ti", "tis"], ["generate_ti", "run", "session", "session"], ["generate_ti", "schedule_downstream_tasks", "session", "session"]], "static": [["static", "EmptyOperator", "task_id"], ["static", "c_gather", "doubled"]], "static_ti": [["static_ti", "tis"], ["static_ti", "run", "session", "session"], ["static_ti", "schedule_downstream_tasks", "session", "session"]], "summed": [["summed", "a_sum", "expand", "numbers", "generate"], ["doubled", "b_double", "expand", "summed", "summed"]], "tis": [["tis", "ti", "task_id", "ti", "map_index", "ti", "ti", "dr", "task_instances"], ["static_ti", "tis"], ["generate_ti", "tis"]]}, "name": "test_mini_scheduler_not_skip_mapped_downstream_until_all_upstreams_finish", "params": {"dag_maker": "", "session": ""}, "params_descr": {"dag_maker": "", "session": ""}, "params_occur": {"dag_maker": [["dr", "airflow", "models", "dagrun", "DagRun", "dag_maker", "create_dagrun"]], "session": [["static_ti", "run", "session", "session"], ["static_ti", "schedule_downstream_tasks", "session", "session"], ["dr", "get_task_instances", "TaskInstanceState", "SKIPPED", "session", "session"], ["generate_ti", "run", "session", "session"], ["generate_ti", "schedule_downstream_tasks", "session", "session"], ["dr", "get_task_instances", "TaskInstanceState", "SKIPPED", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["base.Connection", 0.28480699959098377], ["salon.models.Stylist", 0.18902532517799986], ["bool", 0.12122637407958735], ["persons.db.DB", 0.11797116403638036], ["lms.lmsdb.models.User", 0.10024995600368303], ["str", 0.09481529785947708], ["core.models.Grouping", 0.09190488325188859]], "kwargs": [], "session": [["grouper.models.user.User", 0.2655489734123653], ["serverwamp.session.WAMPSession", 0.1011207044555992], ["abilian.core.models.subjects.User", 0.09734309751172522], ["grouper.models.base.session.Session", 0.08941332786434171]]}, "q_name": "test_mini_scheduler_not_skip_mapped_downstream_until_all_upstreams_finish", "ret_exprs": [], "ret_type": "", "variables": {"doubled": "", "dr": "airflow.models.dagrun.DagRun", "generate_ti": "", "static": "", "static_ti": "", "summed": "", "tis": ""}, "variables_p": {"doubled": [["str", 0.19093725780298462], ["Pattern[str]", 0.10992649061115535], ["Type[Dict[str, Any]]", 0.0715613924897526], ["list", 0.0651966273875339], ["Dict[str, Any]", 0.062072683745677]], "dr": [["salon.models.Stylist", 0.311164000754225], ["notifications.models.Notification", 0.10434453760744782]], "generate_ti": [["golem.rpc.session.Publisher", 0.14628711325531185], ["str", 0.12227236552085251], ["Optional[guillotina.db.interfaces.ITransaction]", 0.09897808307063378], ["dict", 0.09599521529028227], ["ajapaik.ajapaik.models.Album", 0.08907617047643615]], "static": [["int", 0.6325658908997482], ["Dict[str, int]", 0.09641276270830472], ["Dict[str, List[str]]", 0.09376480754880462], ["str", 0.09199259890097415], ["float", 0.08526393994216823]], "static_ti": [["Optional[str]", 0.18424356163203418], ["grpy.core.models.Grouping", 0.18277349016274222], ["golem.rpc.session.WebSocketAddress", 0.11766262903780116], ["dict", 0.09413378650331654]], "summed": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "tis": [["dict", 0.9999999999999999]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[4320, 0], [4336, 91]], "fn_var_ln": {"filter_kwargs": [[4327, 4], [4327, 17]], "note": [[4322, 4], [4322, 11]], "ti": [[4321, 4], [4321, 6]], "ti_note": [[4329, 4], [4329, 11]]}, "fn_var_occur": {"filter_kwargs": [["filter_kwargs", "dict", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index"], ["ti_note", "airflow", "models", "taskinstance", "TaskInstanceNote", "session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one"], ["session", "query", "TaskInstance", "filter_by", "filter_kwargs", "one_or_none", "None"], ["session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one_or_none", "None"]], "note": [["ti", "note"]], "ti": [["ti", "airflow", "models", "taskinstance", "TaskInstance", "create_task_instance", "session", "session"], ["ti", "note"], ["session", "add", "ti"], ["filter_kwargs", "dict", "dag_id", "ti", "dag_id", "task_id", "ti", "task_id", "run_id", "ti", "run_id", "map_index", "ti", "map_index"], ["session", "delete", "ti"]], "ti_note": [["ti_note", "airflow", "models", "taskinstance", "TaskInstanceNote", "session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one"], ["ti_note", "content"]]}, "name": "test_taskinstance_with_note", "params": {"create_task_instance": "", "session": ""}, "params_descr": {"create_task_instance": "", "session": ""}, "params_occur": {"create_task_instance": [["ti", "airflow", "models", "taskinstance", "TaskInstance", "create_task_instance", "session", "session"]], "session": [["ti", "airflow", "models", "taskinstance", "TaskInstance", "create_task_instance", "session", "session"], ["session", "add", "ti"], ["session", "commit"], ["ti_note", "airflow", "models", "taskinstance", "TaskInstanceNote", "session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one"], ["session", "delete", "ti"], ["session", "commit"], ["session", "query", "TaskInstance", "filter_by", "filter_kwargs", "one_or_none", "None"], ["session", "query", "TaskInstanceNote", "filter_by", "filter_kwargs", "one_or_none", "None"]]}, "params_p": {"args": [], "create_task_instance": [["zerver.models.UserProfile", 0.42870590278038934], ["ajapaik.ajapaik.models.Profile", 0.09170371968079401], ["ajapaik.ajapaik_object_recognition.models.ObjectDetectionAnnotation", 0.09170371968079401], ["django.contrib.auth.models.User", 0.09071363057029562]], "kwargs": [], "session": [["raiden_libs.types.ChannelIdentifier", 0.18122477850489], ["asgard.models.accounAccount", 0.10914444140226476], ["asgard.models.user.User", 0.10914444140226476], ["metrics_backend.utils.ChannelIdentifier", 0.1084833061702145], ["raiden.utils.ChannelID", 0.10298464765838548], ["zerver.models.UserProfile", 0.09261243829971497]]}, "q_name": "test_taskinstance_with_note", "ret_exprs": [], "ret_type": "", "variables": {"filter_kwargs": "", "note": "", "ti": "airflow.models.taskinstance.TaskInstance", "ti_note": "airflow.models.taskinstance.TaskInstanceNote"}, "variables_p": {"filter_kwargs": [["Dict[str, str]", 0.25527904806055524], ["List[str]", 0.2161727362712108], ["Dict[int, str]", 0.17886560908124488], ["Optional[str]", 0.10206213314309859], ["str", 0.0849682715419194], ["Dict[str, Union[dict, Any]]", 0.08182118493362626], ["Dict[Any, str]", 0.08083101696834491]], "note": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "ti": [["app.models.group.Group", 0.10921889476104675], ["app.models.Stage", 0.10152613261430563], ["models.facilityData", 0.09950914328203755], ["app.models.Position", 0.09509688376663149], ["app.models.Journey", 0.09326935338166095], ["core.models.Recipe.Change", 0.09203274816832153], ["grouper.models.permission.Permission", 0.09089688218806777]], "ti_note": [["ofxtools.models.signon.SONRS", 0.23752556580458412], ["metaswitch_tinder.database.models.User", 0.15448764570363518], ["exporwiki.maps.models.Box", 0.09990962310829406], ["buza.models.Subject", 0.09386963254836135], ["raiden.utils.SecretHash", 0.08570781500203069], ["passzero.models.entries.Entry", 0.08026171374943261], ["Optional[aw_core.models.Event]", 0.0801479563056426]]}}], "imports": ["__future__", "annotations", "datetime", "operator", "os", "pathlib", "pickle", "signal", "sys", "urllib", "traceback", "format_exception", "typing", "cast", "unittest", "mock", "unittest", "mock", "call", "mock_open", "patch", "uuid", "uuid4", "pendulum", "pytest", "time_machine", "pytest", "param", "airflow", "models", "settings", "airflow", "decorators", "task", "task_group", "airflow", "example_dags", "plugins", "workday", "AfterWorkdayTimetable", "airflow", "exceptions", "AirflowException", "AirflowFailException", "AirflowRescheduleException", "AirflowSensorTimeout", "AirflowSkipException", "UnmappableXComLengthPushed", "UnmappableXComTypePushed", "XComForMappingNotPushed", "airflow", "models", "connection", "Connection", "airflow", "models", "dag", "DAG", "airflow", "models", "dagbag", "DagBag", "airflow", "models", "dagrun", "DagRun", "airflow", "models", "dataset", "DatasetDagRunQueue", "DatasetEvent", "DatasetModel", "airflow", "models", "expandinput", "EXPAND_INPUT_EMPTY", "NotFullyPopulated", "airflow", "models", "param", "process_params", "airflow", "models", "pool", "Pool", "airflow", "models", "renderedtifields", "RenderedTaskInstanceFields", "airflow", "models", "serialized_dag", "SerializedDagModel", "airflow", "models", "taskfail", "TaskFail", "airflow", "models", "taskinstance", "TaskInstance", "TaskInstance", "TI", "TaskInstanceNote", "airflow", "models", "taskmap", "TaskMap", "airflow", "models", "taskreschedule", "TaskReschedule", "airflow", "models", "variable", "Variable", "airflow", "models", "xcom", "LazyXComAccess", "XCom", "airflow", "operators", "bash", "BashOperator", "airflow", "operators", "empty", "EmptyOperator", "airflow", "operators", "python", "PythonOperator", "airflow", "sensors", "base", "BaseSensorOperator", "airflow", "sensors", "python", "PythonSensor", "airflow", "serialization", "serialized_objects", "SerializedBaseOperator", "SerializedDAG", "airflow", "settings", "TIMEZONE", "airflow", "stats", "Stats", "airflow", "ti_deps", "dep_context", "DepContext", "airflow", "ti_deps", "dependencies_deps", "REQUEUEABLE_DEPS", "RUNNING_DEPS", "airflow", "ti_deps", "dependencies_states", "RUNNABLE_STATES", "airflow", "ti_deps", "deps", "base_ti_dep", "TIDepStatus", "airflow", "ti_deps", "deps", "trigger_rule_dep", "TriggerRuleDep", "_UpstreamTIStates", "airflow", "utils", "timezone", "airflow", "utils", "db", "merge_conn", "airflow", "utils", "module_loading", "qualname", "airflow", "utils", "session", "create_session", "provide_session", "airflow", "utils", "state", "DagRunState", "State", "TaskInstanceState", "airflow", "utils", "task_group", "TaskGroup", "airflow", "utils", "types", "DagRunType", "airflow", "utils", "xcom", "XCOM_RETURN_KEY", "airflow", "version", "version", "tests", "models", "DEFAULT_DATE", "TEST_DAGS_FOLDER", "tests", "test_utils", "db", "tests", "test_utils", "config", "conf_vars", "tests", "test_utils", "db", "clear_db_connections", "clear_db_runs", "tests", "test_utils", "mock_operators", "MockOperator", "airflow", "decorators", "task", "airflow", "example_dags", "example_datasets", "airflow", "example_dags", "example_datasets", "dag1", "tests", "dags", "test_datasets", "tests", "dags", "test_datasets", "dag_with_fail_task", "airflow", "decorators", "task", "tests", "dags", "test_datasets", "tests", "dags", "test_datasets", "dag_with_skip_task", "airflow", "Dataset"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 43, "I": 0, "U": 1060}, "session_id": "eRGHkbp2R3stIwIDLhmaUo0xWBUi_I2jV98qTolx210", "set": null, "tc": [false, null], "type_annot_cove": 0.04, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}