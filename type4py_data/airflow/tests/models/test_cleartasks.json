{"error": null, "response": {"classes": [{"cls_lc": [[36, 0], [636, 33]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[38, 4], [43, 26]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestClearTasks.clean", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[45, 4], [81, 33]], "fn_var_ln": {"dr": [[54, 8], [54, 10]], "qry": [[70, 12], [70, 15]], "task0": [[51, 12], [51, 17]], "task1": [[52, 12], [52, 17]], "ti0": [[58, 8], [58, 11]], "ti1": [[58, 13], [58, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"]], "task0": [["task0", "EmptyOperator", "task_id"], ["ti0", "refresh_from_task", "task0"]], "task1": [["task1", "EmptyOperator", "task_id", "retries"], ["ti1", "refresh_from_task", "task1"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "refresh_from_task", "task0"], ["ti0", "run"], ["ti0", "refresh_from_db"], ["ti0", "state", "None"], ["ti0", "try_number"], ["ti0", "max_tries"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "refresh_from_task", "task1"], ["ti1", "run"], ["ti1", "refresh_from_db"], ["ti1", "state", "None"], ["ti1", "try_number"], ["ti1", "max_tries"]]}, "name": "test_clear_task_instances", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.27201233353158216], ["raiden.utils.MessageID", 0.27201233353158216], ["datetime.date.time", 0.1071861315649327], ["raiden.utils.ChannelID", 0.09067077784386073]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_clear_task_instances", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "qry": "", "task0": "", "task1": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.5836074563649544], ["int", 0.22390482794126815], ["Dict[str, Union[Any, Any]]", 0.08189547188271687]], "qry": [["int", 0.33937808001183456], ["str", 0.09415302565305604], ["List[str]", 0.08703964728649248], ["notifications.models.Notification", 0.07610898937199481]], "task0": [["list", 0.1250789965082158], ["Dict[str, Dict[str, int]]", 0.09519708448820172]], "task1": [["Dict[str, Union[int, str]]", 0.18184860566684627], ["Dict[str, Any]", 0.17551394749520216], ["Dict[str, Union[float, str]]", 0.17478513072543728], ["Dict[str, Dict[str, int]]", 0.09293275296119512]], "ti0": [["str", 1.0]], "ti1": [["str", 1.0]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[83, 4], [109, 51]], "fn_var_ln": {"external_executor_id": [[93, 8], [93, 32]], "qry": [[103, 12], [103, 15]], "state": [[92, 8], [92, 17]], "ti0": [[91, 8], [91, 11]]}, "fn_var_occur": {"external_executor_id": [["ti0", "external_executor_id"], ["ti0", "external_executor_id", "None"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"]], "state": [["ti0", "state", "State", "SUCCESS"], ["ti0", "state", "None"]], "ti0": [["ti0", "dag_maker", "create_dagrun", "task_instances"], ["ti0", "state", "State", "SUCCESS"], ["ti0", "external_executor_id"], ["session", "add", "ti0"], ["ti0", "refresh_from_db"], ["ti0", "state", "None"], ["ti0", "external_executor_id", "None"]]}, "name": "test_clear_task_instances_external_executor_id", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["ti0", "dag_maker", "create_dagrun", "task_instances"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.2537901113933987], ["raiden.utils.MessageID", 0.16919340759559912], ["datetime.date.time", 0.16521918892193688], ["raiden.utils.ChannelID", 0.08459670379779956]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_clear_task_instances_external_executor_id", "ret_exprs": [], "ret_type": "", "variables": {"external_executor_id": "", "qry": "", "state": "", "ti0": ""}, "variables_p": {"external_executor_id": [["Dict[str, str]", 0.5778996312834318], ["int", 0.2226579522452087], ["list", 0.06626085542308588], ["Dict[int, Any]", 0.06558499108960032]], "qry": [["int", 0.33937808001183456], ["str", 0.09415302565305604], ["List[str]", 0.08703964728649248], ["notifications.models.Notification", 0.07610898937199481]], "state": [["str", 0.273137753155536], ["float", 0.13725323464584338], ["models.seat_group.SeatGroup", 0.08188867768852756]], "ti0": [["str", 0.863718479237081]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[111, 4], [132, 38]], "fn_var_ln": {"next_kwargs": [[122, 8], [122, 23]], "next_method": [[121, 8], [121, 23]], "state": [[120, 8], [120, 17]], "ti0": [[119, 8], [119, 11]]}, "fn_var_occur": {"next_kwargs": [["ti0", "next_kwargs"], ["ti0", "next_kwargs", "None"]], "next_method": [["ti0", "next_method"], ["ti0", "next_method", "None"]], "state": [["ti0", "state", "State", "DEFERRED"]], "ti0": [["ti0", "dag_maker", "create_dagrun", "task_instances"], ["ti0", "state", "State", "DEFERRED"], ["ti0", "next_method"], ["ti0", "next_kwargs"], ["session", "add", "ti0"], ["clear_task_instances", "ti0", "session", "dag", "dag"], ["ti0", "refresh_from_db"], ["ti0", "next_method", "None"], ["ti0", "next_kwargs", "None"]]}, "name": "test_clear_task_instances_next_method", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["ti0", "dag_maker", "create_dagrun", "task_instances"]], "self": [], "session": [["session", "add", "ti0"], ["session", "commit"], ["clear_task_instances", "ti0", "session", "dag", "dag"]]}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.2510839463513789], ["raiden.utils.ChannelID", 0.1679765358083052], ["str", 0.09023928710578069], ["raiden.utils.MessageID", 0.08486912526523155]], "kwargs": [], "self": [], "session": []}, "q_name": "TestClearTasks.test_clear_task_instances_next_method", "ret_exprs": [], "ret_type": "", "variables": {"next_kwargs": "", "next_method": "", "state": "", "ti0": ""}, "variables_p": {"next_kwargs": [["Dict[str, int]", 0.19715204355043703], ["Dict[str, Any]", 0.10472646716681096], ["Dict[int, Dict[int, Any]]", 0.09881546415267294], ["Dict[int, int]", 0.09442279394642063], ["bool", 0.09297709859032623], ["List[Dict[str, Any]]", 0.0928259577704068], ["Dict[str, bool]", 0.09165015192566298]], "next_method": [["str", 0.7999999999999999], ["Set[int]", 0.09999999999999999]], "state": [["str", 0.7999999999999999], ["Dict[str, str]", 0.1]], "ti0": [["str", 0.6900462373506512], ["Dict[str, Any]", 0.09287814319866389]]}}, {"docstring": {"func": "Test that DR state is set to None after clear.", "long_descr": "And that DR.last_scheduling_decision is handled OK.\nstart_date is also set to None", "ret": null}, "fn_lc": [[137, 4], [172, 61]], "fn_var_ln": {"dr": [[149, 8], [149, 10]], "last_scheduling_decision": [[154, 8], [154, 35]], "qry": [[164, 8], [164, 11]], "session": [[157, 8], [157, 15]], "state": [[156, 8], [156, 17]], "ti0": [[153, 8], [153, 11]], "ti1": [[153, 13], [153, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "DagRunState", "SUCCESS", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["dr", "last_scheduling_decision", "DEFAULT_DATE"], ["session", "refresh", "dr"], ["dr", "state", "state"], ["dr", "start_date", "None", "state", "DagRunState", "QUEUED", "dr", "start_date"], ["dr", "last_scheduling_decision", "last_scheduling"]], "last_scheduling_decision": [["dr", "last_scheduling_decision", "DEFAULT_DATE"], ["dr", "last_scheduling_decision", "last_scheduling"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag_run_state", "state", "dag", "dag"]], "session": [["session", "dag_maker", "session"], ["session", "flush"], ["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag_run_state", "state", "dag", "dag"], ["session", "flush"], ["session", "refresh", "dr"]], "state": [["dr", "dag_maker", "create_dagrun", "state", "DagRunState", "SUCCESS", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "state", "TaskInstanceState", "SUCCESS"], ["ti1", "state", "TaskInstanceState", "SUCCESS"], ["clear_task_instances", "qry", "session", "dag_run_state", "state", "dag", "dag"], ["dr", "state", "state"], ["dr", "start_date", "None", "state", "DagRunState", "QUEUED", "dr", "start_date"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "state", "TaskInstanceState", "SUCCESS"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "state", "TaskInstanceState", "SUCCESS"]]}, "name": "test_clear_task_instances_dr_state", "params": {"dag_maker": "", "last_scheduling": "", "self": "", "state": ""}, "params_descr": {"dag_maker": "", "last_scheduling": "", "self": "", "state": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "DagRunState", "SUCCESS", "run_type", "DagRunType", "SCHEDULED"], ["session", "dag_maker", "session"]], "last_scheduling": [["dr", "last_scheduling_decision", "last_scheduling"]], "self": [], "state": [["dr", "dag_maker", "create_dagrun", "state", "DagRunState", "SUCCESS", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "state", "TaskInstanceState", "SUCCESS"], ["ti1", "state", "TaskInstanceState", "SUCCESS"], ["clear_task_instances", "qry", "session", "dag_run_state", "state", "dag", "dag"], ["dr", "state", "state"], ["dr", "start_date", "None", "state", "DagRunState", "QUEUED", "dr", "start_date"]]}, "params_p": {"args": [], "dag_maker": [["Optional[raiden.utils.TokenNetworkAddress]", 0.5798303250595526], ["asgard.models.accounAccount", 0.1100688089933793], ["asgard.models.user.User", 0.1100688089933793], ["zerver.models.UserProfile", 0.09664726114425012]], "kwargs": [], "last_scheduling": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.7241464402395035], ["str", 0.1572529958606415], ["tests.components.withings.common.ComponentFactory", 0.11860056389985507]], "self": [], "state": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.19382498977924717], ["str", 0.09350246545520499], ["core.models.Grouping", 0.09228689204037738]]}, "q_name": "TestClearTasks.test_clear_task_instances_dr_state", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "last_scheduling_decision": "", "qry": "", "session": "", "state": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.7018344266395091], ["int", 0.09938852445349693]], "last_scheduling_decision": [["datetime.timedelta", 0.5856797253481948], ["int", 0.18681708094656257], ["str", 0.14233688840104985], ["datetime.datetime", 0.08516630530419278]], "qry": [["int", 0.33937808001183456], ["str", 0.09415302565305604], ["List[str]", 0.08703964728649248], ["notifications.models.Notification", 0.07610898937199481]], "session": [["sqlalchemy.orm.session.Session", 0.1899120394246678], ["dict", 0.10738220417695706], ["Optional[str]", 0.10128991028042568]], "state": [["str", 0.6739816069018969], ["Dict[str, Dict[str, str]]", 0.08123224958719658], ["Dict[str, Union[Any, Any]]", 0.07797107689746278]], "ti0": [["str", 0.5092848049910372], ["bytes", 0.1723335428886147], ["int", 0.11002827623505294], ["Optional[List[Any]]", 0.10701196229477145]], "ti1": [["str", 0.5092848049910372], ["bytes", 0.1723335428886147], ["int", 0.11002827623505294], ["Optional[List[Any]]", 0.10701196229477145]]}}, {"docstring": {"func": "Test that DagRun state, start_date and last_scheduling_decision", "long_descr": "are not changed after clearing TI in an unfinished DagRun.", "ret": null}, "fn_lc": [[175, 4], [209, 58]], "fn_var_ln": {"dr": [[186, 8], [186, 10]], "last_scheduling_decision": [[191, 8], [191, 35]], "qry": [[201, 8], [201, 11]], "session": [[194, 8], [194, 15]], "state": [[193, 8], [193, 17]], "ti0": [[190, 8], [190, 11]], "ti1": [[190, 13], [190, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["dr", "last_scheduling_decision", "DEFAULT_DATE"], ["session", "refresh", "dr"], ["dr", "state", "state"], ["dr", "start_date"], ["dr", "last_scheduling_decision", "DEFAULT_DATE"]], "last_scheduling_decision": [["dr", "last_scheduling_decision", "DEFAULT_DATE"], ["dr", "last_scheduling_decision", "DEFAULT_DATE"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"]], "session": [["session", "dag_maker", "session"], ["session", "flush"], ["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"], ["session", "flush"], ["session", "refresh", "dr"]], "state": [["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "state", "TaskInstanceState", "SUCCESS"], ["ti1", "state", "TaskInstanceState", "SUCCESS"], ["dr", "state", "state"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "state", "TaskInstanceState", "SUCCESS"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "state", "TaskInstanceState", "SUCCESS"]]}, "name": "test_clear_task_instances_on_running_dr", "params": {"dag_maker": "", "self": "", "state": ""}, "params_descr": {"dag_maker": "", "self": "", "state": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["session", "dag_maker", "session"]], "self": [], "state": [["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "state", "TaskInstanceState", "SUCCESS"], ["ti1", "state", "TaskInstanceState", "SUCCESS"], ["dr", "state", "state"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.433825956291869], ["raiden.utils.NodeNetworkStateMap", 0.0891860946412788], ["raiden.utils.List[raiden.transfer.state.RouteState]", 0.0891860946412788], ["raiden.transfer.mediated_transfer.state.MediationPairState", 0.08700433597578894], ["datetime.datetime", 0.08210546125022741], ["int", 0.0808034768493174]], "kwargs": [], "self": [], "state": [["Optional[Dict[str, Any]]", 0.29887319956128233], ["Iterable[homeassistancore.State]", 0.19924879970752155]]}, "q_name": "TestClearTasks.test_clear_task_instances_on_running_dr", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "last_scheduling_decision": "", "qry": "", "session": "", "state": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.8020962780122078], ["list", 0.09895497374047117], ["Dict[str, str]", 0.09894874824732104]], "last_scheduling_decision": [["str", 0.20027594220060785], ["List[int]", 0.1721757109710237], ["datetime.datetime.datetime", 0.14765186330383298], ["List[datetime.datetime]", 0.12802941742027135], ["int", 0.10179032079651223], ["datetime.date", 0.08670305248301584], ["datetime.date.time.datetime", 0.0834566887710982], ["datetime.datetime", 0.07991700405363779]], "qry": [["int", 0.33937808001183456], ["str", 0.09415302565305604], ["List[str]", 0.08703964728649248], ["notifications.models.Notification", 0.07610898937199481]], "session": [["sqlalchemy.orm.session.Session", 0.1899120394246678], ["dict", 0.10738220417695706], ["Optional[str]", 0.10128991028042568]], "state": [["str", 0.8937181374329259], ["Tuple[str, str]", 0.1062818625670741]], "ti0": [["str", 0.5092848049910372], ["bytes", 0.1723335428886147], ["int", 0.11002827623505294], ["Optional[List[Any]]", 0.10701196229477145]], "ti1": [["str", 0.5092848049910372], ["bytes", 0.1723335428886147], ["int", 0.11002827623505294], ["Optional[List[Any]]", 0.10701196229477145]]}}, {"docstring": {"func": "Test that DagRun state, start_date and last_scheduling_decision", "long_descr": "are changed after clearing TI in a finished DagRun.", "ret": null}, "fn_lc": [[220, 4], [254, 50]], "fn_var_ln": {"dr": [[231, 8], [231, 10]], "last_scheduling_decision": [[236, 8], [236, 35]], "qry": [[246, 8], [246, 11]], "session": [[239, 8], [239, 15]], "state": [[238, 8], [238, 17]], "ti0": [[235, 8], [235, 11]], "ti1": [[235, 13], [235, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["dr", "last_scheduling_decision", "DEFAULT_DATE"], ["session", "refresh", "dr"], ["dr", "state", "DagRunState", "QUEUED"], ["dr", "start_date", "None"], ["dr", "last_scheduling_decision", "None"]], "last_scheduling_decision": [["dr", "last_scheduling_decision", "DEFAULT_DATE"], ["dr", "last_scheduling_decision", "None"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"]], "session": [["session", "dag_maker", "session"], ["session", "flush"], ["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"], ["session", "flush"], ["session", "refresh", "dr"]], "state": [["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "state", "TaskInstanceState", "SUCCESS"], ["ti1", "state", "TaskInstanceState", "SUCCESS"], ["dr", "state", "DagRunState", "QUEUED"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "state", "TaskInstanceState", "SUCCESS"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "state", "TaskInstanceState", "SUCCESS"]]}, "name": "test_clear_task_instances_on_finished_dr", "params": {"dag_maker": "", "last_scheduling": "", "self": "", "state": ""}, "params_descr": {"dag_maker": "", "last_scheduling": "", "self": "", "state": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["session", "dag_maker", "session"]], "last_scheduling": [], "self": [], "state": [["dr", "dag_maker", "create_dagrun", "state", "state", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "state", "TaskInstanceState", "SUCCESS"], ["ti1", "state", "TaskInstanceState", "SUCCESS"], ["dr", "state", "DagRunState", "QUEUED"]]}, "params_p": {"args": [], "dag_maker": [["str", 0.39496995363246135], ["raiden.utils.NodeNetworkStateMap", 0.10419341399207155], ["raiden.utils.List[raiden.transfer.state.RouteState]", 0.10419341399207155], ["raiden.utils.InitiatorAddress", 0.09635902864742396]], "kwargs": [], "last_scheduling": [["salon.models.Stylist", 0.1761094242593062], ["bool", 0.1593957971400063], ["BinaryIO", 0.11069510351149628], ["List[T]", 0.08141008894249142], ["tests.test_util.aiohttp.AiohttpClientMocker", 0.07786382783302385]], "self": [], "state": [["str", 0.32478460509404733], ["List[List[int]]", 0.1008101678470562], ["bytes", 0.09659367492426807]]}, "q_name": "TestClearTasks.test_clear_task_instances_on_finished_dr", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "last_scheduling_decision": "", "qry": "", "session": "", "state": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.8020962780122078], ["list", 0.09895497374047117], ["Dict[str, str]", 0.09894874824732104]], "last_scheduling_decision": [["datetime.datetime.datetime", 0.25526848420572473], ["List[datetime.datetime]", 0.17230068595771725], ["datetime.datetime", 0.15549515322481122], ["ajapaik.ajapaik.models.AlbumPhoto", 0.07658835272851765]], "qry": [["int", 0.33937808001183456], ["str", 0.09415302565305604], ["List[str]", 0.08703964728649248], ["notifications.models.Notification", 0.07610898937199481]], "session": [["sqlalchemy.orm.session.Session", 0.1899120394246678], ["dict", 0.10738220417695706], ["Optional[str]", 0.10128991028042568]], "state": [["str", 0.8937181374329259], ["Tuple[str, str]", 0.1062818625670741]], "ti0": [["str", 0.5092848049910372], ["bytes", 0.1723335428886147], ["int", 0.11002827623505294], ["Optional[List[Any]]", 0.10701196229477145]], "ti1": [["str", 0.5092848049910372], ["bytes", 0.1723335428886147], ["int", 0.11002827623505294], ["Optional[List[Any]]", 0.10701196229477145]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[256, 4], [297, 33]], "fn_var_ln": {"dr": [[265, 8], [265, 10]], "qry": [[287, 12], [287, 15]], "task0": [[262, 12], [262, 17]], "task1": [[263, 12], [263, 17]], "task_dict": [[278, 8], [278, 21]], "ti0": [[270, 8], [270, 11]], "ti1": [[270, 13], [270, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"]], "task0": [["task0", "EmptyOperator", "task_id"], ["ti0", "refresh_from_task", "task0"], ["dag", "has_task", "task0", "task_id"]], "task1": [["task1", "EmptyOperator", "task_id", "retries"], ["ti1", "refresh_from_task", "task1"], ["dag", "has_task", "task1", "task_id"]], "task_dict": [["dag", "task_dict"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "refresh_from_task", "task0"], ["ti0", "run"], ["ti0", "refresh_from_db"], ["ti0", "try_number"], ["ti0", "max_tries"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "refresh_from_task", "task1"], ["ti1", "run"], ["ti1", "refresh_from_db"], ["ti1", "try_number"], ["ti1", "max_tries"]]}, "name": "test_clear_task_instances_without_task", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.2798809214772331], ["raiden.utils.MessageID", 0.2798809214772331], ["raiden.utils.ChannelID", 0.18658728098482205], ["datetime.date.time", 0.11417802451116404]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_clear_task_instances_without_task", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "qry": "", "task0": "", "task1": "", "task_dict": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.5836074563649544], ["int", 0.22390482794126815], ["Dict[str, Union[Any, Any]]", 0.08189547188271687]], "qry": [["int", 0.33937808001183456], ["str", 0.09415302565305604], ["List[str]", 0.08703964728649248], ["notifications.models.Notification", 0.07610898937199481]], "task0": [["khetha.models.Task", 0.10082525831555192], ["list", 0.09247663645942707]], "task1": [["Dict[str, Dict[str, int]]", 0.1287731439377417], ["int", 0.11053835470829747], ["list", 0.10365477359991337], ["set", 0.0941534148603483], ["ValueError", 0.08685507318793058]], "task_dict": [["int", 0.22669502989383844], ["Dict[str, Optional[str]]", 0.12684332518140773], ["dict", 0.09982221455082352], ["str", 0.07610589013734989], ["Dict[int, str]", 0.06708616239266305]], "ti0": [["str", 1.0]], "ti1": [["str", 1.0]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[299, 4], [336, 33]], "fn_var_ln": {"dr": [[309, 8], [309, 10]], "qry": [[326, 12], [326, 15]], "task0": [[306, 12], [306, 17]], "task1": [[307, 12], [307, 17]], "ti0": [[314, 8], [314, 11]], "ti1": [[314, 13], [314, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session"]], "task0": [["task0", "EmptyOperator", "task_id"], ["ti0", "refresh_from_task", "task0"]], "task1": [["task1", "EmptyOperator", "task_id", "retries"], ["ti1", "refresh_from_task", "task1"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "refresh_from_task", "task0"], ["ti0", "run"], ["ti0", "refresh_from_db"], ["ti0", "try_number"], ["ti0", "max_tries"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "refresh_from_task", "task1"], ["ti1", "run"], ["ti1", "refresh_from_db"], ["ti1", "try_number"], ["ti1", "max_tries"]]}, "name": "test_clear_task_instances_without_dag", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.27201233353158216], ["raiden.utils.MessageID", 0.27201233353158216], ["datetime.date.time", 0.1071861315649327], ["raiden.utils.ChannelID", 0.09067077784386073]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_clear_task_instances_without_dag", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "qry": "", "task0": "", "task1": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.5836074563649544], ["int", 0.22390482794126815], ["Dict[str, Union[Any, Any]]", 0.08189547188271687]], "qry": [["int", 0.1992391313212773], ["notifications.models.Notification", 0.09891269461178244], ["Union[Literal, int]", 0.09602102137749456], ["list", 0.08141460568542501], ["str", 0.07653304719485694]], "task0": [["list", 0.1250789965082158], ["Dict[str, Dict[str, int]]", 0.09519708448820172]], "task1": [["Dict[str, Union[int, str]]", 0.18184860566684627], ["Dict[str, Any]", 0.17551394749520216], ["Dict[str, Union[float, str]]", 0.17478513072543728], ["Dict[str, Dict[str, int]]", 0.09293275296119512]], "ti0": [["str", 1.0]], "ti1": [["str", 1.0]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[338, 4], [376, 33]], "fn_var_ln": {"dr": [[351, 8], [351, 10]], "qry": [[367, 8], [367, 11]], "task0": [[345, 12], [345, 17]], "task1": [[346, 12], [346, 17]], "ti0": [[356, 8], [356, 11]], "ti1": [[356, 13], [356, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session"]], "task0": [["task0", "EmptyOperator", "task_id"], ["ti0", "refresh_from_task", "task0"]], "task1": [["task1", "EmptyOperator", "task_id", "retries"], ["ti1", "refresh_from_task", "task1"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "refresh_from_task", "task0"], ["ti0", "run", "session", "session"], ["ti0", "refresh_from_db", "session", "session"], ["ti0", "try_number"], ["ti0", "max_tries"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "refresh_from_task", "task1"], ["ti1", "run", "session", "session"], ["ti1", "refresh_from_db", "session", "session"], ["ti1", "try_number"], ["ti1", "max_tries"]]}, "name": "test_clear_task_instances_without_dag_param", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "session", "session", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"]], "self": [], "session": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "session", "session", "dag"], ["SerializedDagModel", "write_dag", "dag", "session", "session"], ["ti0", "run", "session", "session"], ["ti1", "run", "session", "session"], ["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session"], ["ti0", "refresh_from_db", "session", "session"], ["ti1", "refresh_from_db", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["cmk.utils.type_defs.HostName", 0.10565743750787812], ["cmk.utils.type_defs.ServiceName", 0.10565743750787812], ["Optional[Dict]", 0.09277171344332541], ["str", 0.08584766644778916], ["Callable", 0.08522589361828423]], "kwargs": [], "self": [], "session": [["models.User", 0.1682305359933643], ["cmk.utils.type_defs.HostName", 0.0876814863416858], ["cmk.utils.type_defs.ServiceName", 0.0876814863416858], ["raiden_libs.types.ChannelIdentifier", 0.08654242595610225]]}, "q_name": "TestClearTasks.test_clear_task_instances_without_dag_param", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "qry": "", "task0": "", "task1": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.5836074563649544], ["int", 0.22390482794126815], ["Dict[str, Union[Any, Any]]", 0.08189547188271687]], "qry": [["int", 0.1992391313212773], ["notifications.models.Notification", 0.09891269461178244], ["Union[Literal, int]", 0.09602102137749456], ["list", 0.08141460568542501], ["str", 0.07653304719485694]], "task0": [["list", 0.1250789965082158], ["Dict[str, Dict[str, int]]", 0.09519708448820172]], "task1": [["Dict[str, Union[int, str]]", 0.18184860566684627], ["Dict[str, Any]", 0.17551394749520216], ["Dict[str, Union[float, str]]", 0.17478513072543728], ["Dict[str, Dict[str, int]]", 0.09293275296119512]], "ti0": [["str", 0.8226592195114331], ["Dict[str, str]", 0.08926746249332322], ["list", 0.08807331799524341]], "ti1": [["str", 0.8226592195114331], ["Dict[str, str]", 0.08926746249332322], ["list", 0.08807331799524341]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[378, 4], [425, 33]], "fn_var_ln": {"dr0": [[387, 8], [387, 11]], "dr1": [[403, 8], [403, 11]], "qry": [[416, 8], [416, 11]], "task0": [[385, 12], [385, 17]], "task1": [[398, 12], [398, 17]], "ti0": [[408, 8], [408, 11]], "ti1": [[409, 8], [409, 11]]}, "fn_var_occur": {"dr0": [["dr0", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "dr0", "task_instances"]], "dr1": [["dr1", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti1", "dr1", "task_instances"]], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "in_", "dag0", "dag_id", "dag1", "dag_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag0"]], "task0": [["task0", "EmptyOperator", "task_id"], ["ti0", "refresh_from_task", "task0"]], "task1": [["task1", "EmptyOperator", "task_id", "retries"], ["ti1", "refresh_from_task", "task1"]], "ti0": [["ti0", "dr0", "task_instances"], ["ti0", "refresh_from_task", "task0"], ["ti0", "run", "session", "session"], ["ti0", "refresh_from_db", "session", "session"], ["ti0", "try_number"], ["ti0", "max_tries"]], "ti1": [["ti1", "dr1", "task_instances"], ["ti1", "refresh_from_task", "task1"], ["ti1", "run", "session", "session"], ["ti1", "refresh_from_db", "session", "session"], ["ti1", "try_number"], ["ti1", "max_tries"]]}, "name": "test_clear_task_instances_in_multiple_dags", "params": {"dag_maker": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "session", "session", "dag0"], ["dr0", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "session", "session", "dag1"], ["dr1", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"]], "self": [], "session": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "session", "session", "dag0"], ["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "session", "session", "dag1"], ["SerializedDagModel", "write_dag", "dag1", "session", "session"], ["ti0", "run", "session", "session"], ["ti1", "run", "session", "session"], ["qry", "session", "query", "TI", "filter", "TI", "dag_id", "in_", "dag0", "dag_id", "dag1", "dag_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag0"], ["ti0", "refresh_from_db", "session", "session"], ["ti1", "refresh_from_db", "session", "session"]]}, "params_p": {"args": [], "dag_maker": [["cmk.utils.type_defs.HostName", 0.09656153421774773], ["cmk.utils.type_defs.ServiceName", 0.09656153421774773], ["Optional[Dict]", 0.09191691658515946]], "kwargs": [], "self": [], "session": [["Optional[Dict]", 0.09415385638362399], ["cmk.utils.type_defs.HostName", 0.08980531785432298], ["cmk.utils.type_defs.ServiceName", 0.08980531785432298], ["str", 0.08922868673279058]]}, "q_name": "TestClearTasks.test_clear_task_instances_in_multiple_dags", "ret_exprs": [], "ret_type": "", "variables": {"dr0": "", "dr1": "", "qry": "", "task0": "", "task1": "", "ti0": "", "ti1": ""}, "variables_p": {"dr0": [["str", 0.3268277561076614], ["float", 0.10324605084967318], ["db.Stock", 0.09238773533682679], ["int", 0.09094068062081405], ["Optional[types.TracebackType]", 0.09068229003338765]], "dr1": [["str", 0.3268277561076614], ["float", 0.10324605084967318], ["db.Stock", 0.09238773533682679], ["int", 0.09094068062081405], ["Optional[types.TracebackType]", 0.09068229003338765]], "qry": [["str", 0.5801696763587121], ["int", 0.30657852535000196]], "task0": [["list", 0.1250789965082158], ["Dict[str, Dict[str, int]]", 0.09519708448820172]], "task1": [["Dict[str, Union[int, str]]", 0.18184860566684627], ["Dict[str, Any]", 0.17551394749520216], ["Dict[str, Union[float, str]]", 0.17478513072543728], ["Dict[str, Dict[str, int]]", 0.09293275296119512]], "ti0": [["dict", 0.318230654890338], ["str", 0.09657956806982643], ["pydynasync.models.Changes", 0.09603835276122397], ["golem.rpc.session.WebSocketAddress", 0.08445453671236897]], "ti1": [["dict", 0.318230654890338], ["str", 0.09657956806982643], ["pydynasync.models.Changes", 0.09603835276122397], ["golem.rpc.session.WebSocketAddress", 0.08445453671236897]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[451, 12], [461, 17]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "count_task_reschedule", "params": {"task_id": ""}, "params_descr": {"task_id": ""}, "params_occur": {"task_id": [["task0", "PythonSensor", "task_id", "python_callable", "False", "mode"], ["task1", "PythonSensor", "task_id", "python_callable", "False", "mode"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["session", "query", "TaskReschedule", "filter", "TaskReschedule", "dag_id", "dag", "dag_id", "TaskReschedule", "task_id", "task_id", "TaskReschedule", "run_id", "dr", "run_id", "TaskReschedule", "try_number", "count"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "task_id": [["int", 0.47101116473540516], ["str", 0.22037363496789586], ["bool", 0.11929361760013976]]}, "q_name": "TestClearTasks.test_clear_task_instances_with_task_reschedule.<locals>.count_task_reschedule", "ret_exprs": ["return ( session.query(TaskReschedule) .filter( TaskReschedule.dag_id == dag.dag_id, TaskReschedule.task_id == task_id, TaskReschedule.run_id == dr.run_id, TaskReschedule.try_number == 1, ) .count())"], "ret_type": "", "ret_type_p": [["bool", 0.201383576689406], ["List[str]", 0.11472376426236237], ["str", 0.10325353702396203], ["List[List[str]]", 0.09695927995223154]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that TaskReschedules are deleted correctly when TaskInstances are cleared", "long_descr": null, "ret": null}, "fn_lc": [[427, 4], [477, 58]], "fn_var_ln": {"dr": [[438, 8], [438, 10]], "qry": [[469, 12], [469, 15]], "task0": [[435, 12], [435, 17]], "task1": [[436, 12], [436, 17]], "ti0": [[443, 8], [443, 11]], "ti1": [[443, 13], [443, 16]]}, "fn_var_occur": {"dr": [], "qry": [["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "TI", "task_id", "ti0", "task_id", "order_by", "TI", "task_id", "all"], ["clear_task_instances", "qry", "session", "dag", "dag"]], "task0": [], "task1": [], "ti0": [["count_task_reschedule", "ti0", "task_id"], ["qry", "session", "query", "TI", "filter", "TI", "dag_id", "dag", "dag_id", "TI", "task_id", "ti0", "task_id", "order_by", "TI", "task_id", "all"], ["count_task_reschedule", "ti0", "task_id"]], "ti1": [["count_task_reschedule", "ti1", "task_id"], ["count_task_reschedule", "ti1", "task_id"]]}, "name": "test_clear_task_instances_with_task_reschedule", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [], "self": []}, "params_p": {"args": [], "dag_maker": [["tests.basilisp.helpers.CompileFn", 0.19999999999999998], ["str", 0.19999999999999998], ["tests.async_mock.MagicMock", 0.09999999999999999], ["tests.async_mock.Mock", 0.09999999999999999], ["Mapping[str, Any]", 0.09999999999999999]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_clear_task_instances_with_task_reschedule", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "qry": "", "task0": "", "task1": "", "ti0": "", "ti1": ""}, "variables_p": {"dr": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "qry": [["int", 0.3204798762977448], ["str", 0.18222921858072894], ["dict", 0.10602034455413532], ["list", 0.09609900055974345]], "task0": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "task1": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "ti0": [["int", 0.1430833052527865], ["Dict[str, Any]", 0.09980782350060523], ["Dict[str, str]", 0.08997143642283491]], "ti1": [["Dict[str, dict]", 0.11582129895815982], ["Dict[str, str]", 0.10733996003730284], ["list", 0.10520787270951866], ["Dict[str, Any]", 0.09752879602466263], ["core.base.types.DataDict", 0.09635642983770273], ["str", 0.09134631163467868], ["dict", 0.0886273159176598]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[479, 4], [526, 33]], "fn_var_ln": {"dr": [[486, 8], [486, 10]], "session": [[490, 8], [490, 15]], "task0": [[483, 12], [483, 17]], "task1": [[484, 12], [484, 17]], "ti0": [[492, 8], [492, 11]], "ti1": [[492, 13], [492, 16]], "try_number": [[508, 8], [508, 22]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"]], "session": [["session", "dag_maker", "session"], ["session", "merge", "ti1"], ["session", "commit"]], "task0": [["task0", "EmptyOperator", "task_id"], ["ti0", "refresh_from_task", "task0"]], "task1": [["task1", "EmptyOperator", "task_id", "retries"], ["ti1", "refresh_from_task", "task1"]], "ti0": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti0", "refresh_from_task", "task0"], ["ti0", "try_number"], ["ti0", "run"], ["ti0", "try_number"], ["ti0", "refresh_from_db"], ["ti0", "try_number"], ["ti0", "state", "State", "NONE"], ["ti0", "max_tries"], ["ti0", "refresh_from_db"], ["ti0", "try_number"], ["ti0", "max_tries"]], "ti1": [["ti0", "ti1", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "refresh_from_task", "task1"], ["ti1", "max_tries"], ["ti1", "try_number"], ["session", "merge", "ti1"], ["ti1", "run"], ["ti1", "try_number"], ["ti1", "max_tries"], ["ti1", "refresh_from_db"], ["ti1", "max_tries"], ["ti1", "try_number"]], "try_number": [["ti0", "try_number"], ["ti0", "try_number"], ["ti0", "try_number"], ["ti1", "try_number"], ["ti1", "try_number"], ["ti1", "try_number"], ["ti0", "try_number"]]}, "name": "test_dag_clear", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days", "dag"], ["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["session", "dag_maker", "session"]], "self": []}, "params_p": {"args": [], "dag_maker": [["raiden.utils.Address", 0.2584802939994503], ["raiden.utils.MessageID", 0.2584802939994503], ["datetime.date.time", 0.11513627910202986], ["raiden.utils.ChannelID", 0.08616009799981675]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_dag_clear", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "session": "", "task0": "", "task1": "", "ti0": "", "ti1": "", "try_number": ""}, "variables_p": {"dr": [["str", 0.5836074563649544], ["int", 0.22390482794126815], ["Dict[str, Union[Any, Any]]", 0.08189547188271687]], "session": [["sqlalchemy.orm.session.Session", 0.42186219298429367], ["Optional[str]", 0.3219599240748808], ["SMSShell.models.session.Session", 0.10402362412584878], ["kedro.framework.session.session.KedroSession", 0.05279054796768848]], "task0": [["list", 0.1250789965082158], ["Dict[str, Dict[str, int]]", 0.09519708448820172]], "task1": [["Dict[str, Union[int, str]]", 0.18184860566684627], ["Dict[str, Any]", 0.17551394749520216], ["Dict[str, Union[float, str]]", 0.17478513072543728], ["Dict[str, Dict[str, int]]", 0.09293275296119512]], "ti0": [["str", 0.9138285067516136], ["int", 0.08617149324838619]], "ti1": [["str", 1.0]], "try_number": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[528, 4], [601, 44]], "fn_var_ln": {"dag": [[534, 12], [534, 15]], "dags": [[531, 8], [531, 12]], "dr": [[541, 12], [541, 14]], "failed_dag_idx": [[585, 8], [585, 22]], "num_of_dags": [[532, 8], [532, 19]], "session": [[530, 8], [530, 15]], "task": [[548, 12], [548, 19]], "ti": [[547, 12], [547, 14]], "tis": [[531, 14], [531, 17]]}, "fn_var_occur": {"dag": [["dag", "DAG", "str", "i", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["task", "EmptyOperator", "task_id", "str", "i", "owner", "dag", "dag"], ["dr", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["dags", "append", "dag"]], "dags": [["dags", "tis"], ["dags", "append", "dag"], ["DAG", "clear_dags", "dags"], ["DAG", "clear_dags", "dags", "dry_run", "True"], ["DAG", "clear_dags", "dags", "only_failed", "True"]], "dr": [["dr", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "dr", "task_instances"]], "failed_dag_idx": [["failed_dag_idx", "randint", "len", "tis"], ["tis", "failed_dag_idx", "state", "State", "FAILED"], ["session", "merge", "tis", "failed_dag_idx"], ["i", "failed_dag_idx"]], "num_of_dags": [["range", "num_of_dags"], ["range", "num_of_dags"], ["range", "num_of_dags"], ["range", "num_of_dags"], ["range", "num_of_dags"], ["range", "num_of_dags"]], "session": [["session", "settings", "Session"], ["dr", "dag", "create_dagrun", "execution_date", "DEFAULT_DATE", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["session", "merge", "tis", "failed_dag_idx"], ["session", "commit"]], "task": [["task", "EmptyOperator", "task_id", "str", "i", "owner", "dag", "dag"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["tis", "append", "ti"]], "tis": [["dags", "tis"], ["tis", "append", "ti"], ["tis", "i", "run"], ["tis", "i", "state", "State", "SUCCESS"], ["tis", "i", "try_number"], ["tis", "i", "max_tries"], ["tis", "i", "refresh_from_db"], ["tis", "i", "state", "State", "NONE"], ["tis", "i", "try_number"], ["tis", "i", "max_tries"], ["tis", "i", "run"], ["tis", "i", "state", "State", "SUCCESS"], ["tis", "i", "try_number"], ["tis", "i", "max_tries"], ["tis", "i", "refresh_from_db"], ["tis", "i", "state", "State", "SUCCESS"], ["tis", "i", "try_number"], ["tis", "i", "max_tries"], ["failed_dag_idx", "randint", "len", "tis"], ["tis", "failed_dag_idx", "state", "State", "FAILED"], ["session", "merge", "tis", "failed_dag_idx"], ["tis", "i", "refresh_from_db"], ["tis", "i", "state", "State", "SUCCESS"], ["tis", "i", "try_number"], ["tis", "i", "max_tries"], ["tis", "i", "state", "State", "NONE"], ["tis", "i", "try_number"], ["tis", "i", "max_tries"]]}, "name": "test_dags_clear", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_dags_clear", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dags": "", "dr": "", "failed_dag_idx": "", "num_of_dags": "", "session": "", "task": "", "ti": "", "tis": ""}, "variables_p": {"dag": [["int", 0.3112552165884197], ["float", 0.28471723037745594], ["str", 0.11243022545991768], ["list", 0.09778070759281972], ["List[Dict[str, str]]", 0.09696235737507146]], "dags": [["list", 0.6972048917816129], ["int", 0.08464205391026229], ["str", 0.06978616807867513]], "dr": [["str", 0.17762947884977012], ["datetime.datetime.datetime", 0.14639595217177948], ["datetime.date.time.timezone", 0.14542376202494517], ["Dict[str, str]", 0.10150530191331375], ["list", 0.09471336654921447], ["byceps.services.user.models.detail.UserDetail", 0.08552372456134828], ["List[str]", 0.08360403498340989], ["Optional[excars.models.profiles.Profile]", 0.08265738331494707], ["Optional[str]", 0.08254699563127181]], "failed_dag_idx": [["list", 0.5244269812911472], ["dict", 0.14669506189979017], ["int", 0.07484417090951927]], "num_of_dags": [["int", 1.0]], "session": [["grpy.core.models.User", 0.09300280162170033]], "task": [["str", 0.32298253747024297], ["Dict[str, str]", 0.18209724744102077]], "ti": [["str", 0.41592948447165173]], "tis": [["list", 0.5966795346249986], ["float", 0.11205774365995269], ["int", 0.10174282827785917]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[603, 4], [636, 33]], "fn_var_ln": {"dr": [[613, 8], [613, 10]], "op1": [[609, 12], [609, 15]], "op2": [[610, 12], [610, 15]], "task": [[620, 8], [620, 16]], "ti1": [[618, 8], [618, 11]], "ti2": [[618, 13], [618, 16]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"], ["ti1", "ti2", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"]], "op1": [["op1", "EmptyOperator", "task_id"], ["op1", "op2"], ["ti1", "task", "op1"]], "op2": [["op2", "EmptyOperator", "task_id", "retries"], ["op1", "op2"], ["ti2", "task", "op2"], ["op2", "clear", "upstream", "True"]], "task": [["ti1", "task", "op1"], ["ti2", "task", "op2"]], "ti1": [["ti1", "ti2", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti1", "task", "op1"], ["ti1", "run"], ["ti1", "try_number"], ["ti1", "max_tries"]], "ti2": [["ti1", "ti2", "sorted", "dr", "task_instances", "key", "ti", "ti", "task_id"], ["ti2", "task", "op2"], ["ti2", "run"], ["ti2", "try_number"], ["ti2", "max_tries"], ["ti2", "run", "ignore_ti_state", "True"], ["ti2", "try_number"], ["ti2", "max_tries"]]}, "name": "test_operator_clear", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "datetime", "timedelta", "days"], ["dr", "dag_maker", "create_dagrun", "state", "State", "RUNNING", "run_type", "DagRunType", "SCHEDULED"]], "self": []}, "params_p": {"args": [], "dag_maker": [["datetime.date.time", 0.1160593935830978], ["int", 0.09966589331935506], ["bool", 0.09368300582889864], ["types.topics.ChannelT", 0.09368300582889864], ["str", 0.08850198797580586]], "kwargs": [], "self": []}, "q_name": "TestClearTasks.test_operator_clear", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "op1": "", "op2": "", "task": "", "ti1": "", "ti2": ""}, "variables_p": {"dr": [["str", 0.5836074563649544], ["int", 0.22390482794126815], ["Dict[str, Union[Any, Any]]", 0.08189547188271687]], "op1": [["Pattern[Any]", 0.27879768546033024], ["Dict[str, Union[Any, Any, Any]]", 0.14556071428020653], ["list", 0.08692993593267881], ["Dict[str, str]", 0.0859032434456919], ["Dict[int, str]", 0.08096485165266916], ["dict", 0.0794553907602866], ["Dict[str, Union[int, Any]]", 0.0779019879981393]], "op2": [["Dict[str, Any]", 0.19430729337767783], ["Pattern[Any]", 0.15923037240152502], ["int", 0.11380374220730889], ["RuntimeError", 0.09556457868772815], ["Dict[str, str]", 0.09074222274793366], ["dict", 0.09071228463732522]], "task": [["dict", 0.2031444324136415], ["List[None]", 0.1425534852388083], ["str", 0.09468434542067121], ["Dict[str, str]", 0.08412086063534181]], "ti1": [["str", 0.9049718950712071], ["dict", 0.09502810492879285]], "ti2": [["str", 0.9049718950712071], ["dict", 0.09502810492879285]]}}], "name": "TestClearTasks", "q_name": "TestClearTasks", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "datetime", "pytest", "airflow", "settings", "airflow", "models", "DAG", "TaskInstance", "TI", "TaskReschedule", "clear_task_instances", "airflow", "models", "serialized_dag", "SerializedDagModel", "airflow", "operators", "empty", "EmptyOperator", "airflow", "sensors", "python", "PythonSensor", "airflow", "utils", "session", "create_session", "airflow", "utils", "state", "DagRunState", "State", "TaskInstanceState", "airflow", "utils", "types", "DagRunType", "tests", "models", "DEFAULT_DATE", "tests", "test_utils", "db", "random", "randint"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 124}, "session_id": "7U3tgyCnzYt_1qXqo14YlaSAtoJ6MzaYOPcXyxRVR14", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}