{"error": null, "response": {"classes": [{"cls_lc": [[43, 0], [60, 37]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[46, 4], [48, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__init__", "params": {"kwargs": "", "self": ""}, "params_descr": {"kwargs": "", "self": ""}, "params_occur": {"kwargs": [["kwargs", "items"]], "self": [["setattr", "self", "key", "value"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "ClassWithCustomAttributes.__init__", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[50, 4], [51, 76]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__str__", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["ClassWithCustomAttributes", "__name__", "str", "self", "__dict__"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "ClassWithCustomAttributes.__str__", "ret_exprs": ["return f\"{ClassWithCustomAttributes.__name__}({str(self.__dict__)})\""], "ret_type": "", "ret_type_p": [["Dict[str, Any]", 0.1078499489911576], ["dict", 0.10668201027310432], ["str", 0.10604251157887606], ["Dict[str, int]", 0.09447192178947593], ["Mapping[str, Any]", 0.09438303244278855], ["sqlalchemy.engine.Engine", 0.0887514261592041]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[53, 4], [54, 29]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__repr__", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "__str__"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "ClassWithCustomAttributes.__repr__", "ret_exprs": ["return self.__str__()"], "ret_type": "", "ret_type_p": [["str", 0.8458824507089776]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[56, 4], [57, 46]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__eq__", "params": {"other": "", "self": ""}, "params_descr": {"other": "", "self": ""}, "params_occur": {"other": [["self", "__dict__", "other", "__dict__"]], "self": [["self", "__dict__", "other", "__dict__"]]}, "params_p": {"args": [], "kwargs": [], "other": [["Union[str, \"Date\"]", 8.558199866586338e-11], ["Tuple[float, float]", 2.2038073904544742e-11], ["Type", 2.0881611798473296e-11]], "self": []}, "q_name": "ClassWithCustomAttributes.__eq__", "ret_exprs": ["return self.__dict__ == other.__dict__"], "ret_type": "", "ret_type_p": [["Dict[str, Any]", 0.4104400768074746], ["str", 0.10379057280959801], ["Dict[str, Dict[str, Any]]", 0.10261001920186864], ["dict", 0.09532005172718877], ["Dict[str, float]", 0.09394818650670235], ["Dict[str, models.DeviceRow]", 0.09128107374529894]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[59, 4], [60, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__ne__", "params": {"other": "", "self": ""}, "params_descr": {"other": "", "self": ""}, "params_occur": {"other": [["self", "__eq__", "other"]], "self": [["self", "__eq__", "other"]]}, "params_p": {"args": [], "kwargs": [], "other": [["dict", 0.24999999998650746], ["AbstractSet[T]", 9.152138678985443e-12], ["AbstractSet[T_co]", 9.152138678985443e-12], ["raiden.utils.Any", 6.887222363228575e-12]], "self": []}, "q_name": "ClassWithCustomAttributes.__ne__", "ret_exprs": ["return not self.__eq__(other)"], "ret_type": "", "ret_type_p": [["str", 0.13968937068109144], ["cmk.utils.type_defs.ServiceName", 0.10951851018970368], ["cmk.utils.type_defs.HostName", 0.10951851018970368], ["django.db.models.QuerySet", 0.06471841105226568]], "variables": {}, "variables_p": {}}], "name": "ClassWithCustomAttributes", "q_name": "ClassWithCustomAttributes", "variables": {}, "variables_p": {}}, {"cls_lc": [[63, 0], [371, 9]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[67, 4], [70, 34]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean_db", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestRenderedTaskInstanceFields.clean_db", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[72, 4], [73, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "setup_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "clean_db"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestRenderedTaskInstanceFields.setup_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[75, 4], [76, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "clean_db"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestRenderedTaskInstanceFields.teardown_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that template_fields are rendered correctly, stored in the Database,", "long_descr": "and are correctly fetched using RTIF.get_templated_fields", "ret": null}, "fn_lc": [[114, 4], [145, 56]], "fn_var_ln": {"dr": [[122, 8], [122, 10]], "rtif": [[129, 8], [129, 12]], "session": [[124, 8], [124, 15]], "task": [[128, 8], [128, 16]], "task_2": [[121, 12], [121, 18]], "ti": [[126, 8], [126, 10]], "ti2": [[126, 12], [126, 15]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "ti2", "dr", "task_instances"]], "rtif": [["rtif", "RTIF", "ti", "ti"], ["ti", "dag_id", "rtif", "dag_id"], ["ti", "task_id", "rtif", "task_id"], ["ti", "run_id", "rtif", "run_id"], ["expected_rendered_field", "rtif", "rendered_fields", "get"], ["session", "add", "rtif"]], "session": [["session", "dag_maker", "session"], ["session", "add", "rtif"], ["session", "flush"], ["expected_rendered_field", "None", "RTIF", "get_templated_fields", "ti", "ti", "session", "session"]], "task": [["task", "BashOperator", "task_id", "bash_command", "templated_field"], ["ti", "task", "task"], ["ti2", "task", "task_2"]], "task_2": [["task_2", "BashOperator", "task_id", "bash_command", "templated_field"], ["ti2", "task", "task_2"]], "ti": [["ti", "ti2", "dr", "task_instances"], ["ti", "task", "task"], ["rtif", "RTIF", "ti", "ti"], ["ti", "dag_id", "rtif", "dag_id"], ["ti", "task_id", "rtif", "task_id"], ["ti", "run_id", "rtif", "run_id"], ["expected_rendered_field", "None", "RTIF", "get_templated_fields", "ti", "ti", "session", "session"], ["RTIF", "get_templated_fields", "ti", "ti2", "None"]], "ti2": [["ti", "ti2", "dr", "task_instances"], ["ti2", "task", "task_2"], ["RTIF", "get_templated_fields", "ti", "ti2", "None"]]}, "name": "test_get_templated_fields", "params": {"dag_maker": "", "expected_rendered_field": "", "self": "", "templated_field": ""}, "params_descr": {"dag_maker": "", "expected_rendered_field": "", "self": "", "templated_field": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"], ["session", "dag_maker", "session"]], "expected_rendered_field": [["expected_rendered_field", "rtif", "rendered_fields", "get"], ["expected_rendered_field", "None", "RTIF", "get_templated_fields", "ti", "ti", "session", "session"]], "self": [], "templated_field": [["task", "BashOperator", "task_id", "bash_command", "templated_field"], ["task_2", "BashOperator", "task_id", "bash_command", "templated_field"]]}, "params_p": {"args": [], "dag_maker": [["app.models.GameMember", 0.1164205355234311], ["app.models.course.Course", 0.1164205355234311], ["str", 0.11557551068808068], ["sqlalchemy.engine.Engine", 0.10097889773845779], ["models.UserAuth", 0.09297504991520135]], "expected_rendered_field": [["dict", 0.10030266417826617], ["django.contrib.auth.models.User", 0.09542810547407646]], "kwargs": [], "self": [], "templated_field": [["str", 0.12080420927833957], ["fal.models.Season", 0.11217614918445454], ["app.models.Game", 0.1067413445681835], ["zerver.models.UserProfile", 0.10511019972821233], ["Dict[str, Any]", 0.09382831446707438], ["core.models.Recipe", 0.09234981541078967]]}, "q_name": "TestRenderedTaskInstanceFields.test_get_templated_fields", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "rtif": "", "session": "", "task": "", "task_2": "", "ti": "", "ti2": ""}, "variables_p": {"dr": [["str", 0.2588211842528331], ["bool", 0.15550386141754535], ["dict", 0.0833600149961975], ["float", 0.06829726504665083], ["bytes", 0.06344854499620131], ["int", 0.05956140645548112]], "rtif": [["str", 0.27294056426580093], ["List[str]", 0.17330033075198448], ["Dict[str, Any]", 0.12964568983617342], ["int", 0.09622401811710793], ["dict", 0.07920283095522003], ["Dict[str, str]", 0.07766272335044269]], "session": [["sqlalchemy.orm.session.Session", 0.391152741326973], ["kedro.framework.session.session.KedroSession", 0.29676139892507886], ["SMSShell.models.session.Session", 0.11401825270001832]], "task": [["Dict[str, Any]", 0.17471278761199732], ["Dict[str, Dict[str, int]]", 0.09736042735960043], ["str", 0.0739577048477444]], "task_2": [["Dict[str, Any]", 0.09574189953519434], ["List[None]", 0.09439302992767774], ["Dict[str, List[Any]]", 0.07288848631635018], ["dict", 0.06879273798459848]], "ti": [["str", 0.20004043739297062], ["int", 0.19801027232898813], ["List[str]", 0.10002021869648531], ["Tuple[int, int, int, int]", 0.08713333215499325]], "ti2": [["int", 0.4160612533636288], ["raiden.utils.PaymentID", 0.1418038106599663]]}}, {"docstring": {"func": "Test that old records are deleted from rendered_task_instance_fields table", "long_descr": "for a given task_id and dag_id.", "ret": null}, "fn_lc": [[158, 4], [196, 45]], "fn_var_ln": {"dr": [[170, 12], [170, 14]], "expected_query_count_based_on_db": [[187, 8], [187, 40]], "result": [[195, 8], [195, 14]], "rtif_list": [[168, 8], [168, 17]], "session": [[165, 8], [165, 15]], "task": [[172, 12], [172, 19]], "ti": [[171, 12], [171, 14]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "run_id", "str", "num", "execution_date", "dag", "start_date", "timedelta", "days", "num"], ["ti", "dr", "task_instances"]], "expected_query_count_based_on_db": [["expected_query_count_based_on_db", "expected_query_count", "session", "bind", "dialect", "name", "expected_query_count", "expected_query_count"], ["assert_queries_count", "expected_query_count_based_on_db"]], "result": [["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "RTIF", "task_id", "task", "task_id", "all"], ["rtif", "result"], ["rtif_num", "len", "result"], ["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "RTIF", "task_id", "task", "task_id", "all"], ["remaining_rtifs", "len", "result"]], "rtif_list": [["rtif_list", "append", "RTIF", "ti"], ["session", "add_all", "rtif_list"]], "session": [["session", "settings", "Session"], ["session", "add_all", "rtif_list"], ["session", "flush"], ["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "RTIF", "task_id", "task", "task_id", "all"], ["expected_query_count_based_on_db", "expected_query_count", "session", "bind", "dialect", "name", "expected_query_count", "expected_query_count"], ["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "RTIF", "task_id", "task", "task_id", "all"]], "task": [["task", "BashOperator", "task_id", "bash_command"], ["ti", "task", "task"], ["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "RTIF", "task_id", "task", "task_id", "all"], ["RTIF", "delete_old_records", "task_id", "task", "task_id", "dag_id", "task", "dag_id", "num_to_keep", "num_to_keep"], ["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "RTIF", "task_id", "task", "task_id", "all"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["rtif_list", "append", "RTIF", "ti"]]}, "name": "test_delete_old_records", "params": {"dag_maker": "", "expected_query_count": "", "num_to_keep": "", "remaining_rtifs": "", "rtif_num": "", "self": ""}, "params_descr": {"dag_maker": "", "expected_query_count": "", "num_to_keep": "", "remaining_rtifs": "", "rtif_num": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag"], ["dr", "dag_maker", "create_dagrun", "run_id", "str", "num", "execution_date", "dag", "start_date", "timedelta", "days", "num"]], "expected_query_count": [["expected_query_count_based_on_db", "expected_query_count", "session", "bind", "dialect", "name", "expected_query_count", "expected_query_count"]], "num_to_keep": [["RTIF", "delete_old_records", "task_id", "task", "task_id", "dag_id", "task", "dag_id", "num_to_keep", "num_to_keep"]], "remaining_rtifs": [["remaining_rtifs", "len", "result"]], "rtif_num": [["range", "rtif_num"], ["rtif_num", "len", "result"]], "self": []}, "params_p": {"args": [], "dag_maker": [["Optional[bool]", 0.3212888809118534], ["List[str]", 0.10709629363728447], ["Callable", 0.09174094303057403], ["int", 0.09174094303057403]], "expected_query_count": [["int", 0.28618502680731417], ["django.db.models.QuerySet", 0.11249262483300684], ["dict", 0.10245878033940936], ["raiden.utils.List[raiden.utils.FeeAmount]", 0.10151825512494385], ["datetime.datetime", 0.09955818811687854]], "kwargs": [], "num_to_keep": [["str", 0.5028388811198653], ["Optional[str]", 0.19705482137601307], ["bool", 0.09827706954149268], ["zerver.models.Realm", 0.09535418273531969]], "remaining_rtifs": [["str", 0.3894259402427585], ["List[int]", 0.0979927103785258], ["Iterable[str]", 0.09735648506068963], ["float", 0.09735648506068963]], "rtif_num": [["str", 0.41150766259375665], ["Iterable[str]", 0.10287691564843916], ["float", 0.10287691564843916], ["int", 0.09214847380225831]], "self": []}, "q_name": "TestRenderedTaskInstanceFields.test_delete_old_records", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "expected_query_count_based_on_db": "", "result": "", "rtif_list": "", "session": "", "task": "", "ti": ""}, "variables_p": {"dr": [["int", 0.28831346143646475], ["str", 0.20546113314319447], ["decksite.data.models.person.Person", 0.1083275400323393], ["tests.factories.model.TaskPayment", 0.0998736420820807], ["List[dict]", 0.09351122432606526]], "expected_query_count_based_on_db": [["Dict[str, str]", 0.3178157503664996], ["int", 0.18991270035541047], ["dict", 0.1081326089688447], ["myia.operations.utils.Operation", 0.09770104299558866], ["str", 0.09246826479049376]], "result": [["str", 0.3091650269483881], ["List[Tuple[Any, str]]", 0.17076024596374795], ["int", 0.10556663581491336], ["Dict[str, Optional[str]]", 0.08643162414105017], ["List[str]", 0.08316756328620875], ["Tuple[str, str]", 0.08177958886733656], ["Type[jazmin_leon_llc.fluent_pages.models.db.UrlNode]", 0.08169894183071298]], "rtif_list": [["List[str]", 0.3535669764064219], ["list", 0.33589660157629175], ["List[List]", 0.10607996323794538], ["Dict[str, Any]", 0.07880542653635558]], "session": [], "task": [], "ti": [["str", 0.4255179868823057], ["int", 0.11819602696710532], ["bool", 0.0886354464683398], ["list", 0.0885760003607144]]}}, {"docstring": {"func": "Test that old records are deleted from rendered_task_instance_fields table", "long_descr": "for a given task_id and dag_id with mapped tasks.", "ret": null}, "fn_lc": [[206, 4], [246, 49]], "fn_var_ln": {"dr": [[216, 12], [216, 14]], "expected_query_count_based_on_db": [[232, 8], [232, 40]], "mapped": [[214, 12], [214, 18]], "result": [[242, 8], [242, 14]], "rtif_num_runs": [[243, 8], [243, 21]], "task": [[223, 16], [223, 23]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun", "run_id", "num", "execution_date", "dag", "start_date", "timedelta", "days", "num"], ["mapped", "expand_mapped_task", "dr", "run_id", "session", "dag_maker", "session"], ["session", "refresh", "dr"], ["dr", "task_instances"], ["RTIF", "delete_old_records", "task_id", "mapped", "task_id", "dag_id", "dr", "dag_id", "num_to_keep", "num_to_keep", "session", "session"]], "expected_query_count_based_on_db": [["expected_query_count_based_on_db", "expected_query_count", "session", "bind", "dialect", "name", "expected_query_count", "expected_query_count"], ["assert_queries_count", "expected_query_count_based_on_db"]], "mapped": [["mapped", "BashOperator", "partial", "task_id", "expand", "bash_command"], ["mapped", "expand_mapped_task", "dr", "run_id", "session", "dag_maker", "session"], ["RTIF", "delete_old_records", "task_id", "mapped", "task_id", "dag_id", "dr", "dag_id", "num_to_keep", "num_to_keep", "session", "session"], ["result", "session", "query", "RTIF", "filter_by", "dag_id", "dag", "dag_id", "task_id", "mapped", "task_id", "all"]], "result": [["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "all"], ["len", "result", "num_runs"], ["result", "session", "query", "RTIF", "filter_by", "dag_id", "dag", "dag_id", "task_id", "mapped", "task_id", "all"], ["rtif_num_runs", "Counter", "rtif", "run_id", "rtif", "result"], ["len", "result", "remaining_rtifs"]], "rtif_num_runs": [["rtif_num_runs", "Counter", "rtif", "run_id", "rtif", "result"], ["len", "rtif_num_runs", "remaining_rtifs"]], "task": [["ti", "task", "dag", "get_task", "ti", "task_id"]]}, "name": "test_delete_old_records_mapped", "params": {"dag_maker": "", "expected_query_count": "", "num_runs": "", "num_to_keep": "", "remaining_rtifs": "", "self": "", "session": ""}, "params_descr": {"dag_maker": "", "expected_query_count": "", "num_runs": "", "num_to_keep": "", "remaining_rtifs": "", "self": "", "session": ""}, "params_occur": {"dag_maker": [["dag_maker", "session", "session", "dag"], ["dr", "dag_maker", "create_dagrun", "run_id", "num", "execution_date", "dag", "start_date", "timedelta", "days", "num"], ["mapped", "expand_mapped_task", "dr", "run_id", "session", "dag_maker", "session"]], "expected_query_count": [["expected_query_count_based_on_db", "expected_query_count", "session", "bind", "dialect", "name", "expected_query_count", "expected_query_count"]], "num_runs": [["range", "num_runs"], ["len", "result", "num_runs"]], "num_to_keep": [["RTIF", "delete_old_records", "task_id", "mapped", "task_id", "dag_id", "dr", "dag_id", "num_to_keep", "num_to_keep", "session", "session"]], "remaining_rtifs": [["len", "rtif_num_runs", "remaining_rtifs"], ["len", "result", "remaining_rtifs"]], "self": [], "session": [["dag_maker", "session", "session", "dag"], ["mapped", "expand_mapped_task", "dr", "run_id", "session", "dag_maker", "session"], ["session", "refresh", "dr"], ["session", "add", "RTIF", "ti"], ["session", "flush"], ["result", "session", "query", "RTIF", "filter", "RTIF", "dag_id", "dag", "dag_id", "all"], ["expected_query_count_based_on_db", "expected_query_count", "session", "bind", "dialect", "name", "expected_query_count", "expected_query_count"], ["RTIF", "delete_old_records", "task_id", "mapped", "task_id", "dag_id", "dr", "dag_id", "num_to_keep", "num_to_keep", "session", "session"], ["result", "session", "query", "RTIF", "filter_by", "dag_id", "dag", "dag_id", "task_id", "mapped", "task_id", "all"]]}, "params_p": {"args": [], "dag_maker": [["cmk.utils.type_defs.ServiceName", 0.22251259722195887], ["cmk.utils.type_defs.HostName", 0.22251259722195887], ["str", 0.10062527632797048], ["Dict[str, Any]", 0.09525731941922998], ["zam_repondeur.models.Dossier", 0.09032192371937954], ["medtagger.database.models.Scan", 0.08873990197584156]], "expected_query_count": [["dict", 0.18666370513068686], ["Dict[Any, int]", 0.11731948572952755], ["app.models.dto.ClientInfo", 0.10324139265519713], ["int", 0.09401815168815479], ["List[str]", 0.09333537380243277]], "kwargs": [], "num_runs": [["int", 0.7885733710920125], ["bool", 0.10374405997803517]], "num_to_keep": [["str", 0.6104927181692026], ["Optional[str]", 0.0971700159390488], ["zerver.models.UserProfile", 0.09677823123300303]], "remaining_rtifs": [["bytes", 0.2001085171188096], ["List[str]", 0.19052201952343212], ["list", 0.18726473856107673], ["raiden.utils.Any", 0.10583623300117141]], "self": [], "session": [["str", 0.4152212796768363], ["sqlalchemy.orm.Session", 0.08943375291661126], ["zerver.models.UserProfile", 0.08012368772971626]]}, "q_name": "TestRenderedTaskInstanceFields.test_delete_old_records_mapped", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "expected_query_count_based_on_db": "", "mapped": "", "result": "", "rtif_num_runs": "", "task": ""}, "variables_p": {"dr": [["Optional[magic.models.deck.Deck]", 0.25129918203583734], ["raiden.utils.Any", 0.09466080719818841]], "expected_query_count_based_on_db": [["Dict[str, str]", 0.3178157503664996], ["int", 0.18991270035541047], ["dict", 0.1081326089688447], ["myia.operations.utils.Operation", 0.09770104299558866], ["str", 0.09246826479049376]], "mapped": [["str", 0.17965953548180671], ["zerver.models.Realm", 0.13459654346249525], ["geode.models.common.Address", 0.0991030896564002], ["tuple", 0.08136916499495518], ["int", 0.0799134310261911], ["Dict[str, Any]", 0.0755729458628252], ["Dict[str, str]", 0.07458210276323507]], "result": [["int", 0.2052133656906754], ["List[Dict[str, Any]]", 0.125132963223208], ["set", 0.10578317222050172], ["List[Tuple[Any, str]]", 0.0937094902826801], ["List[Tuple[int, Any]]", 0.09227621102759359], ["str", 0.08704364592073159], ["idom.utils.Ref[None]", 0.08683687078737802], ["list", 0.08652208113282533]], "rtif_num_runs": [["int", 0.2892201018304784], ["str", 0.2732771420562099], ["Type[List[Any]]", 0.14828488938698733], ["os.terminal_size", 0.09770401443333057], ["float", 0.08926370573433484]], "task": [["taskiapplication.models.task.Task", 0.10271090144073139], ["khetha.models.Task", 0.0960763346774586]]}}, {"docstring": {"func": "Test records can be written and overwritten", "long_descr": null, "ret": null}, "fn_lc": [[248, 4], [303, 27]], "fn_var_ln": {"dr": [[284, 8], [284, 10]], "result": [[267, 8], [267, 14]], "result_updated": [[290, 8], [290, 22]], "rtif": [[265, 8], [265, 12]], "rtif_updated": [[287, 8], [287, 20]], "session": [[254, 8], [254, 15]], "task": [[286, 8], [286, 15]], "ti": [[285, 8], [285, 10]], "updated_task": [[283, 12], [283, 24]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"], ["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "result": [["result", "session", "query", "RTIF", "all"], ["result", "session", "query", "RTIF", "dag_id", "RTIF", "task_id", "RTIF", "rendered_fields", "filter", "RTIF", "dag_id", "rtif", "dag_id", "RTIF", "task_id", "rtif", "task_id", "RTIF", "run_id", "rtif", "run_id", "first"], ["None", "result"]], "result_updated": [["result_updated", "session", "query", "RTIF", "dag_id", "RTIF", "task_id", "RTIF", "rendered_fields", "filter", "RTIF", "dag_id", "rtif_updated", "dag_id", "RTIF", "task_id", "rtif_updated", "task_id", "RTIF", "run_id", "rtif_updated", "run_id", "first"], ["None", "result_updated"]], "rtif": [["rtif", "RTIF", "ti"], ["rtif", "write"], ["result", "session", "query", "RTIF", "dag_id", "RTIF", "task_id", "RTIF", "rendered_fields", "filter", "RTIF", "dag_id", "rtif", "dag_id", "RTIF", "task_id", "rtif", "task_id", "RTIF", "run_id", "rtif", "run_id", "first"]], "rtif_updated": [["rtif_updated", "RTIF", "ti"], ["rtif_updated", "write"], ["result_updated", "session", "query", "RTIF", "dag_id", "RTIF", "task_id", "RTIF", "rendered_fields", "filter", "RTIF", "dag_id", "rtif_updated", "dag_id", "RTIF", "task_id", "rtif_updated", "task_id", "RTIF", "run_id", "rtif_updated", "run_id", "first"]], "session": [["session", "settings", "Session"], ["result", "session", "query", "RTIF", "all"], ["result", "session", "query", "RTIF", "dag_id", "RTIF", "task_id", "RTIF", "rendered_fields", "filter", "RTIF", "dag_id", "rtif", "dag_id", "RTIF", "task_id", "rtif", "task_id", "RTIF", "run_id", "rtif", "run_id", "first"], ["result_updated", "session", "query", "RTIF", "dag_id", "RTIF", "task_id", "RTIF", "rendered_fields", "filter", "RTIF", "dag_id", "rtif_updated", "dag_id", "RTIF", "task_id", "rtif_updated", "task_id", "RTIF", "run_id", "rtif_updated", "run_id", "first"]], "task": [["task", "BashOperator", "task_id", "bash_command"], ["ti", "task", "task"], ["ti", "task", "updated_task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["rtif", "RTIF", "ti"], ["ti", "dr", "task_instances"], ["ti", "task", "updated_task"], ["rtif_updated", "RTIF", "ti"]], "updated_task": [["updated_task", "BashOperator", "task_id", "bash_command"], ["ti", "task", "updated_task"]]}, "name": "test_write", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"], ["dr", "dag_maker", "create_dagrun"]], "self": [["self", "clean_db"]]}, "params_p": {"args": [], "dag_maker": [["lms.lmsdb.models.Comment", 0.08883026342799258]], "kwargs": [], "self": []}, "q_name": "TestRenderedTaskInstanceFields.test_write", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "result": "", "result_updated": "", "rtif": "", "rtif_updated": "", "session": "", "task": "", "ti": "", "updated_task": ""}, "variables_p": {"dr": [["str", 0.20826422728823246], ["Dict[int, Dict[str, Any]]", 0.16479301638962054], ["int", 0.13341608111138376], ["bytes", 0.11089781788497063], ["list", 0.09544284339289912]], "result": [["str", 0.29708037398707016], ["Dict[str, Optional[str]]", 0.11699122638866336], ["Counter[int]", 0.1026898759629895], ["Type[jazmin_leon_llc.fluent_pages.models.db.UrlNode]", 0.10141659532857984], ["Type[Dict[str, Any]]", 0.10053046804320204], ["List[Tuple[Any, str]]", 0.10041164528826049], ["int", 0.0911422854007701]], "result_updated": [["int", 0.7098305656310744], ["Counter[int]", 0.10945890437257506], ["float", 0.09440591631423151], ["Set[Optional[int]]", 0.086304613682119]], "rtif": [["datetime.datetime", 0.3307263005591509], ["str", 0.21480585384410406], ["List[str]", 0.08901614572492095], ["list", 0.0872183265026799]], "rtif_updated": [["int", 0.39676805993626296], ["str", 0.3784308836281675], ["list", 0.10781844698826196]], "session": [["dict", 0.18577404548768073], ["legistar.models.MatterStatus", 0.08881112245095309], ["str", 0.07482435373996339]], "task": [["Dict[Any, str]", 0.1959455147907996], ["Dict[str, Any]", 0.10228086713517287], ["Dict[str, Dict[str, int]]", 0.0961746942100689], ["list", 0.0663121387612892]], "ti": [["str", 0.27521559802644413], ["list", 0.11910185776858098], ["Tuple[int, int, int, int]", 0.10525178172640964], ["geode.models.common.Address", 0.09667278942827019]], "updated_task": [["Dict[str, Any]", 0.20723605273540324], ["Dict[str, List[Any]]", 0.16492845216437074], ["dict", 0.12486288560706098], ["Dict[Any, List[Any]]", 0.08246422608218537]]}}, {"docstring": {"func": "Test that k8s_pod_yaml is rendered correctly, stored in the Database,", "long_descr": "and are correctly fetched using RTIF.get_k8s_pod_yaml", "ret": null}, "fn_lc": [[307, 4], [348, 72]], "fn_var_ln": {"dr": [[314, 8], [314, 10]], "expected_pod_yaml": [[330, 8], [330, 25]], "fileloc": [[315, 8], [315, 19]], "render_k8s_pod_yaml": [[320, 8], [320, 27]], "rtif": [[324, 8], [324, 12]], "task": [[318, 8], [318, 15]], "ti": [[317, 8], [317, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "expected_pod_yaml": [["expected_pod_yaml", "RTIF", "get_k8s_pod_yaml", "ti", "ti", "session", "session"]], "fileloc": [["dag", "fileloc", "TEST_DAGS_FOLDER"]], "render_k8s_pod_yaml": [["render_k8s_pod_yaml", "mock", "patch", "object", "ti", "return_value", "start"], ["rtif", "k8s_pod_yaml", "render_k8s_pod_yaml", "return_value"]], "rtif": [["rtif", "RTIF", "ti", "ti"], ["ti", "dag_id", "rtif", "dag_id"], ["ti", "task_id", "rtif", "task_id"], ["ti", "run_id", "rtif", "run_id"], ["rtif", "k8s_pod_yaml", "render_k8s_pod_yaml", "return_value"], ["redact", "assert_any_call", "rtif", "k8s_pod_yaml"], ["session", "add", "rtif"]], "task": [["task", "BashOperator", "task_id", "bash_command"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["render_k8s_pod_yaml", "mock", "patch", "object", "ti", "return_value", "start"], ["rtif", "RTIF", "ti", "ti"], ["ti", "dag_id", "rtif", "dag_id"], ["ti", "task_id", "rtif", "task_id"], ["ti", "run_id", "rtif", "run_id"], ["expected_pod_yaml", "RTIF", "get_k8s_pod_yaml", "ti", "ti", "session", "session"], ["make_transient", "ti"], ["RTIF", "get_k8s_pod_yaml", "ti", "ti", "session", "session", "None"]]}, "name": "test_get_k8s_pod_yaml", "params": {"dag_maker": "", "redact": "", "self": ""}, "params_descr": {"dag_maker": "", "redact": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag"], ["dr", "dag_maker", "create_dagrun"]], "redact": [["redact", "assert_any_call", "rtif", "k8s_pod_yaml"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "redact": [], "self": []}, "q_name": "TestRenderedTaskInstanceFields.test_get_k8s_pod_yaml", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "expected_pod_yaml": "", "fileloc": "", "render_k8s_pod_yaml": "", "rtif": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.19102769262823638], ["int", 0.17162166477055174], ["bytes", 0.13147271979782202], ["bool", 0.10824312554182834], ["dict", 0.10110987431707087], ["list", 0.0800386718608339]], "expected_pod_yaml": [["int", 0.2554238697227086], ["raiden.utils.Any", 0.11140936874582], ["Dict[Any, Dict[str, Any]]", 0.09544610496782091], ["Dict[str, Union[int, str]]", 0.08857388136644927], ["dict", 0.08771694777012878], ["Optional[raiden.utils.TokenNetworkAddress]", 0.08700030113524744], ["ajapaik.ajapaik.models.Album", 0.08424369019945661]], "fileloc": [["int", 0.9999999998136573], ["raiden.tests.utils.factories.MediatorTransfersPair", 9.933129497848184e-11], ["Tuple[List[str]]", 2.4658241689913823e-11], ["List[int]", 2.1243409504451462e-11], ["list", 2.1243409504451462e-11], ["tests.utils.fake_training_loop.FakeTraining", 1.9866258995696367e-11]], "render_k8s_pod_yaml": [["List[List[Any]]", 0.19209908806859816], ["list", 0.18929920327180885], ["Dict[str, Tuple[Any, Any]]", 0.12280069217959538], ["ValueError", 0.09717028372835591], ["int", 0.0918672561751939], ["List[int]", 0.09141826586371943]], "rtif": [["str", 0.27294056426580093], ["List[str]", 0.17330033075198448], ["Dict[str, Any]", 0.12964568983617342], ["int", 0.09622401811710793], ["dict", 0.07920283095522003], ["Dict[str, str]", 0.07766272335044269]], "task": [["Dict[str, Any]", 0.20397809074522935], ["Dict[str, str]", 0.10730667959599957], ["dict", 0.09784718473011846], ["List[None]", 0.09633598335470817], ["Pattern[Any]", 0.09344141222555558]], "ti": [["Optional[List[Any]]", 0.11103858398975702], ["Tuple[int, int, int, int]", 0.10230168399591084], ["raiden.utils.PaymentID", 0.09580296682737303]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[352, 4], [371, 9]], "fn_var_ln": {"dr": [[359, 8], [359, 10]], "rtif": [[367, 8], [367, 12]], "side_effect": [[360, 8], [360, 26]], "task": [[366, 8], [366, 15]], "ti": [[365, 8], [365, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "task_instances"]], "rtif": [["rtif", "RTIF", "ti", "ti"], ["rtif", "rendered_fields"]], "side_effect": [["redact", "side_effect"]], "task": [["task", "BashOperator", "task_id", "bash_command", "env"], ["ti", "task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "task", "task"], ["rtif", "RTIF", "ti", "ti"]]}, "name": "test_redact", "params": {"dag_maker": "", "redact": "", "self": ""}, "params_descr": {"dag_maker": "", "redact": "", "self": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "redact": [["redact", "side_effect"]], "self": []}, "params_p": {"args": [], "dag_maker": [["str", 0.11025891404730717]], "kwargs": [], "redact": [["tests.basilisp.helpers.CompileFn", 0.3], ["str", 0.09999999999999999], ["tests.async_mock.Mock", 0.09999999999999999], ["float", 0.09999999999999999]], "self": []}, "q_name": "TestRenderedTaskInstanceFields.test_redact", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "rtif": "", "side_effect": "", "task": "", "ti": ""}, "variables_p": {"dr": [["str", 0.19102769262823638], ["int", 0.17162166477055174], ["bytes", 0.13147271979782202], ["bool", 0.10824312554182834], ["dict", 0.10110987431707087], ["list", 0.0800386718608339]], "rtif": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "side_effect": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "task": [["Dict[str, Any]", 0.09243692922448478], ["List[None]", 0.0868326356195913], ["list", 0.06863171774417634], ["Dict[str, Dict[str, int]]", 0.06456366676378852]], "ti": [["str", 0.7321120393688458], ["Dict[str, List[Any]]", 0.08986410532634215], ["Union[Literal, str]", 0.0859451673673026]]}}], "name": "TestRenderedTaskInstanceFields", "q_name": "TestRenderedTaskInstanceFields", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "os", "collections", "Counter", "datetime", "date", "timedelta", "unittest", "mock", "pytest", "sqlalchemy", "orm", "session", "make_transient", "airflow", "settings", "airflow", "configuration", "TEST_DAGS_FOLDER", "airflow", "models", "Variable", "airflow", "models", "renderedtifields", "RenderedTaskInstanceFields", "RTIF", "airflow", "operators", "bash", "BashOperator", "airflow", "utils", "session", "create_session", "airflow", "utils", "timezone", "datetime", "tests", "test_utils", "asserts", "assert_queries_count", "tests", "test_utils", "db", "clear_db_dags", "clear_db_runs", "clear_rendered_ti_fields"], "mod_var_ln": {"DEFAULT_DATE": [[39, 0], [39, 12]], "EXECUTION_DATE": [[40, 0], [40, 14]]}, "mod_var_occur": {"DEFAULT_DATE": [], "EXECUTION_DATE": []}, "no_types_annot": {"D": 0, "I": 0, "U": 79}, "session_id": "LWrkYz7tQZ_P1WRSWxnn8ulltjVANId-A4__Tic_KwQ", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"DEFAULT_DATE": "", "EXECUTION_DATE": ""}, "variables_p": {"DEFAULT_DATE": [["str", 0.6363860493653496], ["List[str]", 0.09854130901534286], ["Dict[str, Callable[[Any], bool]]", 0.09209337908587], ["Optional[datetime.datetime]", 0.08610035725256096]], "EXECUTION_DATE": [["str", 0.5309981072561922], ["Dict[str, Dict[str, str]]", 0.14365386517434214], ["float", 0.13232945606051183], ["bytes", 0.10537212890330082], ["int", 0.08764644260565306]]}}}