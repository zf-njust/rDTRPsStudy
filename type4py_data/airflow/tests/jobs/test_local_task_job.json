{"error": null, "response": {"classes": [{"cls_lc": [[90, 0], [829, 49]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[92, 4], [95, 17]], "fn_var_ln": {"dagbag": [[93, 8], [93, 19]]}, "fn_var_occur": {"dagbag": [["self", "dagbag", "dagbag"]]}, "name": "set_instance_attrs", "params": {"dagbag": "", "self": ""}, "params_descr": {"dagbag": "", "self": ""}, "params_occur": {"dagbag": [["self", "dagbag", "dagbag"]], "self": [["self", "dagbag", "dagbag"], ["patch", "self", "mock_base_job_sleep"]]}, "params_p": {"args": [], "dagbag": [["bool", 0.5], ["float", 0.30000000000000004]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.set_instance_attrs", "ret_exprs": [], "ret_type": "", "variables": {"dagbag": ""}, "variables_p": {"dagbag": [["str", 0.30000000000000004], ["Dict[str, Any]", 0.1], ["dict", 0.1], ["int", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[97, 4], [101, 71]], "fn_var_ln": {"task_instance": [[99, 12], [99, 25]]}, "fn_var_occur": {"task_instance": [["task_instance", "dag_run", "get_task_instance", "task_id", "task_id"], ["task_instance", "refresh_from_db"], ["task_instance", "state", "expected_state", "error_message"]]}, "name": "validate_ti_states", "params": {"dag_run": "", "error_message": "", "self": "", "ti_state_mapping": ""}, "params_descr": {"dag_run": "", "error_message": "", "self": "", "ti_state_mapping": ""}, "params_occur": {"dag_run": [["task_instance", "dag_run", "get_task_instance", "task_id", "task_id"]], "error_message": [["task_instance", "state", "expected_state", "error_message"]], "self": [], "ti_state_mapping": [["ti_state_mapping", "items"]]}, "params_p": {"args": [], "dag_run": [["Dict[str, Any]", 0.20654235232448578], ["dict", 0.103481302989557], ["float", 0.09831074003765668], ["Dict[str, int]", 0.09538947994293726]], "error_message": [["float", 0.12260611650924404], ["datetime.datetime", 0.11494891970710262], ["str", 0.10518032923413205], ["Iterable[Iterable[str]]", 0.09879776145452143], ["int", 0.09521774802703702], ["List[recidiviz.persistence.entity.state.entities.StateAssessment]", 0.08594841072700403], ["Dict[int, dict]", 0.08594841072700403]], "kwargs": [], "self": [], "ti_state_mapping": [["Dict[str, Any]", 0.35821446129714535], ["List[str]", 0.10970077666432622], ["bool", 0.10643878873316569], ["backup.config.Config", 0.10204878022243012], ["Dict[str, str]", 0.09481655131322018]]}, "q_name": "TestLocalTaskJob.validate_ti_states", "ret_exprs": [], "ret_type": "", "variables": {"task_instance": ""}, "variables_p": {"task_instance": [["apps.core.task.coretaskstate.TaskDefinition", 0.28355889963088965], ["golem.task.task_api.EnvironmentTaskApiService", 0.21922825921465125], ["apps.dummy.task.dummytask.DummyTask", 0.10471762692218356], ["List[Dict[str, Any]]", 0.09672510040812968]]}}, {"docstring": {"func": "Check whether essential attributes", "long_descr": "of LocalTaskJob can be assigned with\nproper values without intervention", "ret": null}, "fn_lc": [[103, 4], [125, 34]], "fn_var_ln": {"check_result_1": [[121, 8], [121, 22]], "check_result_2": [[124, 8], [124, 22]], "dr": [[112, 8], [112, 10]], "essential_attr": [[119, 8], [119, 22]], "job1": [[116, 8], [116, 12]], "op1": [[110, 12], [110, 15]], "ti": [[114, 8], [114, 10]]}, "fn_var_occur": {"check_result_1": [["check_result_1", "hasattr", "job1", "attr", "attr", "essential_attr"], ["all", "check_result_1"]], "check_result_2": [["check_result_2", "getattr", "job1", "attr", "None", "attr", "essential_attr"], ["all", "check_result_2"]], "dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id"]], "essential_attr": [["check_result_1", "hasattr", "job1", "attr", "attr", "essential_attr"], ["check_result_2", "getattr", "job1", "attr", "None", "attr", "essential_attr"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["check_result_1", "hasattr", "job1", "attr", "attr", "essential_attr"], ["check_result_2", "getattr", "job1", "attr", "None", "attr", "essential_attr"]], "op1": [["op1", "EmptyOperator", "task_id"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id"]], "ti": [["ti", "dr", "get_task_instance", "task_id", "op1", "task_id"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"]]}, "name": "test_localtaskjob_essential_attr", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [["str", 0.05296904472811616]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_localtaskjob_essential_attr", "ret_exprs": [], "ret_type": "", "variables": {"check_result_1": "", "check_result_2": "", "dr": "", "essential_attr": "", "job1": "", "op1": "", "ti": ""}, "variables_p": {"check_result_1": [["Type[bytes]", 0.20510091330389035], ["Dict[str, str]", 0.19786399797343554], ["list", 0.11117259236706696], ["Pattern[str]", 0.10708924803373279], ["Type[str]", 0.09792616410759049], ["Dict[str, Any]", 0.09791072557790505]], "check_result_2": [["Dict[str, List[str]]", 0.19471758390209848], ["dict", 0.18443005443006527], ["Dict[str, List[Any]]", 0.18057638607015014], ["Dict[str, Any]", 0.09374525443257167], ["Dict[str, str]", 0.08937955715845473], ["Pattern[str]", 0.08818678216638168], ["DefaultDict[Any, Set[Any]]", 0.0846206613026587], ["Tuple[Literal, Literal, Literal, Literal, Literal]", 0.08434372053761927]], "dr": [["str", 0.5809469920659248], ["Dict[int, Dict[str, Any]]", 0.17990026719542426], ["Tuple[str, str, str, str, str, str, str]", 0.07535883893215277]], "essential_attr": [["int", 0.303293316977825], ["dict", 0.10214786503318955], ["str", 0.09535688394137863], ["Dict[str, Dict[str, Any]]", 0.09042780812097263], ["complex", 0.089159145344784]], "job1": [["Dict[str, Any]", 0.17069015055085365], ["DefaultDict[Any, dict]", 0.16875841761229243], ["alerta.models.alerAlert", 0.1322312195548238], ["int", 0.08231098726999808], ["List[Dict[str, Any]]", 0.07596071345817489], ["list", 0.0681760874915145]], "op1": [["Dict[str, Union[Any, bool, str]]", 0.2670422018444247], ["Dict[str, str]", 0.09802776809914684], ["dict", 0.08581480221470185], ["legistar.models.MatterStatus", 0.08195025024094088]], "ti": [["str", 0.3040126183076462], ["List[int]", 0.10395348561252915]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[127, 4], [171, 39]], "fn_var_ln": {"dr": [[132, 8], [132, 10]], "hostname": [[150, 8], [150, 19]], "job1": [[138, 8], [138, 12]], "job_runner": [[139, 8], [139, 18]], "op1": [[130, 12], [130, 15]], "pid": [[165, 8], [165, 14]], "session": [[128, 8], [128, 15]], "state": [[149, 8], [149, 16]], "task": [[140, 8], [140, 15]], "task_runner": [[144, 8], [144, 30]], "ti": [[133, 8], [133, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"]], "hostname": [["ti", "hostname"], ["ti", "hostname", "get_hostname"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job1", "task_runner", "process", "mock", "Mock"], ["job_runner", "task_runner", "job1", "task_runner"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"], ["job1", "task_runner", "process", "pid"], ["ti", "pid", "job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job_runner", "task_runner", "job1", "task_runner"], ["job_runner", "heartbeat_callback"], ["job_runner", "heartbeat_callback", "session", "None"], ["job_runner", "heartbeat_callback"], ["job_runner", "heartbeat_callback"]], "op1": [["op1", "EmptyOperator", "task_id"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["ti", "task", "op1"], ["ti", "refresh_from_task", "op1"]], "pid": [["job1", "task_runner", "process", "pid"], ["ti", "pid"], ["ti", "pid", "os", "getpid"], ["job1", "task_runner", "process", "pid"], ["ti", "pid", "None"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "session": [["session", "settings", "Session"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["session", "commit"], ["session", "merge", "ti"], ["session", "commit"], ["job_runner", "heartbeat_callback", "session", "None"], ["session", "merge", "ti"], ["session", "commit"]], "state": [["ti", "state", "State", "RUNNING"], ["ti", "state", "State", "RUNNING"]], "task": [["ti", "task", "op1"]], "task_runner": [["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job1", "task_runner", "process", "mock", "Mock"], ["job_runner", "task_runner", "job1", "task_runner"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"], ["job1", "task_runner", "process", "pid"], ["ti", "pid", "job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"]], "ti": [["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["ti", "state", "State", "RUNNING"], ["ti", "hostname"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "task", "op1"], ["ti", "refresh_from_task", "op1"], ["ti", "state", "State", "RUNNING"], ["ti", "hostname", "get_hostname"], ["ti", "pid"], ["session", "merge", "ti"], ["ti", "pid", "os", "getpid"], ["ti", "run_as_user"], ["ti", "pid", "None"], ["session", "merge", "ti"], ["ti", "pid", "job1", "task_runner", "process", "pid"], ["ti", "run_as_user"]]}, "name": "test_localtaskjob_heartbeat", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dr", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [["str", 0.11025891404730717]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_localtaskjob_heartbeat", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "hostname": "", "job1": "", "job_runner": "", "op1": "", "pid": "", "session": "", "state": "", "task": "", "task_runner": "", "ti": ""}, "variables_p": {"dr": [["str", 0.6808037006822731], ["Dict[int, Dict[str, Any]]", 0.1982911843589713]], "hostname": [["str", 0.4999999999845869], ["int", 0.49999999996751665]], "job1": [["dict", 0.48835282461325497], ["List[Dict[str, Any]]", 0.09735571457093527], ["Dict[str, Any]", 0.08961044531101948], ["Dict[int, Set[Any]]", 0.08889136829603307]], "job_runner": [["str", 0.3292247582922564], ["Mapping", 0.09854906643371872], ["Dict[str, Any]", 0.08874270020247325]], "op1": [["Dict[str, Union[Any, bool, str]]", 0.2525621867932358], ["golem.task.task_api.EnvironmentTaskApiService", 0.09826658031831301], ["dict", 0.09619966632074421], ["golem.task.taskbase.Task", 0.09121942140335643], ["taskiapplication.models.task.Task", 0.0882783983136741], ["List[str]", 0.08778078015717122]], "pid": [["golem.task.taskbase.AcceptClientVerdict", 0.12736684182196711]], "session": [["Dict[str, Any]", 0.14271589850621758], ["sqlalchemy.orm.session.Session", 0.08731091780685547], ["dict", 0.07135794925310879]], "state": [["str", 0.16614022144833834], ["Generator[Any, None, None]", 0.10565626038259482], ["Type[Dict[str, Any]]", 0.08394029931145731], ["int", 0.08127642996032079], ["Iterator[str]", 0.08016514786122955]], "task": [["Dict[str, int]", 0.1886597764962033], ["Dict[str, Union[Any, Any]]", 0.11517890082284353], ["Dict[str, str]", 0.1080086805020957], ["Set[str]", 0.09878865092122546], ["List[None]", 0.09426762621127903], ["str", 0.09087841804768251], ["KeysView[str]", 0.08865312924708396]], "task_runner": [["apps.dummy.task.dummytask.DummyTask", 0.11342348940289032], ["annofabapi.dataclass.task.Task", 0.07742704513586737]], "ti": [["str", 0.37490066710015013], ["List[int]", 0.0962665525688558], ["pydynasync.models.Changes", 0.09263573248869002]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[175, 4], [225, 39]], "fn_var_ln": {"dr": [[179, 8], [179, 10]], "hostname": [[183, 8], [183, 19]], "job1": [[186, 8], [186, 12]], "job_runner": [[187, 8], [187, 18]], "op1": [[178, 12], [178, 15]], "pid": [[219, 8], [219, 14]], "session": [[176, 8], [176, 15]], "state": [[202, 8], [202, 16]], "task": [[188, 8], [188, 15]], "task_runner": [[193, 8], [193, 30]], "ti": [[180, 8], [180, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"]], "hostname": [["ti", "hostname", "get_hostname"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job1", "task_runner", "process", "mock", "Mock"], ["job1", "task_runner", "process", "pid"], ["job_runner", "task_runner", "job1", "task_runner"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user", "ti", "run_as_user"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job_runner", "task_runner", "job1", "task_runner"], ["job_runner", "heartbeat_callback"], ["job_runner", "heartbeat_callback", "session", "None"], ["job_runner", "heartbeat_callback"], ["job_runner", "heartbeat_callback"]], "op1": [["op1", "EmptyOperator", "task_id", "run_as_user"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["ti", "task", "op1"], ["ti", "refresh_from_task", "op1"]], "pid": [["ti", "pid"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "process", "pid"], ["ti", "pid"], ["job1", "task_runner", "process", "pid"], ["ti", "pid", "None"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "session": [["session", "settings", "Session"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["session", "commit"], ["session", "merge", "ti"], ["session", "commit"], ["job_runner", "heartbeat_callback", "session", "None"], ["session", "merge", "ti"], ["session", "commit"]], "state": [["ti", "state", "State", "RUNNING"], ["ti", "state", "State", "RUNNING"]], "task": [["ti", "task", "op1"]], "task_runner": [["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job1", "task_runner", "process", "mock", "Mock"], ["job1", "task_runner", "process", "pid"], ["job_runner", "task_runner", "job1", "task_runner"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user", "ti", "run_as_user"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "ti": [["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["ti", "state", "State", "RUNNING"], ["ti", "pid"], ["ti", "hostname", "get_hostname"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "task", "op1"], ["ti", "refresh_from_task", "op1"], ["ti", "state", "State", "RUNNING"], ["ti", "pid"], ["ti", "run_as_user"], ["session", "merge", "ti"], ["ti", "pid", "None"], ["session", "merge", "ti"], ["ti", "run_as_user"], ["job1", "task_runner", "run_as_user", "ti", "run_as_user"], ["ti", "pid", "job1", "task_runner", "process", "pid"]]}, "name": "test_localtaskjob_heartbeat_with_run_as_user", "params": {"_": "", "dag_maker": "", "psutil_mock": "", "self": ""}, "params_descr": {"_": "", "dag_maker": "", "psutil_mock": "", "self": ""}, "params_occur": {"_": [], "dag_maker": [["dr", "dag_maker", "create_dagrun"]], "psutil_mock": [["psutil_mock", "Process", "return_value", "ppid", "return_value"]], "self": []}, "params_p": {"_": [["Generator[None, Any, None]", 0.07113221468344395]], "args": [], "dag_maker": [["str", 0.09329841828992658]], "kwargs": [], "psutil_mock": [], "self": []}, "q_name": "TestLocalTaskJob.test_localtaskjob_heartbeat_with_run_as_user", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "hostname": "", "job1": "", "job_runner": "", "op1": "", "pid": "", "session": "", "state": "", "task": "", "task_runner": "", "ti": ""}, "variables_p": {"dr": [["str", 0.6808037006822731], ["Dict[int, Dict[str, Any]]", 0.1982911843589713]], "hostname": [["Dict[str, int]", 0.9999999998054235], ["list", 2.668682299364027e-11], ["Tuple[Literal, Literal, Literal]", 2.5973179132715253e-11], ["Optional[gardnr.models.Grow]", 2.5973179132715253e-11]], "job1": [["dict", 0.48835282461325497], ["List[Dict[str, Any]]", 0.09735571457093527], ["Dict[str, Any]", 0.08961044531101948], ["Dict[int, Set[Any]]", 0.08889136829603307]], "job_runner": [["str", 0.3292247582922564], ["Mapping", 0.09854906643371872], ["Dict[str, Any]", 0.08874270020247325]], "op1": [["Dict[str, Union[Any, bool, str]]", 0.23103543696616272], ["int", 0.19329478872463748], ["Dict[str, Optional[str]]", 0.10772354531077014], ["str", 0.09630239804056892], ["dict", 0.0937619653719848], ["Pattern[Any]", 0.08816721901546591]], "pid": [["golem.task.taskbase.AcceptClientVerdict", 0.08965902767110079], ["Dict[str, Any]", 0.08185632283795158], ["pydynasync.models.Changes", 0.07687480139000964]], "session": [["Dict[str, Any]", 0.14271589850621758], ["sqlalchemy.orm.session.Session", 0.08731091780685547], ["dict", 0.07135794925310879]], "state": [["str", 0.16614022144833834], ["Generator[Any, None, None]", 0.10565626038259482], ["Type[Dict[str, Any]]", 0.08394029931145731], ["int", 0.08127642996032079], ["Iterator[str]", 0.08016514786122955]], "task": [["Dict[str, int]", 0.1886597764962033], ["Dict[str, Union[Any, Any]]", 0.11517890082284353], ["Dict[str, str]", 0.1080086805020957], ["Set[str]", 0.09878865092122546], ["List[None]", 0.09426762621127903], ["str", 0.09087841804768251], ["KeysView[str]", 0.08865312924708396]], "task_runner": [["apps.dummy.task.dummytask.DummyTask", 0.12700217912345685], ["annofabapi.dataclass.task.Task", 0.08042638832879619]], "ti": [["str", 0.39750567233279077], ["List[int]", 0.09227265237326912], ["pydynasync.models.Changes", 0.08377444490376303], ["Tuple[int, int, int, int]", 0.08282657644163191], ["golem.task.resulresultmanager.EncryptedResultPackageManager", 0.08237015857026644]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[230, 4], [280, 39]], "fn_var_ln": {"dr": [[234, 8], [234, 10]], "hostname": [[238, 8], [238, 19]], "job1": [[241, 8], [241, 12]], "job_runner": [[242, 8], [242, 18]], "op1": [[233, 12], [233, 15]], "pid": [[274, 8], [274, 14]], "session": [[231, 8], [231, 15]], "state": [[257, 8], [257, 16]], "task": [[243, 8], [243, 15]], "task_runner": [[248, 8], [248, 30]], "ti": [[235, 8], [235, 10]]}, "fn_var_occur": {"dr": [["dr", "dag_maker", "create_dagrun"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"]], "hostname": [["ti", "hostname", "get_hostname"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job1", "task_runner", "process", "mock", "Mock"], ["job1", "task_runner", "process", "pid"], ["job_runner", "task_runner", "job1", "task_runner"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job_runner", "task_runner", "job1", "task_runner"], ["job_runner", "heartbeat_callback"], ["job_runner", "heartbeat_callback", "session", "None"], ["job_runner", "heartbeat_callback"], ["job_runner", "heartbeat_callback"]], "op1": [["op1", "EmptyOperator", "task_id"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["ti", "task", "op1"], ["ti", "refresh_from_task", "op1"]], "pid": [["ti", "pid"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "process", "pid"], ["ti", "pid"], ["job1", "task_runner", "process", "pid"], ["ti", "pid", "None"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "session": [["session", "settings", "Session"], ["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["session", "commit"], ["session", "merge", "ti"], ["session", "commit"], ["job_runner", "heartbeat_callback", "session", "None"], ["session", "merge", "ti"], ["session", "commit"]], "state": [["ti", "state", "State", "RUNNING"], ["ti", "state", "State", "RUNNING"]], "task": [["ti", "task", "op1"]], "task_runner": [["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job1", "task_runner", "process", "mock", "Mock"], ["job1", "task_runner", "process", "pid"], ["job_runner", "task_runner", "job1", "task_runner"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"], ["job1", "task_runner", "process", "pid"], ["job1", "task_runner", "run_as_user"], ["ti", "pid", "job1", "task_runner", "process", "pid"]], "ti": [["ti", "dr", "get_task_instance", "task_id", "op1", "task_id", "session", "session"], ["ti", "state", "State", "RUNNING"], ["ti", "pid"], ["ti", "hostname", "get_hostname"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "task", "op1"], ["ti", "refresh_from_task", "op1"], ["ti", "state", "State", "RUNNING"], ["ti", "pid"], ["session", "merge", "ti"], ["ti", "pid", "None"], ["session", "merge", "ti"], ["ti", "run_as_user", "None"], ["ti", "pid", "job1", "task_runner", "process", "pid"]]}, "name": "test_localtaskjob_heartbeat_with_default_impersonation", "params": {"_": "", "dag_maker": "", "psutil_mock": "", "self": ""}, "params_descr": {"_": "", "dag_maker": "", "psutil_mock": "", "self": ""}, "params_occur": {"_": [], "dag_maker": [["dr", "dag_maker", "create_dagrun"]], "psutil_mock": [["psutil_mock", "Process", "return_value", "ppid", "return_value"]], "self": []}, "params_p": {"_": [], "args": [], "dag_maker": [["str", 0.09219435068826251], ["Optional[str]", 0.09153918754082539]], "kwargs": [], "psutil_mock": [], "self": []}, "q_name": "TestLocalTaskJob.test_localtaskjob_heartbeat_with_default_impersonation", "ret_exprs": [], "ret_type": "", "variables": {"dr": "", "hostname": "", "job1": "", "job_runner": "", "op1": "", "pid": "", "session": "", "state": "", "task": "", "task_runner": "", "ti": ""}, "variables_p": {"dr": [["str", 0.6808037006822731], ["Dict[int, Dict[str, Any]]", 0.1982911843589713]], "hostname": [["Dict[str, int]", 0.9999999998054235], ["list", 2.668682299364027e-11], ["Tuple[Literal, Literal, Literal]", 2.5973179132715253e-11], ["Optional[gardnr.models.Grow]", 2.5973179132715253e-11]], "job1": [["dict", 0.30020781766071725], ["Dict[str, Any]", 0.09780249820223326], ["List[Dict[str, Any]]", 0.09503044569697668], ["multiprocessing.synchronize.Lock", 0.08913394609391682], ["Dict[int, Set[Any]]", 0.08880964690355937], ["str", 0.08772363453695237]], "job_runner": [["str", 0.5259263878192826], ["int", 0.2002931239214135], ["List[str]", 0.09219937376023685], ["List[Dict[str, str]]", 0.08874552252941754]], "op1": [["Dict[str, Union[Any, bool, str]]", 0.2525621867932358], ["golem.task.task_api.EnvironmentTaskApiService", 0.09826658031831301], ["dict", 0.09619966632074421], ["golem.task.taskbase.Task", 0.09121942140335643], ["taskiapplication.models.task.Task", 0.0882783983136741], ["List[str]", 0.08778078015717122]], "pid": [["golem.task.taskbase.AcceptClientVerdict", 0.08965902767110079], ["Dict[str, Any]", 0.08185632283795158], ["pydynasync.models.Changes", 0.07687480139000964]], "session": [["Dict[str, Any]", 0.14271589850621758], ["sqlalchemy.orm.session.Session", 0.08731091780685547], ["dict", 0.07135794925310879]], "state": [["str", 0.16614022144833834], ["Generator[Any, None, None]", 0.10565626038259482], ["Type[Dict[str, Any]]", 0.08394029931145731], ["int", 0.08127642996032079], ["Iterator[str]", 0.08016514786122955]], "task": [["Dict[str, int]", 0.1886597764962033], ["Dict[str, Union[Any, Any]]", 0.11517890082284353], ["Dict[str, str]", 0.1080086805020957], ["Set[str]", 0.09878865092122546], ["List[None]", 0.09426762621127903], ["str", 0.09087841804768251], ["KeysView[str]", 0.08865312924708396]], "task_runner": [["apps.dummy.task.dummytask.DummyTask", 0.12700217912345685], ["annofabapi.dataclass.task.Task", 0.08042638832879619]], "ti": [["str", 0.39750567233279077], ["List[int]", 0.09227265237326912], ["pydynasync.models.Changes", 0.08377444490376303], ["Tuple[int, int, int, int]", 0.08282657644163191], ["golem.task.resulresultmanager.EncryptedResultPackageManager", 0.08237015857026644]]}}, {"docstring": {"func": "Test that task heartbeat will sleep when it fails fast", "long_descr": null, "ret": null}, "fn_lc": [[282, 4], [323, 55]], "fn_var_ln": {"dag": [[293, 12], [293, 15]], "dag_id": [[291, 12], [291, 18]], "delta": [[322, 16], [322, 21]], "dr": [[296, 12], [296, 14]], "heartbeat_callback": [[315, 12], [315, 41]], "heartbeat_records": [[314, 12], [314, 29]], "heartrate": [[313, 12], [313, 25]], "hostname": [[307, 12], [307, 23]], "job": [[311, 12], [311, 15]], "job_runner": [[312, 12], [312, 22]], "pid": [[308, 12], [308, 18]], "state": [[306, 12], [306, 20]], "task": [[294, 12], [294, 16]], "task_id": [[292, 12], [292, 19]], "ti": [[304, 12], [304, 14]], "time1": [[319, 16], [319, 21]], "time2": [[320, 16], [320, 21]]}, "fn_var_occur": {"dag": [["dag", "self", "dagbag", "get_dag", "dag_id"], ["task", "dag", "get_task", "task_id"], ["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"]], "dag_id": [["dag", "self", "dagbag", "get_dag", "dag_id"], ["job", "Job", "dag_id", "ti", "dag_id", "executor", "MockExecutor", "do_update", "False"]], "delta": [["delta", "time2", "time1", "total_seconds"], ["abs", "delta", "job", "heartrate"]], "dr": [["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["ti", "dr", "task_instances"]], "heartbeat_callback": [["job_runner", "heartbeat_callback", "session", "heartbeat_records", "append", "job", "latest_heartbeat"]], "heartbeat_records": [["job_runner", "heartbeat_callback", "session", "heartbeat_records", "append", "job", "latest_heartbeat"], ["len", "heartbeat_records"], ["range", "len", "heartbeat_records"], ["time1", "heartbeat_records", "i"], ["time2", "heartbeat_records", "i"]], "heartrate": [["job", "heartrate"], ["abs", "delta", "job", "heartrate"]], "hostname": [["ti", "hostname", "get_hostname"]], "job": [["job", "Job", "dag_id", "ti", "dag_id", "executor", "MockExecutor", "do_update", "False"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti"], ["job", "heartrate"], ["job_runner", "heartbeat_callback", "session", "heartbeat_records", "append", "job", "latest_heartbeat"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"], ["abs", "delta", "job", "heartrate"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti"], ["job_runner", "heartbeat_callback", "session", "heartbeat_records", "append", "job", "latest_heartbeat"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "pid": [["ti", "pid"]], "state": [["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["ti", "state", "State", "QUEUED"]], "task": [["task", "dag", "get_task", "task_id"], ["ti", "refresh_from_task", "task"]], "task_id": [["task", "dag", "get_task", "task_id"]], "ti": [["ti", "dr", "task_instances"], ["ti", "refresh_from_task", "task"], ["ti", "state", "State", "QUEUED"], ["ti", "hostname", "get_hostname"], ["ti", "pid"], ["job", "Job", "dag_id", "ti", "dag_id", "executor", "MockExecutor", "do_update", "False"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti"]], "time1": [["time1", "heartbeat_records", "i"], ["delta", "time2", "time1", "total_seconds"]], "time2": [["time2", "heartbeat_records", "i"], ["delta", "time2", "time1", "total_seconds"]]}, "name": "test_heartbeat_failed_fast", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "mock_base_job_sleep", "side_effect", "time", "sleep"], ["dag", "self", "dagbag", "get_dag", "dag_id"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_heartbeat_failed_fast", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dag_id": "", "delta": "", "dr": "", "heartbeat_callback": "", "heartbeat_records": "", "heartrate": "", "hostname": "", "job": "", "job_runner": "", "pid": "", "state": "", "task": "", "task_id": "", "ti": "", "time1": "", "time2": ""}, "variables_p": {"dag": [["Dict[int, Any]", 0.27412964377040233], ["dict", 0.2289014856760116], ["Optional[Match[str]]", 0.11339418828110788], ["str", 0.10133207354977357], ["list", 0.08883898337380007]], "dag_id": [["int", 0.38529926628862765], ["str", 0.1953004142871233], ["dict", 0.13206130386024525], ["list", 0.09777949432491291], ["Iterator[Any]", 0.09534331517850107]], "delta": [["float", 0.19537751785800156], ["int", 0.11248854858591885], ["Pattern[str]", 0.10687248282302776], ["str", 0.0986437881209068], ["list", 0.0951590750905766]], "dr": [["list", 0.18473518395512428], ["str", 0.11866445962932048], ["Dict[str, str]", 0.10949739534123308], ["dict", 0.0995887109386099], ["tuple", 0.098588236456207], ["Optional[\"Lecture\"]", 0.0959542376597426]], "heartbeat_callback": [["int", 0.24232012011889237], ["list", 0.19237790925189055], ["Dict[str, str]", 0.1621895037403959], ["str", 0.08983980194430742]], "heartbeat_records": [["set", 0.23310416775963871], ["List[str]", 0.18015239257571664], ["dict", 0.10553275298367541], ["tuple", 0.10102408888951855], ["list", 0.08804533611362793]], "heartrate": [["Tuple[Any, Any, Any, Any]", 0.14852168726540813], ["Optional[str]", 0.1000830606614436]], "hostname": [["Dict[str, int]", 0.9999999998054235], ["list", 2.668682299364027e-11], ["Tuple[Literal, Literal, Literal]", 2.5973179132715253e-11], ["Optional[gardnr.models.Grow]", 2.5973179132715253e-11]], "job": [["list", 0.30216059271738943], ["str", 0.21398894547957206], ["Dict[str, Any]", 0.1966157123965294], ["float", 0.09577371911124741], ["dict", 0.09469503499474284]], "job_runner": [["str", 0.39770047011667997], ["Dict[str, str]", 0.0971032192908187]], "pid": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "state": [["dict", 0.2590768189059012], ["Optional[str]", 0.1055317155011652], ["cmk.utils.type_defs.UserId", 0.09081228123228408], ["str", 0.07806375829821939], ["BoundMethod[Callable(datetime.datetime.now)[Any, Any], Type[datetime.datetime]]", 0.07776103724055064], ["Set[int]", 0.07653486294274761]], "task": [["dict", 0.20641825093746013], ["list", 0.13020852421095297], ["restful_functions.modules.task.TaskStore", 0.09523792856721695], ["List[str]", 0.08620968013545328], ["int", 0.08359254985109503], ["str", 0.07864350513799517], ["bytes", 0.0772504447163233]], "task_id": [["str", 0.40189748121639257]], "ti": [["Pattern[str]", 0.3379568933006417], ["str", 0.18921142449051237], ["Tuple[int, int, int, int]", 0.116473245073482], ["dict", 0.10352879396239581], ["int", 0.08387885982317629], ["list", 0.07835196159365869]], "time1": [["int", 0.3390216053123548], ["float", 0.18882437612718736], ["str", 0.17151602909194533], ["Tuple[int, int]", 0.09809268278406841]], "time2": [["int", 0.3390216053123548], ["float", 0.18882437612718736], ["str", 0.17151602909194533], ["Tuple[int, int]", 0.09809268278406841]]}}, {"docstring": {"func": "Test that ensures that mark_success in the UI doesn't cause", "long_descr": "the task to fail, and that the task exits", "ret": null}, "fn_lc": [[325, 4], [351, 9]], "fn_var_ln": {"dag": [[330, 8], [330, 11]], "dr": [[331, 8], [331, 10]], "job1": [[342, 8], [342, 12]], "job_runner": [[343, 8], [343, 18]], "task": [[337, 8], [337, 12]], "ti": [[339, 8], [339, 10]]}, "fn_var_occur": {"dag": [["dag", "get_test_dag"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["task", "dag", "get_task", "task_id"]], "dr": [["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "dr", "get_task_instance", "task", "task_id"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "task": [["task", "dag", "get_task", "task_id"], ["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"]], "ti": [["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"], ["job1", "Job", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "refresh_from_db"], ["State", "SUCCESS", "ti", "state"]]}, "name": "test_mark_success_no_kill", "params": {"caplog": "", "get_test_dag": "", "self": "", "session": ""}, "params_descr": {"caplog": "", "get_test_dag": "", "self": "", "session": ""}, "params_occur": {"caplog": [["caplog", "text"]], "get_test_dag": [["dag", "get_test_dag"]], "self": [], "session": [["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"]]}, "params_p": {"args": [], "caplog": [["int", 0.2851837690954789], ["medtagger.database.models.Dataset", 0.12506702634872163], ["medtagger.database.models.User", 0.12506702634872163], ["bool", 0.09669674814332838], ["List[str]", 0.07716630110962472]], "get_test_dag": [["bool", 0.12478579476410752], ["datetime.datetime", 0.11377640143063827], ["str", 0.09989893535878258]], "kwargs": [], "self": [], "session": [["zerver.models.UserProfile", 0.34570085815928603], ["Callable", 0.10297056139518142], ["cmk.utils.type_defs.HostName", 0.0971710218911742], ["cmk.utils.type_defs.ServiceName", 0.0971710218911742], ["str", 0.09153715353301317], ["server.models.User", 0.08551603088104587]]}, "q_name": "TestLocalTaskJob.test_mark_success_no_kill", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "job1": "", "job_runner": "", "task": "", "ti": ""}, "variables_p": {"dag": [["Union[Literal, str]", 0.11102612364410397]], "dr": [["list", 0.20758328139159002], ["float", 0.18292469374505643], ["str", 0.08767299411116916]], "job1": [["int", 0.5294683898853817], ["Dict[str, Any]", 0.1289849769648748], ["str", 0.10669804600129602], ["list", 0.08943999004391878]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "task": [["golem.task.taskbase.Task", 0.43669269357481744], ["reminders.task.Task", 0.10582261399888601], ["golem.task.task_api.EnvironmentTaskApiService", 0.09936439740281344], ["taskiapplication.models.task.Task", 0.091279396427776], ["kippo.tasks.models.KippoTask", 0.07006662565525482]], "ti": [["str", 0.2013640269454578], ["List[str]", 0.18158385476576314], ["List[int]", 0.08659086920770973]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[353, 4], [388, 23]], "fn_var_ln": {"dag": [[355, 8], [355, 11]], "dr": [[361, 8], [361, 10]], "hostname": [[371, 8], [371, 19]], "job1": [[378, 8], [378, 12]], "job_runner": [[379, 8], [379, 18]], "pid": [[372, 8], [372, 14]], "session": [[358, 8], [358, 15]], "state": [[370, 8], [370, 16]], "task": [[356, 8], [356, 12]], "ti": [[384, 8], [384, 10]], "ti_run": [[376, 8], [376, 14]]}, "fn_var_occur": {"dag": [["dag", "self", "dagbag", "dags", "get"], ["task", "dag", "get_task"], ["dag", "clear"], ["dr", "dag", "create_dagrun", "run_id", "state", "State", "SUCCESS", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"]], "dr": [["dr", "dag", "create_dagrun", "run_id", "state", "State", "SUCCESS", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"], ["ti_run", "TaskInstance", "task", "task", "run_id", "dr", "run_id"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"]], "hostname": [["ti", "hostname", "get_hostname"]], "job1": [["job1", "Job", "dag_id", "ti_run", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "pid": [["ti", "pid"], ["ti", "pid"]], "session": [["session", "settings", "Session"], ["dr", "dag", "create_dagrun", "run_id", "state", "State", "SUCCESS", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"], ["session", "merge", "ti"], ["session", "commit"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"], ["session", "close"]], "state": [["dr", "dag", "create_dagrun", "run_id", "state", "State", "SUCCESS", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["ti", "state", "State", "RUNNING"], ["ti", "state", "State", "RUNNING"]], "task": [["task", "dag", "get_task"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"], ["ti_run", "TaskInstance", "task", "task", "run_id", "dr", "run_id"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"]], "ti": [["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"], ["ti", "state", "State", "RUNNING"], ["ti", "hostname", "get_hostname"], ["ti", "pid"], ["session", "merge", "ti"], ["ti", "dr", "get_task_instance", "task_id", "task", "task_id", "session", "session"], ["ti", "pid"], ["ti", "state", "State", "RUNNING"]], "ti_run": [["ti_run", "TaskInstance", "task", "task", "run_id", "dr", "run_id"], ["ti_run", "refresh_from_db"], ["job1", "Job", "dag_id", "ti_run", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"]]}, "name": "test_localtaskjob_double_trigger", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["dag", "self", "dagbag", "dags", "get"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_localtaskjob_double_trigger", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "hostname": "", "job1": "", "job_runner": "", "pid": "", "session": "", "state": "", "task": "", "ti": "", "ti_run": ""}, "variables_p": {"dag": [["list", 0.08751462409962069]], "dr": [["str", 0.13268700252499638], ["grpy.core.models.Grouping", 0.11212638330514589], ["byceps.services.user.transfer.models.User", 0.1069787328757165], ["Dict[str, str]", 0.09980599530661861], ["dict", 0.09501158993913807], ["Optional[hpaction.models.HPActionDocuments]", 0.08710713216837578]], "hostname": [["Dict[str, int]", 0.9999999998054235], ["list", 2.668682299364027e-11], ["Tuple[Literal, Literal, Literal]", 2.5973179132715253e-11], ["Optional[gardnr.models.Grow]", 2.5973179132715253e-11]], "job1": [["dict", 0.2893177798506823], ["pydynasync.models.Changes", 0.09852045387161468], ["list", 0.07808231468370563], ["str", 0.07790938192220416], ["Dict[str, Union[Any, Any]]", 0.0730880623475005]], "job_runner": [["str", 0.33027164989371927]], "pid": [["int", 0.2], ["dict", 0.1], ["List[int]", 0.1], ["List[List[int]]", 0.1], ["str", 0.1], ["datetime.timedelta", 0.1]], "session": [["grpy.core.models.User", 0.11090891054043328]], "state": [["Optional[grouper.models.user.User]", 0.27724516420885514], ["grpy.core.models.User", 0.13817071841615228], ["django.db.models.query.QuerySet", 0.1030524331041213], ["str", 0.09603374935822534], ["raiden.utils.Any", 0.09042947158051287], ["Optional[zam_repondeur.models.Amendement]", 0.08611196087476368]], "task": [["kippo.tasks.models.KippoTask", 0.20281835664548137], ["List[str]", 0.10688495941609144], ["taskiapplication.models.task.Task", 0.09938675521965015], ["golem.task.task_api.EnvironmentTaskApiService", 0.09254053634346611], ["golem.task.taskbase.Task", 0.0913713879925773]], "ti": [["str", 0.20659341212435753], ["pydynasync.models.Changes", 0.10609007168652328], ["Mapping", 0.09420824483327542], ["types.SimpleNamespace", 0.09239714471624141]], "ti_run": [["int", 0.27111191918643546], ["List[List[int]]", 0.19945919844397414], ["o2a.converter.task.Task", 0.17751330773164348], ["threading.RLock", 0.0798739008142018], ["List[str]", 0.07846449360473672]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[392, 4], [420, 9]], "fn_var_ln": {"_": [[394, 8], [394, 9]], "id": [[400, 8], [400, 15]], "job1": [[398, 8], [398, 12]], "job_runner": [[399, 8], [399, 18]], "side_effect": [[402, 8], [402, 36]], "task": [[394, 11], [394, 15]], "ti_run": [[396, 8], [396, 14]]}, "fn_var_occur": {"_": [["_", "task", "create_dummy_dag"]], "id": [["job1", "id"]], "job1": [["job1", "Job", "dag_id", "ti_run", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"], ["job1", "id"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "side_effect": [["mock_return_code", "side_effect", "None", "None"]], "task": [["_", "task", "create_dummy_dag"], ["ti_run", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"]], "ti_run": [["ti_run", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["ti_run", "refresh_from_db"], ["job1", "Job", "dag_id", "ti_run", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"]]}, "name": "test_local_task_return_code_metric", "params": {"create_dummy_dag": "", "mock_return_code": "", "mock_stats_incr": "", "self": ""}, "params_descr": {"create_dummy_dag": "", "mock_return_code": "", "mock_stats_incr": "", "self": ""}, "params_occur": {"create_dummy_dag": [["_", "task", "create_dummy_dag"]], "mock_return_code": [["mock_return_code", "side_effect", "None", "None"]], "mock_stats_incr": [["mock_stats_incr", "assert_has_calls", "mock", "call", "mock", "call", "tags"]], "self": []}, "params_p": {"args": [], "create_dummy_dag": [], "kwargs": [], "mock_return_code": [["aiohttp.test_utils.TestServer", 0.10108405126682979], ["mock.Mock", 0.09485722512442338]], "mock_stats_incr": [["mock.Mock", 0.11649111799748797]], "self": []}, "q_name": "TestLocalTaskJob.test_local_task_return_code_metric", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "id": "", "job1": "", "job_runner": "", "side_effect": "", "task": "", "ti_run": ""}, "variables_p": {"_": [["str", 0.7549845520651344], ["int", 0.24501544793486582]], "id": [["List[str]", 0.49999999998069394], ["str", 0.49999999998069394], ["list", 1.8840229684596427e-11], ["List[Tuple[str, bool, Any]]", 6.229818200335967e-12], ["Tuple[float, float]", 4.848766274469788e-12], ["int", 4.416867014354685e-12]], "job1": [["dict", 0.2893177798506823], ["pydynasync.models.Changes", 0.09852045387161468], ["list", 0.07808231468370563], ["str", 0.07790938192220416], ["Dict[str, Union[Any, Any]]", 0.0730880623475005]], "job_runner": [["str", 0.33027164989371927]], "side_effect": [["str", 0.3166254517014482], ["List[str]", 0.1308194734380439], ["tuple", 0.09311360718780391], ["Optional[str]", 0.0875223539815697], ["Dict[starfish.core.types._constants.Axes, int]", 0.08220669090547227], ["dict", 0.07944924057879524]], "task": [["dict", 0.10594253975288563], ["datetime.datetime.datetime", 0.08804023115356058], ["golem.task.taskbase.Task", 0.08782150397640215], ["str", 0.08270884694857161], ["taskiapplication.models.task.Task", 0.08141444288854591], ["bytes", 0.07834548075502831], ["khetha.models.Task", 0.07666615616593878]], "ti_run": [["Dict[str, str]", 0.1165429711015345], ["int", 0.10913371483013454], ["legistar.models.MatterStatus", 0.09871982977907395], ["List[str]", 0.09860255416119551], ["list", 0.09735812393042645], ["dict", 0.09694169759793783], ["restful_functions.modules.task.TaskStore", 0.09406360175167348]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[423, 4], [452, 62]], "fn_var_ln": {"_": [[425, 8], [425, 9]], "job1": [[429, 8], [429, 12]], "job_runner": [[430, 8], [430, 18]], "side_effect": [[437, 8], [437, 36]], "task": [[425, 11], [425, 15]], "ti_run": [[427, 8], [427, 14]], "time_end": [[442, 8], [442, 16]], "time_start": [[431, 8], [431, 18]]}, "fn_var_occur": {"_": [["_", "task", "create_dummy_dag"]], "job1": [["job1", "Job", "dag_id", "ti_run", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"], ["job1", "state", "State", "SUCCESS"], ["time_end", "time_start", "job1", "heartrate"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "side_effect": [["mock_return_code", "side_effect", "None", "None"]], "task": [["_", "task", "create_dummy_dag"], ["ti_run", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"]], "ti_run": [["ti_run", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["ti_run", "refresh_from_db"], ["job1", "Job", "dag_id", "ti_run", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti_run"]], "time_end": [["time_end", "time", "time"], ["time_end", "time_start", "job1", "heartrate"]], "time_start": [["time_start", "time", "time"], ["time_end", "time_start", "job1", "heartrate"]]}, "name": "test_localtaskjob_maintain_heart_rate", "params": {"caplog": "", "create_dummy_dag": "", "mock_return_code": "", "self": ""}, "params_descr": {"caplog": "", "create_dummy_dag": "", "mock_return_code": "", "self": ""}, "params_occur": {"caplog": [["caplog", "text"]], "create_dummy_dag": [["_", "task", "create_dummy_dag"]], "mock_return_code": [["mock_return_code", "side_effect", "None", "None"], ["mock_return_code", "call_count"]], "self": [["self", "mock_base_job_sleep", "call_count"]]}, "params_p": {"args": [], "caplog": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.2963189558617452]], "create_dummy_dag": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.3240108342269873], ["str", 0.29540033767122087]], "kwargs": [], "mock_return_code": [["mock.Mock", 0.1907996660442478], ["aiohttp.test_utils.TestServer", 0.11934245643819862]], "self": []}, "q_name": "TestLocalTaskJob.test_localtaskjob_maintain_heart_rate", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "job1": "", "job_runner": "", "side_effect": "", "task": "", "ti_run": "", "time_end": "", "time_start": ""}, "variables_p": {"_": [["str", 0.7549845520651344], ["int", 0.24501544793486582]], "job1": [["dict", 0.2893177798506823], ["pydynasync.models.Changes", 0.09852045387161468], ["list", 0.07808231468370563], ["str", 0.07790938192220416], ["Dict[str, Union[Any, Any]]", 0.0730880623475005]], "job_runner": [["str", 0.33027164989371927]], "side_effect": [["str", 0.3166254517014482], ["List[str]", 0.1308194734380439], ["tuple", 0.09311360718780391], ["Optional[str]", 0.0875223539815697], ["Dict[starfish.core.types._constants.Axes, int]", 0.08220669090547227], ["dict", 0.07944924057879524]], "task": [["dict", 0.10594253975288563], ["datetime.datetime.datetime", 0.08804023115356058], ["golem.task.taskbase.Task", 0.08782150397640215], ["str", 0.08270884694857161], ["taskiapplication.models.task.Task", 0.08141444288854591], ["bytes", 0.07834548075502831], ["khetha.models.Task", 0.07666615616593878]], "ti_run": [["Dict[str, str]", 0.1165429711015345], ["int", 0.10913371483013454], ["legistar.models.MatterStatus", 0.09871982977907395], ["List[str]", 0.09860255416119551], ["list", 0.09735812393042645], ["dict", 0.09694169759793783], ["restful_functions.modules.task.TaskStore", 0.09406360175167348]], "time_end": [["int", 0.29635187206478875], ["str", 0.24700138373865532], ["float", 0.11421419622427798], ["Anaconda3.Lib.site-packages.astropy.time.core.TimeDelta", 0.09265548708325413]], "time_start": [["list", 0.30620161585225975], ["int", 0.2845402224056333], ["Tuple[int, int, Any, Any]", 0.12585227980561156], ["List[None]", 0.11295305966971321], ["List[int]", 0.08691466619327981], ["Counter[Any]", 0.08353815607350244]]}}, {"docstring": {"func": "Test that ensures that mark_failure in the UI fails", "long_descr": "the task, and executes on_failure_callback", "ret": null}, "fn_lc": [[454, 4], [482, 24]], "fn_var_ln": {"dag": [[459, 8], [459, 11]], "dr": [[461, 12], [461, 14]], "job1": [[471, 8], [471, 12]], "job_runner": [[472, 8], [472, 18]], "task": [[467, 8], [467, 12]], "ti": [[468, 8], [468, 10]]}, "fn_var_occur": {"dag": [["dag", "get_test_dag"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["task", "dag", "get_task", "task_id"]], "dr": [["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "dr", "get_task_instance", "task", "task_id"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "task": [["task", "dag", "get_task", "task_id"], ["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"]], "ti": [["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "refresh_from_db"], ["ti", "state", "State", "FAILED"]]}, "name": "test_mark_failure_on_failure_callback", "params": {"caplog": "", "get_test_dag": "", "self": ""}, "params_descr": {"caplog": "", "get_test_dag": "", "self": ""}, "params_occur": {"caplog": [["caplog", "text"]], "get_test_dag": [["dag", "get_test_dag"]], "self": []}, "params_p": {"args": [], "caplog": [["str", 0.9025756997049444]], "get_test_dag": [["str", 0.294776856984422], ["app.models.user.User", 0.20319947577760486], ["app.models.User", 0.20319947577760486], ["Callable", 0.09469854445564711]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_mark_failure_on_failure_callback", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "job1": "", "job_runner": "", "task": "", "ti": ""}, "variables_p": {"dag": [["Union[Literal, str]", 0.11102612364410397]], "dr": [["list", 0.20758328139159002], ["float", 0.18292469374505643], ["str", 0.08767299411116916]], "job1": [["dict", 0.48835282461325497], ["List[Dict[str, Any]]", 0.09735571457093527], ["Dict[str, Any]", 0.08961044531101948], ["Dict[int, Set[Any]]", 0.08889136829603307]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "task": [["golem.task.taskbase.Task", 0.43669269357481744], ["reminders.task.Task", 0.10582261399888601], ["golem.task.task_api.EnvironmentTaskApiService", 0.09936439740281344], ["taskiapplication.models.task.Task", 0.091279396427776], ["kippo.tasks.models.KippoTask", 0.07006662565525482]], "ti": [["str", 0.1989120638253044], ["List[str]", 0.18932161104748096], ["List[int]", 0.08648088844166096]]}}, {"docstring": {"func": "Test that ensures that if a running task is externally skipped (due to a dagrun timeout)", "long_descr": "It is logged in the task logs.", "ret": null}, "fn_lc": [[484, 4], [512, 55]], "fn_var_ln": {"dag": [[489, 8], [489, 11]], "dagrun_timeout": [[490, 8], [490, 26]], "dr": [[492, 12], [492, 14]], "job1": [[503, 8], [503, 12]], "job_runner": [[504, 8], [504, 18]], "task": [[499, 8], [499, 12]], "ti": [[500, 8], [500, 10]]}, "fn_var_occur": {"dag": [["dag", "get_test_dag"], ["dag", "dagrun_timeout", "datetime", "timedelta", "microseconds"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "start_date", "DEFAULT_DATE", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["task", "dag", "get_task", "task_id"]], "dagrun_timeout": [["dag", "dagrun_timeout", "datetime", "timedelta", "microseconds"]], "dr": [["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "start_date", "DEFAULT_DATE", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "dr", "get_task_instance", "task", "task_id"]], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "task": [["task", "dag", "get_task", "task_id"], ["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"]], "ti": [["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "refresh_from_db"], ["ti", "state", "State", "SKIPPED"]]}, "name": "test_dagrun_timeout_logged_in_task_logs", "params": {"caplog": "", "get_test_dag": "", "self": ""}, "params_descr": {"caplog": "", "get_test_dag": "", "self": ""}, "params_occur": {"caplog": [["caplog", "text"]], "get_test_dag": [["dag", "get_test_dag"]], "self": []}, "params_p": {"args": [], "caplog": [["str", 0.9141819079830843]], "get_test_dag": [["str", 0.7190317712587531], ["bool", 0.10845352020636337], ["Optional[List[str]]", 0.08844793060996177], ["app.models.user.User", 0.0840667779249217]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_dagrun_timeout_logged_in_task_logs", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dagrun_timeout": "", "dr": "", "job1": "", "job_runner": "", "task": "", "ti": ""}, "variables_p": {"dag": [["datetime.datetime.datetime", 0.4206084513227298], ["int", 0.4017439682710431], ["datetime.datetime", 0.17764758040622727]], "dagrun_timeout": [["float", 0.5111819732300056], ["int", 0.4013961284547236], ["Dict[str, int]", 0.08742189831527097]], "dr": [["int", 0.2866213208421861], ["str", 0.2835630226608423], ["list", 0.1361539497795517], ["Dict[str, Union[datetime.datetime, str]]", 0.1155976003326087], ["List[Tuple[str, Any]]", 0.08912448064089756], ["Dict[str, Any]", 0.08893962574391362]], "job1": [["dict", 0.48835282461325497], ["List[Dict[str, Any]]", 0.09735571457093527], ["Dict[str, Any]", 0.08961044531101948], ["Dict[int, Set[Any]]", 0.08889136829603307]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "task": [["golem.task.taskbase.Task", 0.43669269357481744], ["reminders.task.Task", 0.10582261399888601], ["golem.task.task_api.EnvironmentTaskApiService", 0.09936439740281344], ["taskiapplication.models.task.Task", 0.091279396427776], ["kippo.tasks.models.KippoTask", 0.07006662565525482]], "ti": [["str", 0.1989120638253044], ["List[str]", 0.18932161104748096], ["List[int]", 0.08648088844166096]]}}, {"docstring": {"func": "Ensure failure callback of a task is run by the airflow run --raw process", "long_descr": null, "ret": null}, "fn_lc": [[514, 4], [545, 45]], "fn_var_ln": {"callback_file": [[518, 8], [518, 21]], "dag": [[521, 8], [521, 11]], "job1": [[533, 8], [533, 12]], "job_runner": [[534, 8], [534, 18]], "lines": [[540, 12], [540, 17]], "m": [[543, 8], [543, 9]], "task": [[529, 8], [529, 12]], "ti": [[530, 8], [530, 10]]}, "fn_var_occur": {"callback_file": [["callback_file", "tmp_path", "joinpath"], ["callback_file", "touch"], ["monkeypatch", "setenv", "str", "callback_file"], ["open", "callback_file", "f"]], "dag": [["dag", "get_test_dag"], ["dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["task", "dag", "get_task", "task_id"]], "job1": [["job1", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "lines": [["lines", "f", "readlines"], ["len", "lines"], ["lines", "startswith", "ti", "key", "primary"], ["m", "re", "match", "lines"]], "m": [["m", "re", "match", "lines"], ["os", "getpid", "int", "m", "group"]], "task": [["task", "dag", "get_task", "task_id"], ["ti", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"]], "ti": [["ti", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["ti", "refresh_from_db"], ["job1", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "refresh_from_db"], ["ti", "state", "State", "FAILED"], ["lines", "startswith", "ti", "key", "primary"]]}, "name": "test_failure_callback_called_by_airflow_run_raw_process", "params": {"get_test_dag": "", "monkeypatch": "", "self": "", "tmp_path": ""}, "params_descr": {"get_test_dag": "", "monkeypatch": "", "self": "", "tmp_path": ""}, "params_occur": {"get_test_dag": [["dag", "get_test_dag"]], "monkeypatch": [["monkeypatch", "setenv", "str", "callback_file"]], "self": [], "tmp_path": [["callback_file", "tmp_path", "joinpath"]]}, "params_p": {"args": [], "get_test_dag": [["tests.test_util.aiohttp.AiohttpClientMocker", 0.08933758387115226]], "kwargs": [], "monkeypatch": [["int", 0.19169469799730726], ["raiden.utils.Secret", 0.09472261051467123], ["str", 0.09068630054284305], ["bool", 0.08469700775361486]], "self": [], "tmp_path": [["Optional[str]", 0.2051265361338965], ["str", 0.19442240297242153], ["tests.fixtures.cloud_uploader.Uploader", 0.10239059947732942]]}, "q_name": "TestLocalTaskJob.test_failure_callback_called_by_airflow_run_raw_process", "ret_exprs": [], "ret_type": "", "variables": {"callback_file": "", "dag": "", "job1": "", "job_runner": "", "lines": "", "m": "", "task": "", "ti": ""}, "variables_p": {"callback_file": [["str", 0.5601751686229467], ["Optional[str]", 0.1595466727216857], ["List[str]", 0.06488080041898014]], "dag": [["SMSShell.models.message.Message", 0.2730607046580943], ["server.openslides.users.models.Group", 0.12451175195056782], ["bool", 0.09763535320115961], ["viewer.models.Gallery", 0.09059761140718697]], "job1": [["str", 0.42277117607243075], ["List[str]", 0.10570566219714488], ["Dict[str, Any]", 0.0948488869952235], ["geode.models.common.Address", 0.0894854996314124], ["int", 0.08553835774937524]], "job_runner": [["str", 0.34924800449673155], ["int", 0.10195762237347528], ["Tuple[int, int, int, int]", 0.09832076242609968], ["dict", 0.08680793802467052]], "lines": [["list", 0.38181040088884144], ["List[str]", 0.17392415063785016], ["int", 0.1628333983608165]], "m": [["int", 0.544406030729136], ["str", 0.16361439169382103], ["Pattern[str]", 0.13283693202042393], ["float", 0.09019319147170168], ["Pattern[bytes]", 0.06894945408491746]], "task": [["kippo.tasks.models.KippoTask", 0.21836260636825588], ["golem.task.taskbase.Task", 0.14733419899808556], ["taskiapplication.models.task.Task", 0.11181948424920773], ["zero.domain.task.Task", 0.09854906555130197], ["golem.task.taskcomputer.TaskComputer", 0.09270727758627187], ["reminders.task.Task", 0.09030505000959012], ["annofabapi.dataclass.task.Task", 0.08012650929792373], ["restful_functions.modules.task.TaskStore", 0.07562681000761745]], "ti": [["int", 0.25579683568726114], ["byceps.services.user.transfer.models.User", 0.1453804976353388], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.09000080829861723], ["accounts.models.Account", 0.08663653996304874], ["List[Tuple[Any, Any]]", 0.08569836144746557], ["float", 0.07663303432983538], ["tuple", 0.07623706743941117]]}}, {"docstring": {"func": "Test that ensures that where a task is marked success in the UI", "long_descr": "on_success_callback gets executed", "ret": null}, "fn_lc": [[547, 4], [573, 9]], "fn_var_ln": {"dag": [[552, 8], [552, 11]], "dr": [[554, 12], [554, 14]], "job": [[565, 8], [565, 11]], "job_runner": [[566, 8], [566, 18]], "task": [[560, 8], [560, 12]], "ti": [[562, 8], [562, 10]]}, "fn_var_occur": {"dag": [["dag", "get_test_dag"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["task", "dag", "get_task", "task_id"]], "dr": [["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "dr", "get_task_instance", "task", "task_id"]], "job": [["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "task": [["task", "dag", "get_task", "task_id"], ["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"]], "ti": [["ti", "dr", "get_task_instance", "task", "task_id"], ["ti", "refresh_from_task", "task"], ["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "refresh_from_db"]]}, "name": "test_mark_success_on_success_callback", "params": {"caplog": "", "get_test_dag": "", "self": ""}, "params_descr": {"caplog": "", "get_test_dag": "", "self": ""}, "params_occur": {"caplog": [["caplog", "text"]], "get_test_dag": [["dag", "get_test_dag"]], "self": []}, "params_p": {"args": [], "caplog": [["str", 0.9025756997049444]], "get_test_dag": [["str", 0.294776856984422], ["app.models.user.User", 0.20319947577760486], ["app.models.User", 0.20319947577760486], ["Callable", 0.09469854445564711]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_mark_success_on_success_callback", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dr": "", "job": "", "job_runner": "", "task": "", "ti": ""}, "variables_p": {"dag": [["Union[Literal, str]", 0.11102612364410397]], "dr": [["list", 0.20758328139159002], ["float", 0.18292469374505643], ["str", 0.08767299411116916]], "job": [["str", 0.42915750343410636], ["int", 0.1718993899816082], ["List[str]", 0.10048425983733383], ["Dict[str, Any]", 0.09994941262168934]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "task": [["golem.task.taskbase.Task", 0.43669269357481744], ["reminders.task.Task", 0.10582261399888601], ["golem.task.task_api.EnvironmentTaskApiService", 0.09936439740281344], ["taskiapplication.models.task.Task", 0.091279396427776], ["kippo.tasks.models.KippoTask", 0.07006662565525482]], "ti": [["str", 0.1914923793046745], ["List[str]", 0.1814614710977046], ["List[int]", 0.08966080303495118]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[603, 8], [614, 29]], "fn_var_ln": {"pid": [[605, 16], [605, 19]]}, "fn_var_occur": {"pid": [["pid", "session", "query", "TaskInstance", "pid", "filter", "TaskInstance", "dag_id", "ti", "dag_id", "TaskInstance", "task_id", "ti", "task_id", "TaskInstance", "run_id", "ti", "run_id", "one_or_none"]]}, "name": "get_ti_current_pid", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["ti", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["ti", "refresh_from_db"], ["pid", "session", "query", "TaskInstance", "pid", "filter", "TaskInstance", "dag_id", "ti", "dag_id", "TaskInstance", "task_id", "ti", "task_id", "TaskInstance", "run_id", "ti", "run_id", "one_or_none"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["excars.models.user.User", 0.20373503987958957], ["int", 0.13044381252850906], ["grouper.models.user.User", 0.09702590934113804], ["str", 0.08883127547109475], ["server.models.User", 0.08853222266413975], ["models.Person.Person", 0.08639723474567486]]}, "q_name": "TestLocalTaskJob.test_process_os_signal_calls_on_failure_callback.<locals>.get_ti_current_pid", "ret_exprs": ["return pid[0]"], "ret_type": "builtins.str", "ret_type_p": [["str", 0.19999999999999998], ["bool", 0.09999999999999999], ["pricemonitor.config.Coin", 0.09999999999999999]], "variables": {"pid": ""}, "variables_p": {"pid": [["int", 0.4084781656153183], ["float", 0.19224734495883086], ["Dict[str, Any]", 0.09390955958908868]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[616, 8], [627, 29]], "fn_var_ln": {"task_pid": [[618, 16], [618, 24]]}, "fn_var_occur": {"task_pid": [["task_pid", "get_ti_current_pid", "ti"], ["task_pid", "ti", "current_state", "State", "RUNNING", "os", "path", "isfile", "callback_file"], ["os", "kill", "task_pid", "sig"]]}, "name": "send_signal", "params": {"sig": "", "signal_sent": "", "ti": ""}, "params_descr": {"sig": "", "signal_sent": "", "ti": ""}, "params_occur": {"sig": [["os", "kill", "task_pid", "sig"]], "signal_sent": [["signal_sent", "True"]], "ti": [["task_pid", "get_ti_current_pid", "ti"], ["task_pid", "ti", "current_state", "State", "RUNNING", "os", "path", "isfile", "callback_file"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "sig": [["int", 0.3298989161514872], ["models.characters.states.StatusEffect", 0.10287610199229424], ["Optional[int]", 0.07645446764983332]], "signal_sent": [["bool", 0.5999999999493761], ["Optional[bool]", 8.331362170666241e-11], ["str", 2.3976984524967508e-11]], "ti": [["models.User", 0.10880079781118385], ["hackathon.utils.utils.DataMessage", 0.09585525093545172], ["int", 0.09518758525437698], ["float", 0.09131983766336287]]}, "q_name": "TestLocalTaskJob.test_process_os_signal_calls_on_failure_callback.<locals>.send_signal", "ret_exprs": [], "ret_type": "", "variables": {"task_pid": ""}, "variables_p": {"task_pid": [["str", 0.23004820546455595], ["Dict[str, Type[Any]]", 0.115558563409204], ["List[str]", 0.10782795495006174], ["threading.Event", 0.09309411478191587], ["RuntimeError", 0.08992706570403178]]}}, {"docstring": {"func": "Test that ensures that when a task is killed with sigkill or sigterm", "long_descr": "on_failure_callback does not get executed by LocalTaskJob.\n\nCallbacks should not be executed by LocalTaskJob.  If the task killed via sigkill,\nit will be reaped as zombie, then the callback is executed", "ret": null}, "fn_lc": [[576, 4], [664, 34]], "fn_var_ln": {"callback_file": [[586, 8], [586, 21]], "daemon": [[634, 8], [634, 21]], "dag": [[589, 8], [589, 11]], "job1": [[637, 8], [637, 12]], "job_runner": [[638, 8], [638, 18]], "lines": [[663, 16], [663, 21]], "m": [[653, 12], [653, 13]], "pid": [[655, 12], [655, 15]], "signal_sent_status": [[601, 8], [601, 26]], "task": [[597, 8], [597, 12]], "thread": [[629, 8], [629, 14]], "ti": [[598, 8], [598, 10]]}, "fn_var_occur": {"callback_file": [["open", "callback_file", "f"], ["open", "callback_file", "f"]], "daemon": [["thread", "daemon", "True"]], "dag": [], "job1": [["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "lines": [["lines", "f", "readlines"], ["len", "lines"], ["lines", "startswith", "ti", "key", "primary"], ["m", "re", "match", "lines"], ["lines", "f", "readlines"], ["len", "lines"]], "m": [["m", "re", "match", "lines"], ["pid", "int", "m", "group"]], "pid": [["pid", "int", "m", "group"], ["os", "getpid", "pid"], ["ti", "pid", "pid"]], "signal_sent_status": [["thread", "threading", "Thread", "name", "target", "send_signal", "args", "ti", "signal_sent_status", "signal_type"]], "task": [], "thread": [["thread", "threading", "Thread", "name", "target", "send_signal", "args", "ti", "signal_sent_status", "signal_type"], ["thread", "daemon", "True"], ["thread", "start"]], "ti": [["thread", "threading", "Thread", "name", "target", "send_signal", "args", "ti", "signal_sent_status", "signal_type"], ["job1", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "refresh_from_db"], ["ti", "state", "State", "FAILED"], ["lines", "startswith", "ti", "key", "primary"], ["ti", "pid", "pid"], ["ti", "state", "State", "RUNNING"]]}, "name": "test_process_os_signal_calls_on_failure_callback", "params": {"get_test_dag": "", "monkeypatch": "", "self": "", "signal_type": "", "tmp_path": ""}, "params_descr": {"get_test_dag": "", "monkeypatch": "", "self": "", "signal_type": "", "tmp_path": ""}, "params_occur": {"get_test_dag": [], "monkeypatch": [], "self": [], "signal_type": [["thread", "threading", "Thread", "name", "target", "send_signal", "args", "ti", "signal_sent_status", "signal_type"], ["signal_type", "signal", "SIGTERM"], ["signal_type", "signal", "SIGKILL"]], "tmp_path": []}, "params_p": {"args": [], "get_test_dag": [["str", 0.2986576586757448], ["dict", 0.2062993865131138], ["bool", 0.20189389288198614], ["Iterable[str]", 0.09764109650996744]], "kwargs": [], "monkeypatch": [["str", 0.2986576586757448], ["dict", 0.2062993865131138], ["bool", 0.20189389288198614], ["Iterable[str]", 0.09764109650996744]], "self": [], "signal_type": [["str", 0.1099297211555912], ["bool", 0.10247302691288426], ["int", 0.08856954149747091]], "tmp_path": [["str", 0.2986576586757448], ["dict", 0.2062993865131138], ["bool", 0.20189389288198614], ["Iterable[str]", 0.09764109650996744]]}, "q_name": "TestLocalTaskJob.test_process_os_signal_calls_on_failure_callback", "ret_exprs": [], "ret_type": "", "variables": {"callback_file": "", "daemon": "", "dag": "", "job1": "", "job_runner": "", "lines": "", "m": "", "pid": "", "signal_sent_status": "", "task": "", "thread": "", "ti": ""}, "variables_p": {"callback_file": [["str", 0.5000000000796618]], "daemon": [["bool", 0.7999999999999999], ["str", 0.1]], "dag": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "job1": [["dict", 0.48835282461325497], ["List[Dict[str, Any]]", 0.09735571457093527], ["Dict[str, Any]", 0.08961044531101948], ["Dict[int, Set[Any]]", 0.08889136829603307]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "lines": [["List[str]", 0.19858972036185663], ["Dict[int, str]", 0.12387438930213081], ["int", 0.11226612683292635], ["qcodes.utils.validators.Arrays", 0.09577580140435958], ["str", 0.09529908271168562]], "m": [["str", 0.47175064915391446], ["Pattern[str]", 0.136547951419128], ["int", 0.10560323417417417], ["float", 0.09739790559121762], ["Counter[str]", 0.09435012983078289], ["bool", 0.09435012983078289]], "pid": [["Pattern[str]", 0.28989744393577643], ["Type[int]", 0.17497296154299016], ["str", 0.16526951855536604], ["Optional[Match[str]]", 0.12981609601086908], ["Dict[Any, Tuple[Any, Any]]", 0.0765169626148354], ["datetime.datetime.timedelta", 0.07010333719378933]], "signal_sent_status": [["threading.Thread", 0.7151912803416545], ["str", 0.1044314085630965], ["int", 0.09144569145800704], ["multiprocessing.contexProcess", 0.08893161963724215]], "task": [["str", 0.19999999999999998], ["annofabapi.models.TaskPhase", 0.09999999999999999], ["List[Dict[str, Any]]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Type[src.app.models.TaskDevice]", 0.09999999999999999], ["Dict[str, Any]", 0.09999999999999999]], "thread": [["threading.Thread", 0.47703085170127213], ["List[List[str]]", 0.10460555813634773], ["List[None]", 0.08417847021666025]], "ti": [["threading.Thread", 0.23861540070328197], ["threading.Semaphore", 0.13564553205069338], ["List[None]", 0.11342693750187831], ["str", 0.09522904930752202], ["List[List[str]]", 0.07396748603693953]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[703, 4], [751, 58]], "fn_var_ln": {"dag": [[715, 12], [715, 15]], "dag_run": [[723, 12], [723, 19]], "job1": [[734, 12], [734, 16]], "job2": [[745, 16], [745, 20]], "job_runner": [[746, 16], [746, 26]], "scheduler_job": [[719, 12], [719, 25]], "scheduler_job_runner": [[720, 12], [720, 32]], "task_runner": [[747, 16], [747, 32]], "ti": [[741, 16], [741, 18]], "ti_by_task_id": [[725, 12], [725, 25]]}, "fn_var_occur": {"dag": [["dag", "get_test_dag"], ["scheduler_job_runner", "dagbag", "bag_dag", "dag", "root_dag", "dag"], ["dag_run", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING"], ["ti", "TaskInstance", "dag", "get_task", "task_id", "run_id", "dag_run", "run_id", "state", "init_state", "task_id"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"]], "dag_run": [["dag_run", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING"], ["ti", "TaskInstance", "dag", "get_task", "task_id", "run_id", "dag_run", "run_id", "state", "init_state", "task_id"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"], ["self", "validate_ti_states", "dag_run", "first_run_state", "error_message"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"], ["self", "validate_ti_states", "dag_run", "second_run_state", "error_message"]], "job1": [["job1", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job2": [["job2", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job2", "task_instance", "ti", "ignore_ti_state", "True"], ["job2", "task_runner", "StandardTaskRunner", "job_runner"], ["run_job", "job2", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"], ["job_runner", "LocalTaskJobRunner", "job", "job2", "task_instance", "ti", "ignore_ti_state", "True"], ["job2", "task_runner", "StandardTaskRunner", "job_runner"], ["run_job", "job2", "execute_callable", "job_runner", "_execute"]], "scheduler_job": [["scheduler_job", "Job"], ["scheduler_job_runner", "SchedulerJobRunner", "job", "scheduler_job", "subdir", "os", "devnull"]], "scheduler_job_runner": [["scheduler_job_runner", "SchedulerJobRunner", "job", "scheduler_job", "subdir", "os", "devnull"], ["scheduler_job_runner", "dagbag", "bag_dag", "dag", "root_dag", "dag"], ["scheduler_job_runner", "processor_agent"], ["scheduler_job_runner", "processor_agent", "end"]], "task_runner": [["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["job2", "task_runner", "StandardTaskRunner", "job_runner"]], "ti": [["ti", "TaskInstance", "dag", "get_task", "task_id", "run_id", "dag_run", "run_id", "state", "init_state", "task_id"], ["session", "merge", "ti"], ["ti_by_task_id", "task_id", "ti"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"], ["ti", "refresh_from_db"], ["job1", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti", "ignore_ti_state", "True"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"], ["ti", "refresh_from_db"], ["job2", "Job", "dag_id", "ti", "dag_id", "executor", "SequentialExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job2", "task_instance", "ti", "ignore_ti_state", "True"]], "ti_by_task_id": [["ti_by_task_id", "task_id", "ti"]]}, "name": "test_fast_follow", "params": {"conf": "", "error_message": "", "first_run_state": "", "get_test_dag": "", "init_state": "", "second_run_state": "", "self": "", "task_ids_to_run": ""}, "params_descr": {"conf": "", "error_message": "", "first_run_state": "", "get_test_dag": "", "init_state": "", "second_run_state": "", "self": "", "task_ids_to_run": ""}, "params_occur": {"conf": [["conf_vars", "conf"]], "error_message": [["self", "validate_ti_states", "dag_run", "first_run_state", "error_message"], ["self", "validate_ti_states", "dag_run", "second_run_state", "error_message"]], "first_run_state": [["self", "validate_ti_states", "dag_run", "first_run_state", "error_message"]], "get_test_dag": [["dag", "get_test_dag"]], "init_state": [["ti", "TaskInstance", "dag", "get_task", "task_id", "run_id", "dag_run", "run_id", "state", "init_state", "task_id"]], "second_run_state": [["self", "validate_ti_states", "dag_run", "second_run_state", "error_message"]], "self": [["self", "validate_ti_states", "dag_run", "first_run_state", "error_message"], ["self", "validate_ti_states", "dag_run", "second_run_state", "error_message"]], "task_ids_to_run": [["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"], ["ti", "TaskInstance", "task", "dag", "get_task", "task_ids_to_run", "execution_date", "dag_run", "execution_date"]]}, "params_p": {"args": [], "conf": [["bool", 0.210033158805654], ["utils.JobsType", 0.10963330039948159]], "error_message": [["raiden.transfer.state.ChainState", 0.20282255293711643], ["Union[raiden.transfer.state.BalanceProofSignedState, raiden.transfer.state.BalanceProofUnsignedState]", 0.10108340225456387], ["dict", 0.09461408725509586], ["raiden.utils.SecreHash", 0.09396104121860806], ["Dict[str, Any]", 0.09251208623839778]], "first_run_state": [["bool", 0.29630290942129134], ["raiden.utils.SecreHash", 0.1192415046404027]], "get_test_dag": [["nucypher.config.characters.BobConfiguration", 0.09441995987158576], ["django.contrib.auth.models.AbstractBaseUser", 0.08832788886727612], ["bool", 0.08769044144435105], ["dict", 0.08761212255745546], ["raiden.utils.SecreHash", 0.08716349500010766]], "init_state": [["dict", 0.16959699408228707], ["str", 0.08223857060618135], ["Dict[str, Any]", 0.08092338614743622]], "kwargs": [], "second_run_state": [["bool", 0.29630290942129134], ["raiden.utils.SecreHash", 0.1192415046404027]], "self": [], "task_ids_to_run": [["Dict[str, Any]", 0.18793116633385126], ["float", 0.11498460377867754], ["Set[str]", 0.10866412404995213], ["IO[str]", 0.09767374364916377], ["dict", 0.09640894229435631]]}, "q_name": "TestLocalTaskJob.test_fast_follow", "ret_exprs": [], "ret_type": "", "variables": {"dag": "", "dag_run": "", "job1": "", "job2": "", "job_runner": "", "scheduler_job": "", "scheduler_job_runner": "", "task_runner": "", "ti": "", "ti_by_task_id": ""}, "variables_p": {"dag": [], "dag_run": [["str", 0.33915204670875443], ["o2a.converter.task.Task", 0.17242119246048454], ["int", 0.1018870270849464], ["Dict[str, Any]", 0.0900103181192381]], "job1": [["str", 0.42915750343410636], ["int", 0.1718993899816082], ["List[str]", 0.10048425983733383], ["Dict[str, Any]", 0.09994941262168934]], "job2": [["dict", 0.48835282461325497], ["List[Dict[str, Any]]", 0.09735571457093527], ["Dict[str, Any]", 0.08961044531101948], ["Dict[int, Set[Any]]", 0.08889136829603307]], "job_runner": [["str", 0.3292247582922564], ["Mapping", 0.09854906643371872], ["Dict[str, Any]", 0.08874270020247325]], "scheduler_job": [["dict", 0.12468482270903163], ["Dict[str, None]", 0.12447099217432024], ["list", 0.08418448293348105]], "scheduler_job_runner": [["int", 0.19864120501515642]], "task_runner": [["golem.task.task_api.EnvironmentTaskApiService", 0.10160777462188271], ["apps.dummy.task.dummytask.DummyTask", 0.09659568625855233], ["golem.task.taskcomputer.TaskComputer", 0.0857376238443082], ["List[str]", 0.07765491134771431]], "ti": [["str", 0.46168739932654057], ["List[str]", 0.26018099783100856], ["golem.task.taskbase.AcceptClientVerdict", 0.11261974974473107]], "ti_by_task_id": [["str", 0.5934497516420765], ["int", 0.22605898976259073], ["set", 0.08599503333243703]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[754, 4], [794, 40]], "fn_var_ln": {"catchup": [[756, 8], [756, 19]], "dag": [[755, 8], [755, 11]], "dr": [[759, 8], [759, 10]], "dr2": [[760, 8], [760, 11]], "failed_deps": [[791, 8], [791, 19]], "job1": [[778, 8], [778, 12]], "job_runner": [[782, 8], [782, 18]], "task_k": [[763, 8], [763, 14]], "task_l": [[764, 8], [764, 14]], "task_runner": [[783, 8], [783, 24]], "ti2_k": [[769, 12], [769, 17]], "ti2_l": [[770, 12], [770, 17]], "ti_b": [[767, 12], [767, 16]], "ti_k": [[766, 12], [766, 16]]}, "fn_var_occur": {"catchup": [["dag", "catchup", "False"]], "dag": [["dag", "get_test_dag"], ["dag", "catchup", "False"], ["SerializedDagModel", "write_dag", "dag"], ["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE"], ["dr2", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "hours"], ["task_k", "dag", "get_task"], ["task_l", "dag", "get_task"]], "dr": [["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE"], ["ti_k", "TaskInstance", "task_k", "run_id", "dr", "run_id", "state", "State", "SUCCESS"], ["ti_b", "TaskInstance", "task_l", "run_id", "dr", "run_id", "state", "State", "SUCCESS"]], "dr2": [["dr2", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "hours"], ["ti2_k", "TaskInstance", "task_k", "run_id", "dr2", "run_id", "state", "State", "NONE"], ["ti2_l", "TaskInstance", "task_l", "run_id", "dr2", "run_id", "state", "State", "NONE"]], "failed_deps": [["failed_deps", "list", "ti2_l", "get_failed_dep_statuses"], ["len", "failed_deps"], ["failed_deps", "dep_name"], ["failed_deps", "passed"]], "job1": [["job1", "Job", "executor", "SequentialExecutor", "dag_id", "ti2_k", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti2_k", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti2_k", "ignore_ti_state", "True"], ["job1", "task_runner", "StandardTaskRunner", "job_runner"], ["run_job", "job", "job1", "execute_callable", "job_runner", "_execute"]], "task_k": [["task_k", "dag", "get_task"], ["ti_k", "TaskInstance", "task_k", "run_id", "dr", "run_id", "state", "State", "SUCCESS"], ["ti2_k", "TaskInstance", "task_k", "run_id", "dr2", "run_id", "state", "State", "NONE"]], "task_l": [["task_l", "dag", "get_task"], ["ti_b", "TaskInstance", "task_l", "run_id", "dr", "run_id", "state", "State", "SUCCESS"], ["ti2_l", "TaskInstance", "task_l", "run_id", "dr2", "run_id", "state", "State", "NONE"]], "task_runner": [["job1", "task_runner", "StandardTaskRunner", "job_runner"]], "ti2_k": [["ti2_k", "TaskInstance", "task_k", "run_id", "dr2", "run_id", "state", "State", "NONE"], ["session", "merge", "ti2_k"], ["job1", "Job", "executor", "SequentialExecutor", "dag_id", "ti2_k", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job1", "task_instance", "ti2_k", "ignore_ti_state", "True"], ["ti2_k", "refresh_from_db"], ["ti2_k", "state", "State", "SUCCESS"]], "ti2_l": [["ti2_l", "TaskInstance", "task_l", "run_id", "dr2", "run_id", "state", "State", "NONE"], ["session", "merge", "ti2_l"], ["ti2_l", "refresh_from_db"], ["ti2_l", "state", "State", "NONE"], ["failed_deps", "list", "ti2_l", "get_failed_dep_statuses"]], "ti_b": [["ti_b", "TaskInstance", "task_l", "run_id", "dr", "run_id", "state", "State", "SUCCESS"], ["session", "merge", "ti_b"]], "ti_k": [["ti_k", "TaskInstance", "task_k", "run_id", "dr", "run_id", "state", "State", "SUCCESS"], ["session", "merge", "ti_k"]]}, "name": "test_mini_scheduler_works_with_wait_for_upstream", "params": {"caplog": "", "get_test_dag": "", "self": ""}, "params_descr": {"caplog": "", "get_test_dag": "", "self": ""}, "params_occur": {"caplog": [], "get_test_dag": [["dag", "get_test_dag"]], "self": []}, "params_p": {"args": [], "caplog": [["str", 0.5847344941404273], ["bool", 0.19086188001393167]], "get_test_dag": [["str", 0.49892721911838706], ["bool", 0.09936047347755672], ["float", 0.09817689562834464]], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_mini_scheduler_works_with_wait_for_upstream", "ret_exprs": [], "ret_type": "", "variables": {"catchup": "", "dag": "", "dr": "", "dr2": "", "failed_deps": "", "job1": "", "job_runner": "", "task_k": "", "task_l": "", "task_runner": "", "ti2_k": "", "ti2_l": "", "ti_b": "", "ti_k": ""}, "variables_p": {"catchup": [["List[str]", 0.49999999997058747], ["str", 2.0149264789844944e-11], ["bool", 1.9339109735866804e-11], ["Dict[str, bool]", 9.880922464997032e-12], ["threading.Lock", 9.878353242215374e-12], ["List[Tuple[Any, Any]]", 9.458187270869773e-12]], "dag": [["Tuple[str, str, str, str]", 0.09413854948449718]], "dr": [["list", 0.24214844557896284], ["str", 0.10515271747577802], ["dict", 0.098328900093364], ["Optional[Callable[..., Any]]", 0.09605955584337682], ["Dict[Tuple[Any, Any], Any]", 0.08815271373531841]], "dr2": [["dict", 0.11391001416293914], ["str", 0.10856814992358556], ["Tuple[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]", 0.09228731271522361], ["float", 0.09087517837461549]], "failed_deps": [["str", 0.22817954786639222], ["List[int]", 0.18224726154991716], ["float", 0.11751671292839329], ["List[str]", 0.10474498880380086], ["List[List[Any]]", 0.0975919322859892], ["int", 0.095318557221555]], "job1": [["str", 0.31397230884701594], ["list", 0.09714964262390799], ["golem.task.taskbase.AcceptClientVerdict", 0.09081487154145214]], "job_runner": [["str", 0.3173673507714903], ["dict", 0.12853469695359523], ["Mapping", 0.08975091321497412]], "task_k": [["cmk.gui.plugins.views.utils.ABCDataSource", 0.09410865672107455], ["Optional[float]", 0.0852533818129318]], "task_l": [["str", 0.20027454183913818], ["RuntimeError", 0.10286899175657059], ["azafea.config.Config", 0.09011632111159885]], "task_runner": [["int", 0.16396576255143314], ["Dict[str, Union[Any, Any]]", 0.125233882466666], ["Dict[str, Any]", 0.10698993705010668], ["str", 0.08724997765039376], ["bytes", 0.08567878959736061], ["kitovu.utils.JsonType", 0.08251867906309243]], "ti2_k": [["aw_core.models.Event", 0.33062869598221833], ["Dict[str, List[str]]", 0.09745161450962607], ["uuid.UUID", 0.09626425166338569], ["list", 0.08731439081220886]], "ti2_l": [["dict", 0.09498051790752537], ["Dict[str, str]", 0.09213650082418673]], "ti_b": [["Dict[str, str]", 0.18884821677149513], ["datetime.datetime", 0.1148679555398341], ["List[str]", 0.0907444740211965], ["int", 0.0878942399776385], ["Dict[str, Dict[str, Any]]", 0.08563394486655006], ["List[List[int]]", 0.07702324597974111]], "ti_k": [["int", 0.35854445530902923], ["uuid.UUID", 0.12855402864821497], ["Dict[str, List[str]]", 0.12734298722229373], ["float", 0.08573245553524625], ["str", 0.08573245553524625], ["Optional[int]", 0.08553958910175463]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[800, 8], [813, 71]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "task_function", "params": {"ti": ""}, "params_descr": {"ti": ""}, "params_occur": {"ti": [["ti", "pid"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "ti": [["bool", 0.3101963893373072], ["str", 0.2073691921096695], ["int", 0.1962565512149232]]}, "q_name": "TestLocalTaskJob.test_process_sigsegv_error_message.<locals>.task_function", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Test that shows error if process failed with segmentation fault.", "long_descr": null, "ret": null}, "fn_lc": [[796, 4], [829, 49]], "fn_var_ln": {"dag_run": [[820, 8], [820, 15]], "job": [[823, 8], [823, 11]], "job_runner": [[824, 8], [824, 18]], "task": [[816, 12], [816, 16]], "ti": [[821, 8], [821, 10]]}, "fn_var_occur": {"dag_run": [["dag_run", "dag_maker", "create_dagrun"], ["ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"]], "job": [["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "task": [["task", "PythonOperator", "task_id", "python_callable", "task_function"], ["ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"]], "ti": [["ti", "TaskInstance", "task", "task", "run_id", "dag_run", "run_id"], ["ti", "refresh_from_db"], ["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"]]}, "name": "test_process_sigsegv_error_message", "params": {"caplog": "", "dag_maker": "", "self": ""}, "params_descr": {"caplog": "", "dag_maker": "", "self": ""}, "params_occur": {"caplog": [["SIGSEGV_MESSAGE", "caplog", "messages"]], "dag_maker": [["dag_maker", "dag_id"], ["dag_run", "dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "caplog": [["str", 0.33333333262832415], ["cli_ui.tests.MessageRecorder", 0.33333333262832415], ["int", 0.33333333262832415]], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestLocalTaskJob.test_process_sigsegv_error_message", "ret_exprs": [], "ret_type": "", "variables": {"dag_run": "", "job": "", "job_runner": "", "task": "", "ti": ""}, "variables_p": {"dag_run": [["bytearray", 0.10175682480559853], ["Dict[str, str]", 0.10062284463857185], ["bytes", 0.09948806089252572], ["dict", 0.0992508845525959], ["golem.task.taskrequestorstats.FinishedTasksStats", 0.09598957932188201]], "job": [["str", 0.42915750343410636], ["int", 0.1718993899816082], ["List[str]", 0.10048425983733383], ["Dict[str, Any]", 0.09994941262168934]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "task": [["golem.task.taskbase.Task", 0.48299546120653675], ["taskiapplication.models.task.Task", 0.3337452419226939], ["reminders.task.Task", 0.09567175651984011], ["golem.task.task_api.EnvironmentTaskApiService", 0.08758754035092918]], "ti": [["List[str]", 0.1259317704985006], ["Dict[str, Any]", 0.10317154205381933], ["list", 0.09932660533182179], ["str", 0.09426513560590026], ["geode.models.common.Address", 0.09344779366853077], ["Dict[str, str]", 0.08975812819483248]]}}], "name": "TestLocalTaskJob", "q_name": "TestLocalTaskJob", "variables": {}, "variables_p": {}}, {"cls_lc": [[860, 0], [972, 62]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "Test that ensures that task runner sets tasks to retry when task runner receive SIGTERM.", "long_descr": null, "ret": null}, "fn_lc": [[875, 4], [932, 13]], "fn_var_ln": {"captured": [[921, 12], [921, 20]], "dag_id": [[884, 8], [884, 14]], "execution_date": [[886, 8], [886, 22]], "mp_context": [[877, 8], [877, 18]], "proc": [[890, 8], [890, 12]], "pytest_capture": [[916, 8], [916, 22]], "retry_callback_called": [[881, 8], [881, 29]], "run_id": [[887, 8], [887, 14]], "task_id": [[885, 8], [885, 15]], "task_started": [[882, 8], [882, 20]]}, "fn_var_occur": {"captured": [["captured", "capfd", "readouterr"], ["msg", "captured", "out", "msg", "captured", "err"]], "dag_id": [["dag_id", "mp_method", "daemon"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]], "execution_date": [["execution_date", "DEFAULT_DATE"], ["run_id", "execution_date", "date", "isoformat"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]], "mp_context": [["mp_context", "mp", "get_context", "mp_method"], ["retry_callback_called", "mp_context", "Value"], ["task_started", "mp_context", "Value"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]], "proc": [["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"], ["proc", "start"], ["os", "kill", "proc", "pid", "signal", "SIGTERM"], ["proc", "kill"]], "pytest_capture": [["pytest_capture", "request", "config", "option", "capture"], ["warnings", "warn", "pytest_capture", "UserWarning"]], "retry_callback_called": [["retry_callback_called", "mp_context", "Value"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"], ["retry_callback_called", "value"], ["retry_callback_called", "value"]], "run_id": [["run_id", "execution_date", "date", "isoformat"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]], "task_id": [["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]], "task_started": [["task_started", "mp_context", "Value"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"], ["task_started", "value"]]}, "name": "test_process_sigterm_works_with_retries", "params": {"capfd": "", "clear_db": "", "daemon": "", "mp_method": "", "request": "", "self": ""}, "params_descr": {"capfd": "", "clear_db": "", "daemon": "", "mp_method": "", "request": "", "self": ""}, "params_occur": {"capfd": [["captured", "capfd", "readouterr"]], "clear_db": [], "daemon": [["dag_id", "mp_method", "daemon"], ["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]], "mp_method": [["mp_context", "mp", "get_context", "mp_method"], ["dag_id", "mp_method", "daemon"]], "request": [["pytest_capture", "request", "config", "option", "capture"]], "self": [["proc", "mp_context", "Process", "target", "self", "_sigterm_local_task_runner", "args", "dag_id", "task_id", "run_id", "execution_date", "task_started", "retry_callback_called", "name", "daemon", "daemon"]]}, "params_p": {"args": [], "capfd": [["raiden.tests.integration.fixtures.raiden_network.RestartNode", 0.16697976015050792], ["List[int]", 0.13449865347021983], ["raiden.utils.PaymentWithFeeAmount", 0.09170251045767344], ["bool", 0.08505413310221714], ["str", 0.06515460309160835]], "clear_db": [["List[List[int]]", 0.10495850606284092], ["bool", 0.09530708801277872]], "daemon": [["Mapping[str, int]", 0.09734402421844572]], "kwargs": [], "mp_method": [["lunch_buddies.models.polls.Choice", 0.0926720136032601], ["mock.MagicMock", 0.09088127865699933], ["str", 0.08886500958457]], "request": [["raiden.utils.List[raiden.raiden_service.RaidenService]", 0.8758341949202807]], "self": []}, "q_name": "TestSigtermOnRunner.test_process_sigterm_works_with_retries", "ret_exprs": [], "ret_type": "", "variables": {"captured": "", "dag_id": "", "execution_date": "", "mp_context": "", "proc": "", "pytest_capture": "", "retry_callback_called": "", "run_id": "", "task_id": "", "task_started": ""}, "variables_p": {"captured": [["str", 0.3], ["int", 0.19999999999999998]], "dag_id": [["Dict[str, Union[Any, Any, Any, Any]]", 0.10143419584308443], ["str", 0.09862340446575976], ["int", 0.0918214156777091]], "execution_date": [["str", 0.49789191767396673], ["dict", 0.11550762687273684], ["list", 0.10013685651163097], ["datetime.datetime.time", 0.09944506300353735], ["List[int]", 0.09184342088177284]], "mp_context": [["str", 0.23829250678495267], ["Dict[str, float]", 0.08913118157301632]], "proc": [], "pytest_capture": [["str", 0.2010819258374828], ["List[str]", 0.19244859091459637], ["bytes", 0.11410084434552056], ["int", 0.11335011992086647], ["bool", 0.10298021641999623], ["cincoconfig.config.Schema", 0.09489619688513036], ["Union[Literal, str]", 0.09131629784759038]], "retry_callback_called": [["Tuple[Type[AttributeError], Type[NotImplementedError]]", 0.5726704063774236]], "run_id": [["raiden.transfer.state.NettingChannelEndState", 0.19226881263235993], ["raiden.utils.Balance", 0.11383675528335652], ["str", 0.10461480678793261], ["list", 0.10336605473298514], ["datetime.datetime.datetime", 0.098238132097031], ["deque[Any]", 0.09776922666309008], ["int", 0.09574544290140263]], "task_id": [["int", 0.19239517257181238], ["faustypes.models.ModelT", 0.11423046311015643], ["List[str]", 0.10047873899842391], ["raiden.utils.TokenAmount", 0.09127626374237398], ["uuid.UUID", 0.09069461475067536]], "task_started": [["str", 0.5002518004037106], ["Type[str]", 0.08938403691762851]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[947, 8], [950, 41]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "retry_callback", "params": {"context": ""}, "params_descr": {"context": ""}, "params_occur": {"context": [["context", "dag_id", "dag_id"]]}, "params_p": {"args": [], "context": [["int", 0.28381271323310364], ["str", 0.187141755856288], ["types.TopicPartition", 0.09232947844520402]], "kwargs": [], "self": []}, "q_name": "TestSigtermOnRunner._sigterm_local_task_runner.<locals>.retry_callback", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[952, 8], [957, 31]], "fn_var_ln": {"value": [[954, 16], [954, 32]]}, "fn_var_occur": {"value": [["is_started", "value"]]}, "name": "task_function", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestSigtermOnRunner._sigterm_local_task_runner.<locals>.task_function", "ret_exprs": [], "ret_type": "", "variables": {"value": ""}, "variables_p": {"value": [["property", 0.30821779374104263], ["int", 0.2376162496729772], ["Dict[int, str]", 0.15410889687052132], ["float", 0.15410889687052132], ["str", 0.08538042396560828], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.06056773887932936]]}}, {"docstring": {"func": "Helper function which create infinity task and run it by LocalTaskJob.", "long_descr": null, "ret": null}, "fn_lc": [[935, 4], [972, 62]], "fn_var_ln": {"job": [[970, 8], [970, 11]], "job_runner": [[971, 8], [971, 18]], "task": [[960, 12], [960, 16]], "ti": [[968, 8], [968, 10]]}, "fn_var_occur": {"job": [["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "task": [["task", "PythonOperator", "task_id", "task_id", "python_callable", "task_function", "retries", "on_retry_callback", "retry_callback"], ["ti", "TaskInstance", "task", "task", "execution_date", "execution_date"]], "ti": [["ti", "TaskInstance", "task", "task", "execution_date", "execution_date"], ["ti", "refresh_from_db"], ["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti", "ignore_ti_state", "True"]]}, "name": "_sigterm_local_task_runner", "params": {"callback_value": "", "dag_id": "", "execution_date": "", "is_started": "", "run_id": "", "task_id": ""}, "params_descr": {"callback_value": "", "dag_id": "", "execution_date": "", "is_started": "", "run_id": "", "task_id": ""}, "params_occur": {"callback_value": [], "dag_id": [["DAG", "dag_id", "dag_id", "schedule", "None", "start_date", "execution_date", "dag"], ["job", "Job", "executor", "SequentialExecutor", "dag_id", "ti", "dag_id"]], "execution_date": [["DAG", "dag_id", "dag_id", "schedule", "None", "start_date", "execution_date", "dag"], ["dag", "create_dagrun", "state", "State", "RUNNING", "run_id", "run_id", "execution_date", "execution_date"], ["ti", "TaskInstance", "task", "task", "execution_date", "execution_date"]], "is_started": [], "run_id": [["dag", "create_dagrun", "state", "State", "RUNNING", "run_id", "run_id", "execution_date", "execution_date"]], "task_id": [["task", "PythonOperator", "task_id", "task_id", "python_callable", "task_function", "retries", "on_retry_callback", "retry_callback"]]}, "params_p": {"args": [], "callback_value": [["str", 0.6581009054745048], ["List[str]", 0.21740022273616683], ["List[Dict[str, Any]]", 0.12449887178932827]], "dag_id": [["Optional[str]", 0.5119158855017759], ["str", 0.2919813522414847], ["list", 0.10022417227199427], ["datetime.date", 0.09587858998474522]], "execution_date": [["str", 0.41606357493509527], ["int", 0.28931432688251285], ["Optional[str]", 0.18529015221475675], ["datetime.datetime", 0.10933194596763497]], "is_started": [["str", 0.6581009054745048], ["List[str]", 0.21740022273616683], ["List[Dict[str, Any]]", 0.12449887178932827]], "kwargs": [], "run_id": [["str", 0.8074591813089268], ["int", 0.0959214158463319]], "self": [], "task_id": [["str", 0.40490096511168283], ["golem.task.taskstate.Operation", 0.14144227997555708], ["golem.task.taskstate.SubtaskOp", 0.10196773029724542], ["Optional[str]", 0.08938420607198995], ["Optional[Any]", 0.08613572468510208]]}, "q_name": "TestSigtermOnRunner._sigterm_local_task_runner", "ret_exprs": [], "ret_type": "", "variables": {"job": "", "job_runner": "", "task": "", "ti": ""}, "variables_p": {"job": [["str", 0.42915750343410636], ["int", 0.1718993899816082], ["List[str]", 0.10048425983733383], ["Dict[str, Any]", 0.09994941262168934]], "job_runner": [["str", 0.3541322572286961], ["Dict[str, Any]", 0.0897503953229316]], "task": [["Dict[str, Union[Any, bool, str]]", 0.18317660021466864], ["Dict[str, Dict[str, int]]", 0.10708581090366348], ["restful_functions.modules.task.TaskStore", 0.10303017863678994], ["list", 0.09952513488114739], ["golem.task.task_api.EnvironmentTaskApiService", 0.09674387794256895]], "ti": [["int", 0.25579683568726114], ["byceps.services.user.transfer.models.User", 0.1453804976353388], ["rotkehlchen.tests.utils.rotkehlchen.BalancesTestSetup", 0.09000080829861723], ["accounts.models.Account", 0.08663653996304874], ["List[Tuple[Any, Any]]", 0.08569836144746557], ["float", 0.07663303432983538], ["tuple", 0.07623706743941117]]}}], "name": "TestSigtermOnRunner", "q_name": "TestSigtermOnRunner", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[64, 0], [69, 9]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clear_db", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "clear_db", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[73, 0], [78, 27]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clear_db_class", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "clear_db_class", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[82, 0], [86, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "dagbag", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "dagbag", "ret_exprs": ["return DagBag( dag_folder=TEST_DAG_FOLDER, include_examples=False,)"], "ret_type": "", "ret_type_p": [["trezor.utils.Writer", 0.12820725561529983], ["Tuple[Any, Any, Any]", 0.12470262524130861]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[833, 0], [836, 22]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean_db_helper", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "clean_db_helper", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[841, 0], [857, 62]], "fn_var_ln": {"codes": [[842, 4], [842, 9]], "dr": [[849, 4], [849, 6]], "job": [[854, 4], [854, 7]], "job_runner": [[855, 4], [855, 14]], "task": [[847, 8], [847, 12]], "ti": [[851, 4], [851, 6]], "unique_prefix": [[845, 4], [845, 17]]}, "fn_var_occur": {"codes": [["codes", "builtins", "list", "int", "None", "None"], ["mock_get_task_runner", "return_value", "return_code", "side_effects", "codes"]], "dr": [["dr", "dag_maker", "create_dagrun", "run_id", "unique_prefix", "state", "State", "NONE"], ["ti", "dr", "task_instances"]], "job": [["job", "Job", "dag_id", "ti", "dag_id", "executor", "MockExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "job_runner": [["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti"], ["run_job", "job", "job", "execute_callable", "job_runner", "_execute"]], "task": [["task", "EmptyOperator", "task_id"], ["ti", "refresh_from_task", "task"]], "ti": [["ti", "dr", "task_instances"], ["ti", "refresh_from_task", "task"], ["job", "Job", "dag_id", "ti", "dag_id", "executor", "MockExecutor"], ["job_runner", "LocalTaskJobRunner", "job", "job", "task_instance", "ti"]], "unique_prefix": [["unique_prefix", "str", "uuid", "uuid4"], ["dag_maker", "dag_id", "unique_prefix"], ["dr", "dag_maker", "create_dagrun", "run_id", "unique_prefix", "state", "State", "NONE"]]}, "name": "test_number_of_queries_single_loop", "params": {"dag_maker": "", "mock_get_task_runner": ""}, "params_descr": {"dag_maker": "", "mock_get_task_runner": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag_id", "unique_prefix"], ["dr", "dag_maker", "create_dagrun", "run_id", "unique_prefix", "state", "State", "NONE"]], "mock_get_task_runner": [["mock_get_task_runner", "return_value", "return_code", "side_effects", "codes"]]}, "params_p": {"args": [], "dag_maker": [["mock.MagicMock", 0.09653377069830557]], "kwargs": [], "mock_get_task_runner": []}, "q_name": "test_number_of_queries_single_loop", "ret_exprs": [], "ret_type": "", "variables": {"codes": "builtins.list[int | None]", "dr": "", "job": "", "job_runner": "", "task": "", "ti": "", "unique_prefix": ""}, "variables_p": {"codes": [["list", 0.6926954601937914], ["int", 0.212261239634027], ["Set[str]", 0.0950433001721816]], "dr": [["int", 0.4312356623380299], ["str", 0.20984097863108325], ["bool", 0.10013767344177346], ["float", 0.090854230538094]], "job": [["list", 0.44174397899574047], ["Dict[str, Dict[str, Any]]", 0.2711866458162431], ["libsoundtouch.tests.test_libsoundtouch.MockDevice", 0.11932215341060194], ["str", 0.0930287461109147], ["Dict[int, Dict[str, Any]]", 0.07471847566649974]], "job_runner": [["str", 0.13865660404712615], ["int", 0.08647811387255677]], "task": [["list", 0.1250789965082158], ["Dict[str, Dict[str, int]]", 0.09519708448820172]], "ti": [["Pattern[str]", 0.2955145156207034], ["Tuple[int, int, int, int]", 0.1032027066914138], ["pydynasync.models.Changes", 0.09773848139821682], ["golem.task.taskbase.AcceptClientVerdict", 0.0934632368575665], ["dict", 0.09227895469956228]], "unique_prefix": [["str", 0.7936218754491657], ["int", 0.11113441664711034], ["bool", 0.09524370790372412]]}}], "imports": ["__future__", "annotations", "datetime", "logging", "multiprocessing", "mp", "os", "re", "signal", "threading", "time", "uuid", "warnings", "unittest", "mock", "unittest", "mock", "patch", "psutil", "pytest", "airflow", "DAG", "settings", "airflow", "exceptions", "AirflowException", "airflow", "executors", "sequential_executor", "SequentialExecutor", "airflow", "jobs", "job", "Job", "run_job", "airflow", "jobs", "local_task_job_runner", "SIGSEGV_MESSAGE", "LocalTaskJobRunner", "airflow", "jobs", "scheduler_job_runner", "SchedulerJobRunner", "airflow", "models", "dagbag", "DagBag", "airflow", "models", "serialized_dag", "SerializedDagModel", "airflow", "models", "taskinstance", "TaskInstance", "airflow", "operators", "empty", "EmptyOperator", "airflow", "operators", "python", "PythonOperator", "airflow", "task", "task_runner", "standard_task_runner", "StandardTaskRunner", "airflow", "utils", "timezone", "airflow", "utils", "net", "get_hostname", "airflow", "utils", "session", "create_session", "airflow", "utils", "state", "State", "airflow", "utils", "timeout", "timeout", "airflow", "utils", "types", "DagRunType", "tests", "test_utils", "db", "tests", "test_utils", "asserts", "assert_queries_count", "tests", "test_utils", "config", "conf_vars", "tests", "test_utils", "mock_executor", "MockExecutor", "faulthandler"], "mod_var_ln": {"DEFAULT_DATE": [[59, 0], [59, 12]], "TEST_DAG_FOLDER": [[60, 0], [60, 15]]}, "mod_var_occur": {"DEFAULT_DATE": [["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["dr", "dag", "create_dagrun", "run_id", "state", "State", "SUCCESS", "execution_date", "DEFAULT_DATE", "start_date", "DEFAULT_DATE", "session", "session"], ["ti_run", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["ti_run", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "start_date", "DEFAULT_DATE", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["dr", "dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["dag", "create_dagrun", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "run_type", "DagRunType", "SCHEDULED", "session", "session"], ["ti", "TaskInstance", "task", "task", "execution_date", "DEFAULT_DATE"], ["dr", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE"], ["dr2", "dag", "create_dagrun", "run_id", "state", "State", "RUNNING", "execution_date", "DEFAULT_DATE", "datetime", "timedelta", "hours"], ["execution_date", "DEFAULT_DATE"]], "TEST_DAG_FOLDER": [["DagBag", "dag_folder", "TEST_DAG_FOLDER", "include_examples", "False"]]}, "no_types_annot": {"D": 2, "I": 0, "U": 277}, "session_id": "WR7yZhlQ_HTK_zy7eHGaf5tBni4GmHfRHG-37bB50ro", "set": null, "tc": [false, null], "type_annot_cove": 0.01, "typed_seq": "", "untyped_seq": "", "variables": {"DEFAULT_DATE": "", "TEST_DAG_FOLDER": ""}, "variables_p": {"DEFAULT_DATE": [["str", 0.22747609370586147], ["dict", 0.22009813155890146], ["datetime.date", 0.09636505917705442], ["datetime.datetime", 0.09593145609229065]], "TEST_DAG_FOLDER": [["Tuple[Literal, Literal]", 0.49274847244513414], ["int", 0.24526791993939764], ["Dict[str, bool]", 0.16954428944048272]]}}}