{"error": null, "response": {"classes": [{"cls_lc": [[57, 8], [58, 47]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [], "name": "InvalidTemplateFieldOperator", "q_name": "TestCore.test_dryrun_with_invalid_template_field.<locals>.InvalidTemplateFieldOperator", "variables": {}, "variables_p": {}}, {"cls_lc": [[40, 0], [175, 81]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[42, 4], [45, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean_db", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCore.clean_db", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[47, 4], [48, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "teardown_method", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "clean_db"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "TestCore.teardown_method", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[50, 4], [54, 20]], "fn_var_ln": {"op": [[52, 12], [52, 14]]}, "fn_var_occur": {"op": [["op", "BashOperator", "task_id", "bash_command"], ["op", "dry_run"]]}, "name": "test_dryrun", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestCore.test_dryrun", "ret_exprs": [], "ret_type": "", "variables": {"op": ""}, "variables_p": {"op": [["Pattern[Any]", 0.269596669908622], ["Dict[str, str]", 0.2070103947282677], ["str", 0.0938127853498074], ["Dict[str, Union[Any, Any, Any]]", 0.09098574260171098], ["Dict[str, Dict[str, Any]]", 0.08777252456567543], ["Dict[int, str]", 0.08577172849005237], ["Type[Optional[Any]]", 0.08133527994437313]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[56, 4], [69, 24]], "fn_var_ln": {"error_message": [[64, 8], [64, 21]], "op": [[61, 12], [61, 14]], "template_fields": [[58, 12], [58, 27]]}, "fn_var_occur": {"error_message": [["pytest", "raises", "AttributeError", "match", "error_message"]], "op": [["op", "InvalidTemplateFieldOperator", "task_id"], ["op", "dry_run"]], "template_fields": []}, "name": "test_dryrun_with_invalid_template_field", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestCore.test_dryrun_with_invalid_template_field", "ret_exprs": [], "ret_type": "", "variables": {"error_message": "", "op": "", "template_fields": ""}, "variables_p": {"error_message": [["str", 0.8754037310765084], ["Pattern[str]", 0.12459626892349142]], "op": [["str", 0.3189777266207844], ["Dict[int, int]", 0.10748892264601258], ["Dict[str, Dict[str, Any]]", 0.10737947811277328], ["List[str]", 0.09313678084472563], ["int", 0.09030471278111152]], "template_fields": [["Tuple[str, str, str, str, str, str]", 0.2857142856828355], ["Tuple[str, str, str]", 0.2857142856828355], ["Tuple[str, str, str, str]", 0.2857142856828355], ["Tuple[str, str, str, str, str]", 0.14285714284141776], ["Dict[str, str]", 7.42502725571635e-11]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[71, 4], [80, 88]], "fn_var_ln": {"op": [[73, 12], [73, 14]]}, "fn_var_occur": {"op": [["op", "PythonOperator", "task_id", "execution_timeout", "timedelta", "seconds", "python_callable", "sleep"], ["op", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "ignore_ti_state", "True"]]}, "name": "test_timeout", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [], "kwargs": [], "self": []}, "q_name": "TestCore.test_timeout", "ret_exprs": [], "ret_type": "", "variables": {"op": ""}, "variables_p": {"op": [["List[str]", 0.09130143030971936]]}}, {"docstring": {"func": "If a task fails, the duration should be recorded in TaskFail", "long_descr": null, "ret": null}, "fn_lc": [[82, 4], [118, 54]], "fn_var_ln": {"op1": [[85, 12], [85, 15]], "op1_fails": [[97, 8], [97, 17]], "op2": [[86, 12], [86, 15]], "op2_fails": [[106, 8], [106, 17]], "session": [[93, 8], [93, 15]]}, "fn_var_occur": {"op1": [["op1", "BashOperator", "task_id", "bash_command"], ["op1", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "ignore_ti_state", "True"]], "op1_fails": [["op1_fails", "session", "query", "TaskFail", "filter", "TaskFail", "task_id", "TaskFail", "dag_id", "dag", "dag_id", "DagRun", "execution_date", "DEFAULT_DATE", "all"], ["len", "op1_fails"]], "op2": [["op2", "BashOperator", "task_id", "bash_command", "execution_timeout", "timedelta", "seconds", "retry_delay", "timedelta", "seconds"], ["op2", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "ignore_ti_state", "True"]], "op2_fails": [["op2_fails", "session", "query", "TaskFail", "filter", "TaskFail", "task_id", "TaskFail", "dag_id", "dag", "dag_id", "DagRun", "execution_date", "DEFAULT_DATE", "all"], ["len", "op2_fails"], ["sum", "f", "duration", "f", "op2_fails"]], "session": [["session", "settings", "Session"], ["op1_fails", "session", "query", "TaskFail", "filter", "TaskFail", "task_id", "TaskFail", "dag_id", "dag", "dag_id", "DagRun", "execution_date", "DEFAULT_DATE", "all"], ["op2_fails", "session", "query", "TaskFail", "filter", "TaskFail", "task_id", "TaskFail", "dag_id", "dag", "dag_id", "DagRun", "execution_date", "DEFAULT_DATE", "all"]]}, "name": "test_task_fail_duration", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "dag"], ["dag_maker", "create_dagrun"]], "self": []}, "params_p": {"args": [], "dag_maker": [["tests.basilisp.helpers.CompileFn", 0.039518764911345906]], "kwargs": [], "self": []}, "q_name": "TestCore.test_task_fail_duration", "ret_exprs": [], "ret_type": "", "variables": {"op1": "", "op1_fails": "", "op2": "", "op2_fails": "", "session": ""}, "variables_p": {"op1": [["BoundMethod[Callable(datetime.datetime.now)[Any, Any], Type[datetime.datetime]]", 0.12393301980454151], ["list", 0.1094680059610308], ["str", 0.09887376273774771], ["Dict[str, Any]", 0.09149018873730638], ["int", 0.09005532978330451], ["datetime.datetime", 0.08808744460017198]], "op1_fails": [["int", 0.22666055519171735], ["List[List[int]]", 0.18175644392601856]], "op2": [["int", 0.08624782226167887]], "op2_fails": [["int", 0.22666055519171735], ["List[List[int]]", 0.18175644392601856]], "session": [["dict", 0.1453367122253203], ["Optional[str]", 0.08583136011372644], ["SMSShell.models.session.Session", 0.0856493518816102]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[120, 4], [144, 67]], "fn_var_ln": {"TI": [[121, 8], [121, 10]], "context": [[138, 8], [138, 15]], "execution_date": [[124, 8], [124, 22]], "execution_ds": [[125, 8], [125, 20]], "execution_ds_nodash": [[126, 8], [126, 27]], "task": [[129, 12], [129, 16]], "ti": [[137, 8], [137, 10]]}, "fn_var_occur": {"TI": [["TI", "TaskInstance"], ["ti", "TI", "task", "task", "execution_date", "execution_date"]], "context": [["context", "ti", "get_template_context"], ["context", "execution_ds"], ["context", "execution_ds_nodash"]], "execution_date": [["execution_date", "DEFAULT_DATE", "timedelta", "days"], ["execution_ds", "execution_date", "strftime"], ["dag_maker", "create_dagrun", "run_type", "DagRunType", "SCHEDULED", "execution_date", "execution_date", "external_trigger", "True"], ["task", "run", "start_date", "execution_date", "end_date", "execution_date"], ["ti", "TI", "task", "task", "execution_date", "execution_date"]], "execution_ds": [["execution_ds", "execution_date", "strftime"], ["execution_ds_nodash", "execution_ds", "replace"], ["context", "execution_ds"]], "execution_ds_nodash": [["execution_ds_nodash", "execution_ds", "replace"], ["context", "execution_ds_nodash"]], "task": [["task", "EmptyOperator", "task_id"], ["task", "run", "start_date", "execution_date", "end_date", "execution_date"], ["ti", "TI", "task", "task", "execution_date", "execution_date"]], "ti": [["ti", "TI", "task", "task", "execution_date", "execution_date"], ["context", "ti", "get_template_context"]]}, "name": "test_externally_triggered_dagrun", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "timedelta", "weeks"], ["dag_maker", "create_dagrun", "run_type", "DagRunType", "SCHEDULED", "execution_date", "execution_date", "external_trigger", "True"]], "self": []}, "params_p": {"args": [], "dag_maker": [["Optional[str]", 0.17735579402988705], ["dict", 0.13659328107445046]], "kwargs": [], "self": []}, "q_name": "TestCore.test_externally_triggered_dagrun", "ret_exprs": [], "ret_type": "", "variables": {"TI": "", "context": "", "execution_date": "", "execution_ds": "", "execution_ds_nodash": "", "task": "", "ti": ""}, "variables_p": {"TI": [["str", 0.1901179878068996], ["backend.api.models.group.Group", 0.09758561744962499], ["tuple", 0.09511589250452762], ["int", 0.09230586489965316], ["buza.models.Subject", 0.0890418733255553], ["geode.models.common.Address", 0.0881265353375436]], "context": [["str", 0.09183811589336718]], "execution_date": [["str", 0.6091915659693399], ["Optional[str]", 0.12240553734892681], ["Pattern[str]", 0.08779160763351006], ["Dict[str, str]", 0.08584248208285247]], "execution_ds": [["int", 0.7996315134204793]], "execution_ds_nodash": [["str", 0.3910169865339607], ["int", 0.3325591781377206], ["Pattern[str]", 0.10224849376700607], ["Dict[str, Pattern[str]]", 0.0923630624397323]], "task": [["datetime.timedelta", 0.14325526451247803], ["list", 0.09116023627186384], ["datetime.datetime.datetime", 0.08572202285312126], ["app.models.user.User", 0.08178820395317087], ["legistar.models.MatterStatus", 0.07990189627679495]], "ti": [["tuple", 0.14138698821696546], ["DefaultDict[Any, None]", 0.11406310351117943], ["float", 0.10010272679658666], ["list", 0.09267851495692608], ["cg_broker.models.Runner", 0.08801920437231892], ["str", 0.08704215509637442]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[146, 4], [175, 81]], "fn_var_ln": {"TI": [[152, 8], [152, 10]], "context1": [[171, 8], [171, 16]], "context2": [[172, 8], [172, 16]], "task1": [[158, 12], [158, 17]], "task2": [[162, 12], [162, 17]], "ti1": [[169, 8], [169, 11]], "ti2": [[170, 8], [170, 11]]}, "fn_var_occur": {"TI": [["TI", "TaskInstance"], ["ti1", "TI", "task", "task1", "execution_date", "DEFAULT_DATE"], ["ti2", "TI", "task", "task2", "execution_date", "DEFAULT_DATE"]], "context1": [["context1", "ti1", "get_template_context"]], "context2": [["context2", "ti2", "get_template_context"]], "task1": [["task1", "EmptyOperator", "task_id", "params"], ["task1", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE"], ["ti1", "TI", "task", "task1", "execution_date", "DEFAULT_DATE"]], "task2": [["task2", "EmptyOperator", "task_id"], ["task2", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE"], ["ti2", "TI", "task", "task2", "execution_date", "DEFAULT_DATE"]], "ti1": [["ti1", "TI", "task", "task1", "execution_date", "DEFAULT_DATE"], ["context1", "ti1", "get_template_context"]], "ti2": [["ti2", "TI", "task", "task2", "execution_date", "DEFAULT_DATE"], ["context2", "ti2", "get_template_context"]]}, "name": "test_dag_params_and_task_params", "params": {"dag_maker": "", "self": ""}, "params_descr": {"dag_maker": "", "self": ""}, "params_occur": {"dag_maker": [["dag_maker", "schedule", "timedelta", "weeks", "params"], ["dag_maker", "create_dagrun", "run_type", "DagRunType", "SCHEDULED", "external_trigger", "True"]], "self": []}, "params_p": {"args": [], "dag_maker": [["Dict[str, Any]", 0.2009533877865718], ["dict", 0.09133619696005504]], "kwargs": [], "self": []}, "q_name": "TestCore.test_dag_params_and_task_params", "ret_exprs": [], "ret_type": "", "variables": {"TI": "", "context1": "", "context2": "", "task1": "", "task2": "", "ti1": "", "ti2": ""}, "variables_p": {"TI": [["tuple", 0.11212226609896409], ["buza.models.Subject", 0.10946983300537583], ["float", 0.09950232019115646], ["Tuple[Any, Any, Any, Any, Any, Any, Any, Any, Any, Any]", 0.09697007861721657], ["DefaultDict[Any, None]", 0.09293233574895572], ["str", 0.09270888175503982], ["backend.api.models.group.Group", 0.09171586655871651]], "context1": [["int", 0.4148724826026359], ["List[int]", 0.19480062232835363], ["str", 0.11291827342294816], ["dict", 0.10245292708939663]], "context2": [["int", 0.4148724826026359], ["List[int]", 0.19480062232835363], ["str", 0.11291827342294816], ["dict", 0.10245292708939663]], "task1": [["models.userData", 0.08819669283408506], ["int", 0.08783750891004664]], "task2": [["datetime.timedelta", 0.14325526451247803], ["list", 0.09116023627186384], ["datetime.datetime.datetime", 0.08572202285312126], ["app.models.user.User", 0.08178820395317087], ["legistar.models.MatterStatus", 0.07990189627679495]], "ti1": [["tuple", 0.14138698821696546], ["DefaultDict[Any, None]", 0.11406310351117943], ["float", 0.10010272679658666], ["list", 0.09267851495692608], ["cg_broker.models.Runner", 0.08801920437231892], ["str", 0.08704215509637442]], "ti2": [["tuple", 0.14138698821696546], ["DefaultDict[Any, None]", 0.11406310351117943], ["float", 0.10010272679658666], ["list", 0.09267851495692608], ["cg_broker.models.Runner", 0.08801920437231892], ["str", 0.08704215509637442]]}}], "name": "TestCore", "q_name": "TestCore", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "contextlib", "suppress", "datetime", "timedelta", "time", "sleep", "pytest", "airflow", "settings", "airflow", "exceptions", "AirflowTaskTimeout", "airflow", "models", "DagRun", "TaskFail", "TaskInstance", "airflow", "models", "baseoperator", "BaseOperator", "airflow", "operators", "bash", "BashOperator", "airflow", "operators", "empty", "EmptyOperator", "airflow", "operators", "python", "PythonOperator", "airflow", "utils", "timezone", "datetime", "airflow", "utils", "types", "DagRunType", "tests", "test_utils", "db", "clear_db_dags", "clear_db_runs", "clear_db_task_fail"], "mod_var_ln": {"DEFAULT_DATE": [[37, 0], [37, 12]]}, "mod_var_occur": {"DEFAULT_DATE": [["op", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "ignore_ti_state", "True"], ["op1", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "ignore_ti_state", "True"], ["op2", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE", "ignore_ti_state", "True"], ["op1_fails", "session", "query", "TaskFail", "filter", "TaskFail", "task_id", "TaskFail", "dag_id", "dag", "dag_id", "DagRun", "execution_date", "DEFAULT_DATE", "all"], ["op2_fails", "session", "query", "TaskFail", "filter", "TaskFail", "task_id", "TaskFail", "dag_id", "dag", "dag_id", "DagRun", "execution_date", "DEFAULT_DATE", "all"], ["execution_date", "DEFAULT_DATE", "timedelta", "days"], ["task1", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE"], ["task2", "run", "start_date", "DEFAULT_DATE", "end_date", "DEFAULT_DATE"], ["ti1", "TI", "task", "task1", "execution_date", "DEFAULT_DATE"], ["ti2", "TI", "task", "task2", "execution_date", "DEFAULT_DATE"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 39}, "session_id": "sbZpn1N6sA0a8ecWxuwws8IWF8S4nMJz6boTvxd01CI", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"DEFAULT_DATE": ""}, "variables_p": {"DEFAULT_DATE": [["datetime.datetime", 0.5417587132700393], ["str", 0.130192915683], ["datetime.datetime.timezone", 0.09407525911200822]]}}}