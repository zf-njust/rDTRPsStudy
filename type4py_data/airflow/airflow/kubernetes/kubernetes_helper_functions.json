{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": "Generate random lowercase alphanumeric string of length num.", "long_descr": null, "ret": null}, "fn_lc": [[35, 0], [40, 70]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "rand_str", "params": {"num": ""}, "params_descr": {"num": ""}, "params_occur": {"num": [["join", "secrets", "choice", "alphanum_lower", "_", "range", "num"]]}, "params_p": {"args": [], "kwargs": [], "num": [["int", 0.8099693961169648], ["float", 0.09623972983969033], ["Optional[int]", 0.09379087404334507]]}, "q_name": "rand_str", "ret_exprs": ["return \"\".join(secrets.choice(alphanum_lower) for _ in range(num))"], "ret_type": "", "ret_type_p": [["Tuple[int, int]", 0.2048771761908022], ["str", 0.10909881460014897], ["int", 0.1076290312924745], ["Optional[float]", 0.09868311956274102], ["float", 0.09832076715317671], ["Tuple[cwltool.secrets.SecretStore, Dict[str, str]]", 0.09592045592148148], ["Iterator[bytes]", 0.09399420939772189]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Add random string to pod name while staying under max len.", "long_descr": null, "ret": null}, "fn_lc": [[43, 0], [46, 65]], "fn_var_ln": {"suffix": [[45, 4], [45, 10]]}, "fn_var_occur": {"suffix": [["suffix", "rand_str", "rand_len"], ["pod_name", "max_len", "len", "suffix", "strip", "suffix"]]}, "name": "add_pod_suffix", "params": {"max_len": "", "pod_name": "", "rand_len": ""}, "params_descr": {"max_len": "", "pod_name": "", "rand_len": ""}, "params_occur": {"max_len": [["pod_name", "max_len", "len", "suffix", "strip", "suffix"]], "pod_name": [["pod_name", "max_len", "len", "suffix", "strip", "suffix"]], "rand_len": [["suffix", "rand_str", "rand_len"]]}, "params_p": {"args": [], "kwargs": [], "max_len": [["int", 0.40801464503501095], ["str", 0.2731858023300071], ["List[Tuple[str, Any]]", 0.13634662077498885], ["bytes", 0.09258899089219762]], "pod_name": [["int", 0.40801464503501095], ["str", 0.2731858023300071], ["List[Tuple[str, Any]]", 0.13634662077498885], ["bytes", 0.09258899089219762]], "rand_len": [["str", 0.9999999999999998]]}, "q_name": "add_pod_suffix", "ret_exprs": ["return pod_name[: max_len - len(suffix)].strip(\"-.\") + suffix"], "ret_type": "", "ret_type_p": [["str", 0.6132258570626246], ["zerver.models.Realm", 0.1009466166000702], ["Set[mtg_ssm.scryfall.models.ScrySetType]", 0.0980904365028461], ["bool", 0.09552249205228479], ["Optional[str]", 0.09221459778217442]], "variables": {"suffix": ""}, "variables_p": {"suffix": [["str", 1.0]]}}, {"docstring": {"func": "Generates unique pod ID given a dag_id and / or task_id.", "long_descr": "The default of 80 for max length is somewhat arbitrary, mainly a balance between\ncontent and not overwhelming terminal windows of reasonable width. The true\nupper limit is 253, and this is enforced in construct_pod.", "ret": "A valid identifier for a kubernetes pod name"}, "fn_lc": [[49, 0], [82, 24]], "fn_var_ln": {"base_name": [[78, 4], [78, 13]], "name": [[71, 4], [71, 8]]}, "fn_var_occur": {"base_name": [["base_name", "slugify", "name", "lowercase", "True", "max_length", "strip"], ["add_pod_suffix", "pod_name", "base_name", "rand_len", "max_len", "max_length"]], "name": [["name", "dag_id"], ["name", "task_id"], ["base_name", "slugify", "name", "lowercase", "True", "max_length", "strip"]]}, "name": "create_pod_id", "params": {"dag_id": "str | None", "max_length": "builtins.int", "task_id": "str | None", "unique": "builtins.bool"}, "params_descr": {"dag_id": "DAG ID", "max_length": "max number of characters", "task_id": "Task ID", "unique": "whether a random string suffix should be added"}, "params_occur": {"dag_id": [["dag_id", "task_id"], ["name", "dag_id"]], "max_length": [["base_name", "slugify", "name", "lowercase", "True", "max_length", "strip"], ["add_pod_suffix", "pod_name", "base_name", "rand_len", "max_len", "max_length"]], "task_id": [["dag_id", "task_id"], ["name", "task_id"]], "unique": []}, "params_p": {"args": [], "dag_id": [["str", 0.6016399660056609], ["bytes", 0.10924077979888565], ["int", 0.09820567946635543]], "kwargs": [], "max_length": [["str", 0.6285295593635913], ["bool", 0.1965108669317729], ["Optional[str]", 0.08747978685231786], ["Optional[int]", 0.08747978685231786]], "task_id": [["str", 0.4869060375579781], ["Optional[str]", 0.29920361418793673], ["int", 0.10704453561066962], ["bool", 0.10684581264341551]], "unique": [["bool", 0.5500893290288129], ["str", 0.1455382292839757], ["float", 0.1455382292839757], ["List[dict]", 0.08493094646854642], ["Optional[bool]", 0.07390326593468943]]}, "q_name": "create_pod_id", "ret_exprs": ["return add_pod_suffix(pod_name=base_name, rand_len=8, max_len=max_length)", "return base_name"], "ret_type": "builtins.str", "ret_type_p": [["bool", 0.4732383876504393], ["list", 0.09642163226260382]], "variables": {"base_name": "", "name": ""}, "variables_p": {"base_name": [["str", 0.8959217687468998], ["Optional[str]", 0.10407823125310013]], "name": [["str", 0.9161170853737729], ["Type[taxonomy.db.models.name.Name]", 0.08388291462622693]]}}, {"docstring": {"func": "Build a TaskInstanceKey based on pod annotations.", "long_descr": null, "ret": null}, "fn_lc": [[85, 0], [123, 5]], "fn_var_ln": {"annotation_run_id": [[91, 4], [91, 21]], "dag_id": [[88, 4], [88, 10]], "execution_date": [[100, 8], [100, 22]], "map_index": [[92, 4], [92, 13]], "session": [[102, 8], [102, 15]], "task_id": [[89, 4], [89, 11]], "task_instance_run_id": [[115, 8], [115, 28]], "try_number": [[90, 4], [90, 14]]}, "fn_var_occur": {"annotation_run_id": [["annotation_run_id", "annotations", "get"], ["annotation_run_id", "annotations"], ["task_instance_run_id", "annotation_run_id"]], "dag_id": [["dag_id", "annotations"], ["task_instance_run_id", "session", "query", "TaskInstance", "run_id", "join", "TaskInstance", "dag_run", "filter", "TaskInstance", "dag_id", "dag_id", "TaskInstance", "task_id", "task_id", "DagRun", "execution_date", "execution_date", "scalar"], ["TaskInstanceKey", "dag_id", "dag_id", "task_id", "task_id", "run_id", "task_instance_run_id", "try_number", "try_number", "map_index", "map_index"]], "execution_date": [["execution_date", "pendulum", "parse", "annotations"], ["task_instance_run_id", "session", "query", "TaskInstance", "run_id", "join", "TaskInstance", "dag_run", "filter", "TaskInstance", "dag_id", "dag_id", "TaskInstance", "task_id", "task_id", "DagRun", "execution_date", "execution_date", "scalar"]], "map_index": [["map_index", "int", "annotations", "get"], ["TaskInstanceKey", "dag_id", "dag_id", "task_id", "task_id", "run_id", "task_instance_run_id", "try_number", "try_number", "map_index", "map_index"]], "session": [["session", "Session"], ["task_instance_run_id", "session", "query", "TaskInstance", "run_id", "join", "TaskInstance", "dag_run", "filter", "TaskInstance", "dag_id", "dag_id", "TaskInstance", "task_id", "task_id", "DagRun", "execution_date", "execution_date", "scalar"]], "task_id": [["task_id", "annotations"], ["task_instance_run_id", "session", "query", "TaskInstance", "run_id", "join", "TaskInstance", "dag_run", "filter", "TaskInstance", "dag_id", "dag_id", "TaskInstance", "task_id", "task_id", "DagRun", "execution_date", "execution_date", "scalar"], ["TaskInstanceKey", "dag_id", "dag_id", "task_id", "task_id", "run_id", "task_instance_run_id", "try_number", "try_number", "map_index", "map_index"]], "task_instance_run_id": [["task_instance_run_id", "session", "query", "TaskInstance", "run_id", "join", "TaskInstance", "dag_run", "filter", "TaskInstance", "dag_id", "dag_id", "TaskInstance", "task_id", "task_id", "DagRun", "execution_date", "execution_date", "scalar"], ["task_instance_run_id", "annotation_run_id"], ["TaskInstanceKey", "dag_id", "dag_id", "task_id", "task_id", "run_id", "task_instance_run_id", "try_number", "try_number", "map_index", "map_index"]], "try_number": [["try_number", "int", "annotations"], ["TaskInstanceKey", "dag_id", "dag_id", "task_id", "task_id", "run_id", "task_instance_run_id", "try_number", "try_number", "map_index", "map_index"]]}, "name": "annotations_to_key", "params": {"annotations": "builtins.dict[builtins.str, builtins.str]"}, "params_descr": {"annotations": ""}, "params_occur": {"annotations": [["log", "debug", "annotations"], ["dag_id", "annotations"], ["task_id", "annotations"], ["try_number", "int", "annotations"], ["annotation_run_id", "annotations", "get"], ["map_index", "int", "annotations", "get"], ["annotation_run_id", "annotations"], ["execution_date", "pendulum", "parse", "annotations"]]}, "params_p": {"annotations": [["str", 0.28759864411132463], ["float", 0.18331552772691226], ["Dict[str, object]", 0.10512726809531087], ["int", 0.10356170553178738]], "args": [], "kwargs": []}, "q_name": "annotations_to_key", "ret_exprs": ["return TaskInstanceKey( dag_id=dag_id, task_id=task_id, run_id=task_instance_run_id, try_number=try_number, map_index=map_index,)"], "ret_type": "airflow.models.taskinstancekey.TaskInstanceKey", "ret_type_p": [["str", 0.2955938022220518], ["Tuple[int, int]", 0.09589158103176554]], "variables": {"annotation_run_id": "", "dag_id": "", "execution_date": "", "map_index": "", "session": "", "task_id": "", "task_instance_run_id": "", "try_number": ""}, "variables_p": {"annotation_run_id": [["str", 0.30494258973328214], ["int", 0.2255808731836092], ["List[str]", 0.11673450067916911], ["Optional[str]", 0.09148674760164757], ["list", 0.08243850869298731]], "dag_id": [["int", 0.176038311283932], ["str", 0.10708051833088295]], "execution_date": [["str", 0.6970670132579243], ["int", 0.11111997053673493], ["Optional[int]", 0.09730923352547363]], "map_index": [["int", 0.3816577200140441], ["Counter[int]", 0.0874282517599021]], "session": [["users.arxiv.users.domain.Session", 0.30372760271661403], ["libkol.Session.Session", 0.187567420855562], ["dict", 0.11401393348180955], ["domain.Session", 0.09727668041216622], ["taskiapplication.models.task.Task", 0.09129300685049237]], "task_id": [["str", 0.5067667153639482], ["Dict[str, int]", 0.11830345459769645]], "task_instance_run_id": [["str", 0.9037658235302439], ["Pattern[str]", 0.09623417646975597]], "try_number": [["int", 0.30582240464889543], ["List[int]", 0.10715384681056644], ["str", 0.09892919665988611], ["List[str]", 0.09892919665988611], ["Type[List[Any]]", 0.09852222980350943]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[127, 0], [128, 87]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "get_logs_task_metadata", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "get_logs_task_metadata", "ret_exprs": ["return conf.getboolean(\"kubernetes_executor\", \"logs_task_metadata\", fallback=False)"], "ret_type": "builtins.bool", "ret_type_p": [["str", 0.21846676315285457], ["Dict[str, Any]", 0.12539744443410633], ["int", 0.10183490311383715], ["Callable[[None, None], bool]", 0.08772698501484666], ["bool", 0.0764371629238555]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[131, 0], [136, 34]], "fn_var_ln": {"annotations_for_logging": [[135, 8], [135, 31]]}, "fn_var_occur": {"annotations_for_logging": [["annotations_for_logging", "annotation_set"]]}, "name": "annotations_for_logging_task_metadata", "params": {"annotation_set": ""}, "params_descr": {"annotation_set": ""}, "params_occur": {"annotation_set": [["annotations_for_logging", "annotation_set"]]}, "params_p": {"annotation_set": [["str", 0.5813550090531183], ["int", 0.16190473773449401], ["dict", 0.1005978409763067], ["bool", 0.07986609086237391], ["Optional[str]", 0.07627632137370725]], "args": [], "kwargs": []}, "q_name": "annotations_for_logging_task_metadata", "ret_exprs": ["return annotations_for_logging"], "ret_type": "", "ret_type_p": [["bool", 0.8990099888810343], ["int", 0.10099001111896536]], "variables": {"annotations_for_logging": ""}, "variables_p": {"annotations_for_logging": [["Dict[int, int]", 0.3048129003392488], ["bool", 0.22993033235039678], ["Dict[str, Any]", 0.13011079454508345], ["Dict[str, int]", 0.09219509162780472], ["str", 0.08716897443025168], ["list", 0.07793593958468542], ["int", 0.07784596712252938]]}}], "imports": ["__future__", "annotations", "logging", "secrets", "string", "pendulum", "slugify", "slugify", "airflow", "compat", "functools", "cache", "airflow", "configuration", "conf", "airflow", "models", "taskinstancekey", "TaskInstanceKey", "airflow", "models", "dagrun", "DagRun", "airflow", "models", "taskinstance", "TaskInstance", "airflow", "settings", "Session"], "mod_var_ln": {"alphanum_lower": [[32, 0], [32, 14]], "log": [[30, 0], [30, 3]]}, "mod_var_occur": {"alphanum_lower": [["join", "secrets", "choice", "alphanum_lower", "_", "range", "num"]], "log": [["log", "debug", "annotations"]]}, "no_types_annot": {"D": 8, "I": 0, "U": 22}, "session_id": "84KsHRf8WjWeo_rzC8z6_KaLHu9R6tl_6jqDJ2ZiSZA", "set": null, "tc": [false, null], "type_annot_cove": 0.27, "typed_seq": "", "untyped_seq": "", "variables": {"alphanum_lower": "", "log": ""}, "variables_p": {"alphanum_lower": [["int", 0.4682088928370516], ["str", 0.19468696203094712], ["Tuple[int, int, int, int]", 0.07018017730292386]], "log": [["logging.Logger", 0.9999999999999999]]}}}