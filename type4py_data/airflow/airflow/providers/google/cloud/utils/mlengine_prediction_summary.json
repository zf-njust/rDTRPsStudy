{"error": null, "response": {"classes": [{"cls_lc": [[122, 0], [133, 28]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": "JSON encoder.", "long_descr": null, "ret": null}, "fn_lc": [[126, 4], [128, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "encode", "params": {"x": ""}, "params_descr": {"x": ""}, "params_occur": {"x": [["json", "dumps", "x", "encode"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "x": [["float", 0.3032091227734555]]}, "q_name": "JsonCoder.encode", "ret_exprs": ["return json.dumps(x).encode()"], "ret_type": "", "ret_type_p": [["bool", 0.16355952228584125]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "JSON decoder.", "long_descr": null, "ret": null}, "fn_lc": [[131, 4], [133, 28]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "decode", "params": {"x": ""}, "params_descr": {"x": ""}, "params_occur": {"x": [["json", "loads", "x"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "x": [["Union[str, type]", 0.11508669489193635], ["bytes", 0.11365598833675429], ["int", 0.09369607111107771], ["str", 0.08042593377266509], ["bool", 0.0778689606492526], ["List[Dict]", 0.07745217329583835]]}, "q_name": "JsonCoder.decode", "ret_exprs": ["return json.loads(x)"], "ret_type": "", "ret_type_p": [["List[Dict[str, Any]]", 0.12894637717624555], ["str", 0.09072169468139687], ["int", 0.08596560025007703]], "variables": {}, "variables_p": {}}], "name": "JsonCoder", "q_name": "JsonCoder", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": "Summary PTransform used in Dataflow.", "long_descr": null, "ret": null}, "fn_lc": [[137, 0], [150, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "MakeSummary", "params": {"metric_fn": "", "metric_keys": "", "pcoll": ""}, "params_descr": {"metric_fn": "", "metric_keys": "", "pcoll": ""}, "params_occur": {"metric_fn": [["pcoll", "beam", "Map", "metric_fn", "beam", "Map", "tup", "tup", "beam", "CombineGlobally", "beam", "combiners", "TupleCombineFn", "sum", "len", "metric_keys", "beam", "Map", "tup", "dict", "name", "tup", "i", "tup", "i", "name", "enumerate", "metric_keys", "tup"]], "metric_keys": [["pcoll", "beam", "Map", "metric_fn", "beam", "Map", "tup", "tup", "beam", "CombineGlobally", "beam", "combiners", "TupleCombineFn", "sum", "len", "metric_keys", "beam", "Map", "tup", "dict", "name", "tup", "i", "tup", "i", "name", "enumerate", "metric_keys", "tup"]], "pcoll": [["pcoll", "beam", "Map", "metric_fn", "beam", "Map", "tup", "tup", "beam", "CombineGlobally", "beam", "combiners", "TupleCombineFn", "sum", "len", "metric_keys", "beam", "Map", "tup", "dict", "name", "tup", "i", "tup", "i", "name", "enumerate", "metric_keys", "tup"]]}, "params_p": {"args": [], "kwargs": [], "metric_fn": [["int", 0.09597156554829805], ["Optional[int]", 0.0761376475927282], ["Sequence[str]", 0.0761376475927282], ["str", 0.0761376475927282]], "metric_keys": [["int", 0.09597156554829805], ["Optional[int]", 0.0761376475927282], ["Sequence[str]", 0.0761376475927282], ["str", 0.0761376475927282]], "pcoll": [["int", 0.09597156554829805], ["Optional[int]", 0.0761376475927282], ["Sequence[str]", 0.0761376475927282], ["str", 0.0761376475927282]]}, "q_name": "MakeSummary", "ret_exprs": ["return ( pcoll | \"ApplyMetricFnPerInstance\" >> beam.Map(metric_fn) | \"PairWith1\" >> beam.Map(lambda tup: tup + (1,)) | \"SumTuple\" >> beam.CombineGlobally(beam.combiners.TupleCombineFn(*([sum] * (len(metric_keys) + 1)))) | \"AverageAndMakeDict\" >> beam.Map( lambda tup: dict( [(name, tup[i] / tup[-1]) for i, name in enumerate(metric_keys)] + [(\"count\", tup[-1])] ) ))"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["str", 0.1]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Helper for obtaining prediction summary.", "long_descr": null, "ret": null}, "fn_lc": [[153, 0], [208, 9]], "fn_var_ln": {"_": [[198, 8], [198, 9]], "known_args": [[186, 4], [186, 14]], "metric_fn": [[188, 4], [188, 13]], "metric_keys": [[191, 4], [191, 15]], "parser": [[155, 4], [155, 10]], "pipeline_args": [[186, 16], [186, 29]], "prediction_result_pattern": [[195, 8], [195, 33]], "prediction_summary_path": [[196, 8], [196, 31]]}, "fn_var_occur": {"_": [["_", "pipe", "beam", "io", "ReadFromText", "prediction_result_pattern", "coder", "JsonCoder", "MakeSummary", "metric_fn", "metric_keys", "beam", "io", "WriteToText", "prediction_summary_path", "shard_name_template", "coder", "JsonCoder"]], "known_args": [["known_args", "pipeline_args", "parser", "parse_known_args", "argv"], ["metric_fn", "dill", "loads", "base64", "b64decode", "known_args", "metric_fn_encoded"], ["metric_keys", "known_args", "metric_keys", "split"], ["prediction_result_pattern", "os", "path", "join", "known_args", "prediction_path"], ["prediction_summary_path", "os", "path", "join", "known_args", "prediction_path"]], "metric_fn": [["metric_fn", "dill", "loads", "base64", "b64decode", "known_args", "metric_fn_encoded"], ["callable", "metric_fn"], ["_", "pipe", "beam", "io", "ReadFromText", "prediction_result_pattern", "coder", "JsonCoder", "MakeSummary", "metric_fn", "metric_keys", "beam", "io", "WriteToText", "prediction_summary_path", "shard_name_template", "coder", "JsonCoder"]], "metric_keys": [["metric_keys", "known_args", "metric_keys", "split"], ["_", "pipe", "beam", "io", "ReadFromText", "prediction_result_pattern", "coder", "JsonCoder", "MakeSummary", "metric_fn", "metric_keys", "beam", "io", "WriteToText", "prediction_summary_path", "shard_name_template", "coder", "JsonCoder"]], "parser": [["parser", "argparse", "ArgumentParser"], ["parser", "add_argument", "required", "True", "help"], ["parser", "add_argument", "required", "True", "help"], ["parser", "add_argument", "required", "True", "help"], ["known_args", "pipeline_args", "parser", "parse_known_args", "argv"]], "pipeline_args": [["known_args", "pipeline_args", "parser", "parse_known_args", "argv"], ["beam", "Pipeline", "options", "beam", "pipeline", "PipelineOptions", "pipeline_args", "pipe"]], "prediction_result_pattern": [["prediction_result_pattern", "os", "path", "join", "known_args", "prediction_path"], ["_", "pipe", "beam", "io", "ReadFromText", "prediction_result_pattern", "coder", "JsonCoder", "MakeSummary", "metric_fn", "metric_keys", "beam", "io", "WriteToText", "prediction_summary_path", "shard_name_template", "coder", "JsonCoder"]], "prediction_summary_path": [["prediction_summary_path", "os", "path", "join", "known_args", "prediction_path"], ["_", "pipe", "beam", "io", "ReadFromText", "prediction_result_pattern", "coder", "JsonCoder", "MakeSummary", "metric_fn", "metric_keys", "beam", "io", "WriteToText", "prediction_summary_path", "shard_name_template", "coder", "JsonCoder"]]}, "name": "run", "params": {"argv": ""}, "params_descr": {"argv": ""}, "params_occur": {"argv": [["known_args", "pipeline_args", "parser", "parse_known_args", "argv"]]}, "params_p": {"args": [], "argv": [["List[str]", 0.5118398989975596], ["str", 0.3172237643040794], ["Optional[Any]", 0.11449596131628804], ["Callable", 0.05644037538207302]], "kwargs": []}, "q_name": "run", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "known_args": "", "metric_fn": "", "metric_keys": "", "parser": "", "pipeline_args": "", "prediction_result_pattern": "", "prediction_summary_path": ""}, "variables_p": {"_": [["str", 0.9999999999999999]], "known_args": [["argparse.Namespace", 0.910276064340869], ["List[str]", 0.08972393565913091]], "metric_fn": [["str", 0.19688678894560913], ["List[int]", 0.09373465192419203]], "metric_keys": [["Set[str]", 0.19823282534415332], ["str", 0.19424308590392222], ["Tuple[str, str, str, str, str, str, str, str, str, str]", 0.09815967670522564], ["List[str]", 0.08167081943499306], ["set", 0.0769174451410323]], "parser": [["argparse.ArgumentParser", 1.0]], "pipeline_args": [["argparse.Namespace", 0.9202688984242835], ["List[str]", 0.0797311015757165]], "prediction_result_pattern": [["str", 0.547439924159913], ["Dict[str, str]", 0.10796183617702504], ["Type[str]", 0.09834593254626621], ["Type[List[Any]]", 0.08497770643637602], ["Pattern[str]", 0.08219199701337054]], "prediction_summary_path": [["str", 0.8122317841768611], ["List[str]", 0.1052426726978364], ["Tuple[str, str, str]", 0.0825255431253025]]}}], "imports": ["__future__", "annotations", "argparse", "base64", "json", "logging", "os", "apache_beam", "beam", "dill", "apache_beam", "coders", "coders", "Coder"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 18}, "session_id": "HCPRXNdBoEsP4NjkMitMqYJ9bnWIihIrXfIpxzxAvyk", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}