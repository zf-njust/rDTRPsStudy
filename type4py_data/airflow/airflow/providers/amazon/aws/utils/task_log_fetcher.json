{"error": null, "response": {"classes": [{"cls_lc": [[31, 0], [119, 25]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[34, 4], [53, 81]], "fn_var_ln": {"_event": [[45, 8], [45, 19]], "fetch_interval": [[47, 8], [47, 27]], "hook": [[53, 8], [53, 17]], "log_group": [[50, 8], [50, 22]], "log_stream_name": [[51, 8], [51, 28]], "logger": [[49, 8], [49, 19]]}, "fn_var_occur": {"_event": [["self", "_event", "Event"]], "fetch_interval": [["self", "fetch_interval", "fetch_interval"]], "hook": [["self", "hook", "AwsLogsHook", "aws_conn_id", "aws_conn_id", "region_name", "region_name"]], "log_group": [["self", "log_group", "log_group"]], "log_stream_name": [["self", "log_stream_name", "log_stream_name"]], "logger": [["self", "logger", "logger"]]}, "name": "__init__", "params": {"aws_conn_id": "str | None", "fetch_interval": "datetime.timedelta", "log_group": "builtins.str", "log_stream_name": "builtins.str", "logger": "logging.Logger", "region_name": "str | None", "self": ""}, "params_descr": {"aws_conn_id": "", "fetch_interval": "", "log_group": "", "log_stream_name": "", "logger": "", "region_name": "", "self": ""}, "params_occur": {"aws_conn_id": [["self", "hook", "AwsLogsHook", "aws_conn_id", "aws_conn_id", "region_name", "region_name"]], "fetch_interval": [["self", "fetch_interval", "fetch_interval"]], "log_group": [["self", "log_group", "log_group"]], "log_stream_name": [["self", "log_stream_name", "log_stream_name"]], "logger": [["self", "logger", "logger"]], "region_name": [["self", "hook", "AwsLogsHook", "aws_conn_id", "aws_conn_id", "region_name", "region_name"]], "self": [["self", "_event", "Event"], ["self", "fetch_interval", "fetch_interval"], ["self", "logger", "logger"], ["self", "log_group", "log_group"], ["self", "log_stream_name", "log_stream_name"], ["self", "hook", "AwsLogsHook", "aws_conn_id", "aws_conn_id", "region_name", "region_name"]]}, "params_p": {"args": [], "aws_conn_id": [["bool", 0.2584518348124708], ["bytes", 0.20606250633400858], ["Dict[str, Dict[str, Any]]", 0.0848662247550824], ["Optional[bool]", 0.08158106423936164]], "fetch_interval": [["bool", 0.7073935099818222], ["Optional[Dict[str, Any]]", 0.10218001131110944], ["Optional[int]", 0.0996549227759784], ["int", 0.0907715559310901]], "kwargs": [], "log_group": [["str", 0.5028887400856115], ["Optional[str]", 0.17894349106584082], ["int", 0.10089523473598558], ["List[str]", 0.10024805864331549]], "log_stream_name": [["bool", 0.33262303283012123], ["str", 0.28849553575575304], ["Optional[bool]", 0.0939045637801298], ["Optional[Mapping[str, Any]]", 0.09211337888071454]], "logger": [["int", 0.29031168853879574], ["str", 0.1972855629045902], ["bool", 0.1935411256925305], ["Optional[str]", 0.11852740772009443], ["Union[int, float]", 0.10356365229772373]], "region_name": [["bool", 0.2584518348124708], ["bytes", 0.20606250633400858], ["Dict[str, Dict[str, Any]]", 0.0848662247550824], ["Optional[bool]", 0.08158106423936164]], "self": []}, "q_name": "AwsTaskLogFetcher.__init__", "ret_exprs": [], "ret_type": "", "variables": {"_event": "", "fetch_interval": "", "hook": "", "log_group": "", "log_stream_name": "", "logger": ""}, "variables_p": {"_event": [["str", 0.26421517858746935], ["deque", 0.24866183666145736]], "fetch_interval": [["str", 0.30000000000000004], ["Dict[str, Any]", 0.1], ["dict", 0.1], ["int", 0.1]], "hook": [["str", 0.9046365978658001], ["int", 0.09536340213419979]], "log_group": [["str", 1.0]], "log_stream_name": [["str", 1.0000000000000004]], "logger": [["logging.Logger", 0.9999999998421858], ["pineboolib.core.utils.logging.Logger", 1.5781413612771555e-10]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[55, 4], [61, 62]], "fn_var_ln": {"continuation_token": [[56, 8], [56, 26]], "log_events": [[59, 12], [59, 22]]}, "fn_var_occur": {"continuation_token": [["continuation_token", "AwsLogsHook", "ContinuationToken"], ["log_events", "self", "_get_log_events", "continuation_token"]], "log_events": [["log_events", "self", "_get_log_events", "continuation_token"]]}, "name": "run", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "is_stopped"], ["time", "sleep", "self", "fetch_interval", "total_seconds"], ["log_events", "self", "_get_log_events", "continuation_token"], ["self", "logger", "info", "self", "event_to_str", "log_event"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "AwsTaskLogFetcher.run", "ret_exprs": [], "ret_type": "None", "variables": {"continuation_token": "", "log_events": ""}, "variables_p": {"continuation_token": [["bytes", 0.23759231485025983], ["str", 0.17181534714906366]], "log_events": [["str", 0.4828951717029403], ["int", 0.2252395609630142]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[63, 4], [84, 25]], "fn_var_ln": {"skip_token": [[65, 12], [65, 22]]}, "fn_var_occur": {"skip_token": [["skip_token", "None"], ["skip_token", "AwsLogsHook", "ContinuationToken"], ["self", "hook", "get_log_events", "self", "log_group", "self", "log_stream_name", "continuation_token", "skip_token"]]}, "name": "_get_log_events", "params": {"self": "", "skip_token": "AwsLogsHook.ContinuationToken | None"}, "params_descr": {"self": "", "skip_token": ""}, "params_occur": {"self": [["self", "hook", "get_log_events", "self", "log_group", "self", "log_stream_name", "continuation_token", "skip_token"], ["self", "logger", "warning", "error"], ["self", "logger", "info", "self", "log_group", "self", "log_stream_name"], ["self", "logger", "warning", "error"]], "skip_token": [["skip_token", "None"], ["skip_token", "AwsLogsHook", "ContinuationToken"], ["self", "hook", "get_log_events", "self", "log_group", "self", "log_stream_name", "continuation_token", "skip_token"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "skip_token": [["str", 0.6107712178092538], ["Optional[str]", 0.1725030019296302]]}, "q_name": "AwsTaskLogFetcher._get_log_events", "ret_exprs": [], "ret_type": "typing.Generator", "variables": {"skip_token": ""}, "variables_p": {"skip_token": [["str", 0.3019032290316904], ["bytes", 0.11100117840481583], ["Optional[str]", 0.10745237666669685], ["bool", 0.09594123764106699], ["List[int]", 0.09505668507177151], ["Dict[int, str]", 0.09505668507177151]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[87, 4], [91, 50]], "fn_var_ln": {"event_dt": [[88, 8], [88, 16]], "formatted_event_dt": [[89, 8], [89, 26]], "message": [[90, 8], [90, 15]]}, "fn_var_occur": {"event_dt": [["event_dt", "datetime", "utcfromtimestamp", "event"], ["formatted_event_dt", "event_dt", "strftime"]], "formatted_event_dt": [["formatted_event_dt", "event_dt", "strftime"], ["formatted_event_dt", "message"]], "message": [["message", "event"], ["formatted_event_dt", "message"]]}, "name": "event_to_str", "params": {"event": "builtins.dict"}, "params_descr": {"event": ""}, "params_occur": {"event": [["event_dt", "datetime", "utcfromtimestamp", "event"], ["message", "event"]]}, "params_p": {"args": [], "event": [["str", 0.2976726960145568], ["int", 0.09513796760937296], ["Dict[str, Any]", 0.09421872808133068]], "kwargs": [], "self": []}, "q_name": "AwsTaskLogFetcher.event_to_str", "ret_exprs": ["return f\"[{formatted_event_dt}] {message}\""], "ret_type": "builtins.str", "ret_type_p": [["str", 1.0]], "variables": {"event_dt": "", "formatted_event_dt": "", "message": ""}, "variables_p": {"event_dt": [["str", 0.29231226614255473], ["datetime.datetime.datetime", 0.26332649927045704], ["datetime.date", 0.1925089603306555], ["datetime.timedelta", 0.08670514618612245], ["datetime.datetime", 0.08256473116848768]], "formatted_event_dt": [["Dict[str, Union[Any, Any, Any]]", 0.10647738040750064], ["list", 0.0993936978239922], ["int", 0.08707812326894575]], "message": [["Dict[str, Union[Any, str]]", 0.29697446746711453], ["int", 0.22314770901934125], ["Dict[str, Dict[str, str]]", 0.08646752762758741]]}}, {"docstring": {"func": "Gets the last logs messages in one single request.", "long_descr": "NOTE: some restrictions apply:\n- if logs are too old, the response will be empty\n- the max number of messages we can retrieve is constrained by cloudwatch limits (10,000).", "ret": null}, "fn_lc": [[93, 4], [107, 61]], "fn_var_ln": {"response": [[101, 8], [101, 16]]}, "fn_var_occur": {"response": [["response", "self", "hook", "conn", "get_log_events", "logGroupName", "self", "log_group", "logStreamName", "self", "log_stream_name", "startFromHead", "False", "limit", "number_messages"], ["log", "log", "response"]]}, "name": "get_last_log_messages", "params": {"number_messages": "", "self": ""}, "params_descr": {"number_messages": "", "self": ""}, "params_occur": {"number_messages": [["response", "self", "hook", "conn", "get_log_events", "logGroupName", "self", "log_group", "logStreamName", "self", "log_stream_name", "startFromHead", "False", "limit", "number_messages"]], "self": [["response", "self", "hook", "conn", "get_log_events", "logGroupName", "self", "log_group", "logStreamName", "self", "log_stream_name", "startFromHead", "False", "limit", "number_messages"]]}, "params_p": {"args": [], "kwargs": [], "number_messages": [["str", 0.7024111310611925]], "self": []}, "q_name": "AwsTaskLogFetcher.get_last_log_messages", "ret_exprs": ["return [log[\"message\"] for log in response[\"events\"]]"], "ret_type": "builtins.list", "ret_type_p": [["List[str]", 0.6987303795932256], ["str", 0.3012696204067744]], "variables": {"response": ""}, "variables_p": {"response": [["str", 0.9033966758192107], ["annotations.MappingStrStr", 0.09660332418078953]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[109, 4], [113, 23]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "get_last_log_message", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "get_last_log_messages"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "AwsTaskLogFetcher.get_last_log_message", "ret_exprs": ["return self.get_last_log_messages(1)[0]", "return None"], "ret_type": "str | None", "ret_type_p": [["Optional[str]", 0.8008019114090273], ["List[str]", 0.11588763106911511], ["str", 0.08331045752185764]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[115, 4], [116, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "is_stopped", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_event", "is_set"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "AwsTaskLogFetcher.is_stopped", "ret_exprs": ["return self._event.is_set()"], "ret_type": "builtins.bool", "ret_type_p": [["List[str]", 0.08782120058352945], ["str", 0.08754167240370873]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[118, 4], [119, 25]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "stop", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_event", "set"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "AwsTaskLogFetcher.stop", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "name": "AwsTaskLogFetcher", "q_name": "AwsTaskLogFetcher", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "time", "datetime", "datetime", "timedelta", "logging", "Logger", "threading", "Event", "Thread", "typing", "Generator", "botocore", "exceptions", "ClientError", "ConnectionClosedError", "airflow", "providers", "amazon", "aws", "hooks", "logs", "AwsLogsHook"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 9, "I": 0, "U": 16}, "session_id": "ZzEA28RBnsJVyQeg88EIQFaJ7VAO4BAqf-dBs-IlxRc", "set": null, "tc": [false, null], "type_annot_cove": 0.36, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}