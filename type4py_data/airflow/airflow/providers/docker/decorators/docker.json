{"error": null, "response": {"classes": [{"cls_lc": [[60, 0], [144, 18]], "cls_var_ln": {"custom_operator_name": [[78, 4], [78, 24]], "template_fields": [[80, 4], [80, 19]]}, "cls_var_occur": {"custom_operator_name": [], "template_fields": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[82, 4], [95, 9]], "fn_var_ln": {"command": [[89, 8], [89, 15]], "expect_airflow": [[91, 8], [91, 27]], "pickling_library": [[92, 8], [92, 29]], "python_command": [[90, 8], [90, 27]]}, "fn_var_occur": {"command": [["super", "__init__", "command", "command", "retrieve_output", "True", "retrieve_output_path", "kwargs"]], "expect_airflow": [["self", "expect_airflow", "expect_airflow"]], "pickling_library": [["self", "pickling_library", "dill", "use_dill", "pickle"]], "python_command": [["self", "python_command", "python_command"]]}, "name": "__init__", "params": {"expect_airflow": "builtins.bool", "kwargs": "", "python_command": "", "self": "", "use_dill": ""}, "params_descr": {"expect_airflow": "", "kwargs": "", "python_command": "", "self": "", "use_dill": ""}, "params_occur": {"expect_airflow": [["self", "expect_airflow", "expect_airflow"]], "kwargs": [["super", "__init__", "command", "command", "retrieve_output", "True", "retrieve_output_path", "kwargs"]], "python_command": [["self", "python_command", "python_command"]], "self": [["self", "python_command", "python_command"], ["self", "expect_airflow", "expect_airflow"], ["self", "pickling_library", "dill", "use_dill", "pickle"]], "use_dill": [["self", "pickling_library", "dill", "use_dill", "pickle"]]}, "params_p": {"args": [], "expect_airflow": [["dict", 0.22144109989679328], ["bool", 0.187168780289966], ["Dict[str, List[Any]]", 0.09935868966324193], ["List[int]", 0.09501998198584606], ["Dict[str, Any]", 0.093584390144983]], "kwargs": [], "python_command": [["float", 0.22229308215594742], ["list", 0.13275820344921005], ["List[Dict[str, str]]", 0.08864767344317363], ["Union[List[str], List[Any]]", 0.08777889571771644], ["int", 0.08500944453692838]], "self": [], "use_dill": [["bool", 1.0]]}, "q_name": "_DockerDecoratedOperator.__init__", "ret_exprs": [], "ret_type": "None", "variables": {"command": "", "expect_airflow": "", "pickling_library": "", "python_command": ""}, "variables_p": {"command": [["TextIO", 0.1883189415651602], ["str", 0.09225794743121131], ["Tuple[Literal]", 0.08570151752477433]], "expect_airflow": [["str", 0.12888878837133858], ["bytes", 0.07601805141849718]], "pickling_library": [["int", 0.24060990497276763], ["bool", 0.19521603895480677], ["List[int]", 0.18477219385439558], ["List[dict]", 0.09949880152540785], ["str", 0.09513086683822654]], "python_command": [["str", 0.7161248458638063], ["int", 0.19205692601027868], ["List[str]", 0.09181822812591495]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[97, 4], [103, 9]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "generate_command", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["_generate_decode_command", "self", "python_command", "_generate_decode_command", "self", "python_command", "self", "python_command"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "_DockerDecoratedOperator.generate_command", "ret_exprs": ["return ( f\"\"\"bash -cx '{_generate_decode_command(\"__PYTHON_SCRIPT\", \"/tmp/script.py\", self.python_command)} &&\"\"\" f'{_generate_decode_command(\"__PYTHON_INPUT\", \"/tmp/script.in\", self.python_command)} &&' f\"{self.python_command} /tmp/script.py /tmp/script.in /tmp/script.out'\")"], "ret_type": "", "ret_type_p": [["str", 0.9048200126362916], ["Optional[str]", 0.09517998736370825]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[105, 4], [137, 43]], "fn_var_ln": {"command": [[136, 12], [136, 24]], "input_filename": [[107, 12], [107, 26]], "py_source": [[113, 12], [113, 21]], "script_filename": [[108, 12], [108, 27]]}, "fn_var_occur": {"command": [["self", "command", "self", "generate_command"]], "input_filename": [["input_filename", "os", "path", "join", "tmp_dir"], ["open", "input_filename", "file"], ["self", "environment", "_b64_encode_file", "input_filename"]], "py_source": [["py_source", "self", "get_python_source"], ["write_python_script", "jinja_context", "dict", "op_args", "self", "op_args", "op_kwargs", "self", "op_kwargs", "pickling_library", "self", "pickling_library", "__name__", "python_callable", "self", "python_callable", "__name__", "python_callable_source", "py_source", "expect_airflow", "self", "expect_airflow", "string_args_global", "False", "filename", "script_filename"]], "script_filename": [["script_filename", "os", "path", "join", "tmp_dir"], ["write_python_script", "jinja_context", "dict", "op_args", "self", "op_args", "op_kwargs", "self", "op_kwargs", "pickling_library", "self", "pickling_library", "__name__", "python_callable", "self", "python_callable", "__name__", "python_callable_source", "py_source", "expect_airflow", "self", "expect_airflow", "string_args_global", "False", "filename", "script_filename"], ["self", "environment", "_b64_encode_file", "script_filename"]]}, "name": "execute", "params": {"context": "airflow.utils.context.Context", "self": ""}, "params_descr": {"context": "", "self": ""}, "params_occur": {"context": [["super", "execute", "context"]], "self": [["self", "op_args", "self", "op_kwargs"], ["self", "pickling_library", "dump", "self", "op_args", "self", "op_kwargs", "file"], ["py_source", "self", "get_python_source"], ["write_python_script", "jinja_context", "dict", "op_args", "self", "op_args", "op_kwargs", "self", "op_kwargs", "pickling_library", "self", "pickling_library", "__name__", "python_callable", "self", "python_callable", "__name__", "python_callable_source", "py_source", "expect_airflow", "self", "expect_airflow", "string_args_global", "False", "filename", "script_filename"], ["self", "environment", "_b64_encode_file", "script_filename"], ["self", "op_args", "self", "op_kwargs"], ["self", "environment", "_b64_encode_file", "input_filename"], ["self", "environment"], ["self", "command", "self", "generate_command"]]}, "params_p": {"args": [], "context": [["int", 0.30000000000000004], ["Callable", 0.2], ["str", 0.1]], "kwargs": [], "self": []}, "q_name": "_DockerDecoratedOperator.execute", "ret_exprs": ["return super().execute(context)"], "ret_type": "", "ret_type_p": [["int", 0.30000000000000004], ["Callable", 0.2], ["str", 0.1]], "variables": {"command": "", "input_filename": "", "py_source": "", "script_filename": ""}, "variables_p": {"command": [["int", 0.46042256618863187], ["dict", 0.1379594073759071], ["Dict[str, int]", 0.11322540037441774], ["float", 0.10484327192424091], ["bool", 0.0927088655002429], ["List[Tuple[bytes, bytes]]", 0.09084048863655955]], "input_filename": [["str", 1.0]], "py_source": [["email.mime.base.MIMEBase", 0.09804094758695543], ["cmk.utils.tags.TagConfig", 0.0911533800871113]], "script_filename": [["str", 0.32757769484683313], ["List[str]", 0.2734955690553775], ["bool", 0.19461026461312814], ["Dict[str, Type[Any]]", 0.10759892299419416], ["Tuple[str, str, str, str, str, str, str, str, str, str, str, str, str]", 0.09671754849046711]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[140, 4], [144, 18]], "fn_var_ln": {"raw_source": [[141, 8], [141, 18]], "res": [[143, 8], [143, 11]]}, "fn_var_occur": {"raw_source": [["raw_source", "inspect", "getsource", "self", "python_callable"], ["res", "dedent", "raw_source"]], "res": [["res", "dedent", "raw_source"], ["res", "remove_task_decorator", "res", "self", "custom_operator_name"]]}, "name": "get_python_source", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["raw_source", "inspect", "getsource", "self", "python_callable"], ["res", "remove_task_decorator", "res", "self", "custom_operator_name"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "_DockerDecoratedOperator.get_python_source", "ret_exprs": ["return res"], "ret_type": "", "ret_type_p": [["str", 0.31107017524696967], ["bytes", 0.1941265021535168], ["bool", 0.18818801258968454], ["Dict[str, Any]", 0.08527591052012892]], "variables": {"raw_source": "", "res": ""}, "variables_p": {"raw_source": [["str", 0.5312116610613193], ["list", 0.09219480089178193]], "res": [["List[str]", 0.24430892592515246], ["List[Tuple[str, Any]]", 0.11367176576494309], ["Pattern[str]", 0.08991460002148063], ["str", 0.08453543485450699], ["Type[Callable[..., None]]", 0.08411946234865543]]}}], "name": "_DockerDecoratedOperator", "q_name": "_DockerDecoratedOperator", "variables": {"custom_operator_name": "", "template_fields": "typing.Sequence[builtins.str]"}, "variables_p": {"custom_operator_name": [["str", 0.7999999999999999], ["List[str]", 0.09999999999999999], ["dict", 0.09999999999999999]], "template_fields": [["Tuple[str, str, str, str, str, str]", 0.2857142856828355], ["Tuple[str, str, str]", 0.2857142856828355], ["Tuple[str, str, str, str]", 0.2857142856828355], ["Tuple[str, str, str, str, str]", 0.14285714284141776], ["Dict[str, str]", 7.42502725571635e-11]]}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[46, 0], [52, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_generate_decode_command", "params": {"env_var": "", "file": "", "python_command": ""}, "params_descr": {"env_var": "", "file": "", "python_command": ""}, "params_occur": {"env_var": [["python_command", "env_var", "file"]], "file": [["python_command", "env_var", "file"]], "python_command": [["python_command", "env_var", "file"]]}, "params_p": {"args": [], "env_var": [["str", 0.6034803926087305], ["IO", 0.20274343189290692], ["bool", 0.09998903385195922]], "file": [["str", 0.6034803926087305], ["IO", 0.20274343189290692], ["bool", 0.09998903385195922]], "kwargs": [], "python_command": [["str", 0.6034803926087305], ["IO", 0.20274343189290692], ["bool", 0.09998903385195922]]}, "q_name": "_generate_decode_command", "ret_exprs": ["return ( f'{python_command} -c \"import base64, os;' rf\"x = base64.b64decode(os.environ[\"{env_var}\"]);\" rf'f = open(\"{file}\", \"wb\"); f.write(x);\"')"], "ret_type": "", "ret_type_p": [["str", 0.8075687844613871]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[55, 0], [57, 54]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_b64_encode_file", "params": {"filename": ""}, "params_descr": {"filename": ""}, "params_occur": {"filename": [["open", "filename", "file_to_encode"]]}, "params_p": {"args": [], "filename": [["str", 0.9029172563355834], ["Callable[[str], None]", 0.09708274366441666]], "kwargs": []}, "q_name": "_b64_encode_file", "ret_exprs": ["return base64.b64encode(file_to_encode.read())"], "ret_type": "", "ret_type_p": [["str", 0.4101036260699159]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Python operator decorator; wraps a function into an Airflow operator.", "long_descr": "Also accepts any argument that DockerOperator will via ``kwargs``. Can be reused in a single DAG.", "ret": null}, "fn_lc": [[147, 0], [166, 5]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "docker_task", "params": {"kwargs": "", "multiple_outputs": "bool | None", "python_callable": "Callable | None"}, "params_descr": {"kwargs": "", "multiple_outputs": "If set, function return value will be unrolled to multiple XCom values.\nDict will unroll to XCom values with keys as XCom keys. Defaults to False.", "python_callable": "Function to decorate"}, "params_occur": {"kwargs": [["task_decorator_factory", "python_callable", "python_callable", "multiple_outputs", "multiple_outputs", "decorated_operator_class", "_DockerDecoratedOperator", "kwargs"]], "multiple_outputs": [["task_decorator_factory", "python_callable", "python_callable", "multiple_outputs", "multiple_outputs", "decorated_operator_class", "_DockerDecoratedOperator", "kwargs"]], "python_callable": [["task_decorator_factory", "python_callable", "python_callable", "multiple_outputs", "multiple_outputs", "decorated_operator_class", "_DockerDecoratedOperator", "kwargs"]]}, "params_p": {"args": [], "kwargs": [], "multiple_outputs": [["str", 0.12509068158032796], ["Callable", 0.11798910736677251], ["int", 0.11798910736677251], ["float", 0.08559391055503296]], "python_callable": [["str", 0.12509068158032796], ["Callable", 0.11798910736677251], ["int", 0.11798910736677251], ["float", 0.08559391055503296]]}, "q_name": "docker_task", "ret_exprs": ["return task_decorator_factory( python_callable=python_callable, multiple_outputs=multiple_outputs, decorated_operator_class=_DockerDecoratedOperator, **kwargs,)"], "ret_type": "airflow.decorators.base.TaskDecorator", "ret_type_p": [["Dict[str, Any]", 0.11223629561839796], ["bytes", 0.1091389446025017]], "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "base64", "inspect", "os", "pickle", "tempfile", "TemporaryDirectory", "textwrap", "dedent", "typing", "TYPE_CHECKING", "Callable", "Sequence", "dill", "airflow", "decorators", "base", "DecoratedOperator", "task_decorator_factory", "airflow", "providers", "docker", "operators", "docker", "DockerOperator", "airflow", "utils", "decorators", "remove_task_decorator", "airflow", "utils", "python_virtualenv", "remove_task_decorator", "airflow", "utils", "python_virtualenv", "write_python_script", "airflow", "decorators", "base", "TaskDecorator", "airflow", "utils", "context", "Context"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 6, "I": 0, "U": 23}, "session_id": "Fz3BVckz2M7UpiYlysOEWIuPwNpZzmMV_LAyaywytmg", "set": null, "tc": [false, null], "type_annot_cove": 0.21, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}