{"error": null, "response": {"classes": [{"cls_lc": [[43, 0], [197, 35]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[52, 4], [102, 27]], "fn_var_ln": {"_cfg_path": [[93, 8], [93, 22]], "_command": [[94, 8], [94, 21]], "_task_instance": [[55, 8], [55, 27]], "cfg_path": [[91, 12], [91, 20]], "job_runner": [[53, 8], [53, 23]], "popen_prepend": [[81, 12], [81, 25]], "process": [[102, 8], [102, 20]], "pythonpath_value": [[80, 12], [80, 28]], "run_as_user": [[64, 16], [64, 32]]}, "fn_var_occur": {"_cfg_path": [["self", "_cfg_path", "cfg_path"]], "_command": [["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"]], "_task_instance": [["self", "_task_instance", "job_runner", "task_instance"], ["self", "_task_instance", "run_as_user"], ["self", "run_as_user", "str", "None", "self", "_task_instance", "run_as_user"], ["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"]], "cfg_path": [["cfg_path", "tmp_configuration_copy", "chmod", "include_env", "True", "include_cmds", "True"], ["subprocess", "check_call", "self", "run_as_user", "cfg_path", "close_fds", "True"], ["cfg_path", "tmp_configuration_copy", "chmod", "include_env", "False", "include_cmds", "False"], ["self", "_cfg_path", "cfg_path"], ["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"]], "job_runner": [["self", "job_runner", "job_runner"], ["super", "__init__", "job_runner", "task_instance"], ["self", "_task_instance", "job_runner", "task_instance"], ["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"]], "popen_prepend": [["popen_prepend", "self", "run_as_user"], ["popen_prepend", "append", "PYTHONPATH_VAR", "pythonpath_value"], ["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"]], "process": [["self", "process", "None"]], "pythonpath_value": [["pythonpath_value", "os", "environ", "get", "PYTHONPATH_VAR"], ["popen_prepend", "append", "PYTHONPATH_VAR", "pythonpath_value"]], "run_as_user": [["self", "_task_instance", "run_as_user"], ["self", "run_as_user", "str", "None", "self", "_task_instance", "run_as_user"], ["self", "run_as_user", "conf", "get"], ["self", "run_as_user", "None"], ["self", "log", "debug", "self", "run_as_user"], ["self", "run_as_user", "self", "run_as_user", "getuser"], ["subprocess", "check_call", "self", "run_as_user", "cfg_path", "close_fds", "True"], ["popen_prepend", "self", "run_as_user"]]}, "name": "__init__", "params": {"job_runner": "airflow.jobs.local_task_job_runner.LocalTaskJobRunner", "self": ""}, "params_descr": {"job_runner": "", "self": ""}, "params_occur": {"job_runner": [["self", "job_runner", "job_runner"], ["super", "__init__", "job_runner", "task_instance"], ["self", "_task_instance", "job_runner", "task_instance"], ["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"]], "self": [["self", "job_runner", "job_runner"], ["self", "_task_instance", "job_runner", "task_instance"], ["self", "_task_instance", "run_as_user"], ["self", "run_as_user", "str", "None", "self", "_task_instance", "run_as_user"], ["self", "run_as_user", "conf", "get"], ["self", "run_as_user", "None"], ["self", "log", "debug", "self", "run_as_user"], ["self", "run_as_user", "self", "run_as_user", "getuser"], ["subprocess", "check_call", "self", "run_as_user", "cfg_path", "close_fds", "True"], ["popen_prepend", "self", "run_as_user"], ["self", "_cfg_path", "cfg_path"], ["self", "_command", "popen_prepend", "self", "_task_instance", "command_as_list", "raw", "True", "pickle_id", "self", "job_runner", "pickle_id", "mark_success", "self", "job_runner", "mark_success", "job_id", "self", "job_runner", "job", "id", "pool", "self", "job_runner", "pool", "cfg_path", "cfg_path"], ["self", "process", "None"]]}, "params_p": {"args": [], "job_runner": [["dict", 0.3058167817550798], ["cmk.utils.type_defs.HostName", 0.09113192379160637], ["cmk.utils.type_defs.ServiceName", 0.09113192379160637]], "kwargs": [], "self": []}, "q_name": "BaseTaskRunner.__init__", "ret_exprs": [], "ret_type": "", "variables": {"_cfg_path": "", "_command": "", "_task_instance": "", "cfg_path": "", "job_runner": "", "popen_prepend": "", "process": "", "pythonpath_value": "", "run_as_user": ""}, "variables_p": {"_cfg_path": [["List[str]", 0.9999999998339758], ["str", 8.076434955458418e-11]], "_command": [["str", 1.0]], "_task_instance": [["str", 1.0]], "cfg_path": [["str", 0.092672475973884]], "job_runner": [["Type[T]", 0.09506190484803992], ["Literal", 0.0939555166472605], ["Iterable[T]", 0.09146976069955055], ["str", 0.09116949026176165]], "popen_prepend": [["str", 0.10630307408607428], ["Dict[str, Dict[str, Any]]", 0.09752451169878207], ["dict", 0.09604436118960602], ["Set[str]", 0.09279928995333343], ["list", 0.09231142060983148]], "process": [["\"Frame\"", 0.19999999999676038], ["str", 3.971941177518544e-12], ["Dict[str, Any]", 3.6175949269712212e-12]], "pythonpath_value": [["str", 0.9009430498883503], ["dict", 0.04769237139280422]], "run_as_user": [["str", 0.7051023185653424], ["Type[str]", 0.10064359904534265], ["List[dict]", 0.0983095163195529]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[104, 4], [116, 13]], "fn_var_ln": {"line": [[108, 16], [108, 20]]}, "fn_var_occur": {"line": [["line", "stream", "readline"], ["isinstance", "line", "bytes"], ["line", "line", "decode"], ["self", "log", "info", "self", "_task_instance", "job_id", "self", "_task_instance", "task_id", "line", "rstrip"]]}, "name": "_read_task_logs", "params": {"self": "", "stream": ""}, "params_descr": {"self": "", "stream": ""}, "params_occur": {"self": [["self", "log", "info", "self", "_task_instance", "job_id", "self", "_task_instance", "task_id", "line", "rstrip"]], "stream": [["line", "stream", "readline"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "stream": [["str", 0.61088119105341], ["TextIO", 0.23049506365990255], ["IO[str]", 0.08057739013524273]]}, "q_name": "BaseTaskRunner._read_task_logs", "ret_exprs": [], "ret_type": "", "variables": {"line": ""}, "variables_p": {"line": [["str", 0.09458143779565692]]}}, {"docstring": {"func": "Run the task command.", "long_descr": null, "ret": "the process that was run"}, "fn_lc": [[118, 4], [161, 19]], "fn_var_ln": {"daemon": [[159, 8], [159, 25]], "full_cmd": [[126, 8], [126, 16]], "log_reader": [[155, 8], [155, 18]], "proc": [[144, 16], [144, 20]], "run_with": [[125, 8], [125, 16]]}, "fn_var_occur": {"daemon": [["log_reader", "daemon", "True"]], "full_cmd": [["full_cmd", "run_with", "self", "_command"], ["self", "log", "info", "full_cmd"], ["proc", "subprocess", "Popen", "full_cmd", "stdout", "subprocess", "PIPE", "stderr", "subprocess", "STDOUT", "universal_newlines", "True", "close_fds", "True", "env", "os", "environ", "copy"], ["proc", "subprocess", "Popen", "full_cmd", "stdout", "subprocess", "PIPE", "stderr", "subprocess", "STDOUT", "universal_newlines", "True", "close_fds", "True", "env", "os", "environ", "copy", "preexec_fn", "os", "setsid"]], "log_reader": [["log_reader", "threading", "Thread", "target", "self", "_read_task_logs", "args", "proc", "stdout"], ["log_reader", "daemon", "True"], ["log_reader", "start"]], "proc": [["proc", "subprocess", "Popen", "full_cmd", "stdout", "subprocess", "PIPE", "stderr", "subprocess", "STDOUT", "universal_newlines", "True", "close_fds", "True", "env", "os", "environ", "copy"], ["proc", "subprocess", "Popen", "full_cmd", "stdout", "subprocess", "PIPE", "stderr", "subprocess", "STDOUT", "universal_newlines", "True", "close_fds", "True", "env", "os", "environ", "copy", "preexec_fn", "os", "setsid"], ["log_reader", "threading", "Thread", "target", "self", "_read_task_logs", "args", "proc", "stdout"]], "run_with": [["run_with", "run_with"], ["full_cmd", "run_with", "self", "_command"]]}, "name": "run_command", "params": {"run_with": "", "self": ""}, "params_descr": {"run_with": "list of tokens to run the task command with e.g. ``['bash', '-c']``", "self": ""}, "params_occur": {"run_with": [["run_with", "run_with"], ["full_cmd", "run_with", "self", "_command"]], "self": [["full_cmd", "run_with", "self", "_command"], ["self", "log", "info", "get_hostname"], ["self", "log", "info", "full_cmd"], ["_airflow_parsing_context_manager", "dag_id", "self", "_task_instance", "dag_id", "task_id", "self", "_task_instance", "task_id"], ["log_reader", "threading", "Thread", "target", "self", "_read_task_logs", "args", "proc", "stdout"]]}, "params_p": {"args": [], "kwargs": [], "run_with": [], "self": []}, "q_name": "BaseTaskRunner.run_command", "ret_exprs": ["return proc"], "ret_type": "subprocess.Popen", "ret_type_p": [["str", 0.19999999999999998], ["int", 0.09999999999999999], ["bool", 0.09999999999999999], ["list", 0.09999999999999999]], "variables": {"daemon": "", "full_cmd": "", "log_reader": "", "proc": "", "run_with": ""}, "variables_p": {"daemon": [["str", 0.5160887052892307], ["bool", 0.1466163796194816], ["Dict[int, List[int]]", 0.11634293484655046], ["List[str]", 0.09347344404300272]], "full_cmd": [["str", 0.10496823229261823], ["astrality.tests.utils.Retry", 0.08985868115932472]], "log_reader": [["int", 0.1393914884982422], ["str", 0.10198870441936224]], "proc": [["subprocess.Popen[Any]", 0.40325523102231137], ["subprocess.CompletedProcess[bytes]", 0.3873755293439265], ["str", 0.20936923963376203]], "run_with": [["int", 0.4025471882579039], ["Pattern[str]", 0.1115510795939549]]}}, {"docstring": {"func": "Start running the task instance in a subprocess.", "long_descr": null, "ret": null}, "fn_lc": [[163, 4], [165, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "start", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "BaseTaskRunner.start", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Extract the return code.", "long_descr": null, "ret": "The return code associated with running the task instance or\nNone if the task is not yet done."}, "fn_lc": [[167, 4], [174, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "return_code", "params": {"self": "", "timeout": "builtins.float"}, "params_descr": {"self": "", "timeout": ""}, "params_occur": {"self": [], "timeout": []}, "params_p": {"args": [], "kwargs": [], "self": [], "timeout": [["int", 0.14446174586720598], ["Literal[False]", 0.1247680241458824], ["Literal[True]", 0.1247680241458824], ["Callable", 0.10070445463993423], ["Union[Callable, Type]", 0.10070445463993423], ["str", 0.07580146182087673]]}, "q_name": "BaseTaskRunner.return_code", "ret_exprs": [], "ret_type": "int | None", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Force kill the running task instance.", "long_descr": null, "ret": null}, "fn_lc": [[176, 4], [178, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "terminate", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "BaseTaskRunner.terminate", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": "A callback that should be called when this is done running.", "long_descr": null, "ret": null}, "fn_lc": [[180, 4], [186, 41]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "on_finish", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_cfg_path", "os", "path", "isfile", "self", "_cfg_path"], ["self", "run_as_user"], ["subprocess", "call", "self", "_cfg_path", "close_fds", "True"], ["os", "remove", "self", "_cfg_path"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "BaseTaskRunner.on_finish", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Get the process pid.", "long_descr": null, "ret": null}, "fn_lc": [[188, 4], [197, 35]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "get_process_pid", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["hasattr", "self", "self", "process", "None", "hasattr", "self", "process"], ["self", "process", "pid"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "BaseTaskRunner.get_process_pid", "ret_exprs": ["return self.process.pid"], "ret_type": "builtins.int", "ret_type_p": [["str", 0.19999999999999998], ["bool", 0.09999999999999999]], "variables": {}, "variables_p": {}}], "name": "BaseTaskRunner", "q_name": "BaseTaskRunner", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "os", "subprocess", "threading", "airflow", "jobs", "local_task_job_runner", "LocalTaskJobRunner", "airflow", "utils", "dag_parsing_context", "_airflow_parsing_context_manager", "airflow", "utils", "platform", "IS_WINDOWS", "pwd", "getpwnam", "airflow", "configuration", "conf", "airflow", "exceptions", "AirflowConfigException", "airflow", "utils", "configuration", "tmp_configuration_copy", "airflow", "utils", "log", "logging_mixin", "LoggingMixin", "airflow", "utils", "net", "get_hostname", "airflow", "utils", "platform", "getuser"], "mod_var_ln": {"PYTHONPATH_VAR": [[40, 0], [40, 14]]}, "mod_var_occur": {"PYTHONPATH_VAR": [["pythonpath_value", "os", "environ", "get", "PYTHONPATH_VAR"], ["popen_prepend", "append", "PYTHONPATH_VAR", "pythonpath_value"]]}, "no_types_annot": {"D": 6, "I": 0, "U": 20}, "session_id": "Osujqxj5uCtxXnJs4nnmiAMZhKrjPaSY5WToQKHc3AA", "set": null, "tc": [false, null], "type_annot_cove": 0.23, "typed_seq": "", "untyped_seq": "", "variables": {"PYTHONPATH_VAR": ""}, "variables_p": {"PYTHONPATH_VAR": [["str", 0.5956989860401132], ["Dict[str, str]", 0.20161571273779505], ["Optional[Match[str]]", 0.10180327612671618]]}}}