{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": "Renew kerberos token from keytab.", "long_descr": null, "ret": "None"}, "fn_lc": [[50, 0], [124, 12]], "fn_var_ln": {"NEED_KRB181_WORKAROUND": [[114, 8], [114, 30]], "cmd_principal": [[62, 4], [62, 17]], "cmdv": [[76, 4], [76, 8]], "forwardable": [[69, 8], [69, 19]], "include_ip": [[74, 8], [74, 18]], "renewal_lifetime": [[60, 4], [60, 20]], "ret": [[119, 8], [119, 11]]}, "fn_var_occur": {"NEED_KRB181_WORKAROUND": [["NEED_KRB181_WORKAROUND", "None"], ["NEED_KRB181_WORKAROUND", "detect_conf_var"]], "cmd_principal": [["cmd_principal", "principal", "conf", "get_mandatory_value", "replace", "get_hostname"], ["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "forwardable", "include_ip", "renewal_lifetime", "keytab", "conf", "get_mandatory_value", "cmd_principal"], ["ret", "perform_krb181_workaround", "cmd_principal"]], "cmdv": [["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "forwardable", "include_ip", "renewal_lifetime", "keytab", "conf", "get_mandatory_value", "cmd_principal"], ["log", "info", "join", "shlex", "quote", "f", "f", "cmdv"], ["subprocess", "Popen", "cmdv", "stdout", "subprocess", "PIPE", "stderr", "subprocess", "PIPE", "close_fds", "True", "bufsize", "universal_newlines", "True", "subp"]], "forwardable": [["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "forwardable", "include_ip", "renewal_lifetime", "keytab", "conf", "get_mandatory_value", "cmd_principal"]], "include_ip": [["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "forwardable", "include_ip", "renewal_lifetime", "keytab", "conf", "get_mandatory_value", "cmd_principal"]], "renewal_lifetime": [["renewal_lifetime", "conf", "getint"], ["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "forwardable", "include_ip", "renewal_lifetime", "keytab", "conf", "get_mandatory_value", "cmd_principal"]], "ret": [["ret", "perform_krb181_workaround", "cmd_principal"], ["exit_on_fail", "ret"], ["sys", "exit", "ret"]]}, "name": "renew_from_kt", "params": {"exit_on_fail": "builtins.bool", "keytab": "builtins.str", "principal": "str | None"}, "params_descr": {"exit_on_fail": "", "keytab": "keytab file", "principal": "principal"}, "params_occur": {"exit_on_fail": [["exit_on_fail", "ret"]], "keytab": [["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "forwardable", "include_ip", "renewal_lifetime", "keytab", "conf", "get_mandatory_value", "cmd_principal"]], "principal": [["cmd_principal", "principal", "conf", "get_mandatory_value", "replace", "get_hostname"]]}, "params_p": {"args": [], "exit_on_fail": [["float", 0.19999999999999998], ["Sequence[float]", 0.09999999999999999], ["Tuple[int, int]", 0.09999999999999999], ["tuple", 0.09999999999999999]], "keytab": [["str", 0.5045141198277536], ["List[str]", 0.1209664009452516], ["Optional[Set[str]]", 0.08554582884454003]], "kwargs": [], "principal": [["Dict[str, Any]", 0.13808414511127964], ["Any", 0.09311759274554583], ["Optional[str]", 0.08590256197535251], ["Optional[Iterable[T]]", 0.08565356646259392], ["bool", 0.08565356646259392]]}, "q_name": "renew_from_kt", "ret_exprs": ["return subp.returncode", "return ret", "return 0"], "ret_type": "", "ret_type_p": [["float", 0.19999999999999998], ["Sequence[float]", 0.09999999999999999], ["Tuple[int, int]", 0.09999999999999999], ["tuple", 0.09999999999999999]], "variables": {"NEED_KRB181_WORKAROUND": "", "cmd_principal": "", "cmdv": "builtins.list[builtins.str]", "forwardable": "", "include_ip": "", "renewal_lifetime": "", "ret": ""}, "variables_p": {"NEED_KRB181_WORKAROUND": [["Optional[str]", 0.2], ["frozenset[str]", 0.1], ["ImportError", 0.1], ["bool", 0.1], ["str", 0.1], ["Dict[str, str]", 0.1]], "cmd_principal": [["dict", 0.09727585180138652], ["utils.mssql_counters.Section", 0.08402709583896395]], "cmdv": [["List[str]", 1.0]], "forwardable": [["List[str]", 1.0]], "include_ip": [["List[str]", 1.0]], "renewal_lifetime": [["List[str]", 0.2981695225790868], ["int", 0.1964046839366822], ["dict", 0.10510880527522175], ["Counter[Any]", 0.10269942140593366], ["Dict[str, Union[Any, Any, Any]]", 0.0957955022456441]], "ret": []}}, {"docstring": {"func": "Workaround for Kerberos 1.8.1.", "long_descr": null, "ret": "None"}, "fn_lc": [[127, 0], [158, 14]], "fn_var_ln": {"ccache": [[147, 8], [147, 14]], "cmdv": [[134, 4], [134, 8]], "principal": [[146, 8], [146, 17]], "ret": [[143, 4], [143, 7]]}, "fn_var_occur": {"ccache": [["ccache", "conf", "get"], ["log", "error", "principal", "ccache", "principal"]], "cmdv": [["cmdv", "builtins", "list", "builtins", "str", "conf", "get_mandatory_value", "conf", "get_mandatory_value"], ["log", "info", "join", "cmdv"], ["ret", "subprocess", "call", "cmdv", "close_fds", "True"]], "principal": [["principal", "principal", "conf", "get", "get_hostname"], ["log", "error", "principal", "ccache", "principal"]], "ret": [["ret", "subprocess", "call", "cmdv", "close_fds", "True"]]}, "name": "perform_krb181_workaround", "params": {"principal": "builtins.str"}, "params_descr": {"principal": "principal name"}, "params_occur": {"principal": [["principal", "principal", "conf", "get", "get_hostname"], ["log", "error", "principal", "ccache", "principal"]]}, "params_p": {"args": [], "kwargs": [], "principal": [["int", 0.16451869762841603]]}, "q_name": "perform_krb181_workaround", "ret_exprs": ["return ret"], "ret_type": "", "ret_type_p": [["bool", 0.2395657390539261], ["List[str]", 0.23338568586490194], ["Set[str]", 0.16051642331466923], ["Dict[str, Any]", 0.08608815791117343], ["str", 0.08416976611412513]], "variables": {"ccache": "", "cmdv": "builtins.list[builtins.str]", "principal": "", "ret": ""}, "variables_p": {"ccache": [["Dict[str, str]", 0.4092060654735765], ["str", 0.3897966282307145], ["Dict[str, Type[Any]]", 0.10049865314785444], ["dict", 0.10049865314785444]], "cmdv": [["List[str]", 0.8010639702599369], ["str", 0.09970581974810928], ["int", 0.09923020999195398]], "principal": [["str", 0.4014521268551966], ["Union[Literal, str]", 0.11949571411277207], ["Dict[Any, str]", 0.10837290357847075], ["Dict[int, str]", 0.08345385921164207]], "ret": [["str", 0.310905250465797], ["bool", 0.17903631373290455], ["bytes", 0.1535726448481114], ["Tuple[str]", 0.11531323835122056], ["int", 0.08435619172536887], ["list", 0.07541953656387364]]}}, {"docstring": {"func": "Autodetect the Kerberos ticket configuration.", "long_descr": "Return true if the ticket cache contains \"conf\" information as is found\nin ticket caches of Kerberos 1.8.1 or later. This is incompatible with the\nSun Java Krb5LoginModule in Java6, so we need to take an action to work\naround it.", "ret": null}, "fn_lc": [[161, 0], [174, 45]], "fn_var_ln": {"ticket_cache": [[170, 4], [170, 16]]}, "fn_var_occur": {"ticket_cache": [["ticket_cache", "conf", "get_mandatory_value"], ["open", "ticket_cache", "file"]]}, "name": "detect_conf_var", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "detect_conf_var", "ret_exprs": ["return b\"X-CACHECONF:\" in file.read()"], "ret_type": "builtins.bool", "ret_type_p": [["str", 0.4106941488606113], ["Union[bytes, bytearray]", 0.2000919434254308], ["bytearray", 0.10821910283031026], ["bool", 0.1013302245243548], ["bytes", 0.09669564265142604]], "variables": {"ticket_cache": ""}, "variables_p": {"ticket_cache": [["str", 0.3720675966709417], ["Type[str]", 0.16636061255107362]]}}, {"docstring": {"func": "Run the kerbros renewer.", "long_descr": null, "ret": "None"}, "fn_lc": [[177, 0], [191, 63]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "run", "params": {"keytab": "builtins.str", "principal": "str | None"}, "params_descr": {"keytab": "keytab file", "principal": "principal name"}, "params_occur": {"keytab": [["renew_from_kt", "principal", "keytab"]], "principal": [["renew_from_kt", "principal", "keytab"]]}, "params_p": {"args": [], "keytab": [["str", 0.2], ["int", 0.1], ["bool", 0.1], ["list", 0.1]], "kwargs": [], "principal": [["str", 0.2], ["int", 0.1], ["bool", 0.1], ["list", 0.1]]}, "q_name": "run", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "logging", "shlex", "subprocess", "sys", "time", "airflow", "configuration", "conf", "airflow", "utils", "net", "get_hostname"], "mod_var_ln": {"NEED_KRB181_WORKAROUND": [[45, 0], [45, 22]], "log": [[47, 0], [47, 3]]}, "mod_var_occur": {"NEED_KRB181_WORKAROUND": [["NEED_KRB181_WORKAROUND"], ["NEED_KRB181_WORKAROUND", "None"], ["NEED_KRB181_WORKAROUND", "detect_conf_var"], ["NEED_KRB181_WORKAROUND"]], "log": [["log", "info", "join", "shlex", "quote", "f", "f", "cmdv"], ["log", "error", "subp", "returncode", "join", "subp", "stdout", "readlines", "subp", "stdout", "join", "subp", "stderr", "readlines", "subp", "stderr"], ["log", "info", "join", "cmdv"], ["log", "error", "principal", "ccache", "principal"], ["log", "warning"]]}, "no_types_annot": {"D": 9, "I": 0, "U": 14}, "session_id": "1T-6Dy6DDglGQqL87wU0PsCvG2rLLRpaMxVJjPpiAV8", "set": null, "tc": [false, null], "type_annot_cove": 0.39, "typed_seq": "", "untyped_seq": "", "variables": {"NEED_KRB181_WORKAROUND": "bool | None", "log": ""}, "variables_p": {"NEED_KRB181_WORKAROUND": [["int", 0.09710155139607815], ["List[Optional[Any]]", 0.0949249788616221]], "log": [["logging.Logger", 0.6320927039293579], ["rotkehlchen.logging.RotkehlchenLogsAdapter", 0.09607799867035027]]}}}