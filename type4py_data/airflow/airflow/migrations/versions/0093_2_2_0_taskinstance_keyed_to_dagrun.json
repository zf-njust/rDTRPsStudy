{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": "Apply Change ``TaskInstance`` and ``TaskReschedule`` tables from execution_date to run_id.", "long_descr": null, "ret": null}, "fn_lc": [[67, 0], [287, 9]], "fn_var_ln": {"_": [[226, 20], [226, 21]], "conn": [[69, 4], [69, 8]], "constraints": [[225, 16], [225, 27]], "dialect_name": [[70, 4], [70, 16]], "dt_type": [[72, 4], [72, 11]], "inspector": [[95, 12], [95, 21]], "naming_convention": [[76, 8], [76, 25]], "ondelete": [[280, 8], [280, 16]], "pk": [[226, 16], [226, 18]], "string_id_col_type": [[73, 4], [73, 22]], "unique_keys": [[96, 12], [96, 23]], "update_query": [[218, 8], [218, 20]]}, "fn_var_occur": {"_": [["pk", "_", "constraints", "popitem"]], "conn": [["conn", "op", "get_bind"], ["dialect_name", "conn", "dialect", "name"], ["inspector", "sa", "inspect", "conn", "engine"], ["constraints", "get_mssql_table_constraints", "conn"]], "constraints": [["constraints", "get_mssql_table_constraints", "conn"], ["pk", "_", "constraints", "popitem"]], "dialect_name": [["dialect_name", "conn", "dialect", "name"], ["update_query", "_multi_table_update", "dialect_name", "task_reschedule", "task_reschedule", "c", "run_id"], ["update_query", "_multi_table_update", "dialect_name", "task_instance", "task_instance", "c", "run_id"], ["ondelete", "dialect_name"]], "dt_type": [["dt_type", "TIMESTAMP"], ["batch_op", "alter_column", "existing_type", "dt_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "dt_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "dt_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "dt_type", "nullable", "False"]], "inspector": [["inspector", "sa", "inspect", "conn", "engine"], ["unique_keys", "inspector", "get_unique_constraints"]], "naming_convention": [["op", "batch_alter_table", "naming_convention", "naming_convention", "recreate", "batch_op"]], "ondelete": [["batch_op", "create_foreign_key", "ondelete"], ["batch_op", "create_foreign_key", "ondelete"], ["batch_op", "create_foreign_key", "ondelete"], ["ondelete", "dialect_name"], ["batch_op", "create_foreign_key", "ondelete", "ondelete"]], "pk": [["pk", "_", "constraints", "popitem"], ["batch_op", "drop_constraint", "pk", "type_"]], "string_id_col_type": [["string_id_col_type", "StringID"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "sa", "String", "length", "ID_LEN", "type_", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "sa", "String", "length", "ID_LEN", "type_", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "False"], ["op", "add_column", "sa", "Column", "type_", "string_id_col_type", "nullable", "True"], ["op", "add_column", "sa", "Column", "type_", "string_id_col_type", "nullable", "True"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "existing_nullable", "True", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "sa", "String", "length", "ID_LEN", "type_", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "existing_nullable", "True", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "existing_nullable", "True", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "existing_nullable", "True", "nullable", "False"]], "unique_keys": [["unique_keys", "inspector", "get_unique_constraints"]], "update_query": [["update_query", "_multi_table_update", "dialect_name", "task_reschedule", "task_reschedule", "c", "run_id"], ["op", "execute", "update_query"], ["update_query", "_multi_table_update", "dialect_name", "task_instance", "task_instance", "c", "run_id"], ["op", "execute", "update_query"]]}, "name": "upgrade", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "upgrade", "ret_exprs": [], "ret_type": "", "variables": {"_": "", "conn": "", "constraints": "", "dialect_name": "", "dt_type": "", "inspector": "", "naming_convention": "", "ondelete": "", "pk": "", "string_id_col_type": "", "unique_keys": "", "update_query": ""}, "variables_p": {"_": [["int", 0.19999999999999998], ["str", 0.19999999999999998], ["List[str]", 0.09999999999999999], ["Union[bytes, int]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Tuple[int, int]", 0.09999999999999999]], "conn": [["str", 0.3339446550195264], ["Tuple[slice]", 0.12774471966515258], ["int", 0.08786680785236632], ["bool", 0.08557674396658127]], "constraints": [["str", 0.6859449208071353], ["Dict[str, str]", 0.11886822223542114], ["int", 0.09899629056854377], ["Tuple[Any, Any]", 0.09619056638889996]], "dialect_name": [["str", 0.562164025757992], ["dict", 0.1377142478821712], ["List[str]", 0.10150182135407064]], "dt_type": [["str", 0.9039262202898616], ["Final", 0.09607377971013856]], "inspector": [["str", 0.3273004406620575], ["aiopg.sa.resulResultProxy", 0.29744667323631524], ["int", 0.08137794041377347]], "naming_convention": [["str", 0.3933843774958715], ["Dict[str, str]", 0.1165949097754855], ["int", 0.1092755259651445], ["dict", 0.10599693106661903], ["List[str]", 0.09411788412216233]], "ondelete": [["str", 0.4810651925663872], ["Dict[str, str]", 0.10554496993371168], ["Dict[str, float]", 0.10554496993371168], ["dict", 0.09675492769876605]], "pk": [["int", 0.19999999999999998], ["str", 0.19999999999999998], ["List[str]", 0.09999999999999999], ["Union[bytes, int]", 0.09999999999999999], ["bool", 0.09999999999999999], ["Tuple[int, int]", 0.09999999999999999]], "string_id_col_type": [["Dict[str, List[str]]", 0.27473880064947287], ["Set[int]", 0.12316627416198286], ["Type[str]", 0.11774456860087333], ["dict", 0.10235065365607449], ["Dict[str, str]", 0.09518259994270216], ["Set[str]", 0.09138135891513291]], "unique_keys": [["Optional[str]", 0.19870036903345806], ["Dict[str, str]", 0.16659051956638002], ["bytes", 0.1442508909240831], ["Type[Dict[str, Any]]", 0.12046271846131616], ["Set[str]", 0.10079403691468096], ["str", 0.09281340490690533], ["set", 0.08816100169323314]], "update_query": [["List[str]", 0.1648395895100448], ["str", 0.15780132255120943], ["Tuple[str, str]", 0.13027064116251721], ["Dict[str, Any]", 0.08529920758604818]]}}, {"docstring": {"func": "Unapply Change ``TaskInstance`` and ``TaskReschedule`` tables from execution_date to run_id.", "long_descr": null, "ret": null}, "fn_lc": [[290, 0], [393, 84]], "fn_var_ln": {"dialect_name": [[292, 4], [292, 16]], "dt_type": [[293, 4], [293, 11]], "string_id_col_type": [[294, 4], [294, 22]], "update_query": [[302, 4], [302, 16]]}, "fn_var_occur": {"dialect_name": [["dialect_name", "op", "get_bind", "dialect", "name"], ["update_query", "_multi_table_update", "dialect_name", "task_instance", "task_instance", "c", "execution_date"], ["update_query", "_multi_table_update", "dialect_name", "task_reschedule", "task_reschedule", "c", "execution_date"]], "dt_type": [["dt_type", "TIMESTAMP"], ["op", "add_column", "sa", "Column", "dt_type", "nullable", "True"], ["op", "add_column", "sa", "Column", "dt_type", "nullable", "True"], ["batch_op", "alter_column", "existing_type", "dt_type", "existing_nullable", "True", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "dt_type", "existing_nullable", "True", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "dt_type", "nullable", "True"], ["batch_op", "alter_column", "existing_type", "dt_type", "nullable", "True"]], "string_id_col_type": [["string_id_col_type", "StringID"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "existing_nullable", "False", "nullable", "True"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "True"], ["batch_op", "alter_column", "existing_type", "string_id_col_type", "nullable", "True"]], "update_query": [["update_query", "_multi_table_update", "dialect_name", "task_instance", "task_instance", "c", "execution_date"], ["op", "execute", "update_query"], ["update_query", "_multi_table_update", "dialect_name", "task_reschedule", "task_reschedule", "c", "execution_date"], ["op", "execute", "update_query"]]}, "name": "downgrade", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "downgrade", "ret_exprs": [], "ret_type": "", "variables": {"dialect_name": "", "dt_type": "", "string_id_col_type": "", "update_query": ""}, "variables_p": {"dialect_name": [["frozenset[Union[Any, Any]]", 0.41347946043583134], ["Optional[str]", 0.20909363832739208], ["str", 0.17358395627706302], ["List[str]", 0.10989346705050926]], "dt_type": [["str", 0.9999999999999999]], "string_id_col_type": [["Dict[str, List[str]]", 0.27738099208555383], ["dict", 0.11917477206358494], ["Type[str]", 0.11363669842095558], ["Set[int]", 0.10844842872487667], ["List[str]", 0.10500406439943336], ["Dict[str, str]", 0.09709387162283326]], "update_query": [["Dict[int, Any]", 0.3690133857647119], ["str", 0.1724803470462335], ["Dict[int, str]", 0.10302260534086476], ["Dict[str, str]", 0.09449382801481067], ["tuple", 0.08451643541260667]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[396, 0], [410, 88]], "fn_var_ln": {"condition": [[401, 8], [401, 17]], "sub_q": [[406, 8], [406, 13]]}, "fn_var_occur": {"condition": [["condition", "dag_run", "c", "dag_id", "target", "c", "dag_id"], ["condition", "and_", "condition", "dag_run", "c", "execution_date", "target", "c", "execution_date"], ["condition", "and_", "condition", "dag_run", "c", "run_id", "target", "c", "run_id"], ["sub_q", "select", "dag_run", "c", "column", "name", "where", "condition"], ["target", "update", "where", "condition", "values", "column", "dag_run", "c", "column", "name"]], "sub_q": [["sub_q", "select", "dag_run", "c", "column", "name", "where", "condition"], ["target", "update", "values", "column", "sub_q"]]}, "name": "_multi_table_update", "params": {"column": "", "dialect_name": "", "target": ""}, "params_descr": {"column": "", "dialect_name": "", "target": ""}, "params_occur": {"column": [["column", "target", "c", "run_id"], ["sub_q", "select", "dag_run", "c", "column", "name", "where", "condition"], ["target", "update", "values", "column", "sub_q"], ["target", "update", "where", "condition", "values", "column", "dag_run", "c", "column", "name"]], "dialect_name": [], "target": [["condition", "dag_run", "c", "dag_id", "target", "c", "dag_id"], ["column", "target", "c", "run_id"], ["condition", "and_", "condition", "dag_run", "c", "execution_date", "target", "c", "execution_date"], ["condition", "and_", "condition", "dag_run", "c", "run_id", "target", "c", "run_id"], ["target", "update", "values", "column", "sub_q"], ["target", "update", "where", "condition", "values", "column", "dag_run", "c", "column", "name"]]}, "params_p": {"args": [], "column": [["str", 0.5887834709636497], ["bool", 0.10298993122220855], ["Optional[float]", 0.08937125625831914]], "dialect_name": [["bool", 0.4721649333912193], ["str", 0.22816331590547975], ["Optional[bool]", 0.1380828915995431], ["Optional[str]", 0.06189699609472563]], "kwargs": [], "target": [["List[str]", 0.12261617231395841], ["str", 0.09795116623393689], ["List[Dict[str, Any]]", 0.09786673028860672], ["Optional[int]", 0.09552375380600016], ["bool", 0.095145557807041]]}, "q_name": "_multi_table_update", "ret_exprs": ["return target.update().values({column: sub_q})", "return target.update().where(condition).values({column: dag_run.c[column.name]})"], "ret_type": "", "ret_type_p": [["str", 0.19127066734803083], ["dict", 0.10909092312407907], ["Callable", 0.10704217821831681], ["sqlalchemy.MetaData", 0.09571366990705338], ["bool", 0.08970297082752844]], "variables": {"condition": "", "sub_q": ""}, "variables_p": {"condition": [["float", 0.1983952745291735], ["List[int]", 0.1200518191300733], ["list", 0.11339085008724763], ["List[float]", 0.0927575364547913], ["range", 0.09180779668735811]], "sub_q": [["list", 0.20458160547593718], ["str", 0.08539484098801338], ["dict", 0.08414808737625319]]}}], "imports": ["__future__", "annotations", "sqlalchemy", "sa", "alembic", "op", "sqlalchemy", "sql", "and_", "column", "select", "table", "airflow", "migrations", "db_types", "TIMESTAMP", "StringID", "airflow", "migrations", "utils", "get_mssql_table_constraints"], "mod_var_ln": {"ID_LEN": [[34, 0], [34, 6]], "airflow_version": [[41, 0], [41, 15]], "branch_labels": [[39, 0], [39, 13]], "dag_run": [[59, 0], [59, 7]], "depends_on": [[40, 0], [40, 10]], "down_revision": [[38, 0], [38, 13]], "revision": [[37, 0], [37, 8]], "task_instance": [[45, 0], [45, 13]], "task_reschedule": [[52, 0], [52, 15]]}, "mod_var_occur": {"ID_LEN": [["batch_op", "alter_column", "existing_type", "sa", "String", "length", "ID_LEN", "type_", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "sa", "String", "length", "ID_LEN", "type_", "string_id_col_type", "nullable", "False"], ["batch_op", "alter_column", "existing_type", "sa", "String", "length", "ID_LEN", "type_", "string_id_col_type", "nullable", "False"]], "airflow_version": [], "branch_labels": [], "dag_run": [["condition", "dag_run", "c", "dag_id", "target", "c", "dag_id"], ["condition", "and_", "condition", "dag_run", "c", "execution_date", "target", "c", "execution_date"], ["condition", "and_", "condition", "dag_run", "c", "run_id", "target", "c", "run_id"], ["sub_q", "select", "dag_run", "c", "column", "name", "where", "condition"], ["target", "update", "where", "condition", "values", "column", "dag_run", "c", "column", "name"]], "depends_on": [], "down_revision": [], "revision": [], "task_instance": [["update_query", "_multi_table_update", "dialect_name", "task_instance", "task_instance", "c", "run_id"], ["update_query", "_multi_table_update", "dialect_name", "task_instance", "task_instance", "c", "execution_date"]], "task_reschedule": [["update_query", "_multi_table_update", "dialect_name", "task_reschedule", "task_reschedule", "c", "run_id"], ["update_query", "_multi_table_update", "dialect_name", "task_reschedule", "task_reschedule", "c", "execution_date"]]}, "no_types_annot": {"D": 0, "I": 0, "U": 33}, "session_id": "gVxTlf1AHejpcBAbKzJ_t8bPdSZ-gNx8YMIP9m0952g", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {"ID_LEN": "", "airflow_version": "", "branch_labels": "", "dag_run": "", "depends_on": "", "down_revision": "", "revision": "", "task_instance": "", "task_reschedule": ""}, "variables_p": {"ID_LEN": [["str", 0.3258915413827824], ["Tuple[Literal, Literal]", 0.2164895690410407], ["int", 0.18317014878463822], ["List[Tuple[str, bool, Any]]", 0.09183667849215134], ["Type[int]", 0.09033255087805288]], "airflow_version": [["str", 0.6], ["List[int]", 0.1], ["bool", 0.1], ["Union[int, str]", 0.1], ["int", 0.1]], "branch_labels": [["str", 0.5], ["List[str]", 0.4], ["Tuple[Any, Any]", 0.1]], "dag_run": [["int", 0.3068594691881976], ["Dict[str, Any]", 0.10337007297496364], ["dict", 0.10314787574995041], ["float", 0.09365655449490673]], "depends_on": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]], "down_revision": [["Tuple[str, str]", 0.5], ["str", 0.4], ["Optional[str]", 0.1]], "revision": [["str", 0.9999999999999999]], "task_instance": [["List[str]", 0.13398328172926413], ["dict", 0.10631965566125592], ["Dict[str, str]", 0.09275925689659577], ["Dict[str, Any]", 0.0885642424381373]], "task_reschedule": [["List[str]", 0.1398584849697231], ["dict", 0.11269794322775555], ["Dict[str, Any]", 0.0839013212840803], ["str", 0.08011691429262832]]}}}