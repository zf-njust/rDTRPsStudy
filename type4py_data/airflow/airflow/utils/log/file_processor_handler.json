{"error": null, "response": {"classes": [{"cls_lc": [[31, 0], [150, 28]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[41, 4], [51, 44]], "fn_var_ln": {"_cur_date": [[48, 8], [48, 22]], "base_log_folder": [[44, 8], [44, 28]], "dag_dir": [[45, 8], [45, 20]], "filename_jinja_template": [[46, 37], [46, 60]], "filename_template": [[46, 13], [46, 30]], "handler": [[43, 8], [43, 20]]}, "fn_var_occur": {"_cur_date": [["self", "_cur_date", "datetime", "today"]], "base_log_folder": [["self", "base_log_folder", "base_log_folder"]], "dag_dir": [["self", "dag_dir", "os", "path", "expanduser", "settings", "DAGS_FOLDER"]], "filename_jinja_template": [["self", "filename_template", "self", "filename_jinja_template", "parse_template_string", "filename_template"]], "filename_template": [["self", "filename_template", "self", "filename_jinja_template", "parse_template_string", "filename_template"]], "handler": [["self", "handler", "None"]]}, "name": "__init__", "params": {"base_log_folder": "", "filename_template": "", "self": ""}, "params_descr": {"base_log_folder": "", "filename_template": "", "self": ""}, "params_occur": {"base_log_folder": [["self", "base_log_folder", "base_log_folder"]], "filename_template": [["self", "filename_template", "self", "filename_jinja_template", "parse_template_string", "filename_template"]], "self": [["self", "handler", "None"], ["self", "base_log_folder", "base_log_folder"], ["self", "dag_dir", "os", "path", "expanduser", "settings", "DAGS_FOLDER"], ["self", "filename_template", "self", "filename_jinja_template", "parse_template_string", "filename_template"], ["self", "_cur_date", "datetime", "today"], ["Path", "self", "_get_log_directory", "mkdir", "parents", "True", "exist_ok", "True"], ["self", "_symlink_latest_log_directory"]]}, "params_p": {"args": [], "base_log_folder": [["str", 0.3031594507577654], ["cmk.utils.type_defs.SectionName", 0.12988616947840478], ["List[str]", 0.10598482398936611], ["pathlib.Path", 0.1001909213654022], ["Optional[int]", 0.08565094579497835]], "filename_template": [["str", 0.40304863421401343], ["pathlib.Path", 0.19446981200542923], ["dict", 0.09810179277329861], ["Exception", 0.09810179277329861]], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler.__init__", "ret_exprs": [], "ret_type": "", "variables": {"_cur_date": "", "base_log_folder": "", "dag_dir": "", "filename_jinja_template": "", "filename_template": "", "handler": ""}, "variables_p": {"_cur_date": [["datetime.datetime.timedelta", 0.4790335793779395], ["datetime.datetime", 0.31810073182508497], ["datetime.timedelta", 0.10893059087619462], ["datetime.date", 0.09393509792078096]], "base_log_folder": [["str", 0.4382088886291029], ["List[Dict[str, str]]", 0.14569769076311054], ["bytes", 0.1190494645695474], ["Dict[str, Any]", 0.10738955662827583], ["dict", 0.09769462696181863]], "dag_dir": [["str", 0.5854352555736665], ["pathlib.Path", 0.3247294236113317], ["Final", 0.0898353208150018]], "filename_jinja_template": [["dict", 0.1935609063761573], ["Dict[str, None]", 0.17866968615856962], ["Set[str]", 0.11904415535364182], ["List[str]", 0.11904415535364182], ["Dict[str, Any]", 0.10906902258417266], ["str", 0.09845378046153323], ["Type[Dict[str, Any]]", 0.09282345063299867], ["Dict[str, Optional[str]]", 0.08933484307928481]], "filename_template": [["Dict[str, List[str]]", 0.20700073931692564], ["Dict[str, int]", 0.20541578153582815], ["str", 0.20372917860339557], ["Type[Dict[str, Any]]", 0.10355569199330739], ["Dict[str, Optional[int]]", 0.10270789076791408], ["Dict[str, Any]", 0.09445149496105486], ["Dict[Any, str]", 0.08313922282157431]], "handler": [["bool", 0.29739038425909714], ["str", 0.20063420887364605], ["Type[Dict[Any, Any]]", 0.10493548260651384], ["Tuple[Any, Dict[str, Any]]", 0.10267336084452491], ["float", 0.09662791989104953]]}}, {"docstring": {"func": "Provide filename context to airflow task handler.", "long_descr": null, "ret": null}, "fn_lc": [[53, 4], [68, 32]], "fn_var_ln": {"_cur_date": [[66, 12], [66, 26]], "handler": [[60, 8], [60, 20]], "local_loc": [[59, 8], [59, 17]]}, "fn_var_occur": {"_cur_date": [["self", "_cur_date", "datetime", "today"], ["self", "_cur_date", "datetime", "today"]], "handler": [["self", "handler", "NonCachingFileHandler", "local_loc"], ["self", "handler", "setFormatter", "self", "formatter"], ["self", "handler", "setLevel", "self", "level"]], "local_loc": [["local_loc", "self", "_init_file", "filename"], ["self", "handler", "NonCachingFileHandler", "local_loc"]]}, "name": "set_context", "params": {"filename": "", "self": ""}, "params_descr": {"filename": "filename in which the dag is located", "self": ""}, "params_occur": {"filename": [["local_loc", "self", "_init_file", "filename"]], "self": [["local_loc", "self", "_init_file", "filename"], ["self", "handler", "NonCachingFileHandler", "local_loc"], ["self", "handler", "setFormatter", "self", "formatter"], ["self", "handler", "setLevel", "self", "level"], ["self", "_cur_date", "datetime", "today"], ["self", "_symlink_latest_log_directory"], ["self", "_cur_date", "datetime", "today"]]}, "params_p": {"args": [], "filename": [["str", 0.804621634328553], ["Union[pathlib.Path, str]", 0.19537836567144684]], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler.set_context", "ret_exprs": ["return DISABLE_PROPOGATE"], "ret_type": "", "ret_type_p": [["bool", 0.5], ["float", 0.30000000000000004]], "variables": {"_cur_date": "", "handler": "", "local_loc": ""}, "variables_p": {"_cur_date": [["datetime.datetime.timedelta", 0.6843455678535497], ["datetime.datetime", 0.3156544321464505]], "handler": [["List[str]", 0.3097362849355833], ["list", 0.12342549643969358], ["dict", 0.11741429977169453], ["Dict[str, Type[Any]]", 0.09216395436524327], ["MutableMapping[Any, Any]", 0.08512023687945545]], "local_loc": [["int", 0.3026403764369671], ["Dict[int, Any]", 0.26842633699386087], ["Optional[List[str]]", 0.13557206673469846], ["float", 0.10234721692377972], ["str", 0.09457866083013025]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[70, 4], [72, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "emit", "params": {"record": "", "self": ""}, "params_descr": {"record": "", "self": ""}, "params_occur": {"record": [["self", "handler", "emit", "record"]], "self": [["self", "handler", "None"], ["self", "handler", "emit", "record"]]}, "params_p": {"args": [], "kwargs": [], "record": [["int", 0.30000000000000004], ["Callable", 0.2], ["str", 0.1]], "self": []}, "q_name": "FileProcessorHandler.emit", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[74, 4], [76, 32]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "flush", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "handler", "None"], ["self", "handler", "flush"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler.flush", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[78, 4], [80, 32]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "close", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "handler", "None"], ["self", "handler", "close"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler.close", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[82, 4], [102, 70]], "fn_var_ln": {"airflow_directory": [[92, 8], [92, 25]], "ctx": [[97, 8], [97, 11]], "filename": [[96, 12], [96, 20]]}, "fn_var_occur": {"airflow_directory": [["airflow_directory", "airflow", "__path__"], ["filename", "startswith", "airflow_directory"], ["filename", "os", "path", "join", "os", "path", "relpath", "filename", "airflow_directory"]], "ctx": [["ctx", "filename"], ["self", "filename_jinja_template", "render", "ctx"], ["self", "filename_template", "format", "filename", "ctx"]], "filename": [["filename", "startswith", "airflow_directory"], ["filename", "os", "path", "join", "os", "path", "relpath", "filename", "airflow_directory"], ["filename", "os", "path", "relpath", "filename", "self", "dag_dir"], ["ctx", "filename"], ["self", "filename_template", "format", "filename", "ctx"]]}, "name": "_render_filename", "params": {"filename": "", "self": ""}, "params_descr": {"filename": "", "self": ""}, "params_occur": {"filename": [["filename", "startswith", "airflow_directory"], ["filename", "os", "path", "join", "os", "path", "relpath", "filename", "airflow_directory"], ["filename", "os", "path", "relpath", "filename", "self", "dag_dir"], ["ctx", "filename"], ["self", "filename_template", "format", "filename", "ctx"]], "self": [["filename", "os", "path", "relpath", "filename", "self", "dag_dir"], ["self", "filename_jinja_template"], ["self", "filename_jinja_template", "render", "ctx"], ["self", "filename_template", "format", "filename", "ctx"]]}, "params_p": {"args": [], "filename": [["str", 0.8847682463864337], ["bool", 0.11523175361356629]], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler._render_filename", "ret_exprs": ["return self.filename_jinja_template.render(**ctx)", "return self.filename_template.format(filename=ctx[\"filename\"])"], "ret_type": "", "ret_type_p": [["List[List[int]]", 0.11837571977250787], ["Optional[str]", 0.11083199872718448], ["str", 0.10808334235529699], ["bool", 0.09116805353893645], ["bytes", 0.09086426916546644], ["Optional[\"AbstractPurpose\"]", 0.09000753703237685]], "variables": {"airflow_directory": "", "ctx": "", "filename": ""}, "variables_p": {"airflow_directory": [["str", 0.8448565685523516], ["Dict[str, str]", 0.15514343144764833]], "ctx": [["str", 0.36176772917661904], ["List[str]", 0.19608126688663888], ["Dict[str, Dict[str, Any]]", 0.1150414042327885], ["dict", 0.09018990822278074], ["Set[str]", 0.08976216006149856]], "filename": [["str", 0.9999999999999998]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[104, 4], [107, 75]], "fn_var_ln": {"now": [[105, 8], [105, 11]]}, "fn_var_occur": {"now": [["now", "datetime", "utcnow"], ["os", "path", "join", "self", "base_log_folder", "now", "strftime"]]}, "name": "_get_log_directory", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["os", "path", "join", "self", "base_log_folder", "now", "strftime"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler._get_log_directory", "ret_exprs": ["return os.path.join(self.base_log_folder, now.strftime(\"%Y-%m-%d\"))"], "ret_type": "", "ret_type_p": [["str", 0.8825775789640808], ["bool", 0.1174224210359191]], "variables": {"now": ""}, "variables_p": {"now": [["int", 0.29690391201526223], ["str", 0.19420678168046407], ["Dict[str, str]", 0.09338684882048051]]}}, {"docstring": {"func": "Create symbolic link to the current day's log directory to", "long_descr": "allow easy access to the latest scheduler log files.", "ret": "None"}, "fn_lc": [[109, 4], [132, 95]], "fn_var_ln": {"latest_log_directory_path": [[117, 8], [117, 33]], "log_directory": [[116, 8], [116, 21]]}, "fn_var_occur": {"latest_log_directory_path": [["latest_log_directory_path", "os", "path", "join", "self", "base_log_folder"], ["os", "path", "islink", "latest_log_directory_path"], ["os", "readlink", "latest_log_directory_path", "log_directory"], ["os", "unlink", "latest_log_directory_path"], ["os", "symlink", "log_directory", "latest_log_directory_path"], ["os", "path", "isdir", "latest_log_directory_path", "os", "path", "isfile", "latest_log_directory_path"], ["logging", "warning", "latest_log_directory_path"], ["os", "symlink", "log_directory", "latest_log_directory_path"]], "log_directory": [["log_directory", "self", "_get_log_directory"], ["os", "path", "isdir", "log_directory"], ["os", "readlink", "latest_log_directory_path", "log_directory"], ["os", "symlink", "log_directory", "latest_log_directory_path"], ["os", "symlink", "log_directory", "latest_log_directory_path"]]}, "name": "_symlink_latest_log_directory", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["log_directory", "self", "_get_log_directory"], ["latest_log_directory_path", "os", "path", "join", "self", "base_log_folder"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler._symlink_latest_log_directory", "ret_exprs": [], "ret_type": "", "variables": {"latest_log_directory_path": "", "log_directory": ""}, "variables_p": {"latest_log_directory_path": [["str", 0.37880491859480986]], "log_directory": [["str", 0.45366530123835463], ["logging.LogRecord", 0.1778973806964356], ["List[str]", 0.15864733894343314], ["int", 0.10861446022026065], ["list", 0.10117551890151583]]}}, {"docstring": {"func": "Create log file and directory if required.", "long_descr": null, "ret": "relative log path of the given task instance"}, "fn_lc": [[134, 4], [150, 28]], "fn_var_ln": {"directory": [[143, 8], [143, 17]], "log_file_path": [[142, 8], [142, 21]], "relative_log_file_path": [[141, 8], [141, 30]]}, "fn_var_occur": {"directory": [["directory", "os", "path", "dirname", "log_file_path"], ["Path", "directory", "mkdir", "parents", "True", "exist_ok", "True"]], "log_file_path": [["log_file_path", "os", "path", "abspath", "relative_log_file_path"], ["directory", "os", "path", "dirname", "log_file_path"], ["os", "path", "exists", "log_file_path"], ["open", "log_file_path", "close"]], "relative_log_file_path": [["relative_log_file_path", "os", "path", "join", "self", "_get_log_directory", "self", "_render_filename", "filename"], ["log_file_path", "os", "path", "abspath", "relative_log_file_path"]]}, "name": "_init_file", "params": {"filename": "", "self": ""}, "params_descr": {"filename": "task instance object", "self": ""}, "params_occur": {"filename": [["relative_log_file_path", "os", "path", "join", "self", "_get_log_directory", "self", "_render_filename", "filename"]], "self": [["relative_log_file_path", "os", "path", "join", "self", "_get_log_directory", "self", "_render_filename", "filename"]]}, "params_p": {"args": [], "filename": [["str", 1.0]], "kwargs": [], "self": []}, "q_name": "FileProcessorHandler._init_file", "ret_exprs": ["return log_file_path"], "ret_type": "", "ret_type_p": [["str", 0.7182851833843928], ["pathlib.Path", 0.2817148166156071]], "variables": {"directory": "", "log_file_path": "", "relative_log_file_path": ""}, "variables_p": {"directory": [["str", 0.9138507506440748], ["List[str]", 0.08614924935592533]], "log_file_path": [["str", 1.0]], "relative_log_file_path": [["str", 1.0000000000000002]]}}], "name": "FileProcessorHandler", "q_name": "FileProcessorHandler", "variables": {}, "variables_p": {}}], "funcs": [], "imports": ["__future__", "annotations", "logging", "os", "datetime", "datetime", "pathlib", "Path", "airflow", "settings", "airflow", "utils", "helpers", "parse_template_string", "airflow", "utils", "log", "logging_mixin", "DISABLE_PROPOGATE", "airflow", "utils", "log", "non_caching_file_handler", "NonCachingFileHandler", "airflow"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 0, "I": 0, "U": 30}, "session_id": "uplFXdF6xFY3Sgh39CGVxFgRc9x_Er6zg58rA3fHzlo", "set": null, "tc": [false, null], "type_annot_cove": 0.0, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}