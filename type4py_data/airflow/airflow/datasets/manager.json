{"error": null, "response": {"classes": [{"cls_lc": [[35, 0], [110, 9]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[43, 4], [44, 34]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__init__", "params": {"kwargs": "", "self": ""}, "params_descr": {"kwargs": "", "self": ""}, "params_occur": {"kwargs": [["super", "__init__", "kwargs"]], "self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "DatasetManager.__init__", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Register dataset related changes.", "long_descr": "For local datasets, look them up, record the dataset event, queue dagruns, and broadcast\nthe dataset event", "ret": null}, "fn_lc": [[46, 4], [73, 23]], "fn_var_ln": {"dataset_model": [[55, 8], [55, 21]]}, "fn_var_occur": {"dataset_model": [["dataset_model", "session", "query", "DatasetModel", "filter", "DatasetModel", "uri", "dataset", "uri", "one_or_none"], ["session", "add", "DatasetEvent", "dataset_id", "dataset_model", "id", "source_task_id", "task_instance", "task_id", "source_dag_id", "task_instance", "dag_id", "source_run_id", "task_instance", "run_id", "source_map_index", "task_instance", "map_index", "extra", "extra"], ["dataset_model", "consuming_dags"], ["self", "_queue_dagruns", "dataset_model", "session"]]}, "name": "register_dataset_change", "params": {"dataset": "airflow.datasets.Dataset", "extra": "", "kwargs": "", "self": "", "session": "sqlalchemy.orm.session.Session", "task_instance": "airflow.models.taskinstance.TaskInstance"}, "params_descr": {"dataset": "", "extra": "", "kwargs": "", "self": "", "session": "", "task_instance": ""}, "params_occur": {"dataset": [["dataset_model", "session", "query", "DatasetModel", "filter", "DatasetModel", "uri", "dataset", "uri", "one_or_none"], ["self", "log", "warning", "dataset"]], "extra": [["session", "add", "DatasetEvent", "dataset_id", "dataset_model", "id", "source_task_id", "task_instance", "task_id", "source_dag_id", "task_instance", "dag_id", "source_run_id", "task_instance", "run_id", "source_map_index", "task_instance", "map_index", "extra", "extra"]], "kwargs": [], "self": [["self", "log", "warning", "dataset"], ["self", "_queue_dagruns", "dataset_model", "session"]], "session": [["dataset_model", "session", "query", "DatasetModel", "filter", "DatasetModel", "uri", "dataset", "uri", "one_or_none"], ["session", "add", "DatasetEvent", "dataset_id", "dataset_model", "id", "source_task_id", "task_instance", "task_id", "source_dag_id", "task_instance", "dag_id", "source_run_id", "task_instance", "run_id", "source_map_index", "task_instance", "map_index", "extra", "extra"], ["session", "flush"], ["self", "_queue_dagruns", "dataset_model", "session"], ["session", "flush"]], "task_instance": [["session", "add", "DatasetEvent", "dataset_id", "dataset_model", "id", "source_task_id", "task_instance", "task_id", "source_dag_id", "task_instance", "dag_id", "source_run_id", "task_instance", "run_id", "source_map_index", "task_instance", "map_index", "extra", "extra"]]}, "params_p": {"args": [], "dataset": [["zerver.models.UserProfile", 0.19334053978904356], ["abilian.services.security.models.Permission", 0.11113528636196085], ["abilian.services.security.models.Role", 0.11113528636196085], ["django.contrib.auth.models.AbstractUser", 0.10589511610722412], ["asgard.models.user.User", 0.09868179223545487], ["str", 0.09532770623737012], ["accounts.models.Account", 0.0889518750262205]], "extra": [["str", 0.20388233552372065], ["Dict[str, Any]", 0.18105538973912474], ["bool", 0.12423418009355632], ["core.models.MyUser", 0.11216842404870536], ["Dict[str, taskiapplication.models.task.Task]", 0.09998256898438564], ["Callable[[Type, str], bool]", 0.09304994447183226], ["sqlalchemy.orm.Session", 0.09176904969912571]], "kwargs": [], "self": [], "session": [["Dict[str, Any]", 0.19624224248424857], ["OrderedDict", 0.10196544548871861], ["django.db.models.QuerySet", 0.09709728468317852], ["django.db.models.query.QuerySet", 0.09645656498078076], ["str", 0.09322381707318379]], "task_instance": [["str", 0.20388233552372065], ["Dict[str, Any]", 0.18105538973912474], ["bool", 0.12423418009355632], ["core.models.MyUser", 0.11216842404870536], ["Dict[str, taskiapplication.models.task.Task]", 0.09998256898438564], ["Callable[[Type, str], bool]", 0.09304994447183226], ["sqlalchemy.orm.Session", 0.09176904969912571]]}, "q_name": "DatasetManager.register_dataset_change", "ret_exprs": ["return"], "ret_type": "None", "ret_type_p": [["Union[tuple, list]", 0.12326783261663934], ["List[int]", 0.09124591253820835], ["Dict[str, Any]", 0.08769568774684897], ["str", 0.08682447752895113]], "variables": {"dataset_model": ""}, "variables_p": {"dataset_model": [["app.models.LoginModel", 0.5638593864857351], ["list", 0.13452287353951842], ["dict", 0.12249550468253939], ["List[str]", 0.09035054965437567]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[75, 4], [87, 62]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_queue_dagruns", "params": {"dataset": "airflow.models.dataset.DatasetModel", "self": "", "session": "sqlalchemy.orm.session.Session"}, "params_descr": {"dataset": "", "self": "", "session": ""}, "params_occur": {"dataset": [["self", "_postgres_queue_dagruns", "dataset", "session"], ["self", "_slow_path_queue_dagruns", "dataset", "session"]], "self": [["self", "_postgres_queue_dagruns", "dataset", "session"], ["self", "_slow_path_queue_dagruns", "dataset", "session"]], "session": [["session", "bind", "dialect", "name"], ["self", "_postgres_queue_dagruns", "dataset", "session"], ["self", "_slow_path_queue_dagruns", "dataset", "session"]]}, "params_p": {"args": [], "dataset": [["str", 0.4971739991422027], ["bytes", 0.1436187794342276], ["Optional[str]", 0.08793265509044232], ["bool", 0.08495903951198143]], "kwargs": [], "self": [], "session": [["dict", 0.3046080507961132], ["Mapping[str, Any]", 0.08840113451051343], ["bytes", 0.08673938335820644]]}, "q_name": "DatasetManager._queue_dagruns", "ret_exprs": ["return self._postgres_queue_dagruns(dataset, session)", "return self._slow_path_queue_dagruns(dataset, session)"], "ret_type": "None", "ret_type_p": [["str", 0.20694244258880623]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[89, 4], [101, 73]], "fn_var_ln": {"consuming_dag_ids": [[90, 8], [90, 25]], "item": [[96, 12], [96, 16]]}, "fn_var_occur": {"consuming_dag_ids": [["consuming_dag_ids", "x", "dag_id", "x", "dataset", "consuming_dags"], ["self", "log", "debug", "consuming_dag_ids"]], "item": [["item", "DatasetDagRunQueue", "target_dag_id", "dag_id", "dataset_id", "dataset", "id"], ["session", "merge", "item"], ["self", "log", "debug", "item", "exc_info", "True"]]}, "name": "_slow_path_queue_dagruns", "params": {"dataset": "airflow.models.dataset.DatasetModel", "self": "", "session": "sqlalchemy.orm.session.Session"}, "params_descr": {"dataset": "", "self": "", "session": ""}, "params_occur": {"dataset": [["consuming_dag_ids", "x", "dag_id", "x", "dataset", "consuming_dags"], ["item", "DatasetDagRunQueue", "target_dag_id", "dag_id", "dataset_id", "dataset", "id"]], "self": [["self", "log", "debug", "consuming_dag_ids"], ["self", "log", "debug", "item", "exc_info", "True"]], "session": [["session", "begin_nested"], ["session", "merge", "item"]]}, "params_p": {"args": [], "dataset": [["dict", 0.20876150379092623], ["raiden.utils.Dict[str, raiden.utils.Any]", 0.10749705449290041], ["Sequence", 0.10315353711833954], ["int", 0.09912032017759811], ["raiden.utils.signer.Signer", 0.09791227689734594], ["float", 0.09078767338065809]], "kwargs": [], "self": [], "session": [["str", 0.29754458972665], ["Mapping[str, List[Any]]", 0.10913686628543674], ["Session", 0.10653966175706565], ["recidiviz.persistence.database.session.Session", 0.09898873286333265], ["mwapi.Session", 0.09124064878582254]]}, "q_name": "DatasetManager._slow_path_queue_dagruns", "ret_exprs": [], "ret_type": "None", "variables": {"consuming_dag_ids": "", "item": ""}, "variables_p": {"consuming_dag_ids": [["int", 0.7154451891791445], ["List[int]", 0.1914781294042076], ["Optional[str]", 0.09307668141664782]], "item": [["str", 0.20221994716857616], ["Dict[str, str]", 0.11046189612020028], ["sensibility.miner.models.RepositoryMetadata", 0.1020261524451574], ["Dict[str, Any]", 0.09591805904532699], ["list", 0.0931449658271944]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[103, 4], [110, 9]], "fn_var_ln": {"stmt": [[106, 8], [106, 12]]}, "fn_var_occur": {"stmt": [["stmt", "insert", "DatasetDagRunQueue", "values", "dataset_id", "dataset", "id", "on_conflict_do_nothing"], ["session", "execute", "stmt", "target_dag", "dag_id", "target_dag", "dataset", "consuming_dags"]]}, "name": "_postgres_queue_dagruns", "params": {"dataset": "airflow.models.dataset.DatasetModel", "self": "", "session": "sqlalchemy.orm.session.Session"}, "params_descr": {"dataset": "", "self": "", "session": ""}, "params_occur": {"dataset": [["stmt", "insert", "DatasetDagRunQueue", "values", "dataset_id", "dataset", "id", "on_conflict_do_nothing"], ["session", "execute", "stmt", "target_dag", "dag_id", "target_dag", "dataset", "consuming_dags"]], "self": [], "session": [["session", "execute", "stmt", "target_dag", "dag_id", "target_dag", "dataset", "consuming_dags"]]}, "params_p": {"args": [], "dataset": [["Optional[mwapi.Session]", 0.1309284468930971], ["sqlalchemy.orm.scoping.scoped_session", 0.09466759660068484], ["sqlalchemy.orm.Session", 0.09137631221093717]], "kwargs": [], "self": [], "session": [["str", 0.17569296019579295]]}, "q_name": "DatasetManager._postgres_queue_dagruns", "ret_exprs": [], "ret_type": "None", "variables": {"stmt": ""}, "variables_p": {"stmt": [["golem.rpc.session.WebSocketAddress", 0.10670142607806675], ["str", 0.09789118596795841], ["Dict[str, Callable]", 0.0887224249251854], ["dict", 0.08751651839362042]]}}], "name": "DatasetManager", "q_name": "DatasetManager", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": "Retrieve the dataset manager.", "long_descr": null, "ret": null}, "fn_lc": [[113, 0], [125, 60]], "fn_var_ln": {"_dataset_manager_class": [[115, 4], [115, 26]], "_dataset_manager_kwargs": [[120, 4], [120, 27]]}, "fn_var_occur": {"_dataset_manager_class": [["_dataset_manager_class", "conf", "getimport", "section", "key", "fallback"], ["_dataset_manager_class", "_dataset_manager_kwargs"]], "_dataset_manager_kwargs": [["_dataset_manager_kwargs", "conf", "getjson", "section", "key", "fallback"], ["_dataset_manager_class", "_dataset_manager_kwargs"]]}, "name": "resolve_dataset_manager", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "resolve_dataset_manager", "ret_exprs": ["return _dataset_manager_class(**_dataset_manager_kwargs)"], "ret_type": "DatasetManager", "ret_type_p": [["str", 0.7320504930175407], ["int", 0.18573653137582039], ["Tuple[str, str]", 0.08221297560663897]], "variables": {"_dataset_manager_class": "", "_dataset_manager_kwargs": ""}, "variables_p": {"_dataset_manager_class": [["Dict[str, str]", 0.21911017607109137], ["List[str]", 0.18978837016615713], ["Optional[magic.models.deck.Deck]", 0.1878281787406026], ["dict", 0.10400583936021882], ["Dict[str, Union[int, str]]", 0.09760280306340655]], "_dataset_manager_kwargs": [["dict", 0.2935102299987748], ["Mapping[str, Any]", 0.21530291976282687], ["Dict[str, Any]", 0.10530404546632133], ["set", 0.10242704482946036], ["Dict[int, Any]", 0.09818807618485832], ["Dict[str, float]", 0.0924990170709549]]}}], "imports": ["__future__", "annotations", "typing", "TYPE_CHECKING", "sqlalchemy", "exc", "sqlalchemy", "orm", "session", "Session", "airflow", "configuration", "conf", "airflow", "datasets", "Dataset", "airflow", "models", "dataset", "DatasetDagRunQueue", "DatasetEvent", "DatasetModel", "airflow", "stats", "Stats", "airflow", "utils", "log", "logging_mixin", "LoggingMixin", "airflow", "models", "taskinstance", "TaskInstance", "sqlalchemy", "dialects", "postgresql", "insert"], "mod_var_ln": {"dataset_manager": [[128, 0], [128, 15]]}, "mod_var_occur": {"dataset_manager": []}, "no_types_annot": {"D": 14, "I": 0, "U": 11}, "session_id": "ialP8ZobsXzAHZsIQJ6TLe-zdDq17-c7Uo7AzjO8IqE", "set": null, "tc": [false, null], "type_annot_cove": 0.56, "typed_seq": "", "untyped_seq": "", "variables": {"dataset_manager": ""}, "variables_p": {"dataset_manager": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]]}}}