{"error": null, "response": {"classes": [{"cls_lc": [[168, 0], [178, 44]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[176, 4], [178, 44]], "fn_var_ln": {"exception": [[177, 8], [177, 22]], "traceback": [[178, 8], [178, 22]]}, "fn_var_occur": {"exception": [["self", "exception", "exception"]], "traceback": [["self", "traceback", "exception_traceback"]]}, "name": "__init__", "params": {"exception": "builtins.Exception", "exception_traceback": "builtins.str", "self": ""}, "params_descr": {"exception": "", "exception_traceback": "", "self": ""}, "params_occur": {"exception": [["self", "exception", "exception"]], "exception_traceback": [["self", "traceback", "exception_traceback"]], "self": [["self", "exception", "exception"], ["self", "traceback", "exception_traceback"]]}, "params_p": {"args": [], "exception": [["str", 0.21592389591498468], ["tuple", 0.12020079012286534], ["list", 0.09029123674753992], ["dict", 0.09029123674753992], ["Dict[str, Any]", 0.08508642325712308]], "exception_traceback": [["str", 0.21592389591498468], ["tuple", 0.12020079012286534], ["list", 0.09029123674753992], ["dict", 0.09029123674753992], ["Dict[str, Any]", 0.08508642325712308]], "kwargs": [], "self": []}, "q_name": "ExceptionWithTraceback.__init__", "ret_exprs": [], "ret_type": "", "variables": {"exception": "", "traceback": ""}, "variables_p": {"exception": [["OSError", 0.313554444912691], ["float", 0.21079274501774253], ["bool", 0.10824987748757253], ["Final", 0.10001557607402708], ["dict", 0.08937949797423017], ["str", 0.08905112870771538], ["int", 0.08895672982602114]], "traceback": [["str", 0.30000000000000004], ["Dict[str, Any]", 0.1], ["dict", 0.1], ["int", 0.1]]}}], "name": "ExceptionWithTraceback", "q_name": "ExceptionWithTraceback", "variables": {}, "variables_p": {}}, {"cls_lc": [[218, 0], [305, 41]], "cls_var_ln": {}, "cls_var_occur": {}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[227, 4], [229, 49]], "fn_var_ln": {"_sync_parallelism": [[229, 8], [229, 30]]}, "fn_var_occur": {"_sync_parallelism": [["self", "_sync_parallelism", "sync_parallelism"]]}, "name": "__init__", "params": {"self": "", "sync_parallelism": ""}, "params_descr": {"self": "", "sync_parallelism": ""}, "params_occur": {"self": [["self", "_sync_parallelism", "sync_parallelism"]], "sync_parallelism": [["self", "_sync_parallelism", "sync_parallelism"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "sync_parallelism": [["int", 0.3], ["bool", 0.09999999999999999], ["float", 0.09999999999999999]]}, "q_name": "BulkStateFetcher.__init__", "ret_exprs": [], "ret_type": "", "variables": {"_sync_parallelism": ""}, "variables_p": {"_sync_parallelism": [["str", 0.30000000000000004], ["Dict[str, Any]", 0.1], ["dict", 0.1], ["int", 0.1]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[231, 4], [232, 47]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_tasks_list_to_task_ids", "params": {"async_tasks": "", "self": ""}, "params_descr": {"async_tasks": "", "self": ""}, "params_occur": {"async_tasks": [["a", "task_id", "a", "async_tasks"]], "self": []}, "params_p": {"args": [], "async_tasks": [["int", 0.23518111504543127], ["nufb.task.Task", 0.1084403017379677], ["Task", 0.09638467387172032], ["Callable[[str, str], None]", 0.09260264930767644], ["Optional[str]", 0.08634430580013905], ["str", 0.08094896407257045]], "kwargs": [], "self": []}, "q_name": "BulkStateFetcher._tasks_list_to_task_ids", "ret_exprs": ["return {a.task_id for a in async_tasks}"], "ret_type": "builtins.set[builtins.str]", "ret_type_p": [["List[str]", 0.394145691427281], ["Iterable", 0.10239576571845825], ["Tuple[List[Any], List[int]]", 0.10031727401399114], ["list", 0.09864183445461557], ["bool", 0.09852013330365589]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Gets status for many Celery tasks using the best method available.", "long_descr": null, "ret": null}, "fn_lc": [[234, 4], [243, 21]], "fn_var_ln": {"result": [[241, 12], [241, 18]]}, "fn_var_occur": {"result": [["result", "self", "_get_many_from_kv_backend", "async_results"], ["result", "self", "_get_many_from_db_backend", "async_results"], ["result", "self", "_get_many_using_multiprocessing", "async_results"], ["self", "log", "debug", "len", "result", "len", "async_results"]]}, "name": "get_many", "params": {"async_results": "", "self": ""}, "params_descr": {"async_results": "", "self": ""}, "params_occur": {"async_results": [["result", "self", "_get_many_from_kv_backend", "async_results"], ["result", "self", "_get_many_from_db_backend", "async_results"], ["result", "self", "_get_many_using_multiprocessing", "async_results"], ["self", "log", "debug", "len", "result", "len", "async_results"]], "self": [["result", "self", "_get_many_from_kv_backend", "async_results"], ["result", "self", "_get_many_from_db_backend", "async_results"], ["result", "self", "_get_many_using_multiprocessing", "async_results"], ["self", "log", "debug", "len", "result", "len", "async_results"]]}, "params_p": {"args": [], "async_results": [["Iterable[str]", 0.22787882155595857], ["str", 0.10006354872158035], ["Optional[Mapping[str, Any]]", 0.09814915135050702], ["Dict[str, Any]", 0.09671609772129852], ["Set[cmk.utils.type_defs.ParsedSectionName]", 0.09517949730769208], ["cmk.base.checkers.host_sections.MultiHostSections", 0.09517949730769208], ["List[Tuple[str, int]]", 0.09298739683851726], ["Optional[str]", 0.0909367788169838]], "kwargs": [], "self": []}, "q_name": "BulkStateFetcher.get_many", "ret_exprs": ["return result"], "ret_type": "typing.Mapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "ret_type_p": [["str", 0.41339841090160767], ["bool", 0.1865395009526601], ["dict", 0.10648378024087071], ["set", 0.10317155608727142], ["List[str]", 0.09624893027453736]], "variables": {"result": ""}, "variables_p": {"result": [["Tuple[bool, float]", 0.21049786661221548]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[245, 4], [252, 91]], "fn_var_ln": {"keys": [[247, 8], [247, 12]], "task_ids": [[246, 8], [246, 16]], "task_results": [[249, 8], [249, 20]], "task_results_by_task_id": [[250, 8], [250, 31]], "values": [[248, 8], [248, 14]]}, "fn_var_occur": {"keys": [["keys", "app", "backend", "get_key_for_task", "k", "k", "task_ids"], ["values", "app", "backend", "mget", "keys"]], "task_ids": [["task_ids", "self", "_tasks_list_to_task_ids", "async_tasks"], ["keys", "app", "backend", "get_key_for_task", "k", "k", "task_ids"], ["self", "_prepare_state_and_info_by_task_dict", "task_ids", "task_results_by_task_id"]], "task_results": [["task_results", "app", "backend", "decode_result", "v", "v", "values", "v"], ["task_results_by_task_id", "task_result", "task_result", "task_result", "task_results"]], "task_results_by_task_id": [["task_results_by_task_id", "task_result", "task_result", "task_result", "task_results"], ["self", "_prepare_state_and_info_by_task_dict", "task_ids", "task_results_by_task_id"]], "values": [["values", "app", "backend", "mget", "keys"], ["task_results", "app", "backend", "decode_result", "v", "v", "values", "v"]]}, "name": "_get_many_from_kv_backend", "params": {"async_tasks": "", "self": ""}, "params_descr": {"async_tasks": "", "self": ""}, "params_occur": {"async_tasks": [["task_ids", "self", "_tasks_list_to_task_ids", "async_tasks"]], "self": [["task_ids", "self", "_tasks_list_to_task_ids", "async_tasks"], ["self", "_prepare_state_and_info_by_task_dict", "task_ids", "task_results_by_task_id"]]}, "params_p": {"args": [], "async_tasks": [["str", 0.20200539853134614], ["asyncio.Task[Any]", 0.1521854422553397], ["Dict[str, taskiapplication.models.task.Task]", 0.12070887552292411], ["pc.data.Task", 0.09498492745080103], ["bytes", 0.08838516673874611], ["Dict[str, Any]", 0.08387149132789941]], "kwargs": [], "self": []}, "q_name": "BulkStateFetcher._get_many_from_kv_backend", "ret_exprs": ["return self._prepare_state_and_info_by_task_dict(task_ids, task_results_by_task_id)"], "ret_type": "typing.Mapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "ret_type_p": [["bool", 0.3051770930847969], ["str", 0.11754914545725394], ["zerver.models.Realm", 0.10583121023680579], ["app.models.Tweet", 0.09039307497183328], ["app.models.Position", 0.09039307497183328], ["int", 0.08767329157495284]], "variables": {"keys": "", "task_ids": "", "task_results": "", "task_results_by_task_id": "", "values": ""}, "variables_p": {"keys": [["str", 0.6878067650000075], ["Dict[str, Any]", 0.09177150639475819]], "task_ids": [["str", 0.3611835136154926], ["cmk.utils.type_defs.UserId", 0.1503105482060407], ["Dict[str, Any]", 0.12958020940265538], ["Dict[int, str]", 0.09026194553041703], ["cmk.base.api.agent_based.checking_classes.state", 0.09001100581539792], ["int", 0.08954565493143894]], "task_results": [["dict", 0.2043589415257178], ["Dict[str, Any]", 0.19600083157946105], ["tagdir.models.Attr", 0.09785597895961096]], "task_results_by_task_id": [["str", 0.6567069722409893], ["jumeaux.models.DiffKeys", 0.09303074931319484], ["Food.models.Product", 0.08839815050485396], ["Dict[str, str]", 0.082566787181111]], "values": [["dict", 0.11373127629092476], ["Type[manager.accounts.models.AccountTeam]", 0.10010056145667477], ["app.models.Item", 0.08848814443511392], ["tuple", 0.08447886588161511]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[255, 4], [259, 87]], "fn_var_ln": {"session": [[256, 8], [256, 15]], "task_cls": [[257, 8], [257, 16]]}, "fn_var_occur": {"session": [["session", "app", "backend", "ResultSession"], ["session_cleanup", "session"], ["session", "query", "task_cls", "filter", "task_cls", "task_id", "in_", "task_ids", "all"]], "task_cls": [["task_cls", "getattr", "app", "backend", "TaskDb"], ["session", "query", "task_cls", "filter", "task_cls", "task_id", "in_", "task_ids", "all"]]}, "name": "_query_task_cls_from_db_backend", "params": {"kwargs": "", "self": "", "task_ids": ""}, "params_descr": {"kwargs": "", "self": "", "task_ids": ""}, "params_occur": {"kwargs": [], "self": [], "task_ids": [["session", "query", "task_cls", "filter", "task_cls", "task_id", "in_", "task_ids", "all"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "task_ids": [["str", 0.5004503891919306], ["cmk.utils.type_defs.UserId", 0.11121806089298823], ["int", 0.09715292221440568], ["transfer.models.TopicID", 0.09380619094300334]]}, "q_name": "BulkStateFetcher._query_task_cls_from_db_backend", "ret_exprs": ["return session.query(task_cls).filter(task_cls.task_id.in_(task_ids)).all()"], "ret_type": "", "ret_type_p": [["bool", 0.12331890179858747], ["zerver.models.UserProfile", 0.10537429204968807]], "variables": {"session": "", "task_cls": ""}, "variables_p": {"session": [["app.models.lawn.Lawn", 0.09728019872673245], ["dict", 0.0932023575944696]], "task_cls": [["Dict[str, Union[Any, Any, Any]]", 0.1921137846788522], ["Optional[grouper.models.user.User]", 0.1387807308323183]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[261, 4], [267, 91]], "fn_var_ln": {"task_ids": [[262, 8], [262, 16]], "task_results": [[264, 8], [264, 20]], "task_results_by_task_id": [[265, 8], [265, 31]], "tasks": [[263, 8], [263, 13]]}, "fn_var_occur": {"task_ids": [["task_ids", "self", "_tasks_list_to_task_ids", "async_tasks"], ["tasks", "self", "_query_task_cls_from_db_backend", "task_ids"], ["self", "_prepare_state_and_info_by_task_dict", "task_ids", "task_results_by_task_id"]], "task_results": [["task_results", "app", "backend", "meta_from_decoded", "task", "to_dict", "task", "tasks"], ["task_results_by_task_id", "task_result", "task_result", "task_result", "task_results"]], "task_results_by_task_id": [["task_results_by_task_id", "task_result", "task_result", "task_result", "task_results"], ["self", "_prepare_state_and_info_by_task_dict", "task_ids", "task_results_by_task_id"]], "tasks": [["tasks", "self", "_query_task_cls_from_db_backend", "task_ids"], ["task_results", "app", "backend", "meta_from_decoded", "task", "to_dict", "task", "tasks"]]}, "name": "_get_many_from_db_backend", "params": {"async_tasks": "", "self": ""}, "params_descr": {"async_tasks": "", "self": ""}, "params_occur": {"async_tasks": [["task_ids", "self", "_tasks_list_to_task_ids", "async_tasks"]], "self": [["task_ids", "self", "_tasks_list_to_task_ids", "async_tasks"], ["tasks", "self", "_query_task_cls_from_db_backend", "task_ids"], ["self", "_prepare_state_and_info_by_task_dict", "task_ids", "task_results_by_task_id"]]}, "params_p": {"args": [], "async_tasks": [["Dict[str, Any]", 0.19960639247039236], ["int", 0.15368442002257623], ["str", 0.11278780517079195], ["models.Task", 0.10245401383243187], ["Dict[str, taskiapplication.models.task.Task]", 0.0946910649008897], ["bytes", 0.08671876952614531], ["nufb.task.Task", 0.08147710754796163]], "kwargs": [], "self": []}, "q_name": "BulkStateFetcher._get_many_from_db_backend", "ret_exprs": ["return self._prepare_state_and_info_by_task_dict(task_ids, task_results_by_task_id)"], "ret_type": "typing.Mapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "ret_type_p": [["bool", 0.22261541819355463], ["app.models.Tweet", 0.10628719931030957], ["app.models.Position", 0.10628719931030957], ["zerver.models.Realm", 0.10111569977756034], ["str", 0.09512690625085332], ["Optional[str]", 0.08199592226754633]], "variables": {"task_ids": "", "task_results": "", "task_results_by_task_id": "", "tasks": ""}, "variables_p": {"task_ids": [["str", 0.3827096672285377], ["int", 0.1634342152042205], ["bool", 0.08023807324551843]], "task_results": [["Dict[str, Any]", 0.20834249215985212], ["golem.task.taskbase.Task", 0.19934900405235173], ["circle_core.models.cc_info.CcInfo", 0.09825786297050466], ["str", 0.09629652685969228], ["grpy.core.models.User", 0.0962266959920098]], "task_results_by_task_id": [["str", 0.6567069722409893], ["jumeaux.models.DiffKeys", 0.09303074931319484], ["Food.models.Product", 0.08839815050485396], ["Dict[str, str]", 0.082566787181111]], "tasks": [["Dict[Any, Dict[str, Any]]", 0.3199443441692937], ["Dict[str, Literal]", 0.21002630167676575], ["Dict[str, dict]", 0.09407625225534358], ["Type[str]", 0.09373667525232884], ["Dict[Type[Any], Type[Any]]", 0.08652747896282313]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[270, 4], [283, 25]], "fn_var_ln": {"info": [[281, 16], [281, 20]], "state": [[280, 16], [280, 21]], "state_info": [[273, 8], [273, 18]], "task_result": [[275, 12], [275, 23]]}, "fn_var_occur": {"info": [["info", "None", "hasattr", "task_result", "task_result"], ["info", "None"], ["state_info", "task_id", "state", "info"]], "state": [["state", "task_result"], ["state", "celery_states", "PENDING"], ["state_info", "task_id", "state", "info"]], "state_info": [["state_info", "typing", "MutableMapping", "builtins", "str", "airflow", "executors", "base_executor", "EventBufferValueType"], ["state_info", "task_id", "state", "info"]], "task_result": [["task_result", "task_results_by_task_id", "get", "task_id"], ["state", "task_result"], ["info", "None", "hasattr", "task_result", "task_result"]]}, "name": "_prepare_state_and_info_by_task_dict", "params": {"task_ids": "", "task_results_by_task_id": ""}, "params_descr": {"task_ids": "", "task_results_by_task_id": ""}, "params_occur": {"task_ids": [], "task_results_by_task_id": [["task_result", "task_results_by_task_id", "get", "task_id"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "task_ids": [["str", 0.6920598485971496], ["bool", 0.11588030280570047], ["List[Tuple[str, ...]]", 0.11588030280570047], ["List[str]", 0.0761795457914493]], "task_results_by_task_id": [["int", 0.46890127132669407], ["str", 0.3187424204576955], ["transfer.models.OrderID", 0.08867103716003981]]}, "q_name": "BulkStateFetcher._prepare_state_and_info_by_task_dict", "ret_exprs": ["return state_info"], "ret_type": "typing.Mapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "ret_type_p": [["bool", 0.1273840215797048], ["dict", 0.11114136695135422], ["int", 0.0987416814677341], ["zerver.models.UserProfile", 0.08896145293760892]], "variables": {"info": "", "state": "", "state_info": "typing.MutableMapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "task_result": ""}, "variables_p": {"info": [["List[Dict[str, Any]]", 0.40184258762615377], ["Set[str]", 0.12375049751315953], ["dict", 0.12073952839480677], ["List[str]", 0.09486711004184348], ["Dict[str, str]", 0.090816778018424], ["set", 0.08621840717583787], ["list", 0.08176509122977464]], "state": [["int", 0.24719018825587688], ["list", 0.13939708765718684], ["radio.models.PlaybackState", 0.0874788185992463], ["Dict[bool, str]", 0.0751124297000718], ["Dict[str, Optional[str]]", 0.07403371797206207]], "state_info": [["str", 0.473149869219409], ["MutableMapping[str, Any]", 0.238070281445303], ["Dict[str, str]", 0.17346063859449173], ["Mapping[str, Sequence[Any]]", 0.11531921074079632]], "task_result": [["mindgraph.graph.Task", 0.20557639191524124], ["List[bool]", 0.09853831879019928], ["Dict[str, Union[Any, Any, Any]]", 0.09539853585474317], ["Dict[str, Dict[str, Any]]", 0.09421616642163926], ["annofabapi.dataclass.task.Task", 0.0927386517272577], ["Dict[str, str]", 0.08836222310755246]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[285, 4], [305, 41]], "fn_var_ln": {"chunksize": [[289, 12], [289, 21]], "num_process": [[286, 8], [286, 19]], "states_and_info_by_task_id": [[295, 12], [295, 38]], "task_id_to_states_and_info": [[291, 12], [291, 38]]}, "fn_var_occur": {"chunksize": [["chunksize", "max", "math", "floor", "math", "ceil", "len", "async_results", "self", "_sync_parallelism"], ["task_id_to_states_and_info", "list", "sync_pool", "map", "fetch_celery_task_state", "async_results", "chunksize", "chunksize"]], "num_process": [["num_process", "min", "len", "async_results", "self", "_sync_parallelism"], ["ProcessPoolExecutor", "max_workers", "num_process", "sync_pool"]], "states_and_info_by_task_id": [["states_and_info_by_task_id", "typing", "MutableMapping", "builtins", "str", "airflow", "executors", "base_executor", "EventBufferValueType"], ["states_and_info_by_task_id", "task_id", "state_or_exception", "info"]], "task_id_to_states_and_info": [["task_id_to_states_and_info", "list", "sync_pool", "map", "fetch_celery_task_state", "async_results", "chunksize", "chunksize"]]}, "name": "_get_many_using_multiprocessing", "params": {"async_results": "", "self": ""}, "params_descr": {"async_results": "", "self": ""}, "params_occur": {"async_results": [["num_process", "min", "len", "async_results", "self", "_sync_parallelism"], ["chunksize", "max", "math", "floor", "math", "ceil", "len", "async_results", "self", "_sync_parallelism"], ["task_id_to_states_and_info", "list", "sync_pool", "map", "fetch_celery_task_state", "async_results", "chunksize", "chunksize"]], "self": [["num_process", "min", "len", "async_results", "self", "_sync_parallelism"], ["chunksize", "max", "math", "floor", "math", "ceil", "len", "async_results", "self", "_sync_parallelism"], ["self", "log", "error", "CELERY_FETCH_ERR_MSG_HEADER", "state_or_exception", "exception", "state_or_exception", "traceback"]]}, "params_p": {"args": [], "async_results": [["bytes", 0.19480636181529382], ["List[Tuple[int, int]]", 0.10174578237579214], ["Tuple[int, int]", 0.10174578237579214], ["list", 0.09685991484648668], ["List[str]", 0.09040436263019246], ["int", 0.09040436263019246]], "kwargs": [], "self": []}, "q_name": "BulkStateFetcher._get_many_using_multiprocessing", "ret_exprs": ["return states_and_info_by_task_id"], "ret_type": "typing.Mapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "ret_type_p": [["str", 0.2837923142212078], ["bool", 0.2793981819766475], ["int", 0.13149031749644707], ["Optional[str]", 0.1142910680603268], ["Callable[[], T]", 0.10204950075454677], ["zerver.models.Realm", 0.08897861749082392]], "variables": {"chunksize": "", "num_process": "", "states_and_info_by_task_id": "typing.MutableMapping[builtins.str, airflow.executors.base_executor.EventBufferValueType]", "task_id_to_states_and_info": ""}, "variables_p": {"chunksize": [], "num_process": [["int", 0.899903556933092]], "states_and_info_by_task_id": [["Set[str]", 0.36817269919196], ["str", 0.19959186290342318], ["List[str]", 0.14706987761955514], ["FrozenSet[str]", 0.10078085190597766], ["Callable[[str], str]", 0.10000210404768739], ["int", 0.0843826043313967]], "task_id_to_states_and_info": [["str", 0.5190846818990991], ["list", 0.20402376074642203], ["int", 0.0952331000961751], ["Dict[int, Any]", 0.09141359533748701], ["dict", 0.09024486192081664]]}}], "name": "BulkStateFetcher", "q_name": "BulkStateFetcher", "variables": {}, "variables_p": {}}], "funcs": [{"docstring": {"func": "Preload some \"expensive\" airflow modules once, so other task processes won't have to import it again.", "long_descr": "Loading these for each task adds 0.3-0.5s *per task* before the task can run. For long running tasks this\ndoesn't matter, but for short tasks this starts to be a noticeable impact.", "ret": null}, "fn_lc": [[73, 0], [96, 12]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "on_celery_import_modules", "params": {"args": "", "kwargs": ""}, "params_descr": {"args": "", "kwargs": ""}, "params_occur": {"args": [], "kwargs": []}, "params_p": {"args": [], "kwargs": []}, "q_name": "on_celery_import_modules", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Executes command.", "long_descr": null, "ret": null}, "fn_lc": [[100, 0], [113, 17]], "fn_var_ln": {"celery_task_id": [[103, 4], [103, 18]], "dag_id": [[102, 4], [102, 10]], "task_id": [[102, 12], [102, 19]]}, "fn_var_occur": {"celery_task_id": [["celery_task_id", "app", "current_task", "request", "id"], ["log", "info", "celery_task_id", "command_to_exec"], ["_execute_in_subprocess", "command_to_exec", "celery_task_id"], ["_execute_in_fork", "command_to_exec", "celery_task_id"]], "dag_id": [["dag_id", "task_id", "BaseExecutor", "validate_airflow_tasks_run_command", "command_to_exec"], ["_airflow_parsing_context_manager", "dag_id", "dag_id", "task_id", "task_id"]], "task_id": [["dag_id", "task_id", "BaseExecutor", "validate_airflow_tasks_run_command", "command_to_exec"], ["_airflow_parsing_context_manager", "dag_id", "dag_id", "task_id", "task_id"]]}, "name": "execute_command", "params": {"command_to_exec": "airflow.executors.base_executor.CommandType"}, "params_descr": {"command_to_exec": ""}, "params_occur": {"command_to_exec": [["dag_id", "task_id", "BaseExecutor", "validate_airflow_tasks_run_command", "command_to_exec"], ["log", "info", "celery_task_id", "command_to_exec"], ["_execute_in_subprocess", "command_to_exec", "celery_task_id"], ["_execute_in_fork", "command_to_exec", "celery_task_id"]]}, "params_p": {"args": [], "command_to_exec": [["str", 0.9098600726864646], ["List[str]", 0.09013992731353558]], "kwargs": []}, "q_name": "execute_command", "ret_exprs": [], "ret_type": "None", "variables": {"celery_task_id": "", "dag_id": "", "task_id": ""}, "variables_p": {"celery_task_id": [["str", 1.0000000000000002]], "dag_id": [["str", 0.8744351190216771], ["int", 0.12556488097832286]], "task_id": [["str", 0.9999999999999999]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[116, 0], [152, 21]], "fn_var_ln": {"args": [[138, 8], [138, 12]], "external_executor_id": [[141, 12], [141, 37]], "msg": [[124, 8], [124, 11]], "parser": [[136, 8], [136, 14]], "pid": [[120, 8], [120, 11]], "ret": [[148, 8], [148, 11]], "shut_down_logging": [[139, 8], [139, 30]]}, "fn_var_occur": {"args": [["args", "parser", "parse_args", "command_to_exec"], ["args", "shut_down_logging", "False"], ["args", "external_executor_id", "celery_task_id"], ["args", "func", "args"]], "external_executor_id": [["args", "external_executor_id", "celery_task_id"]], "msg": [["msg", "get_hostname", "celery_task_id"], ["AirflowException", "msg"]], "parser": [["parser", "get_parser"], ["args", "parser", "parse_args", "command_to_exec"]], "pid": [["pid", "os", "fork"], ["pid", "ret", "os", "waitpid", "pid"]], "ret": [["pid", "ret", "os", "waitpid", "pid"], ["os", "_exit", "ret"]], "shut_down_logging": [["args", "shut_down_logging", "False"]]}, "name": "_execute_in_fork", "params": {"celery_task_id": "str | None", "command_to_exec": "airflow.executors.base_executor.CommandType"}, "params_descr": {"celery_task_id": "", "command_to_exec": ""}, "params_occur": {"celery_task_id": [["msg", "get_hostname", "celery_task_id"], ["args", "external_executor_id", "celery_task_id"], ["log", "exception", "celery_task_id", "str", "e"]], "command_to_exec": [["args", "parser", "parse_args", "command_to_exec"], ["setproctitle", "command_to_exec"]]}, "params_p": {"args": [], "celery_task_id": [["Optional[str]", 0.1430608249292436], ["Optional[Dict[str, Any]]", 0.1430608249292436], ["bool", 0.13794590174133642], ["Dict[str, Any]", 0.08401380276709908], ["int", 0.08153678010113218], ["Callable[[Any], bool]", 0.07912661113834175]], "command_to_exec": [["List[str]", 0.29562666502582324], ["int", 0.28221982615252894], ["str", 0.21437764015668226], ["Optional[List[str]]", 0.1241258326850123], ["Optional[str]", 0.08365003597995331]], "kwargs": []}, "q_name": "_execute_in_fork", "ret_exprs": ["return"], "ret_type": "None", "ret_type_p": [["DefaultDict", 0.10001628218216874], ["str", 0.09830441465064874], ["bytes", 0.09753548738145387], ["raiden.utils.Signature", 0.09753548738145387]], "variables": {"args": "", "external_executor_id": "", "msg": "", "parser": "", "pid": "", "ret": "", "shut_down_logging": ""}, "variables_p": {"args": [], "external_executor_id": [["str", 0.4914479212270854], ["Set[int]", 0.23375212932404857], ["Dict[str, int]", 0.09825796117688738], ["taxonomy.db.models.base.EnumField", 0.08692704350311423]], "msg": [["str", 0.5777306669960897], ["Dict[str, str]", 0.218816242765707], ["int", 0.20345309023820338]], "parser": [], "pid": [["float", 0.3844419520652681], ["Type[str]", 0.12143183447280138], ["Pattern[str]", 0.10830948099422226], ["list", 0.10002572148254166]], "ret": [["str", 0.28410200563050914], ["int", 0.11064746155468085], ["list", 0.1083111786932597], ["List[int]", 0.10512054814513325], ["Pattern[str]", 0.09386315891147992]], "shut_down_logging": [["Tuple[Literal, Literal, Literal]", 0.1800449157666319], ["str", 0.12937134752821178], ["Type[List[str]]", 0.1073020273826007], ["Generator[str, None, None]", 0.10537394480029769], ["Sequence", 0.09920989545431895], ["List[str]", 0.09360081825924635], ["list", 0.09262751420732941], ["DefaultDict[Any, List[Any]]", 0.09230488080991113]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[155, 0], [165, 35]], "fn_var_ln": {"env": [[156, 4], [156, 7]], "msg": [[164, 8], [164, 11]]}, "fn_var_occur": {"env": [["env", "os", "environ", "copy"], ["env", "celery_task_id"], ["subprocess", "check_output", "command_to_exec", "stderr", "subprocess", "STDOUT", "close_fds", "True", "env", "env"]], "msg": [["msg", "get_hostname", "celery_task_id"], ["AirflowException", "msg"]]}, "name": "_execute_in_subprocess", "params": {"celery_task_id": "str | None", "command_to_exec": "airflow.executors.base_executor.CommandType"}, "params_descr": {"celery_task_id": "", "command_to_exec": ""}, "params_occur": {"celery_task_id": [["env", "celery_task_id"], ["log", "exception", "celery_task_id"], ["msg", "get_hostname", "celery_task_id"]], "command_to_exec": [["subprocess", "check_output", "command_to_exec", "stderr", "subprocess", "STDOUT", "close_fds", "True", "env", "env"]]}, "params_p": {"args": [], "celery_task_id": [["int", 0.9092064246453877], ["Dict[str, Any]", 0.09079357535461217]], "command_to_exec": [["str", 0.694158430491663], ["stiff.models.Tagging", 0.110843834421041], ["bool", 0.09936769338250749]], "kwargs": []}, "q_name": "_execute_in_subprocess", "ret_exprs": [], "ret_type": "None", "variables": {"env": "", "msg": ""}, "variables_p": {"env": [["str", 0.3511354964616369], ["Dict[str, str]", 0.20970546299325643], ["Dict[str, Any]", 0.10401232335285629], ["list", 0.08173693414763554], ["os._Environ[str]", 0.07966974157896509]], "msg": [["str", 0.5777306669960897], ["Dict[str, str]", 0.218816242765707], ["int", 0.20345309023820338]]}}, {"docstring": {"func": "Sends task to executor.", "long_descr": null, "ret": null}, "fn_lc": [[181, 0], [193, 31]], "fn_var_ln": {"command": [[185, 9], [185, 16]], "exception_traceback": [[190, 8], [190, 27]], "key": [[185, 4], [185, 7]], "queue": [[185, 18], [185, 23]], "result": [[191, 8], [191, 14]], "task_to_run": [[185, 25], [185, 36]]}, "fn_var_occur": {"command": [["key", "command", "queue", "task_to_run", "task_tuple"], ["result", "task_to_run", "apply_async", "args", "command", "queue", "queue"], ["key", "command", "result"]], "exception_traceback": [["exception_traceback", "key", "traceback", "format_exc"], ["result", "ExceptionWithTraceback", "e", "exception_traceback"]], "key": [["key", "command", "queue", "task_to_run", "task_tuple"], ["exception_traceback", "key", "traceback", "format_exc"], ["key", "command", "result"]], "queue": [["key", "command", "queue", "task_to_run", "task_tuple"], ["result", "task_to_run", "apply_async", "args", "command", "queue", "queue"]], "result": [["result", "task_to_run", "apply_async", "args", "command", "queue", "queue"], ["result", "ExceptionWithTraceback", "e", "exception_traceback"], ["key", "command", "result"]], "task_to_run": [["key", "command", "queue", "task_to_run", "task_tuple"], ["result", "task_to_run", "apply_async", "args", "command", "queue", "queue"]]}, "name": "send_task_to_executor", "params": {"task_tuple": "TaskInstanceInCelery"}, "params_descr": {"task_tuple": ""}, "params_occur": {"task_tuple": [["key", "command", "queue", "task_to_run", "task_tuple"]]}, "params_p": {"args": [], "kwargs": [], "task_tuple": [["str", 0.20896017914871368], ["Dict[str, Any]", 0.1724686963114982], ["List[asyncio.Task]", 0.12879631547235626], ["taskiapplication.models.task.Task", 0.08844679692237245], ["asyncio.Task", 0.0832051120548589], ["Optional[str]", 0.08052866005841965], ["nufb.task.Task", 0.07919808001059359]]}, "q_name": "send_task_to_executor", "ret_exprs": ["return key, command, result"], "ret_type": "builtins.tuple[airflow.models.taskinstance.TaskInstanceKey, airflow.executors.base_executor.CommandType, AsyncResult | ExceptionWithTraceback]", "ret_type_p": [["bool", 0.22297264218972931], ["db.models.taxon.FillDataLevel", 0.11148632109486466], ["str", 0.10683498251122024], ["dict", 0.09197118265882544], ["Mapping", 0.09124210972249451], ["Dict[str, Any]", 0.08990910343895564]], "variables": {"command": "", "exception_traceback": "", "key": "", "queue": "", "result": "", "task_to_run": ""}, "variables_p": {"command": [["str", 0.2717223977604749], ["list", 0.20815953928070133], ["List[Dict[str, str]]", 0.17654763063845316], ["Optional[str]", 0.11001635423233908], ["List[Union[Any, Any, Any, Any]]", 0.09188404600510805]], "exception_traceback": [["dict", 0.3567855635525879], ["Dict[str, Any]", 0.12760108511842744], ["Pattern[str]", 0.08804024377112243]], "key": [["str", 0.3831556004646802], ["cmk.base.api.agent_based.checking_classes.state", 0.11600050150853738], ["list", 0.10034753337744186], ["ClassVar[str]", 0.100317197094245], ["pandas.core.groupby.base.OutputKey", 0.0998319002154463], ["Dict[int, str]", 0.09713402192775035]], "queue": [["str", 0.3305497715224559], ["Dict[str, int]", 0.0844745706860966]], "result": [["str", 0.20604310309791404], ["dict", 0.14090458977593698], ["topicdb.core.models.basename.BaseName", 0.08968106230616132], ["list", 0.08390563340660787]], "task_to_run": [["int", 0.5748645098378721], ["Dict[str, Any]", 0.12915363236166613], ["List[str]", 0.11064085310611176], ["Dict[str, Dict[str, int]]", 0.09344889809767443], ["pydynasync.models.Changes", 0.09189210659667571]]}}, {"docstring": {"func": "Fetch and return the state of the given celery task.", "long_descr": "The scope of this function is global so that it can be called by subprocesses in the pool.", "ret": "a tuple of the Celery task key and the Celery state and the celery info\nof the task"}, "fn_lc": [[196, 0], [215, 89]], "fn_var_ln": {"exception_traceback": [[214, 8], [214, 27]], "info": [[211, 12], [211, 16]]}, "fn_var_occur": {"exception_traceback": [["exception_traceback", "async_result", "traceback", "format_exc"], ["async_result", "task_id", "ExceptionWithTraceback", "e", "exception_traceback", "None"]], "info": [["info", "async_result", "info", "hasattr", "async_result", "None"], ["async_result", "task_id", "async_result", "state", "info"]]}, "name": "fetch_celery_task_state", "params": {"async_result": "celery.result.AsyncResult"}, "params_descr": {"async_result": "a tuple of the Celery task key and the async Celery object used\nto fetch the task's state"}, "params_occur": {"async_result": [["info", "async_result", "info", "hasattr", "async_result", "None"], ["async_result", "task_id", "async_result", "state", "info"], ["exception_traceback", "async_result", "traceback", "format_exc"], ["async_result", "task_id", "ExceptionWithTraceback", "e", "exception_traceback", "None"]]}, "params_p": {"args": [], "async_result": [["str", 0.1967058957006157], ["bool", 0.10451579717187395], ["jumeaux.models.Res2DictAddOnPayload", 0.09302337889867869], ["memoryview", 0.09207304283281689], ["dict", 0.0914301899001955]], "kwargs": []}, "q_name": "fetch_celery_task_state", "ret_exprs": ["return async_result.task_id, async_result.state, info", "return async_result.task_id, ExceptionWithTraceback(e, exception_traceback), None"], "ret_type": "builtins.tuple[builtins.str, str | ExceptionWithTraceback, typing.Any]", "ret_type_p": [["amundsen_application.models.user.User", 0.20273053474503835], ["cmk.utils.type_defs.UserId", 0.13410479901662034], ["int", 0.09817973718080221], ["celery.resulAsyncResult", 0.09314600777609414], ["Dict[str, Union[str, Set]]", 0.09071783671675143], ["viewer.models.Gallery", 0.08583049922679083]], "variables": {"exception_traceback": "", "info": ""}, "variables_p": {"exception_traceback": [["List[Tuple[int, Any]]", 0.11603316851233937], ["Dict[str, Any]", 0.11096764717221869], ["List[Dict[str, Any]]", 0.09689668279038328], ["raiden.utils.Any", 0.08875498055159961]], "info": [["Union[dict, List[Any]]", 0.2550609484595488], ["dict", 0.2292177568483319], ["List[str]", 0.15834740372319406], ["List[Dict[str, Any]]", 0.080224143506043], ["asyncio.Task", 0.07946112126654689]]}}], "imports": ["__future__", "annotations", "logging", "math", "os", "subprocess", "traceback", "concurrent", "futures", "ProcessPoolExecutor", "typing", "TYPE_CHECKING", "Any", "Mapping", "MutableMapping", "Optional", "Tuple", "celery", "Celery", "Task", "states", "celery_states", "celery", "backends", "base", "BaseKeyValueStoreBackend", "celery", "backends", "database", "DatabaseBackend", "Task", "TaskDb", "retry", "session_cleanup", "celery", "result", "AsyncResult", "celery", "signals", "import_modules", "celery_import_modules", "setproctitle", "setproctitle", "airflow.settings", "settings", "airflow", "config_templates", "default_celery", "DEFAULT_CELERY_CONFIG", "airflow", "configuration", "conf", "airflow", "exceptions", "AirflowException", "airflow", "executors", "base_executor", "BaseExecutor", "airflow", "models", "taskinstance", "TaskInstanceKey", "airflow", "stats", "Stats", "airflow", "utils", "dag_parsing_context", "_airflow_parsing_context_manager", "airflow", "utils", "log", "logging_mixin", "LoggingMixin", "airflow", "utils", "net", "get_hostname", "airflow", "utils", "timeout", "timeout", "airflow", "executors", "base_executor", "CommandType", "EventBufferValueType", "jinja2.ext", "airflow.jobs.local_task_job_runner", "airflow.macros", "airflow.operators.bash", "airflow.operators.python", "airflow.operators.subdag", "numpy", "kubernetes.client", "airflow", "sentry", "Sentry", "airflow", "cli", "cli_parser", "get_parser"], "mod_var_ln": {"CELERY_FETCH_ERR_MSG_HEADER": [[62, 0], [62, 27]], "OPERATION_TIMEOUT": [[59, 0], [59, 17]], "TaskInstanceInCelery": [[57, 4], [57, 24]], "app": [[69, 0], [69, 3]], "celery_configuration": [[67, 4], [67, 24]], "log": [[52, 0], [52, 3]]}, "mod_var_occur": {"CELERY_FETCH_ERR_MSG_HEADER": [["self", "log", "error", "CELERY_FETCH_ERR_MSG_HEADER", "state_or_exception", "exception", "state_or_exception", "traceback"]], "OPERATION_TIMEOUT": [["timeout", "seconds", "OPERATION_TIMEOUT"], ["timeout", "seconds", "OPERATION_TIMEOUT"]], "TaskInstanceInCelery": [], "app": [["celery_task_id", "app", "current_task", "request", "id"], ["isinstance", "app", "backend", "BaseKeyValueStoreBackend"], ["isinstance", "app", "backend", "DatabaseBackend"], ["keys", "app", "backend", "get_key_for_task", "k", "k", "task_ids"], ["values", "app", "backend", "mget", "keys"], ["task_results", "app", "backend", "decode_result", "v", "v", "values", "v"], ["session", "app", "backend", "ResultSession"], ["task_cls", "getattr", "app", "backend", "TaskDb"], ["task_results", "app", "backend", "meta_from_decoded", "task", "to_dict", "task", "tasks"]], "celery_configuration": [["app", "Celery", "conf", "get", "config_source", "celery_configuration"]], "log": [["log", "info", "celery_task_id", "command_to_exec"], ["log", "exception", "celery_task_id", "str", "e"], ["log", "exception", "celery_task_id"], ["log", "error", "e", "output"], ["self", "log", "debug", "len", "result", "len", "async_results"], ["self", "log", "error", "CELERY_FETCH_ERR_MSG_HEADER", "state_or_exception", "exception", "state_or_exception", "traceback"]]}, "no_types_annot": {"D": 21, "I": 0, "U": 63}, "session_id": "l5EPLZI9nqkJMWBOB8T3S8XEEwHRX5KE8BQC9r9Td6E", "set": null, "tc": [false, null], "type_annot_cove": 0.25, "typed_seq": "", "untyped_seq": "", "variables": {"CELERY_FETCH_ERR_MSG_HEADER": "", "OPERATION_TIMEOUT": "", "TaskInstanceInCelery": "", "app": "", "celery_configuration": "", "log": ""}, "variables_p": {"CELERY_FETCH_ERR_MSG_HEADER": [["str", 0.6621316879110272], ["Tuple[str, str]", 0.12795175737707049], ["Dict[str, str]", 0.11754058968198003], ["Dict[int, str]", 0.09237596502992226]], "OPERATION_TIMEOUT": [["int", 0.9999999999999998]], "TaskInstanceInCelery": [["str", 0.563625819384063], ["int", 0.14981515372179205], ["Type[betterbeauty.notifications.models.Notification]", 0.12682223582553714], ["bool", 0.08482921420771178], ["Tuple[int, float]", 0.07490757686089602]], "app": [], "celery_configuration": [["str", 0.28854775796461896], ["Dict[str, str]", 0.19236517197641265], ["dict", 0.18545101499741484], ["Dict[str, Type[Any]]", 0.09618258598820632], ["Dict[int, Any]", 0.09528096870233267]], "log": [["logging.Logger", 1.0]]}}}