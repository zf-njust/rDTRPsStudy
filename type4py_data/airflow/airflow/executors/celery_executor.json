{"error": null, "response": {"classes": [{"cls_lc": [[79, 0], [319, 27]], "cls_var_ln": {"supports_ad_hoc_ti_run": [[90, 4], [90, 26]], "supports_sentry": [[91, 4], [91, 19]]}, "cls_var_occur": {"supports_ad_hoc_ti_run": [], "supports_sentry": []}, "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[93, 4], [107, 101]], "fn_var_ln": {"_sync_parallelism": [[101, 12], [101, 34]], "bulk_state_fetcher": [[104, 8], [104, 31]], "task_publish_max_retries": [[107, 8], [107, 37]], "task_publish_retries": [[106, 8], [106, 33]], "tasks": [[105, 8], [105, 18]]}, "fn_var_occur": {"_sync_parallelism": [["self", "_sync_parallelism", "conf", "getint"], ["self", "_sync_parallelism"], ["self", "_sync_parallelism", "max", "cpu_count"], ["self", "bulk_state_fetcher", "BulkStateFetcher", "self", "_sync_parallelism"]], "bulk_state_fetcher": [["self", "bulk_state_fetcher", "BulkStateFetcher", "self", "_sync_parallelism"]], "task_publish_max_retries": [["self", "task_publish_max_retries", "conf", "getint", "fallback"]], "task_publish_retries": [["self", "task_publish_retries", "collections", "Counter", "airflow", "models", "taskinstancekey", "TaskInstanceKey", "Counter"]], "tasks": [["self", "tasks"]]}, "name": "__init__", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "_sync_parallelism", "conf", "getint"], ["self", "_sync_parallelism"], ["self", "_sync_parallelism", "max", "cpu_count"], ["self", "bulk_state_fetcher", "BulkStateFetcher", "self", "_sync_parallelism"], ["self", "tasks"], ["self", "task_publish_retries", "collections", "Counter", "airflow", "models", "taskinstancekey", "TaskInstanceKey", "Counter"], ["self", "task_publish_max_retries", "conf", "getint", "fallback"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "CeleryExecutor.__init__", "ret_exprs": [], "ret_type": "", "variables": {"_sync_parallelism": "", "bulk_state_fetcher": "", "task_publish_max_retries": "", "task_publish_retries": "collections.Counter[airflow.models.taskinstancekey.TaskInstanceKey]", "tasks": ""}, "variables_p": {"_sync_parallelism": [["List[int]", 0.4237316841111782], ["int", 0.1000539264109985], ["list", 0.08682988274190094]], "bulk_state_fetcher": [["str", 0.33900567461957054], ["float", 0.09264924973669426], ["Optional[qiskiproviders.ibmq.utils.utils.RefreshQueue]", 0.08399917149919929]], "task_publish_max_retries": [["int", 0.3724244965208646], ["o2a.converter.task.Task", 0.08195674622509594], ["list", 0.07477455541891516], ["List[str]", 0.07089544391536477], ["Type[Dict[str, Any]]", 0.06523661373726393]], "task_publish_retries": [["raiden.transfer.state.HopState", 0.2747207274982313], ["models.MedstationData", 0.12275592365037931], ["bytes", 0.10940392598730721], ["models.facilityData", 0.07751065718381596], ["accounts.models.Account", 0.07239479962111595]], "tasks": [["int", 0.5165730712149259], ["str", 0.1049156222072996], ["DefaultDict[Any, List[Any]]", 0.09140247438148932], ["Set[str]", 0.09050152669662243], ["dict", 0.05461265474236536], ["Dict[str, dict]", 0.05149312406067479]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[109, 4], [110, 105]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "start", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "log", "debug", "self", "_sync_parallelism"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "CeleryExecutor.start", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": "How many Celery tasks should each worker process send.", "long_descr": null, "ret": "Number of tasks that should be sent per process"}, "fn_lc": [[112, 4], [118, 83]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "_num_tasks_per_send_process", "params": {"self": "", "to_send_count": "builtins.int"}, "params_descr": {"self": "", "to_send_count": ""}, "params_occur": {"self": [["max", "int", "math", "ceil", "to_send_count", "self", "_sync_parallelism"]], "to_send_count": [["max", "int", "math", "ceil", "to_send_count", "self", "_sync_parallelism"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "to_send_count": [["int", 0.47566777029595597], ["bool", 0.15269197633864404], ["float", 0.09163962883612083], ["Iterable[Any]", 0.08555315019214381], ["Optional[float]", 0.08555315019214381]]}, "q_name": "CeleryExecutor._num_tasks_per_send_process", "ret_exprs": ["return max(1, int(math.ceil(1.0 * to_send_count / self._sync_parallelism)))"], "ret_type": "builtins.int", "ret_type_p": [["str", 0.3217323624426197], ["dict", 0.10623001064658869], ["Callable", 0.08687134594655077]], "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[120, 4], [165, 88]], "fn_var_ln": {"backend": [[155, 16], [155, 30]], "cached_celery_backend": [[128, 8], [128, 29]], "first_task": [[124, 8], [124, 18]], "key_and_async_results": [[130, 8], [130, 29]], "retries": [[138, 16], [138, 23]], "task_tuples_to_send": [[123, 8], [123, 27]]}, "fn_var_occur": {"backend": [["cached_celery_backend", "first_task", "backend"], ["result", "backend", "cached_celery_backend"]], "cached_celery_backend": [["cached_celery_backend", "first_task", "backend"], ["result", "backend", "cached_celery_backend"]], "first_task": [["first_task", "next", "t", "t", "task_tuples_to_send"], ["cached_celery_backend", "first_task", "backend"]], "key_and_async_results": [["key_and_async_results", "self", "_send_tasks_to_celery", "task_tuples_to_send"]], "retries": [["retries", "self", "task_publish_retries", "key"], ["retries", "self", "task_publish_max_retries"], ["self", "task_publish_retries", "key", "retries"]], "task_tuples_to_send": [["task_tuples_to_send", "task_tuple", "execute_command", "task_tuple", "task_tuples"], ["first_task", "next", "t", "t", "task_tuples_to_send"], ["key_and_async_results", "self", "_send_tasks_to_celery", "task_tuples_to_send"]]}, "name": "_process_tasks", "params": {"self": "", "task_tuples": "builtins.list[airflow.executors.base_executor.TaskTuple]"}, "params_descr": {"self": "", "task_tuples": ""}, "params_occur": {"self": [["key_and_async_results", "self", "_send_tasks_to_celery", "task_tuples_to_send"], ["self", "log", "debug"], ["retries", "self", "task_publish_retries", "key"], ["retries", "self", "task_publish_max_retries"], ["self", "log", "info", "self", "task_publish_retries", "key", "self", "task_publish_max_retries", "key"], ["self", "task_publish_retries", "key", "retries"], ["self", "queued_tasks", "pop", "key"], ["self", "task_publish_retries", "pop", "key", "None"], ["self", "log", "error", "CELERY_SEND_ERR_MSG_HEADER", "result", "exception", "result", "traceback"], ["self", "event_buffer", "key", "State", "FAILED", "None"], ["self", "running", "add", "key"], ["self", "tasks", "key", "result"], ["self", "event_buffer", "key", "State", "QUEUED", "result", "task_id"], ["self", "update_task_state", "key", "result", "state", "getattr", "result", "None"]], "task_tuples": [["task_tuples_to_send", "task_tuple", "execute_command", "task_tuple", "task_tuples"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "task_tuples": [["annofabapi.models.Task", 0.22353835480145193], ["str", 0.12014548510370024], ["golem.task.taskbase.Task", 0.10216711740332039], ["core_lib.core.models.Event", 0.09246447486803883], ["Mapping[str, Any]", 0.0851433101414573], ["Dict[str, Any]", 0.07059229743534129], ["List[asyncio.Task]", 0.07047700760126334], ["prefeccore.Task", 0.06945767250150292], ["Awaitable", 0.06899582739244396]]}, "q_name": "CeleryExecutor._process_tasks", "ret_exprs": [], "ret_type": "None", "variables": {"backend": "", "cached_celery_backend": "", "first_task": "", "key_and_async_results": "", "retries": "", "task_tuples_to_send": ""}, "variables_p": {"backend": [["int", 0.5127130107741494], ["raiden.utils.MessageID", 0.08953244574999038], ["raiden.utils.TargetAddress", 0.08540489808517972], ["raiden.utils.PaymentID", 0.07902045986466326]], "cached_celery_backend": [["int", 0.5127130107741494], ["raiden.utils.MessageID", 0.08953244574999038], ["raiden.utils.TargetAddress", 0.08540489808517972], ["raiden.utils.PaymentID", 0.07902045986466326]], "first_task": [["int", 0.5323696856694377], ["List[List[int]]", 0.20758544755370092], ["List[str]", 0.1113135650858465], ["bytearray", 0.08011250559927292], ["list", 0.06861879609174193]], "key_and_async_results": [["int", 0.3572259673620888], ["List[str]", 0.20028418272244786], ["Pattern[str]", 0.10404487780219929], ["str", 0.08143321151715023], ["dict", 0.07915002240138423]], "retries": [["dict", 0.49852273086312715], ["Dict[str, Any]", 0.1907197453285026]], "task_tuples_to_send": [["str", 0.42975897180300227], ["Set[str]", 0.1011519850021935], ["zerver.models.UserProfile", 0.08577029862621545], ["int", 0.08296531164219059]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[167, 4], [183, 36]], "fn_var_ln": {"chunksize": [[176, 8], [176, 17]], "key_and_async_results": [[180, 12], [180, 33]], "num_processes": [[177, 8], [177, 21]]}, "fn_var_occur": {"chunksize": [["chunksize", "self", "_num_tasks_per_send_process", "len", "task_tuples_to_send"], ["key_and_async_results", "list", "send_pool", "map", "send_task_to_executor", "task_tuples_to_send", "chunksize", "chunksize"]], "key_and_async_results": [["key_and_async_results", "list", "send_pool", "map", "send_task_to_executor", "task_tuples_to_send", "chunksize", "chunksize"]], "num_processes": [["num_processes", "min", "len", "task_tuples_to_send", "self", "_sync_parallelism"], ["ProcessPoolExecutor", "max_workers", "num_processes", "send_pool"]]}, "name": "_send_tasks_to_celery", "params": {"self": "", "task_tuples_to_send": "builtins.list[TaskInstanceInCelery]"}, "params_descr": {"self": "", "task_tuples_to_send": ""}, "params_occur": {"self": [["len", "task_tuples_to_send", "self", "_sync_parallelism"], ["chunksize", "self", "_num_tasks_per_send_process", "len", "task_tuples_to_send"], ["num_processes", "min", "len", "task_tuples_to_send", "self", "_sync_parallelism"]], "task_tuples_to_send": [["len", "task_tuples_to_send", "self", "_sync_parallelism"], ["list", "map", "send_task_to_executor", "task_tuples_to_send"], ["chunksize", "self", "_num_tasks_per_send_process", "len", "task_tuples_to_send"], ["num_processes", "min", "len", "task_tuples_to_send", "self", "_sync_parallelism"], ["key_and_async_results", "list", "send_pool", "map", "send_task_to_executor", "task_tuples_to_send", "chunksize", "chunksize"]]}, "params_p": {"args": [], "kwargs": [], "self": [], "task_tuples_to_send": [["Dict[prefeccore.Task, prefecengine.state.State]", 0.1849955697820181], ["int", 0.17921467752285414], ["asyncio.Task", 0.11351622757505268], ["Tuple[models.snippeSnippetVersion, events.snippeSnippetUpdated]", 0.1051284427740538], ["\"prefecengine.state.State\"", 0.0958049510789554]]}, "q_name": "CeleryExecutor._send_tasks_to_celery", "ret_exprs": ["return list(map(send_task_to_executor, task_tuples_to_send))", "return key_and_async_results"], "ret_type": "", "ret_type_p": [["List[str]", 0.11765573955567203], ["Optional[Union[str, Any]]", 0.08915928203415388], ["List[List[Any]]", 0.08371513367745718], ["List[annofabapi.models.JobInfo]", 0.08351980430619012], ["Optional[Union[str, Any, Any, Any]]", 0.0777843376470408]], "variables": {"chunksize": "", "key_and_async_results": "", "num_processes": ""}, "variables_p": {"chunksize": [["int", 0.7087460882234264], ["list", 0.10235117993415253], ["defaultdict", 0.09839133377388946]], "key_and_async_results": [["str", 0.29130513211347064], ["Pattern[Any]", 0.2043874560901871], ["int", 0.1965966964725966], ["list", 0.11883982541787762], ["Counter[int]", 0.09322396095509185]], "num_processes": [["int", 0.7926693688515832], ["Dict[str, int]", 0.12223163216066163]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[185, 4], [189, 37]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "sync", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "tasks"], ["self", "log", "debug"], ["self", "update_all_task_states"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "CeleryExecutor.sync", "ret_exprs": ["return"], "ret_type": "None", "ret_type_p": [["Union[tuple, list]", 0.12326783261663934], ["List[int]", 0.09124591253820835], ["Dict[str, Any]", 0.08769568774684897], ["str", 0.08682447752895113]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "Called in response to SIGUSR2 by the scheduler.", "long_descr": null, "ret": null}, "fn_lc": [[191, 4], [196, 9]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "debug_dump", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "log", "info", "len", "self", "tasks", "join", "map", "repr", "self", "tasks", "items"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "CeleryExecutor.debug_dump", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Updates states of the tasks.", "long_descr": null, "ret": null}, "fn_lc": [[198, 4], [207, 56]], "fn_var_ln": {"info": [[205, 19], [205, 23]], "state": [[205, 12], [205, 17]], "state_and_info_by_celery_task_id": [[201, 8], [201, 40]]}, "fn_var_occur": {"info": [["state", "info", "state_and_info_by_celery_task_id", "get", "async_result", "task_id"], ["self", "update_task_state", "key", "state", "info"]], "state": [["state", "info", "state_and_info_by_celery_task_id", "get", "async_result", "task_id"], ["self", "update_task_state", "key", "state", "info"]], "state_and_info_by_celery_task_id": [["state_and_info_by_celery_task_id", "self", "bulk_state_fetcher", "get_many", "self", "tasks", "values"], ["state", "info", "state_and_info_by_celery_task_id", "get", "async_result", "task_id"]]}, "name": "update_all_task_states", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": [["self", "log", "debug", "len", "self", "tasks"], ["state_and_info_by_celery_task_id", "self", "bulk_state_fetcher", "get_many", "self", "tasks", "values"], ["self", "log", "debug"], ["list", "self", "tasks", "items"], ["self", "update_task_state", "key", "state", "info"]]}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "CeleryExecutor.update_all_task_states", "ret_exprs": [], "ret_type": "None", "variables": {"info": "", "state": "", "state_and_info_by_celery_task_id": ""}, "variables_p": {"info": [["dict", 0.3454535097305631], ["Dict[str, Any]", 0.1789734952509651], ["Dict[str, Dict[str, Any]]", 0.1165835829181121], ["Dict[str, None]", 0.09521873392109441], ["Dict[str, str]", 0.09394479543360869], ["Dict[str, Callable[..., Any]]", 0.08536697697925662], ["Dict[Any, Union[int, str]]", 0.08445890576640014]], "state": [["str", 0.6049441607689112], ["Dict[int, Any]", 0.2969055514537616]], "state_and_info_by_celery_task_id": [["int", 0.28172268229394315], ["str", 0.26284168299238564], ["Dict[int, str]", 0.18083949065917093]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[209, 4], [211, 33]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "change_state", "params": {"info": "", "key": "airflow.models.taskinstancekey.TaskInstanceKey", "self": "", "state": "builtins.str"}, "params_descr": {"info": "", "key": "", "self": "", "state": ""}, "params_occur": {"info": [["super", "change_state", "key", "state", "info"]], "key": [["super", "change_state", "key", "state", "info"], ["self", "tasks", "pop", "key", "None"]], "self": [["self", "tasks", "pop", "key", "None"]], "state": [["super", "change_state", "key", "state", "info"]]}, "params_p": {"args": [], "info": [["str", 0.2837968836705106], ["bytes", 0.22995012536673007], ["Optional[Callable]", 0.11737078977523348], ["T", 0.09815121850840608], ["Optional[str]", 0.0901722377759294]], "key": [["str", 0.37579672535881753], ["Dict[str, Any]", 0.12343298535800494], ["Optional[Callable]", 0.10634240027272145], ["T", 0.09359745027535399], ["dict", 0.08397406128681235]], "kwargs": [], "self": [], "state": [["str", 0.2837968836705106], ["bytes", 0.22995012536673007], ["Optional[Callable]", 0.11737078977523348], ["T", 0.09815121850840608], ["Optional[str]", 0.0901722377759294]]}, "q_name": "CeleryExecutor.change_state", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": "Updates state of a single task.", "long_descr": null, "ret": null}, "fn_lc": [[213, 4], [227, 81]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "update_task_state", "params": {"info": "typing.Any", "key": "airflow.models.taskinstancekey.TaskInstanceKey", "self": "", "state": "builtins.str"}, "params_descr": {"info": "", "key": "", "self": "", "state": ""}, "params_occur": {"info": [["self", "success", "key", "info"], ["self", "fail", "key", "info"], ["self", "log", "info", "key", "state"]], "key": [["self", "success", "key", "info"], ["self", "fail", "key", "info"], ["self", "log", "info", "key", "state"]], "self": [["self", "success", "key", "info"], ["self", "fail", "key", "info"], ["self", "log", "info", "key", "state"], ["self", "log", "exception"]], "state": [["state", "celery_states", "SUCCESS"], ["state", "celery_states", "FAILURE", "celery_states", "REVOKED"], ["state", "celery_states", "STARTED"], ["state", "celery_states", "PENDING"], ["self", "log", "info", "key", "state"]]}, "params_p": {"args": [], "info": [["str", 0.902323175235401]], "key": [["str", 0.902323175235401]], "kwargs": [], "self": [], "state": [["raiden.transfer.state.NettingChannelState", 0.22114979367727317], ["bool", 0.08993295718081427], ["T", 0.08993295718081427], ["int", 0.08993295718081427]]}, "q_name": "CeleryExecutor.update_task_state", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[229, 4], [233, 19]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "end", "params": {"self": "", "synchronous": "builtins.bool"}, "params_descr": {"self": "", "synchronous": ""}, "params_occur": {"self": [["any", "task", "state", "celery_states", "READY_STATES", "task", "self", "tasks", "values"], ["self", "sync"]], "synchronous": []}, "params_p": {"args": [], "kwargs": [], "self": [], "synchronous": [["int", 0.19999999999999998], ["str", 0.19999999999999998], ["Iterable['Context']", 0.09999999999999999], ["dict", 0.09999999999999999], ["bool", 0.09999999999999999]]}, "q_name": "CeleryExecutor.end", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[235, 4], [236, 12]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "terminate", "params": {"self": ""}, "params_descr": {"self": ""}, "params_occur": {"self": []}, "params_p": {"args": [], "kwargs": [], "self": []}, "q_name": "CeleryExecutor.terminate", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[238, 4], [293, 30]], "fn_var_ln": {"adopted": [[273, 8], [273, 15]], "backend": [[278, 12], [278, 26]], "cached_celery_backend": [[274, 8], [274, 29]], "celery_tasks": [[256, 8], [256, 20]], "not_adopted_tis": [[257, 8], [257, 23]], "result": [[277, 12], [277, 18]], "states_by_celery_task_id": [[269, 8], [269, 32]], "task_instance_str": [[288, 12], [288, 29]], "ti": [[277, 20], [277, 22]]}, "fn_var_occur": {"adopted": [["adopted", "append", "ti", "state"], ["task_instance_str", "join", "adopted"], ["self", "log", "info", "len", "adopted", "task_instance_str"]], "backend": [["cached_celery_backend", "next", "iter", "celery_tasks", "values", "backend"], ["result", "backend", "cached_celery_backend"]], "cached_celery_backend": [["cached_celery_backend", "next", "iter", "celery_tasks", "values", "backend"], ["result", "backend", "cached_celery_backend"]], "celery_tasks": [["celery_tasks", "ti", "external_executor_id", "AsyncResult", "ti", "external_executor_id", "ti"], ["states_by_celery_task_id", "self", "bulk_state_fetcher", "get_many", "list", "map", "operator", "itemgetter", "celery_tasks", "values"], ["cached_celery_backend", "next", "iter", "celery_tasks", "values", "backend"], ["result", "ti", "celery_tasks", "celery_task_id"]], "not_adopted_tis": [["not_adopted_tis", "append", "ti"]], "result": [["celery", "result", "AsyncResult"], ["result", "ti", "celery_tasks", "celery_task_id"], ["result", "backend", "cached_celery_backend"], ["self", "tasks", "ti", "key", "result"]], "states_by_celery_task_id": [["states_by_celery_task_id", "self", "bulk_state_fetcher", "get_many", "list", "map", "operator", "itemgetter", "celery_tasks", "values"], ["states_by_celery_task_id", "items"]], "task_instance_str": [["task_instance_str", "join", "adopted"], ["self", "log", "info", "len", "adopted", "task_instance_str"]], "ti": [["ti", "external_executor_id", "None"], ["celery_tasks", "ti", "external_executor_id", "AsyncResult", "ti", "external_executor_id", "ti"], ["not_adopted_tis", "append", "ti"], ["result", "ti", "celery_tasks", "celery_task_id"], ["self", "tasks", "ti", "key", "result"], ["self", "running", "add", "ti", "key"], ["self", "update_task_state", "ti", "key", "state", "info"], ["adopted", "append", "ti", "state"]]}, "name": "try_adopt_task_instances", "params": {"self": "", "tis": "typing.Sequence[airflow.models.taskinstance.TaskInstance]"}, "params_descr": {"self": "", "tis": ""}, "params_occur": {"self": [["states_by_celery_task_id", "self", "bulk_state_fetcher", "get_many", "list", "map", "operator", "itemgetter", "celery_tasks", "values"], ["self", "tasks", "ti", "key", "result"], ["self", "running", "add", "ti", "key"], ["self", "update_task_state", "ti", "key", "state", "info"], ["self", "log", "info", "len", "adopted", "task_instance_str"]], "tis": []}, "params_p": {"args": [], "kwargs": [], "self": [], "tis": [["T", 0.23299711363537384], ["int", 0.0937932048876302], ["Awaitable[Any]", 0.044736972817813435], ["List[dict]", 0.040094674538955426], ["faustypes.app.TaskArg", 0.023339028073139364]]}, "q_name": "CeleryExecutor.try_adopt_task_instances", "ret_exprs": ["return tis", "return not_adopted_tis"], "ret_type": "typing.Sequence[airflow.models.taskinstance.TaskInstance]", "ret_type_p": [["str", 0.21726636648779765], ["bytes", 0.11137334121777376], ["bool", 0.10142916838373614], ["Sequence[float]", 0.0845756035539661]], "variables": {"adopted": "", "backend": "", "cached_celery_backend": "", "celery_tasks": "", "not_adopted_tis": "", "result": "", "states_by_celery_task_id": "", "task_instance_str": "", "ti": ""}, "variables_p": {"adopted": [["list", 0.39392418383448485], ["str", 0.3849964768311135]], "backend": [["dict", 0.155182670206442]], "cached_celery_backend": [["dict", 0.155182670206442]], "celery_tasks": [["bytes", 0.12989484335405105], ["src.models.generic_task.GenericTask", 0.10115737639584207], ["str", 0.0928198706834711]], "not_adopted_tis": [["list", 0.7999999999999999], ["Dict[str, Any]", 0.09999999999999999], ["str", 0.09999999999999999]], "result": [["asyncio.tasks.Task[Any]", 0.1194496496647138], ["List[Union[Any, Any, Any, Any]]", 0.10079254201288725], ["list", 0.08925543190863745]], "states_by_celery_task_id": [["str", 0.5919015883541441], ["int", 0.24918664761874793], ["List[str]", 0.08164423735185916]], "task_instance_str": [["str", 0.9999999999999999]], "ti": [["list", 0.24038339395385755], ["dict", 0.11006729461645354], ["int", 0.09801931777058513], ["Optional[decksite.data.models.person.Person]", 0.0939162111717126], ["Tuple[int, int, int, int, int, int, int, int, int, int]", 0.09052085495363006], ["Type[Tuple[str, Any]]", 0.08750050997610997]]}}, {"docstring": {"func": "Handle remnants of tasks that were failed because they were stuck in queued.", "long_descr": "Tasks can get stuck in queued. If such a task is detected, it will be marked\nas `UP_FOR_RETRY` if the task instance has remaining retries or marked as `FAILED`\nif it doesn't.", "ret": "List of readable task instances for a warning message"}, "fn_lc": [[295, 4], [319, 27]], "fn_var_ln": {"celery_async_result": [[313, 12], [313, 31]], "readable_tis": [[306, 8], [306, 20]], "task_instance_key": [[311, 12], [311, 29]]}, "fn_var_occur": {"celery_async_result": [["celery_async_result", "self", "tasks", "pop", "task_instance_key", "None"], ["app", "control", "revoke", "celery_async_result", "task_id"]], "readable_tis": [["readable_tis", "append", "repr", "ti"]], "task_instance_key": [["task_instance_key", "ti", "key"], ["self", "fail", "task_instance_key", "None"], ["celery_async_result", "self", "tasks", "pop", "task_instance_key", "None"], ["self", "log", "error", "task_instance_key", "ex"]]}, "name": "cleanup_stuck_queued_tasks", "params": {"self": "", "tis": "builtins.list[airflow.models.taskinstance.TaskInstance]"}, "params_descr": {"self": "", "tis": "List of Task Instances to clean up"}, "params_occur": {"self": [["self", "fail", "task_instance_key", "None"], ["celery_async_result", "self", "tasks", "pop", "task_instance_key", "None"], ["self", "log", "error", "task_instance_key", "ex"]], "tis": []}, "params_p": {"args": [], "kwargs": [], "self": [], "tis": [["T", 0.9999999907701093], ["bool", 2.9269942348257436e-09], ["List[dict]", 1.7188680653220874e-09], ["Awaitable[Any]", 1.2882879924793724e-09], ["faustypes.app.TaskArg", 7.317485587064359e-10]]}, "q_name": "CeleryExecutor.cleanup_stuck_queued_tasks", "ret_exprs": ["return readable_tis"], "ret_type": "builtins.list[builtins.str]", "ret_type_p": [["str", 0.19728061715832607], ["bool", 0.1333727649940198], ["dict", 0.0895297179114985], ["bytes", 0.08639701586808188]], "variables": {"celery_async_result": "", "readable_tis": "", "task_instance_key": ""}, "variables_p": {"celery_async_result": [["Dict[str, Any]", 0.18988975078607018], ["dict", 0.12575334284370143], ["\"OrderedDict[str, float]\"", 0.10655701406672868], ["List[str]", 0.09663773479712294], ["Dict[str, bool]", 0.0880686450767664], ["telegram.utils.AsyncResult", 0.08729053492034093]], "readable_tis": [["list", 0.7999999999999999], ["Dict[str, Any]", 0.09999999999999999], ["str", 0.09999999999999999]], "task_instance_key": [["str", 0.2793584128340899], ["dict", 0.2388008801842335], ["bytes", 0.10081035205216142]]}}], "name": "CeleryExecutor", "q_name": "CeleryExecutor", "variables": {"supports_ad_hoc_ti_run": "builtins.bool", "supports_sentry": "builtins.bool"}, "variables_p": {"supports_ad_hoc_ti_run": [["int", 0.9999999989659624], ["str", 8.733872743618552e-10], ["Dict[str, str]", 1.6065037170899338e-10]], "supports_sentry": [["str", 0.4], ["List[str]", 0.1], ["int", 0.1], ["raiden.utils.WithdrawAmount", 0.1], ["Dict[str, List[Any]]", 0.1], ["Tuple[str, str, str, str, str, str, str, str]", 0.1]]}}], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[62, 0], [70, 74]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "__getattr__", "params": {"name": ""}, "params_descr": {"name": ""}, "params_occur": {"name": [["AttributeError", "__name__", "name"]]}, "params_p": {"args": [], "kwargs": [], "name": [["str", 0.9154605791818489], ["Sequence[str]", 0.08453942081815131]]}, "q_name": "__getattr__", "ret_exprs": ["return app"], "ret_type": "", "ret_type_p": [["abilian.app.Application", 0.19703117695102565], ["celery.Celery", 0.11709620151330717]], "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "logging", "math", "operator", "time", "collections", "Counter", "concurrent", "futures", "ProcessPoolExecutor", "multiprocessing", "cpu_count", "typing", "TYPE_CHECKING", "Any", "Optional", "Sequence", "Tuple", "celery", "states", "celery_states", "airflow", "configuration", "conf", "airflow", "exceptions", "AirflowTaskTimeout", "airflow", "executors", "base_executor", "BaseExecutor", "airflow", "stats", "Stats", "airflow", "utils", "state", "State", "celery", "Task", "airflow", "executors", "base_executor", "CommandType", "TaskTuple", "airflow", "models", "taskinstance", "TaskInstance", "airflow", "models", "taskinstancekey", "TaskInstanceKey", "airflow", "executors", "celery_executor_utils", "app", "airflow", "executors", "celery_executor_utils", "BulkStateFetcher", "airflow", "executors", "celery_executor_utils", "execute_command", "airflow", "executors", "celery_executor_utils", "ExceptionWithTraceback", "airflow", "executors", "celery_executor_utils", "send_task_to_executor", "celery", "result", "AsyncResult", "airflow", "executors", "celery_executor_utils", "app"], "mod_var_ln": {"CELERY_SEND_ERR_MSG_HEADER": [[46, 0], [46, 26]], "TaskInstanceInCelery": [[58, 4], [58, 24]], "log": [[43, 0], [43, 3]]}, "mod_var_occur": {"CELERY_SEND_ERR_MSG_HEADER": [["self", "log", "error", "CELERY_SEND_ERR_MSG_HEADER", "result", "exception", "result", "traceback"]], "TaskInstanceInCelery": [], "log": [["self", "log", "debug", "self", "_sync_parallelism"], ["self", "log", "debug"], ["self", "log", "info", "self", "task_publish_retries", "key", "self", "task_publish_max_retries", "key"], ["self", "log", "error", "CELERY_SEND_ERR_MSG_HEADER", "result", "exception", "result", "traceback"], ["self", "log", "debug"], ["self", "log", "info", "len", "self", "tasks", "join", "map", "repr", "self", "tasks", "items"], ["self", "log", "debug", "len", "self", "tasks"], ["self", "log", "debug"], ["self", "log", "info", "key", "state"], ["self", "log", "exception"], ["self", "log", "info", "len", "adopted", "task_instance_str"], ["self", "log", "error", "task_instance_key", "ex"]]}, "no_types_annot": {"D": 25, "I": 0, "U": 37}, "session_id": "Qh8ci2tPnyZ_HHS9i1pedxnrRK_GE6NmxKIYIBRF_fo", "set": null, "tc": [false, null], "type_annot_cove": 0.4, "typed_seq": "", "untyped_seq": "", "variables": {"CELERY_SEND_ERR_MSG_HEADER": "", "TaskInstanceInCelery": "", "log": ""}, "variables_p": {"CELERY_SEND_ERR_MSG_HEADER": [["str", 0.7789379157196425], ["Tuple[str, str]", 0.11921894271445198], ["Dict[str, str]", 0.10184314156590546]], "TaskInstanceInCelery": [["str", 0.563625819384063], ["int", 0.14981515372179205], ["Type[betterbeauty.notifications.models.Notification]", 0.12682223582553714], ["bool", 0.08482921420771178], ["Tuple[int, float]", 0.07490757686089602]], "log": [["logging.Logger", 0.9999999999999999]]}}}