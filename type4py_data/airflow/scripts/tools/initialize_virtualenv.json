{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[35, 0], [38, 55]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "clean_up_airflow_home", "params": {"airflow_home": "pathlib.Path"}, "params_descr": {"airflow_home": ""}, "params_occur": {"airflow_home": [["airflow_home", "exists"], ["print", "airflow_home"], ["shutil", "rmtree", "airflow_home", "ignore_errors", "True"]]}, "params_p": {"airflow_home": [["str", 0.5015286293040747]], "args": [], "kwargs": []}, "q_name": "clean_up_airflow_home", "ret_exprs": [], "ret_type": "", "variables": {}, "variables_p": {}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[41, 0], [42, 105]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "check_if_in_virtualenv", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "check_if_in_virtualenv", "ret_exprs": ["return hasattr(sys, \"real_prefix\") or (hasattr(sys, \"base_prefix\") and sys.base_prefix != sys.prefix)"], "ret_type": "builtins.bool", "ret_type_p": [["Dict[str, str]", 0.3333333325362062], ["int", 1.4448687967066871e-09], ["Iterable[Iterable[T]]", 3.9207227556585236e-10], ["List[str]", 2.772201018176699e-10], ["str", 2.772201018176699e-10]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "check if the user provided any extra packages to install.", "long_descr": "defaults to package 'devel'.", "ret": null}, "fn_lc": [[45, 0], [55, 18]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "check_for_package_extras", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "check_for_package_extras", "ret_exprs": ["return sys.argv[1]", "return \"devel\""], "ret_type": "builtins.str", "ret_type_p": [["str", 0.5370892051134645], ["int", 0.27384196596730326]], "variables": {}, "variables_p": {}}, {"docstring": {"func": "install the requirements of the current python version.", "long_descr": "return 0 if success, anything else is an error.", "ret": null}, "fn_lc": [[58, 0], [98, 23]], "fn_var_ln": {"constraint": [[89, 4], [89, 14]], "e": [[97, 4], [97, 5]], "extras": [[64, 4], [64, 10]], "pip_install_command": [[93, 4], [93, 23]], "quoted_command": [[94, 4], [94, 18]], "version": [[88, 4], [88, 11]]}, "fn_var_occur": {"constraint": [["constraint", "version"], ["pip_install_command", "extras", "constraint"]], "e": [["e", "subprocess", "run", "pip_install_command"], ["e", "returncode"]], "extras": [["extras", "check_for_package_extras"], ["print", "extras"], ["pip_install_command", "extras", "constraint"]], "pip_install_command": [["pip_install_command", "extras", "constraint"], ["quoted_command", "join", "shlex", "quote", "parameter", "parameter", "pip_install_command"], ["e", "subprocess", "run", "pip_install_command"]], "quoted_command": [["quoted_command", "join", "shlex", "quote", "parameter", "parameter", "pip_install_command"], ["print", "quoted_command"]], "version": [["version", "get_python_version"], ["constraint", "version"]]}, "name": "pip_install_requirements", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "pip_install_requirements", "ret_exprs": ["return e.returncode"], "ret_type": "builtins.int", "ret_type_p": [["str", 0.3306288106554681], ["dict", 0.17556849508005018], ["bool", 0.14568620191821569], ["Optional[str]", 0.09279934415528474]], "variables": {"constraint": "", "e": "", "extras": "", "pip_install_command": "", "quoted_command": "", "version": ""}, "variables_p": {"constraint": [], "e": [["subprocess.CalledProcessError", 0.6627518627324864], ["Type[str]", 0.07484331255074067], ["Tuple[float, float]", 0.06748264552930648], ["pathlib.Path", 0.06560609291847527], ["int", 0.06495154153371954], ["Tuple[int, int]", 0.06436454473527158]], "extras": [["List[str]", 0.22958517301616488], ["str", 0.22944118377432682], ["Iterator[str]", 0.2185694736244368], ["list", 0.1550592475708642], ["List[pathlib.Path]", 0.09827945439037904], ["Dict[str, Any]", 0.06906546762382822]], "pip_install_command": [["int", 0.19898897961138773], ["List[str]", 0.19434617426086914], ["str", 0.10929081437881757], ["Tuple[Literal, Literal, Literal, Literal, Literal, Literal, Literal, Literal]", 0.09214247363946158], ["Type[str]", 0.08667129398057712]], "quoted_command": [["Set[str]", 0.4560452787371212], ["List[str]", 0.24649658485016032], ["str", 0.15543504871708388], ["int", 0.07106019443340399], ["range", 0.07096289326223063]], "version": [["str", 0.7000221436096173], ["Dict[str, str]", 0.09268144186243017], ["float", 0.09104124126329347]]}}, {"docstring": {"func": "return the version of python we are running.", "long_descr": null, "ret": null}, "fn_lc": [[101, 0], [107, 29]], "fn_var_ln": {"major": [[105, 4], [105, 9]], "minor": [[106, 4], [106, 9]]}, "fn_var_occur": {"major": [["major", "sys", "version_info"], ["major", "minor"]], "minor": [["minor", "sys", "version_info"], ["major", "minor"]]}, "name": "get_python_version", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "get_python_version", "ret_exprs": ["return f\"{major}.{minor}\""], "ret_type": "builtins.str", "ret_type_p": [["str", 0.7879289771062404], ["Optional[str]", 0.10636515426367822]], "variables": {"major": "", "minor": ""}, "variables_p": {"major": [["bool", 0.999999999957168], ["Tuple[int, int]", 2.2164589101147135e-11], ["str", 2.066736556999944e-11]], "minor": [["bool", 0.999999999957168], ["Tuple[int, int]", 2.2164589101147135e-11], ["str", 2.066736556999944e-11]]}}, {"docstring": {"func": "Setup local virtual environment.", "long_descr": null, "ret": null}, "fn_lc": [[110, 0], [183, 84]], "fn_var_ln": {"airflow_home_dir": [[114, 4], [114, 20]], "airflow_sources": [[115, 4], [115, 19]], "env": [[175, 4], [175, 7]], "os_type": [[153, 8], [153, 15]], "response": [[126, 4], [126, 12]], "return_code": [[144, 4], [144, 15]]}, "fn_var_occur": {"airflow_home_dir": [["airflow_home_dir", "Path", "os", "environ", "get", "Path", "home"], ["print", "airflow_home_dir"], ["print", "airflow_home_dir"], ["airflow_home_dir", "airflow_sources"], ["print", "airflow_home_dir"], ["clean_up_airflow_home", "airflow_home_dir"]], "airflow_sources": [["airflow_sources", "Path", "__file__", "resolve", "parents"], ["airflow_home_dir", "airflow_sources"], ["env", "airflow_sources"], ["env", "airflow_sources"], ["env", "airflow_sources"], ["env", "airflow_sources"]], "env": [["env", "os", "environ", "copy"], ["env", "airflow_sources"], ["env", "airflow_sources"], ["subprocess", "run", "env", "env"], ["env", "os", "environ", "copy"], ["env", "airflow_sources"], ["env", "airflow_sources"], ["subprocess", "run", "env", "env"]], "os_type": [["os_type", "sys", "platform"]], "response": [["response", "input"]], "return_code": [["return_code", "pip_install_requirements"]]}, "name": "main", "params": {}, "params_descr": {}, "params_occur": {}, "params_p": {"args": [], "kwargs": []}, "q_name": "main", "ret_exprs": [], "ret_type": "", "variables": {"airflow_home_dir": "", "airflow_sources": "", "env": "", "os_type": "", "response": "", "return_code": ""}, "variables_p": {"airflow_home_dir": [["str", 0.4213735326760393], ["Union[Literal, str]", 0.20551143659451232], ["pathlib.Path", 0.1756994693777844], ["Final", 0.10717235165392883], ["Optional[str]", 0.09024320969773517]], "airflow_sources": [["str", 0.7133626375118157], ["pathlib.Path", 0.19224005705346014], ["list", 0.09439730543472416]], "env": [["subprocess.CompletedProcess[bytes]", 0.4553127195145354], ["Dict[str, str]", 0.16103454853625698], ["str", 0.08412574395583253]], "os_type": [["Tuple[Type[int], Any]", 0.5], ["Tuple[Type[int]]", 0.1]], "response": [["str", 0.3333333333313284], ["dict", 0.2222222222208856], ["Dict[str, Union[dict, Any, Any]]", 0.2222222222208856], ["Dict[str, Union[Any, Any, Any]]", 0.2222222222208856], ["List[str]", 6.014744165478809e-12]], "return_code": [["int", 0.7086144769663166], ["List[int]", 0.20130741143429423], ["tuple", 0.09007811159938911]]}}], "imports": ["__future__", "annotations", "os", "shlex", "shutil", "subprocess", "sys", "pathlib", "Path"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 5, "I": 0, "U": 16}, "session_id": "WlWY0ArJSVi9Y1gUaVF6VKgHNbsqoqkTMmZD8bjzFEM", "set": null, "tc": [false, null], "type_annot_cove": 0.24, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}