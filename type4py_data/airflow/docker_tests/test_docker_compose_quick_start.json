{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[43, 0], [52, 26]], "fn_var_ln": {"response": [[44, 4], [44, 12]]}, "fn_var_occur": {"response": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"], ["response", "raise_for_status"], ["response", "json"]]}, "name": "api_request", "params": {"base_url": "builtins.str", "kwargs": "", "method": "builtins.str", "path": "builtins.str"}, "params_descr": {"base_url": "", "kwargs": "", "method": "", "path": ""}, "params_occur": {"base_url": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"]], "kwargs": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"]], "method": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"]], "path": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"]]}, "params_p": {"args": [], "base_url": [["str", 0.7203931636765204], ["Dict[str, Any]", 0.09961430644987646], ["bool", 0.09476934298691861]], "kwargs": [], "method": [["str", 0.7203931636765204], ["Dict[str, Any]", 0.09961430644987646], ["bool", 0.09476934298691861]], "path": [["str", 0.7203931636765204], ["Dict[str, Any]", 0.09961430644987646], ["bool", 0.09476934298691861]]}, "q_name": "api_request", "ret_exprs": ["return response.json()"], "ret_type": "builtins.dict", "ret_type_p": [["dict", 0.2856709540885113], ["Dict[str, Union[int, str]]", 0.24263105825566958], ["Optional[Dict[str, Any]]", 0.09319734343697934], ["Optional[Dict[str, str]]", 0.08917509223403931], ["Dict[str, Any]", 0.0858156289681465]], "variables": {"response": ""}, "variables_p": {"response": [["requests.models.Response", 0.3847369614989744], ["list", 0.14440553578860715], ["Dict[str, Any]", 0.08495152846807802], ["Dict[str, str]", 0.08315810210703657], ["requests.sessions.Session", 0.07529611244004021]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[55, 0], [97, 16]], "fn_var_ln": {"container_name": [[56, 4], [56, 18]], "container_state": [[65, 8], [65, 23]], "current_time": [[84, 12], [84, 24]], "health_status": [[71, 12], [71, 25]], "start_time": [[63, 4], [63, 14]], "waiting_done": [[94, 12], [94, 24]]}, "fn_var_occur": {"container_name": [["container_name", "subprocess", "check_output", "container_id", "decode", "strip"], ["print", "container_name", "container_id", "timeout"], ["print", "container_name", "container_state", "health_status", "int", "timeout", "current_time", "start_time"], ["print", "container_name", "container_state"]], "container_state": [["container_state", "subprocess", "check_output", "container_id", "decode", "strip"], ["print", "container_name", "container_state", "health_status", "int", "timeout", "current_time", "start_time"], ["print", "container_name", "container_state"]], "current_time": [["current_time", "monotonic"], ["print", "container_name", "container_state", "health_status", "int", "timeout", "current_time", "start_time"]], "health_status": [["health_status", "subprocess", "check_output", "container_id", "decode", "strip"], ["print", "container_name", "container_state", "health_status", "int", "timeout", "current_time", "start_time"], ["health_status", "health_status"]], "start_time": [["start_time", "monotonic"], ["print", "container_name", "container_state", "health_status", "int", "timeout", "current_time", "start_time"], ["timeout", "monotonic", "start_time", "timeout"]], "waiting_done": [["waiting_done", "False"], ["waiting_done", "True"], ["waiting_done", "True"]]}, "name": "wait_for_container", "params": {"container_id": "builtins.str", "timeout": "builtins.int"}, "params_descr": {"container_id": "", "timeout": ""}, "params_occur": {"container_id": [["container_name", "subprocess", "check_output", "container_id", "decode", "strip"], ["print", "container_name", "container_id", "timeout"], ["container_state", "subprocess", "check_output", "container_id", "decode", "strip"], ["health_status", "subprocess", "check_output", "container_id", "decode", "strip"]], "timeout": [["print", "container_name", "container_id", "timeout"], ["print", "container_name", "container_state", "health_status", "int", "timeout", "current_time", "start_time"], ["timeout", "monotonic", "start_time", "timeout"], ["Exception", "timeout"]]}, "params_p": {"args": [], "container_id": [["str", 0.5839410516574985], ["List[str]", 0.1177777051595699], ["bool", 0.10989659361711902], ["Optional[str]", 0.09577395430456453], ["Dict[str, str]", 0.0926106952612481]], "kwargs": [], "timeout": [["str", 0.8719373227192703], ["Dict[str, Any]", 0.1280626772807299]]}, "q_name": "wait_for_container", "ret_exprs": [], "ret_type": "", "variables": {"container_name": "", "container_state": "", "current_time": "", "health_status": "", "start_time": "", "waiting_done": ""}, "variables_p": {"container_name": [["str", 0.9100984024527337], ["List[str]", 0.08990159754726615]], "container_state": [["List[Dict[str, Any]]", 0.3970296573127315], ["Dict[str, Any]", 0.18569723778747455], ["Dict[str, Union[Any, Any, Any, Any]]", 0.11575719892186104], ["str", 0.09792147248671017], ["dict", 0.08661009156414595]], "current_time": [["dict", 0.13538570335228617], ["float", 0.110456833115092], ["datetime.time", 0.10925088990454741], ["str", 0.09249552691664124]], "health_status": [["str", 0.6852529401691919], ["List[str]", 0.17668613680025466], ["Dict[str, str]", 0.1380609230305534]], "start_time": [["int", 0.28123083281133415], ["Optional[int]", 0.11220613204063737], ["datetime.time", 0.09598410037475746], ["str", 0.09374361093711138]], "waiting_done": [["bool", 0.9023288332509897], ["int", 0.09767116674901039]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[100, 0], [110, 17]], "fn_var_ln": {"dag_state": [[106, 8], [106, 17]]}, "fn_var_occur": {"dag_state": [["dag_state", "api_request", "dag_id", "dag_run_id", "get"], ["print", "dag_state"]]}, "name": "wait_for_terminal_dag_state", "params": {"dag_id": "", "dag_run_id": ""}, "params_descr": {"dag_id": "", "dag_run_id": ""}, "params_occur": {"dag_id": [["print", "dag_id", "center"], ["dag_state", "api_request", "dag_id", "dag_run_id", "get"]], "dag_run_id": [["dag_state", "api_request", "dag_id", "dag_run_id", "get"]]}, "params_p": {"args": [], "dag_id": [["int", 0.49537855173158013], ["str", 0.1036776152496422], ["Optional[float]", 0.09872289305358606]], "dag_run_id": [["str", 0.5702887533203271], ["dict", 0.1187158552366358], ["Optional[str]", 0.11339973487573288], ["int", 0.09293497886285208]], "kwargs": []}, "q_name": "wait_for_terminal_dag_state", "ret_exprs": [], "ret_type": "", "variables": {"dag_state": ""}, "variables_p": {"dag_state": [["str", 0.5115159085484254], ["dict", 0.11604928072395707], ["Tuple[str, str]", 0.09315497234513431], ["Tuple[str, str, str]", 0.09315497234513431], ["List[int]", 0.08709245362573723]]}}, {"docstring": {"func": "Simple test which reproduce setup docker-compose environment and trigger example dag.", "long_descr": null, "ret": null}, "fn_lc": [[113, 0], [201, 74]], "fn_var_ln": {"compose_command": [[137, 8], [137, 23]], "compose_file_path": [[119, 4], [119, 21]], "container_names": [[184, 12], [184, 27]], "current_time": [[158, 12], [158, 24]], "dag_state": [[164, 12], [164, 21]], "dot_env_file": [[128, 4], [128, 16]], "ps_output": [[183, 12], [183, 21]], "result": [[187, 16], [187, 22]], "start_time": [[154, 8], [154, 18]], "success": [[138, 8], [138, 15]], "tmp_dir": [[115, 4], [115, 11]], "wait_for_containers_timeout": [[152, 8], [152, 35]]}, "fn_var_occur": {"compose_command": [["success", "run_command", "compose_command", "check", "False"], ["success", "run_command", "compose_command", "check", "False"], ["compose_command", "extend"], ["run_command", "compose_command"], ["run_command", "compose_command"], ["run_command", "compose_command"], ["subprocess", "check_output", "compose_command", "decode", "strip", "splitlines"], ["run_command", "compose_command"], ["run_command", "compose_command"], ["ps_output", "run_command", "compose_command", "return_output", "True"], ["run_command", "compose_command"], ["print", "join", "shlex", "quote", "arg", "arg", "compose_command"]], "compose_file_path": [["compose_file_path", "SOURCE_ROOT"], ["copyfile", "compose_file_path", "tmp_dir"]], "container_names": [["container_names", "container", "container", "json", "loads", "ps_output"]], "current_time": [["current_time", "monotonic"], ["wait_for_container", "container_id", "wait_for_containers_timeout", "int", "current_time", "start_time"]], "dag_state": [["dag_state", "api_request", "DAG_ID", "DAG_RUN_ID", "get"]], "dot_env_file": [["dot_env_file", "tmp_dir"], ["dot_env_file", "write_text", "os", "getuid"], ["print", "dot_env_file", "read_text"]], "ps_output": [["ps_output", "run_command", "compose_command", "return_output", "True"], ["container_names", "container", "container", "json", "loads", "ps_output"]], "result": [["result", "run_command", "container", "return_output", "True"], ["pprint", "json", "loads", "result"]], "start_time": [["start_time", "monotonic"], ["wait_for_container", "container_id", "wait_for_containers_timeout", "int", "current_time", "start_time"]], "success": [["success", "run_command", "compose_command", "check", "False"], ["success", "run_command", "compose_command", "check", "False"]], "tmp_dir": [["tmp_dir", "tmp_path_factory", "mktemp"], ["monkeypatch", "chdir", "tmp_dir"], ["copyfile", "compose_file_path", "tmp_dir"], ["tmp_dir", "subdir", "mkdir"], ["dot_env_file", "tmp_dir"]], "wait_for_containers_timeout": [["wait_for_containers_timeout", "int", "os", "getenv"], ["wait_for_container", "container_id", "wait_for_containers_timeout", "int", "current_time", "start_time"]]}, "name": "test_trigger_dag_and_wait_for_result", "params": {"monkeypatch": "", "tmp_path_factory": ""}, "params_descr": {"monkeypatch": "", "tmp_path_factory": ""}, "params_occur": {"monkeypatch": [["monkeypatch", "chdir", "tmp_dir"], ["monkeypatch", "setenv", "docker_image"]], "tmp_path_factory": [["tmp_dir", "tmp_path_factory", "mktemp"]]}, "params_p": {"args": [], "kwargs": [], "monkeypatch": [], "tmp_path_factory": []}, "q_name": "test_trigger_dag_and_wait_for_result", "ret_exprs": [], "ret_type": "", "variables": {"compose_command": "", "compose_file_path": "", "container_names": "", "current_time": "", "dag_state": "", "dot_env_file": "", "ps_output": "", "result": "", "start_time": "", "success": "", "tmp_dir": "", "wait_for_containers_timeout": ""}, "variables_p": {"compose_command": [["str", 0.5886541735859757]], "compose_file_path": [["str", 0.4254675614300615]], "container_names": [["str", 0.8907379377172834], ["Optional[str]", 0.10926206228271672]], "current_time": [["int", 0.47878868233352895], ["List[str]", 0.07712726570005159]], "dag_state": [["str", 0.7061120245726858], ["List[str]", 0.09983545473119876], ["Dict[str, Union[Any, Any]]", 0.09704367700127474], ["Type[Optional[Any]]", 0.09700884369484075]], "dot_env_file": [["str", 0.6265707242698334], ["Optional[str]", 0.0917432699138006]], "ps_output": [["str", 0.664411046162188], ["Dict[str, Union[Any, Any, Any, Any, Any, Any, Any]]", 0.1228721138159427], ["Optional[str]", 0.10235374879281257]], "result": [["dict", 0.21615733760107625], ["List[str]", 0.11958690456048737], ["list", 0.10510404793854017], ["Generator[Any, None, None]", 0.09895544193851893], ["Dict[str, str]", 0.09188291839090358]], "start_time": [["int", 0.5233781028666374], ["str", 0.173338386986836], ["List[str]", 0.08300624649243188]], "success": [["str", 0.7855546008093195], ["Optional[str]", 0.13762836401227949]], "tmp_dir": [["str", 0.561438155570825]], "wait_for_containers_timeout": [["str", 0.6644824710162784], ["int", 0.24758458264037114]]}}], "imports": ["__future__", "annotations", "json", "os", "shlex", "subprocess", "sys", "pprint", "pprint", "shutil", "copyfile", "time", "monotonic", "sleep", "requests", "docker_tests", "command_utils", "run_command", "docker_tests", "constants", "SOURCE_ROOT", "docker_tests", "docker_tests_utils", "docker_image"], "mod_var_ln": {"AIRFLOW_WWW_USER_PASSWORD": [[38, 0], [38, 25]], "AIRFLOW_WWW_USER_USERNAME": [[37, 0], [37, 25]], "DAG_ID": [[39, 0], [39, 6]], "DAG_RUN_ID": [[40, 0], [40, 10]]}, "mod_var_occur": {"AIRFLOW_WWW_USER_PASSWORD": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"]], "AIRFLOW_WWW_USER_USERNAME": [["response", "requests", "request", "method", "method", "url", "base_url", "path", "auth", "AIRFLOW_WWW_USER_USERNAME", "AIRFLOW_WWW_USER_PASSWORD", "headers", "kwargs"]], "DAG_ID": [["pprint", "api_request", "DAG_ID"], ["api_request", "path", "DAG_ID", "json", "False"], ["api_request", "path", "DAG_ID", "json", "DAG_RUN_ID"], ["wait_for_terminal_dag_state", "dag_id", "DAG_ID", "dag_run_id", "DAG_RUN_ID"], ["dag_state", "api_request", "DAG_ID", "DAG_RUN_ID", "get"], ["print", "DAG_ID"], ["pprint", "api_request", "DAG_ID"], ["print", "DAG_ID", "DAG_RUN_ID"], ["pprint", "api_request", "DAG_ID", "DAG_RUN_ID"]], "DAG_RUN_ID": [["api_request", "path", "DAG_ID", "json", "DAG_RUN_ID"], ["wait_for_terminal_dag_state", "dag_id", "DAG_ID", "dag_run_id", "DAG_RUN_ID"], ["dag_state", "api_request", "DAG_ID", "DAG_RUN_ID", "get"], ["print", "DAG_ID", "DAG_RUN_ID"], ["pprint", "api_request", "DAG_ID", "DAG_RUN_ID"]]}, "no_types_annot": {"D": 6, "I": 0, "U": 32}, "session_id": "sA3thWvpHFB3DZa6ZYvNfLieopYzobkeaQIvmmL2EWQ", "set": null, "tc": [false, null], "type_annot_cove": 0.16, "typed_seq": "", "untyped_seq": "", "variables": {"AIRFLOW_WWW_USER_PASSWORD": "", "AIRFLOW_WWW_USER_USERNAME": "", "DAG_ID": "", "DAG_RUN_ID": ""}, "variables_p": {"AIRFLOW_WWW_USER_PASSWORD": [["str", 0.8638172587360685], ["bytes", 0.13618274126393154]], "AIRFLOW_WWW_USER_USERNAME": [["str", 1.0]], "DAG_ID": [["str", 0.5284834567718295], ["int", 0.22138826966039926], ["Pattern[str]", 0.081778405843878]], "DAG_RUN_ID": [["str", 0.42101404613381255], ["bool", 0.11254658774644642], ["int", 0.0884789315565365]]}}}