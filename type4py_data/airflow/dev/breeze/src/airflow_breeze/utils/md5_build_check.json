{"error": null, "response": {"classes": [], "funcs": [{"docstring": {"func": "Check if the file hash is present in cache and it's content has been modified. Optionally updates", "long_descr": "the hash.", "ret": "True if the hash file was missing or hash has changed."}, "fn_lc": [[30, 0], [50, 16]], "fn_var_ln": {"old_md5_checksum_content": [[41, 8], [41, 32]]}, "fn_var_occur": {"old_md5_checksum_content": [["old_md5_checksum_content", "Path", "cache_path", "read_text"], ["old_md5_checksum_content", "strip", "file_hash", "strip"]]}, "name": "check_md5checksum_in_cache_modified", "params": {"cache_path": "pathlib.Path", "file_hash": "builtins.str", "update": "builtins.bool"}, "params_descr": {"cache_path": "path where the hash is stored", "file_hash": "hash of the current version of the file", "update": "whether to update hash if it is found different"}, "params_occur": {"cache_path": [["cache_path", "exists"], ["old_md5_checksum_content", "Path", "cache_path", "read_text"], ["save_md5_file", "cache_path", "file_hash"], ["save_md5_file", "cache_path", "file_hash"]], "file_hash": [["old_md5_checksum_content", "strip", "file_hash", "strip"], ["save_md5_file", "cache_path", "file_hash"], ["save_md5_file", "cache_path", "file_hash"]], "update": []}, "params_p": {"args": [], "cache_path": [["pathlib.Path", 0.6078354904194285], ["str", 0.10732905717100374], ["Union[str, pathlib.Path]", 0.09190714122311078]], "file_hash": [["pathlib.Path", 0.7083271882180951], ["str", 0.19696972711846233]], "kwargs": [], "update": [["bool", 0.5489757150110197], ["str", 0.27061457099338815], ["List[str]", 0.1804097139955921]]}, "q_name": "check_md5checksum_in_cache_modified", "ret_exprs": ["return True", "return True", "return False"], "ret_type": "builtins.bool", "ret_type_p": [["bool", 1.0]], "variables": {"old_md5_checksum_content": ""}, "variables_p": {"old_md5_checksum_content": [["str", 0.5046202959831352], ["List[Dict[str, Any]]", 0.24443194431686038], ["bool", 0.08407615810209584], ["pathlib.Path", 0.08215948947667245]]}}, {"docstring": {"func": "Generates md5 hash for the file.", "long_descr": null, "ret": null}, "fn_lc": [[53, 0], [59, 31]], "fn_var_ln": {"hash_md5": [[55, 4], [55, 12]]}, "fn_var_occur": {"hash_md5": [["hash_md5", "hashlib", "md5"], ["hash_md5", "update", "file_chunk"], ["hash_md5", "hexdigest"]]}, "name": "generate_md5", "params": {"file_size": "builtins.int", "filename": ""}, "params_descr": {"file_size": "", "filename": ""}, "params_occur": {"file_size": [["iter", "f", "read", "file_size"]], "filename": [["open", "filename", "f"]]}, "params_p": {"args": [], "file_size": [["int", 0.2747962788860196], ["bytes", 0.17587631181751812], ["bool", 0.16536179842752075], ["str", 0.14196864556947797], ["Dict[str, Any]", 0.08622184870832449]], "filename": [["str", 0.5808635480376677], ["int", 0.28564334168242045], ["Union[str, bytes]", 0.133493110279912]], "kwargs": []}, "q_name": "generate_md5", "ret_exprs": ["return hash_md5.hexdigest()"], "ret_type": "", "ret_type_p": [["int", 0.31160513941534707], ["Tuple[int, int]", 0.1003111511854444], ["bool", 0.09889450560378132], ["List[int]", 0.0966424921645779], ["Dict[str, int]", 0.09611604683280164]], "variables": {"hash_md5": ""}, "variables_p": {"hash_md5": [["hashlib._Hash", 0.4954822114672962]]}}, {"docstring": {"func": "Calculates checksums for all interesting files and stores the hashes in the md5sum_cache_dir.", "long_descr": "Optionally modifies the hashes.", "ret": "Tuple of two lists: modified and not-modified files"}, "fn_lc": [[62, 0], [87, 45]], "fn_var_ln": {"actual_file_name": [[79, 8], [79, 24]], "cache_file_name": [[80, 8], [80, 23]], "file_content": [[81, 8], [81, 20]], "file_to_get_md5": [[76, 8], [76, 23]], "is_modified": [[82, 8], [82, 19]], "md5_checksum": [[77, 8], [77, 20]], "modified_files": [[74, 4], [74, 18]], "not_modified_files": [[73, 4], [73, 22]], "sub_dir_name": [[78, 8], [78, 20]]}, "fn_var_occur": {"actual_file_name": [["actual_file_name", "file_to_get_md5", "parts"], ["cache_file_name", "Path", "md5sum_cache_dir", "sub_dir_name", "actual_file_name"]], "cache_file_name": [["cache_file_name", "Path", "md5sum_cache_dir", "sub_dir_name", "actual_file_name"], ["is_modified", "check_md5checksum_in_cache_modified", "file_content", "cache_file_name", "update", "update"]], "file_content": [["file_content", "md5_checksum", "str", "file_to_get_md5"], ["is_modified", "check_md5checksum_in_cache_modified", "file_content", "cache_file_name", "update", "update"]], "file_to_get_md5": [["file_to_get_md5", "AIRFLOW_SOURCES_ROOT", "calculate_md5_file"], ["md5_checksum", "generate_md5", "file_to_get_md5"], ["sub_dir_name", "file_to_get_md5", "parts"], ["actual_file_name", "file_to_get_md5", "parts"], ["file_content", "md5_checksum", "str", "file_to_get_md5"]], "is_modified": [["is_modified", "check_md5checksum_in_cache_modified", "file_content", "cache_file_name", "update", "update"]], "md5_checksum": [["md5_checksum", "generate_md5", "file_to_get_md5"], ["file_content", "md5_checksum", "str", "file_to_get_md5"]], "modified_files": [["modified_files", "append", "calculate_md5_file"], ["modified_files", "not_modified_files"]], "not_modified_files": [["not_modified_files", "append", "calculate_md5_file"], ["modified_files", "not_modified_files"]], "sub_dir_name": [["sub_dir_name", "file_to_get_md5", "parts"], ["cache_file_name", "Path", "md5sum_cache_dir", "sub_dir_name", "actual_file_name"]]}, "name": "calculate_md5_checksum_for_files", "params": {"md5sum_cache_dir": "pathlib.Path", "update": "builtins.bool"}, "params_descr": {"md5sum_cache_dir": "directory where to store cached information", "update": "whether to update the hashes"}, "params_occur": {"md5sum_cache_dir": [["cache_file_name", "Path", "md5sum_cache_dir", "sub_dir_name", "actual_file_name"]], "update": [["is_modified", "check_md5checksum_in_cache_modified", "file_content", "cache_file_name", "update", "update"]]}, "params_p": {"args": [], "kwargs": [], "md5sum_cache_dir": [["str", 0.2833329521416732], ["Tuple[int, int]", 0.283158564730689], ["pathlib.Path", 0.12265839271263033]], "update": [["str", 0.6945226001344987], ["IO", 0.0982487839132207], ["Dict[str, str]", 0.0982487839132207]]}, "q_name": "calculate_md5_checksum_for_files", "ret_exprs": ["return modified_files, not_modified_files"], "ret_type": "builtins.tuple[builtins.list[builtins.str], builtins.list[builtins.str]]", "ret_type_p": [["str", 0.24816094841659264], ["_compapathlib.Path", 0.1963519381411481], ["Tuple[str, str]", 0.19315822649373957], ["List[str]", 0.09251650872488763], ["Optional[pathlib.Path]", 0.09048032955943523], ["Tuple[str]", 0.09019305100648806], ["pathlib.Path", 0.08913899765770868]], "variables": {"actual_file_name": "", "cache_file_name": "", "file_content": "", "file_to_get_md5": "", "is_modified": "", "md5_checksum": "", "modified_files": "", "not_modified_files": "", "sub_dir_name": ""}, "variables_p": {"actual_file_name": [["str", 0.8807684710003857], ["Set[str]", 0.11923152899961442]], "cache_file_name": [["str", 0.8058971330143063], ["pathlib.Path", 0.09957169471409501], ["List[str]", 0.09453117227159863]], "file_content": [["str", 0.7298938025777378], ["List[str]", 0.18229729631680022], ["Tuple[Literal]", 0.08780890110546193]], "file_to_get_md5": [["str", 0.9096028781716264]], "is_modified": [["str", 0.823807102382468], ["Sequence[Dict[str, str]]", 0.08856818897259966]], "md5_checksum": [["str", 0.500987599174799], ["List[str]", 0.2376635876514779], ["Optional[str]", 0.08917489668532934], ["Dict[str, str]", 0.07979277204565599]], "modified_files": [["list", 0.9999999999999997]], "not_modified_files": [["list", 0.9175445206262683], ["List[str]", 0.08245547937373163]], "sub_dir_name": [["str", 0.906864831444705], ["Set[str]", 0.09313516855529502]]}}, {"docstring": {"func": "Checks if build is needed based on whether important files were modified.", "long_descr": null, "ret": "True if build is needed."}, "fn_lc": [[90, 0], [114, 23]], "fn_var_ln": {"build_needed": [[108, 8], [108, 20]], "modified_files": [[99, 4], [99, 18]], "not_modified_files": [[99, 20], [99, 38]]}, "fn_var_occur": {"build_needed": [["build_needed", "False"], ["build_needed", "True"]], "modified_files": [["modified_files", "not_modified_files", "calculate_md5_checksum_for_files", "md5sum_cache_dir", "update", "False"], ["len", "modified_files"]], "not_modified_files": [["modified_files", "not_modified_files", "calculate_md5_checksum_for_files", "md5sum_cache_dir", "update", "False"]]}, "name": "md5sum_check_if_build_is_needed", "params": {"md5sum_cache_dir": "pathlib.Path"}, "params_descr": {"md5sum_cache_dir": "directory where cached md5 sums are stored"}, "params_occur": {"md5sum_cache_dir": [["modified_files", "not_modified_files", "calculate_md5_checksum_for_files", "md5sum_cache_dir", "update", "False"]]}, "params_p": {"args": [], "kwargs": [], "md5sum_cache_dir": [["str", 0.5955967619159078], ["pathlib.Path", 0.3047585220413688]]}, "q_name": "md5sum_check_if_build_is_needed", "ret_exprs": ["return build_needed"], "ret_type": "builtins.bool", "ret_type_p": [["Dict[str, Any]", 0.22866520061034457], ["str", 0.22600811580243288], ["List[Dict]", 0.08978409111606947]], "variables": {"build_needed": "", "modified_files": "", "not_modified_files": ""}, "variables_p": {"build_needed": [["str", 0.4672505546231436], ["bool", 0.18304558841774854], ["int", 0.09698294168428054]], "modified_files": [["str", 0.7714999691627955], ["pathlib.Path", 0.22850003083720466]], "not_modified_files": [["str", 0.800841049988871], ["pathlib.Path", 0.19915895001112893]]}}, {"docstring": {"func": null, "long_descr": null, "ret": null}, "fn_lc": [[117, 0], [119, 39]], "fn_var_ln": {}, "fn_var_occur": {}, "name": "save_md5_file", "params": {"cache_path": "pathlib.Path", "file_content": "builtins.str"}, "params_descr": {"cache_path": "", "file_content": ""}, "params_occur": {"cache_path": [["cache_path", "parent", "mkdir", "parents", "True", "exist_ok", "True"], ["cache_path", "write_text", "file_content"]], "file_content": [["cache_path", "write_text", "file_content"]]}, "params_p": {"args": [], "cache_path": [["pathlib.Path", 0.3439614451306957], ["bool", 0.1764605216504407], ["Union[str, pathlib.Path]", 0.1764605216504407]], "file_content": [["str", 0.809433966617914], ["pathlib.Path", 0.19056603338208614]], "kwargs": []}, "q_name": "save_md5_file", "ret_exprs": [], "ret_type": "None", "variables": {}, "variables_p": {}}], "imports": ["__future__", "annotations", "hashlib", "pathlib", "Path", "airflow_breeze", "global_constants", "FILES_FOR_REBUILD_CHECK", "airflow_breeze", "utils", "console", "get_console", "airflow_breeze", "utils", "path_utils", "AIRFLOW_SOURCES_ROOT"], "mod_var_ln": {}, "mod_var_occur": {}, "no_types_annot": {"D": 13, "I": 0, "U": 16}, "session_id": "M09fNUq39rsUE7H6rHtSMgqyBOuhH8bCfJNJ4KWrLQg", "set": null, "tc": [false, null], "type_annot_cove": 0.45, "typed_seq": "", "untyped_seq": "", "variables": {}, "variables_p": {}}}