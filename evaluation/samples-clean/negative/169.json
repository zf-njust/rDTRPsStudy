{
    "code": "def run(self):\n        parser = ArgumentParser(\n                description='Generate icons for various stores')\n        parser.add_argument('--dir', type=str, default=None,\n                help=('Output directory to generate all the icons,'\n                      'defaults to the directory of the source icon'))\n        parser.add_argument('--force', type=bool, default=False,\n                help=('Generate all icons even if the source is not perfect.'))\n        parser.add_argument('icon', type=str,\n                help='Base icon (must be 1024x1024 or 512x512)')\n\n        args = parser.parse_args()\n        if not exists(args.icon):\n            print('Error: No such icon file')\n            sys.exit(1)\n\n        # ensure the destination directory will be set\n        if args.dir is None:\n            args.dir = dirname(args.icon)\n\n        # read the source image, and do some quality checks\n        base_fn = basename(args.icon).rsplit('.', 1)[0]\n        source = Image.open(args.icon)\n        self.ensure_quality(source, args.force)\n\n        for directory_name, sizeinfo in self.iterate():\n            description, pattern_fn, size = sizeinfo\n            print('Generate {}: {}x{}'.format(description, size, size))\n            dest_dir = realpath(join(args.dir, directory_name))\n            if not exists(dest_dir):\n                makedirs(dest_dir)\n            icon_fn = join(dest_dir, pattern_fn.format('Icon'))\n            self.convert_to(source, icon_fn, size)",
    "smell": []
}