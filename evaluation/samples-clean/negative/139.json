{
    "code": "def copyfile(src, dest, symlink=True):\n    if not os.path.exists(src):\n        # Some bad symlink in the src\n        logger.warn('Cannot find file %s (bad symlink)', src)\n        return\n    if os.path.exists(dest):\n        logger.debug('File %s already exists', dest)\n        return\n    if not os.path.exists(os.path.dirname(dest)):\n        logger.info('Creating parent directories for %s' % os.path.dirname(dest))\n        os.makedirs(os.path.dirname(dest))\n    if not os.path.islink(src):\n        srcpath = os.path.abspath(src)\n    else:\n        srcpath = os.readlink(src)\n    if symlink and hasattr(os, 'symlink') and not is_win:\n        logger.info('Symlinking %s', dest)\n        try:\n            os.symlink(srcpath, dest)\n        except (OSError, NotImplementedError):\n            logger.info('Symlinking failed, copying to %s', dest)\n            copyfileordir(src, dest)\n    else:\n        logger.info('Copying to %s', dest)\n        copyfileordir(src, dest)",
    "smell": []
}