{
    "code": "def _get_activate_script(cmd, venv):\n    \"\"\"Returns the string to activate a virtualenv.\n\n    This is POSIX-only at the moment since the compat (pexpect-based) shell\n    does not work elsewhere anyway.\n    \"\"\"\n    # Suffix and source command for other shells.\n    # Support for fish shell.\n    if \"fish\" in cmd:\n        suffix = \".fish\"\n        command = \"source\"\n    # Support for csh shell.\n    elif \"csh\" in cmd:\n        suffix = \".csh\"\n        command = \"source\"\n    elif \"xonsh\" in cmd:\n        suffix = \".xsh\"\n        command = \"source\"\n    elif \"nu\" in cmd:\n        suffix = \".nu\"\n        command = \"overlay use\"\n    else:\n        suffix = \"\"\n        command = \".\"\n    # Escape any special characters located within the virtualenv path to allow\n    # for proper activation.\n    venv_location = re.sub(r\"([ &$()\\[\\]])\", r\"\\\\\\1\", str(venv))\n    # The leading space can make history cleaner in some shells.\n    return f\" {command} {venv_location}/bin/activate{suffix}\"",
    "smell": []
}